(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{1598:function(e,t){var a,n,b,o,r,l,c,g,d;window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var a=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,e={timestamp:"J5S9",version:"4.12.1 (Standard)",revision:"64749bb245",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:a},status:"unloaded",basePath:function(){var b=window.CKEDITOR_BASEPATH||"";if(!b)for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++){var g=e[t].src.match(a);if(g){b=g[1];break}}if(-1==b.indexOf(":/")&&"//"!=b.slice(0,2)&&(b=0===b.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+b:location.href.match(/^[^\?]*\/(?:)/)[0]+b),!b)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return b}(),getUrl:function(a){return-1==a.indexOf(":/")&&0!==a.indexOf("/")&&(a=this.basePath+a),this.timestamp&&"/"!=a.charAt(a.length-1)&&!/[&?]t=/.test(a)&&(a+=(0<=a.indexOf("?")?"&":"?")+"t="+this.timestamp),a},domReady:function(){function a(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",a,!1),b()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",a),b())}catch(e){}}function b(){for(var a;a=e.shift();)a()}var e=[];return function(g){if(e.push(g),"complete"===document.readyState&&setTimeout(a,1),1==e.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",a),window.attachEvent("onload",a),g=!1;try{g=!window.frameElement}catch(e){}document.documentElement.doScroll&&g&&function e(){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(e,1)}a()}()}}}()},b=window.CKEDITOR_GETURL;if(b){var t=e.getUrl;e.getUrl=function(a){return b.call(e,a)||t.call(e,a)}}return e}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(a){var b,e=CKEDITOR.event.prototype;for(b in e)null==a[b]&&(a[b]=e[b])},CKEDITOR.event.prototype=function(){function a(a){var t=e(this);return t[a]||(t[a]=new b(a))}var e=function(a){return(a=a.getPrivate&&a.getPrivate()||a._||(a._={})).events||(a.events={})},b=function(a){this.name=a,this.listeners=[]};return b.prototype={getListenerIndex:function(a){for(var b=0,e=this.listeners;b<e.length;b++)if(e[b].fn==a)return b;return-1}},{define:function(b,e){var t=a.call(this,b);CKEDITOR.tools.extend(t,e,!0)},on:function(b,e,t,n,g){function o(a,o,l,g){return a={name:b,sender:this,editor:a,data:o,listenerData:n,stop:l,cancel:g,removeListener:r},!1!==e.call(t,a)&&a.data}function r(){c.removeListener(b,e)}var l=a.call(this,b);if(0>l.getListenerIndex(e)){l=l.listeners,t||(t=this),isNaN(g)&&(g=10);var c=this;o.fn=e,o.priority=g;for(var q=l.length-1;0<=q;q--)if(l[q].priority<=g)return l.splice(q+1,0,o),{removeListener:r};l.unshift(o)}return{removeListener:r}},once:function(){var a=Array.prototype.slice.call(arguments),b=a[1];return a[1]=function(a){return a.removeListener(),b.apply(this,arguments)},this.on.apply(this,a)},capture:function(){CKEDITOR.event.useCapture=1;var a=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,a},fire:function(){var a=0,b=function(){a=1},t=0,n=function(){t=1};return function(g,o,r){var l=e(this)[g];g=a;var c=t;if(a=t=0,l&&(q=l.listeners).length)for(var d,q=q.slice(0),u=0;u<q.length;u++){if(l.errorProof)try{d=q[u].call(this,r,o,b,n)}catch(e){}else d=q[u].call(this,r,o,b,n);if(!1===d?t=1:void 0!==d&&(o=d),a||t)break}return o=!t&&(void 0===o||o),a=g,t=c,o}}(),fireOnce:function(a,b,t){return b=this.fire(a,b,t),delete e(this)[a],b},removeListener:function(a,b){var t=e(this)[a];if(t){var n=t.getListenerIndex(b);0<=n&&t.listeners.splice(n,1)}},removeAllListeners:function(){var b,a=e(this);for(b in a)delete a[b]},hasListeners:function(a){return(a=e(this)[a])&&0<a.listeners.length}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(a,e){return a in{instanceReady:1,loaded:1}&&(this[a]=!0),CKEDITOR.event.prototype.fire.call(this,a,e,this)},CKEDITOR.editor.prototype.fireOnce=function(a,e){return a in{instanceReady:1,loaded:1}&&(this[a]=!0),CKEDITOR.event.prototype.fireOnce.call(this,a,e,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var a=navigator.userAgent.toLowerCase(),e=a.match(/edge[ \/](\d+.?\d*)/),b=-1<a.indexOf("trident/");(b={ie:b=!(!e&&!b),edge:!!e,webkit:!b&&-1<a.indexOf(" applewebkit/"),air:-1<a.indexOf(" adobeair/"),mac:-1<a.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<a.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(a),isCustomDomain:function(){if(!this.ie)return!1;var a=document.domain,b=window.location.hostname;return a!=b&&a!="["+b+"]"},secure:"https:"==location.protocol}).gecko="Gecko"==navigator.product&&!b.webkit&&!b.ie,b.webkit&&(-1<a.indexOf("chrome")?b.chrome=!0:b.safari=!0);var t=0;return b.ie&&(t=e?parseFloat(e[1]):b.quirks||!document.documentMode?parseFloat(a.match(/msie (\d+)/)[1]):document.documentMode,b.ie9Compat=9==t,b.ie8Compat=8==t,b.ie7Compat=7==t,b.ie6Compat=7>t||b.quirks),b.gecko&&(e=a.match(/rv:([\d\.]+)/))&&(t=1e4*(e=e[1].split("."))[0]+100*(e[1]||0)+1*(e[2]||0)),b.air&&(t=parseFloat(a.match(/ adobeair\/(\d+)/)[1])),b.webkit&&(t=parseFloat(a.match(/ applewebkit\/(\d+)/)[1])),b.version=t,b.isCompatible=!(b.ie&&7>t||b.gecko&&4e4>t||b.webkit&&534>t),b.hidpi=2<=window.devicePixelRatio,b.needsBrFiller=b.gecko||b.webkit||b.ie&&10<t,b.needsNbspFiller=b.ie&&11>t,b.cssClass="cke_browser_"+(b.ie?"ie":b.gecko?"gecko":b.webkit?"webkit":"unknown"),b.quirks&&(b.cssClass+=" cke_browser_quirks"),b.ie&&(b.cssClass+=" cke_browser_ie"+(b.quirks?"6 cke_browser_iequirks":b.version)),b.air&&(b.cssClass+=" cke_browser_air"),b.iOS&&(b.cssClass+=" cke_browser_ios"),b.hidpi&&(b.cssClass+=" cke_hidpi"),b}()),"unloaded"==CKEDITOR.status&&(CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var a=document.createElement("script");a.type="text/javascript",a.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(a)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(a){(this._.pending||(this._.pending=[])).push(a)},CKEDITOR.domReady((function(){var a=CKEDITOR.loadFullCore,e=CKEDITOR.loadFullCoreTimeout;a&&(CKEDITOR.status="basic_ready",a&&a._load?a():e&&setTimeout((function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()}),1e3*e))})),CKEDITOR.status="basic_loaded"),CKEDITOR.VERBOSITY_WARN=1,CKEDITOR.VERBOSITY_ERROR=2,CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR,CKEDITOR.warn=function(a,e){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:a,additionalData:e})},CKEDITOR.error=function(a,e){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:a,additionalData:e})},CKEDITOR.on("log",(function(a){if(window.console&&window.console.log){var e=console[a.data.type]?a.data.type:"log",b=a.data.errorCode;(a=a.data.additionalData)?console[e]("[CKEDITOR] Error code: "+b+".",a):console[e]("[CKEDITOR] Error code: "+b+"."),console[e]("[CKEDITOR] For more information about this error go to https://ckeditor.com/docs/ckeditor4/latest/guide/dev_errors.html#"+b)}}),null,null,999),CKEDITOR.dom={},function(){function a(a,e,b){this._minInterval=a,this._context=b,this._lastOutput=this._scheduledTimer=0,this._output=CKEDITOR.tools.bind(e,b||{});var g=this;this.input=function(){function a(){g._lastOutput=(new Date).getTime(),g._scheduledTimer=0,g._call()}if(!g._scheduledTimer||!1!==g._reschedule()){var e=(new Date).getTime()-g._lastOutput;e<g._minInterval?g._scheduledTimer=setTimeout(a,g._minInterval-e):a()}}}function e(e,g,b){a.call(this,e,g,b),this._args=[];var t=this;this.input=CKEDITOR.tools.override(this.input,(function(a){return function(){t._args=Array.prototype.slice.call(arguments),a.call(this)}}))}var b=[],t=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",n=/&/g,o=/>/g,r=/</g,g=/"/g,l=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,c={lt:"<",gt:">",amp:"&",quot:'"',nbsp:" ",shy:"­"},d=function(a,e){return"#"==e[0]?String.fromCharCode(parseInt(e.slice(1),10)):c[e]};CKEDITOR.on("reset",(function(){b=[]})),CKEDITOR.tools={arrayCompare:function(a,e){if(!a&&!e)return!0;if(!a||!e||a.length!=e.length)return!1;for(var g=0;g<a.length;g++)if(a[g]!=e[g])return!1;return!0},getIndex:function(a,e){for(var g=0;g<a.length;++g)if(e(a[g]))return g;return-1},clone:function(a){var e;if(a&&a instanceof Array){e=[];for(var g=0;g<a.length;g++)e[g]=CKEDITOR.tools.clone(a[g]);return e}if(null===a||"object"!=typeof a||a instanceof String||a instanceof Number||a instanceof Boolean||a instanceof Date||a instanceof RegExp||a.nodeType||a.window===a)return a;for(g in e=new a.constructor,a)e[g]=CKEDITOR.tools.clone(a[g]);return e},capitalize:function(a,e){return a.charAt(0).toUpperCase()+(e?a.slice(1):a.slice(1).toLowerCase())},extend:function(a){var g,b,e=arguments.length;"boolean"==typeof(g=arguments[e-1])?e--:"boolean"==typeof(g=arguments[e-2])&&(b=arguments[e-1],e-=2);for(var t=1;t<e;t++){var n=arguments[t]||{};CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(n),(function(e){!0!==g&&null!=a[e]||b&&!(e in b)||(a[e]=n[e])}))}return a},prototypedCopy:function(a){var e=function(){};return e.prototype=a,new e},copy:function(a){var g,e={};for(g in a)e[g]=a[g];return e},isArray:function(a){return"[object Array]"==Object.prototype.toString.call(a)},isEmpty:function(a){for(var e in a)if(a.hasOwnProperty(e))return!1;return!0},cssVendorPrefix:function(a,e,g){return g?t+a+":"+e+";"+a+":"+e:((g={})[a]=e,g[t+a]=e,g)},cssStyleToDomStyle:function(){var a=document.createElement("div").style,e=void 0!==a.cssFloat?"cssFloat":void 0!==a.styleFloat?"styleFloat":"float";return function(a){return"float"==a?e:a.replace(/-./g,(function(a){return a.substr(1).toUpperCase()}))}}(),buildStyleHtml:function(a){a=[].concat(a);for(var e,g=[],b=0;b<a.length;b++)(e=a[b])&&(/@import|[{}]/.test(e)?g.push("<style>"+e+"</style>"):g.push('<link type="text/css" rel=stylesheet href="'+e+'">'));return g.join("")},htmlEncode:function(a){return null==a?"":String(a).replace(n,"&amp;").replace(o,"&gt;").replace(r,"&lt;")},htmlDecode:function(a){return a.replace(l,d)},htmlEncodeAttr:function(a){return CKEDITOR.tools.htmlEncode(a).replace(g,"&quot;")},htmlDecodeAttr:function(a){return CKEDITOR.tools.htmlDecode(a)},transformPlainTextToHtml:function(a,e){var g=e==CKEDITOR.ENTER_BR,b=(b=this.htmlEncode(a.replace(/\r\n/g,"\n"))).replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),t=e==CKEDITOR.ENTER_P?"p":"div";if(!g){var n=/\n{2}/g;if(n.test(b)){var o="<"+t+">",r="</"+t+">";b=o+b.replace(n,(function(){return r+o}))+r}}return b=b.replace(/\n/g,"<br>"),g||(b=b.replace(new RegExp("<br>(?=</"+t+">)"),(function(a){return CKEDITOR.tools.repeat(a,2)}))),(b=b.replace(/^ | $/g,"&nbsp;")).replace(/(>|\s) /g,(function(a,e){return e+"&nbsp;"})).replace(/ (?=<)/g,"&nbsp;")},getNextNumber:function(){var a=0;return function(){return++a}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var a="e",e=0;8>e;e++)a+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return a},override:function(a,e){var g=e(a);return g.prototype=a.prototype,g},setTimeout:function(a,e,g,b,t){return t||(t=window),g||(g=t),t.setTimeout((function(){b?a.apply(g,[].concat(b)):a.apply(g)}),e||0)},throttle:function(a,e,g){return new this.buffers.throttle(a,e,g)},trim:function(){var a=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(e){return e.replace(a,"")}}(),ltrim:function(){var a=/^[ \t\n\r]+/g;return function(e){return e.replace(a,"")}}(),rtrim:function(){var a=/[ \t\n\r]+$/g;return function(e){return e.replace(a,"")}}(),indexOf:function(a,e){if("function"==typeof e){for(var g=0,b=a.length;g<b;g++)if(e(a[g]))return g}else{if(a.indexOf)return a.indexOf(e);for(g=0,b=a.length;g<b;g++)if(a[g]===e)return g}return-1},search:function(a,e){var g=CKEDITOR.tools.indexOf(a,e);return 0<=g?a[g]:null},bind:function(a,e){return function(){return a.apply(e,arguments)}},createClass:function(a){var e=a.$,g=a.base,b=a.privates||a._,t=a.proto;if(a=a.statics,!e&&(e=function(){g&&this.base.apply(this,arguments)}),b){var n=e;e=function(){var e,a=this._||(this._={});for(e in b){var g=b[e];a[e]="function"==typeof g?CKEDITOR.tools.bind(g,this):g}n.apply(this,arguments)}}return g&&(e.prototype=this.prototypedCopy(g.prototype),e.prototype.constructor=e,e.base=g,e.baseProto=g.prototype,e.prototype.base=function e(){this.base=g.prototype.base,g.apply(this,arguments),this.base=e}),t&&this.extend(e.prototype,t,!0),a&&this.extend(e,a,!0),e},addFunction:function(a,e){return b.push((function(){return a.apply(e||this,arguments)}))-1},removeFunction:function(a){b[a]=null},callFunction:function(a){var e=b[a];return e&&e.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var e,a=/^-?\d+\.?\d*px$/;return function(g){return e=CKEDITOR.tools.trim(g+"")+"px",a.test(e)?e:g||""}}(),convertToPx:function(){var a;return function(e){if(a||(a=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(a)),!/%$/.test(e)){var g=0>parseFloat(e);return g&&(e=e.replace("-","")),a.setStyle("width",e),e=a.$.clientWidth,g?-e:e}return e}}(),repeat:function(a,e){return Array(e+1).join(a)},tryThese:function(){for(var a,e=0,g=arguments.length;e<g;e++){var b=arguments[e];try{a=b();break}catch(e){}}return a},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(a){return function(){var e=arguments,g=this;window.setTimeout((function(){a.apply(g,e)}),0)}},normalizeCssText:function(a,e){var b,g=[],t=CKEDITOR.tools.parseCssText(a,!0,e);for(b in t)g.push(b+":"+t[b]);return g.sort(),g.length?g.join(";")+";":""},convertRgbToHex:function(a){return a.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,(function(a,e,g,b){for(a=[e,g,b],e=0;3>e;e++)a[e]=("0"+parseInt(a[e],10).toString(16)).slice(-2);return"#"+a.join("")}))},normalizeHex:function(a){return a.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,(function(a,e,g,b){return 3==(a=e.toLowerCase()).length&&(a=[(a=a.split(""))[0],a[0],a[1],a[1],a[2],a[2]].join("")),"#"+a+b}))},parseCssText:function(a,e,g){var b={};return g&&(a=new CKEDITOR.dom.element("span").setAttribute("style",a).getAttribute("style")||""),a&&(a=CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(a))),a&&";"!=a?(a.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,(function(a,g,t){e&&("font-family"==(g=g.toLowerCase())&&(t=t.replace(/\s*,\s*/g,",")),t=CKEDITOR.tools.trim(t)),b[g]=t})),b):b},writeCssText:function(a,e){var g,b=[];for(g in a)b.push(g+":"+a[g]);return e&&b.sort(),b.join("; ")},objectCompare:function(a,e,g){var b;if(!a&&!e)return!0;if(!a||!e)return!1;for(b in a)if(a[b]!=e[b])return!1;if(!g)for(b in e)if(a[b]!=e[b])return!1;return!0},objectKeys:function(a){return CKEDITOR.tools.object.keys(a)},convertArrayToObject:function(a,e){var g={};1==arguments.length&&(e=!0);for(var b=0,t=a.length;b<t;++b)g[a[b]]=e;return g},fixDomain:function(){for(var a;;)try{a=window.parent.document.domain;break}catch(e){if(!(a=a?a.replace(/.+?(?:\.|$)/,""):document.domain))break;document.domain=a}return!!a},eventsBuffer:function(a,e,g){return new this.buffers.event(a,e,g)},enableHtml5Elements:function(a,e){for(var t,g="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),b=g.length;b--;)t=a.createElement(g[b]),e&&a.appendChild(t)},checkIfAnyArrayItemMatches:function(a,e){for(var g=0,b=a.length;g<b;++g)if(a[g].match(e))return!0;return!1},checkIfAnyObjectPropertyMatches:function(a,e){for(var g in a)if(g.match(e))return!0;return!1},keystrokeToString:function(a,e){var g=this.keystrokeToArray(a,e);return g.display=g.display.join("+"),g.aria=g.aria.join("+"),g},keystrokeToArray:function(a,e){var g=16711680&e,b=65535&e,t=CKEDITOR.env.mac,n=[],o=[];return g&CKEDITOR.CTRL&&(n.push(t?"⌘":a[17]),o.push(t?a[224]:a[17])),g&CKEDITOR.ALT&&(n.push(t?"⌥":a[18]),o.push(a[18])),g&CKEDITOR.SHIFT&&(n.push(t?"⇧":a[16]),o.push(a[16])),b&&(a[b]?(n.push(a[b]),o.push(a[b])):(n.push(String.fromCharCode(b)),o.push(String.fromCharCode(b)))),{display:n,aria:o}},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==",getCookie:function(a){a=a.toLowerCase();for(var g,e=document.cookie.split(";"),t=0;t<e.length;t++)if(g=e[t].split("="),decodeURIComponent(CKEDITOR.tools.trim(g[0]).toLowerCase())===a)return decodeURIComponent(1<g.length?g[1]:"");return null},setCookie:function(a,e){document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(e)+";path=/"},getCsrfToken:function(){if(!(a=CKEDITOR.tools.getCookie("ckCsrfToken"))||40!=a.length){var a=[],e="";if(window.crypto&&window.crypto.getRandomValues)a=new Uint8Array(40),window.crypto.getRandomValues(a);else for(var g=0;40>g;g++)a.push(Math.floor(256*Math.random()));for(g=0;g<a.length;g++){var b="abcdefghijklmnopqrstuvwxyz0123456789".charAt(a[g]%36);e+=.5<Math.random()?b.toUpperCase():b}a=e,CKEDITOR.tools.setCookie("ckCsrfToken",a)}return a},escapeCss:function(a){return a?window.CSS&&CSS.escape?CSS.escape(a):isNaN(parseInt(a.charAt(0),10))?a:"\\3"+a.charAt(0)+" "+a.substring(1,a.length):""},getMouseButton:function(a){return!!(a=a.data?a.data.$:a)&&(CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.ie6Compat)?4===a.button?CKEDITOR.MOUSE_BUTTON_MIDDLE:1===a.button?CKEDITOR.MOUSE_BUTTON_LEFT:CKEDITOR.MOUSE_BUTTON_RIGHT:a.button)},convertHexStringToBytes:function(a){var b,e=[],g=a.length/2;for(b=0;b<g;b++)e.push(parseInt(a.substr(2*b,2),16));return e},convertBytesToBase64:function(a){var b,e="",g=a.length;for(b=0;b<g;b+=3){var t,n=a.slice(b,b+3),o=n.length,r=[];if(3>o)for(t=o;3>t;t++)n[t]=0;for(r[0]=(252&n[0])>>2,r[1]=(3&n[0])<<4|n[1]>>4,r[2]=(15&n[1])<<2|(192&n[2])>>6,r[3]=63&n[2],t=0;4>t;t++)e=t<=o?e+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r[t]):e+"="}return e},style:{parse:{_colors:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",windowtext:"windowtext",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},_borderStyle:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),_widthRegExp:/^(thin|medium|thick|[\+-]?\d+(\.\d+)?[a-z%]+|[\+-]?0+(\.0+)?|\.\d+[a-z%]+)$/,_rgbaRegExp:/rgba?\(\s*\d+%?\s*,\s*\d+%?\s*,\s*\d+%?\s*(?:,\s*[0-9.]+\s*)?\)/gi,_hslaRegExp:/hsla?\(\s*[0-9.]+\s*,\s*\d+%\s*,\s*\d+%\s*(?:,\s*[0-9.]+\s*)?\)/gi,background:function(a){var e={},g=this._findColor(a);return g.length&&(e.color=g[0],CKEDITOR.tools.array.forEach(g,(function(e){a=a.replace(e,"")}))),(a=CKEDITOR.tools.trim(a))&&(e.unprocessed=a),e},margin:function(a){return CKEDITOR.tools.style.parse.sideShorthand(a,(function(a){return a.match(/(?:\-?[\.\d]+(?:%|\w*)|auto|inherit|initial|unset|revert)/g)||["0px"]}))},sideShorthand:function(a,e){function g(a){b.top=t[a[0]],b.right=t[a[1]],b.bottom=t[a[2]],b.left=t[a[3]]}var b={},t=e?e(a):a.split(/\s+/);switch(t.length){case 1:g([0,0,0,0]);break;case 2:g([0,1,0,1]);break;case 3:g([0,1,2,1]);break;case 4:g([0,1,2,3])}return b},border:function(a){return CKEDITOR.tools.style.border.fromCssRule(a)},_findColor:function(a){var e=[],g=CKEDITOR.tools.array;return(e=(e=e.concat(a.match(this._rgbaRegExp)||[])).concat(a.match(this._hslaRegExp)||[])).concat(g.filter(a.split(/\s+/),(function(a){return!!a.match(/^\#[a-f0-9]{3}(?:[a-f0-9]{3})?$/gi)||a.toLowerCase()in CKEDITOR.tools.style.parse._colors})))}}},array:{filter:function(a,e,g){var b=[];return this.forEach(a,(function(t,n){e.call(g,t,n,a)&&b.push(t)})),b},find:function(a,e,g){for(var b=a.length,t=0;t<b;){if(e.call(g,a[t],t,a))return a[t];t++}},forEach:function(a,e,g){var t,b=a.length;for(t=0;t<b;t++)e.call(g,a[t],t,a)},map:function(a,e,g){for(var b=[],t=0;t<a.length;t++)b.push(e.call(g,a[t],t,a));return b},reduce:function(a,e,g,b){for(var t=0;t<a.length;t++)g=e.call(b,g,a[t],t,a);return g},every:function(a,e,g){return!a.length||(e=this.filter(a,e,g),a.length===e.length)}},object:{DONT_ENUMS:"toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),entries:function(a){return CKEDITOR.tools.array.map(CKEDITOR.tools.object.keys(a),(function(e){return[e,a[e]]}))},values:function(a){return CKEDITOR.tools.array.map(CKEDITOR.tools.object.keys(a),(function(e){return a[e]}))},keys:function(a){var e,t=Object.prototype.hasOwnProperty,g=[],b=CKEDITOR.tools.object.DONT_ENUMS;for(e in a)g.push(e);if(CKEDITOR.env.ie&&9>CKEDITOR.env.version)for(e=0;e<b.length;e++)t.call(a,b[e])&&g.push(b[e]);return g},findKey:function(a,e){if("object"!=typeof a)return null;for(var g in a)if(a[g]===e)return g;return null},merge:function(a,e){var g=CKEDITOR.tools,b=g.clone(a),t=g.clone(e);return g.array.forEach(g.object.keys(t),(function(a){b[a]="object"==typeof t[a]&&"object"==typeof b[a]?g.object.merge(b[a],t[a]):t[a]})),b}},getAbsoluteRectPosition:function(a,e){var b=CKEDITOR.tools.copy(e);!function g(a){if(a){var e=a.getClientRect();b.top+=e.top,b.left+=e.left,"x"in b&&"y"in b&&(b.x+=e.x,b.y+=e.y),g(a.getWindow().getFrame())}}(a.getFrame());var t=CKEDITOR.document.getWindow().getScrollPosition();return b.top+=t.y,b.left+=t.x,"x"in b&&"y"in b&&(b.y+=t.y,b.x+=t.x),b.right=b.left+b.width,b.bottom=b.top+b.height,b}},a.prototype={reset:function(){this._lastOutput=0,this._clearTimer()},_reschedule:function(){return!1},_call:function(){this._output()},_clearTimer:function(){this._scheduledTimer&&clearTimeout(this._scheduledTimer),this._scheduledTimer=0}},e.prototype=CKEDITOR.tools.prototypedCopy(a.prototype),e.prototype._reschedule=function(){this._scheduledTimer&&this._clearTimer()},e.prototype._call=function(){this._output.apply(this._context,this._args)},CKEDITOR.tools.buffers={},CKEDITOR.tools.buffers.event=a,CKEDITOR.tools.buffers.throttle=e,CKEDITOR.tools.style.border=CKEDITOR.tools.createClass({$:function(a){a=a||{},this.width=a.width,this.style=a.style,this.color=a.color,this._.normalize()},_:{normalizeMap:{color:[[/windowtext/g,"black"]]},normalize:function(){for(var a in this._.normalizeMap){var e=this[a];e&&(this[a]=CKEDITOR.tools.array.reduce(this._.normalizeMap[a],(function(a,e){return a.replace(e[0],e[1])}),e))}}},proto:{toString:function(){return CKEDITOR.tools.array.filter([this.width,this.style,this.color],(function(a){return!!a})).join(" ")}},statics:{fromCssRule:function(a){var e={},g=a.split(/\s+/g);return(a=CKEDITOR.tools.style.parse._findColor(a)).length&&(e.color=a[0]),CKEDITOR.tools.array.forEach(g,(function(a){e.style||-1===CKEDITOR.tools.indexOf(CKEDITOR.tools.style.parse._borderStyle,a)?!e.width&&CKEDITOR.tools.style.parse._widthRegExp.test(a)&&(e.width=a):e.style=a})),new CKEDITOR.tools.style.border(e)},splitCssValues:function(a,e){e=e||{};var g=CKEDITOR.tools.array.reduce(["width","style","color"],(function(g,b){var t=a["border-"+b]||e[b];return g[b]=t?CKEDITOR.tools.style.parse.sideShorthand(t):null,g}),{});return CKEDITOR.tools.array.reduce(["top","right","bottom","left"],(function(e,b){var t,n={};for(t in g){var o=a["border-"+b+"-"+t];n[t]=o||g[t]&&g[t][b]}return e["border-"+b]=new CKEDITOR.tools.style.border(n),e}),{})}}}),CKEDITOR.tools.array.indexOf=CKEDITOR.tools.indexOf,CKEDITOR.tools.array.isArray=CKEDITOR.tools.isArray,CKEDITOR.MOUSE_BUTTON_LEFT=0,CKEDITOR.MOUSE_BUTTON_MIDDLE=1,CKEDITOR.MOUSE_BUTTON_RIGHT=2}(),CKEDITOR.dtd=(a=CKEDITOR.tools.extend,n=function(a,e){for(var g=CKEDITOR.tools.clone(a),b=1;b<arguments.length;b++)for(var t in e=arguments[b])delete g[t];return g},o={},r={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},l={command:1,link:1,meta:1,noscript:1,script:1,style:1},c={},d={center:1,dir:1,noframes:1},a(b={},{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1},g={"#":1},{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),a(o,r,b,d),n={a:n(b,{a:1,button:1}),abbr:b,address:o,area:c,article:o,aside:o,audio:a({source:1,track:1},o),b:b,base:c,bdi:b,bdo:b,blockquote:o,body:o,br:c,button:n(b,{a:1,button:1}),canvas:b,caption:o,cite:b,code:b,col:c,colgroup:{col:1},command:c,datalist:a({option:1},b),dd:o,del:b,details:a({summary:1},o),dfn:b,div:o,dl:{dt:1,dd:1},dt:o,em:b,embed:c,fieldset:a({legend:1},o),figcaption:o,figure:a({figcaption:1},o),footer:o,form:o,h1:b,h2:b,h3:b,h4:b,h5:b,h6:b,head:a({title:1,base:1},l),header:o,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:c,html:a({head:1,body:1},o,l),i:b,iframe:g,img:c,input:c,ins:b,kbd:b,keygen:c,label:b,legend:b,li:o,link:c,main:o,map:o,mark:b,menu:a({li:1},o),meta:c,meter:n(b,{meter:1}),nav:o,noscript:a({link:1,meta:1,style:1},b),object:a({param:1},b),ol:{li:1},optgroup:{option:1},option:g,output:b,p:b,param:c,pre:b,progress:n(b,{progress:1}),q:b,rp:b,rt:b,ruby:a({rp:1,rt:1},b),s:b,samp:b,script:g,section:o,select:{optgroup:1,option:1},small:b,source:c,span:b,strong:b,style:g,sub:b,summary:a({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},b),sup:b,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:o,textarea:g,tfoot:{tr:1},th:o,thead:{tr:1},time:n(b,{time:1}),title:g,tr:{th:1,td:1},track:c,u:b,ul:{li:1},var:b,video:a({source:1,track:1},o),wbr:c,acronym:b,applet:a({param:1},o),basefont:c,big:b,center:o,dialog:c,dir:{li:1},font:b,isindex:c,noframes:o,strike:b,tt:b},a(n,{$block:a({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},r,d),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:b,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:a({body:1,head:1,html:1},n.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,var:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),n),CKEDITOR.dom.event=function(a){this.$=a},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var a=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(a+=CKEDITOR.CTRL),this.$.shiftKey&&(a+=CKEDITOR.SHIFT),this.$.altKey&&(a+=CKEDITOR.ALT),a},preventDefault:function(a){var e=this.$;e.preventDefault?e.preventDefault():e.returnValue=!1,a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},getTarget:function(){var a=this.$.target||this.$.srcElement;return a?new CKEDITOR.dom.node(a):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var a=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(a.documentElement.scrollLeft||a.body.scrollLeft),y:this.$.pageY||this.$.clientY+(a.documentElement.scrollTop||a.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(a){a&&(this.$=a)},CKEDITOR.dom.domObject.prototype=function(){var a=function(a,b){return function(e){"undefined"!=typeof CKEDITOR&&a.fire(b,new CKEDITOR.dom.event(e))}};return{getPrivate:function(){var a;return(a=this.getCustomData("_"))||this.setCustomData("_",a={}),a},on:function(e){var b=this.getCustomData("_cke_nativeListeners");return b||(b={},this.setCustomData("_cke_nativeListeners",b)),b[e]||(b=b[e]=a(this,e),this.$.addEventListener?this.$.addEventListener(e,b,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+e,b)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(a){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(a)){var b=this.getCustomData("_cke_nativeListeners"),e=b&&b[a];e&&(this.$.removeEventListener?this.$.removeEventListener(a,e,!1):this.$.detachEvent&&this.$.detachEvent("on"+a,e),delete b[a])}},removeAllListeners:function(){var b,a=this.getCustomData("_cke_nativeListeners");for(b in a){var e=a[b];this.$.detachEvent?this.$.detachEvent("on"+b,e):this.$.removeEventListener&&this.$.removeEventListener(b,e,!1),delete a[b]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}(),function(a){var e={};CKEDITOR.on("reset",(function(){e={}})),a.equals=function(a){try{return a&&a.$===this.$}catch(e){return!1}},a.setCustomData=function(a,t){var n=this.getUniqueId();return(e[n]||(e[n]={}))[a]=t,this},a.getCustomData=function(a){var t=this.$["data-cke-expando"];return(t=t&&e[t])&&a in t?t[a]:null},a.removeCustomData=function(a){var t,n,o;return(t=(t=this.$["data-cke-expando"])&&e[t])&&(n=t[a],o=a in t,delete t[a]),o?n:null},a.clearCustomData=function(){this.removeAllListeners();var a=this.$["data-cke-expando"];a&&delete e[a]},a.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(a)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(a){return a?new CKEDITOR.dom[a.nodeType==CKEDITOR.NODE_DOCUMENT?"document":a.nodeType==CKEDITOR.NODE_ELEMENT?"element":a.nodeType==CKEDITOR.NODE_TEXT?"text":a.nodeType==CKEDITOR.NODE_COMMENT?"comment":a.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](a):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(a,e){return a.append(this,e),a},clone:function(a,e){var t=this.$.cloneNode(a);return function b(t){if(t["data-cke-expando"]&&(t["data-cke-expando"]=!1),(t.nodeType==CKEDITOR.NODE_ELEMENT||t.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(e||t.nodeType!=CKEDITOR.NODE_ELEMENT||t.removeAttribute("id",!1),a)){t=t.childNodes;for(var n=0;n<t.length;n++)b(t[n])}}(t),t=new CKEDITOR.dom.node(t),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&function e(b){if(b.type==CKEDITOR.NODE_ELEMENT||b.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(b.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var t=b.getName();":"==t[0]&&b.renameNode(t.substring(1))}if(a)for(t=0;t<b.getChildCount();t++)e(b.getChild(t))}}(t),t},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(a){return a.$.parentNode.insertBefore(this.$,a.$.nextSibling),a},insertBefore:function(a){return a.$.parentNode.insertBefore(this.$,a.$),a},insertBeforeMe:function(a){return this.$.parentNode.insertBefore(a.$,this.$),a},getAddress:function(a){for(var e=[],b=this.getDocument().$.documentElement,t=this.$;t&&t!=b;){var n=t.parentNode;n&&e.unshift(this.getIndex.call({$:t},a)),t=n}return e},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(a){function e(a,g){var t=g?a.nextSibling:a.previousSibling;return t&&t.nodeType==CKEDITOR.NODE_TEXT?b(t)?e(t,g):t:null}function b(a){return!a.nodeValue||a.nodeValue==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE}var t,n=this.$,o=-1;if(!this.$.parentNode||a&&n.nodeType==CKEDITOR.NODE_TEXT&&b(n)&&!e(n)&&!e(n,!0))return-1;do{a&&n!=this.$&&n.nodeType==CKEDITOR.NODE_TEXT&&(t||b(n))||(o++,t=n.nodeType==CKEDITOR.NODE_TEXT)}while(n=n.previousSibling);return o},getNextSourceNode:function(a,e,b){if(b&&!b.call){var t=b;b=function(a){return!a.equals(t)}}var n;if(!(a=!a&&this.getFirst&&this.getFirst())){if(this.type==CKEDITOR.NODE_ELEMENT&&b&&!1===b(this,!0))return null;a=this.getNext()}for(;!a&&(n=(n||this).getParent());){if(b&&!1===b(n,!0))return null;a=n.getNext()}return!a||b&&!1===b(a)?null:e&&e!=a.type?a.getNextSourceNode(!1,e,b):a},getPreviousSourceNode:function(a,e,b){if(b&&!b.call){var t=b;b=function(a){return!a.equals(t)}}var n;if(!(a=!a&&this.getLast&&this.getLast())){if(this.type==CKEDITOR.NODE_ELEMENT&&b&&!1===b(this,!0))return null;a=this.getPrevious()}for(;!a&&(n=(n||this).getParent());){if(b&&!1===b(n,!0))return null;a=n.getPrevious()}return!a||b&&!1===b(a)?null:e&&a.type!=e?a.getPreviousSourceNode(!1,e,b):a},getPrevious:function(a){var b,e=this.$;do{b=(e=e.previousSibling)&&10!=e.nodeType&&new CKEDITOR.dom.node(e)}while(b&&a&&!a(b));return b},getNext:function(a){var b,e=this.$;do{b=(e=e.nextSibling)&&new CKEDITOR.dom.node(e)}while(b&&a&&!a(b));return b},getParent:function(a){var e=this.$.parentNode;return e&&(e.nodeType==CKEDITOR.NODE_ELEMENT||a&&e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(e):null},getParents:function(a){var e=this,b=[];do{b[a?"push":"unshift"](e)}while(e=e.getParent());return b},getCommonAncestor:function(a){if(a.equals(this))return this;if(a.contains&&a.contains(this))return a;var e=this.contains?this:this.getParent();do{if(e.contains(a))return e}while(e=e.getParent());return null},getPosition:function(a){var e=this.$,b=a.$;if(e.compareDocumentPosition)return e.compareDocumentPosition(b);if(e==b)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&a.type==CKEDITOR.NODE_ELEMENT){if(e.contains){if(e.contains(b))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(b.contains(e))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in e)return 0>e.sourceIndex||0>b.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:e.sourceIndex<b.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}e=this.getAddress(),a=a.getAddress(),b=Math.min(e.length,a.length);for(var t=0;t<b;t++)if(e[t]!=a[t])return e[t]<a[t]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return e.length<a.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(a,e){var t,n,b=this.$;for(e||(b=b.parentNode),"function"==typeof a?(n=!0,t=a):(n=!1,t=function(b){return b="string"==typeof b.nodeName?b.nodeName.toLowerCase():"","string"==typeof a?b==a:b in a});b;){if(t(n?new CKEDITOR.dom.node(b):b))return new CKEDITOR.dom.node(b);try{b=b.parentNode}catch(e){b=null}}return null},hasAscendant:function(a,e){var b=this.$;for(e||(b=b.parentNode);b;){if(b.nodeName&&b.nodeName.toLowerCase()==a)return!0;b=b.parentNode}return!1},move:function(a,e){a.append(this.remove(),e)},remove:function(a){var e=this.$,b=e.parentNode;if(b){if(a)for(;a=e.firstChild;)b.insertBefore(e.removeChild(a),e);b.removeChild(e)}return this},replace:function(a){this.insertBefore(a),a.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var a;this.getFirst&&(a=this.getFirst());){if(a.type==CKEDITOR.NODE_TEXT){var e=CKEDITOR.tools.ltrim(a.getText()),b=a.getLength();if(!e){a.remove();continue}e.length<b&&(a.split(b-e.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var a;this.getLast&&(a=this.getLast());){if(a.type==CKEDITOR.NODE_TEXT){var e=CKEDITOR.tools.rtrim(a.getText()),b=a.getLength();if(!e){a.remove();continue}e.length<b&&(a.split(e.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(a=this.$.lastChild)&&1==a.type&&"br"==a.nodeName.toLowerCase()&&a.parentNode.removeChild(a)},isReadOnly:function(a){var e=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(e=this.getParent()),CKEDITOR.env.edge&&e&&e.is("textarea","input")&&(a=!0),!a&&e&&void 0!==e.$.isContentEditable)return!(e.$.isContentEditable||e.data("cke-editable"));for(;e;){if(e.data("cke-editable"))return!1;if(e.hasAttribute("contenteditable"))return"false"==e.getAttribute("contenteditable");e=e.getParent()}return!0}}),CKEDITOR.dom.window=function(a){CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var a=this.$.document,e="CSS1Compat"==a.compatMode;return{width:(e?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(e?a.documentElement.clientHeight:a.body.clientHeight)||0}},getScrollPosition:function(){var a=this.$;return"pageXOffset"in a?{x:a.pageXOffset||0,y:a.pageYOffset||0}:{x:(a=a.document).documentElement.scrollLeft||a.body.scrollLeft||0,y:a.documentElement.scrollTop||a.body.scrollTop||0}},getFrame:function(){var a=this.$.frameElement;return a?new CKEDITOR.dom.element.get(a):null}}),CKEDITOR.dom.document=function(a){CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(a){if(this.$.createStyleSheet)this.$.createStyleSheet(a);else{var e=new CKEDITOR.dom.element("link");e.setAttributes({rel:"stylesheet",type:"text/css",href:a}),this.getHead().append(e)}},appendStyleText:function(a){if(this.$.createStyleSheet){var e=this.$.createStyleSheet("");e.cssText=a}else{var b=new CKEDITOR.dom.element("style",this);b.append(new CKEDITOR.dom.text(a,this)),this.getHead().append(b)}return e||b.$.sheet},createElement:function(a,e){var b=new CKEDITOR.dom.element(a,this);return e&&(e.attributes&&b.setAttributes(e.attributes),e.styles&&b.setStyles(e.styles)),b},createText:function(a){return new CKEDITOR.dom.text(a,this)},focus:function(){this.getWindow().focus()},getActive:function(){var a;try{a=this.$.activeElement}catch(e){return null}return new CKEDITOR.dom.element(a)},getById:function(a){return(a=this.$.getElementById(a))?new CKEDITOR.dom.element(a):null},getByAddress:function(a,e){for(var b=this.$.documentElement,t=0;b&&t<a.length;t++){var n=a[t];if(e)for(var o=-1,r=0;r<b.childNodes.length;r++){var g=b.childNodes[r];if((!0!==e||3!=g.nodeType||!g.previousSibling||3!=g.previousSibling.nodeType)&&++o==n){b=g;break}}else b=b.childNodes[n]}return b?new CKEDITOR.dom.node(b):null},getElementsByTag:function(a,e){return CKEDITOR.env.ie&&8>=document.documentMode||!e||(a=e+":"+a),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(a))},getHead:function(){var a=this.$.getElementsByTagName("head")[0];return a?new CKEDITOR.dom.element(a):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(a){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(a=a.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();<\/script>")),this.$.write(a),this.$.close()},find:function(a){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(a))},findOne:function(a){return(a=this.$.querySelector(a))?new CKEDITOR.dom.element(a):null},_getHtml5ShivFrag:function(){var a=this.getCustomData("html5ShivFrag");return a||(a=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(a,!0),this.setCustomData("html5ShivFrag",a)),a}}),CKEDITOR.dom.nodeList=function(a){this.$=a},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(a){return 0>a||a>=this.$.length?null:(a=this.$[a])?new CKEDITOR.dom.node(a):null},toArray:function(){return CKEDITOR.tools.array.map(this.$,(function(a){return new CKEDITOR.dom.node(a)}))}},CKEDITOR.dom.element=function(a,e){"string"==typeof a&&(a=(e?e.$:document).createElement(a)),CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.element.get=function(a){return(a="string"==typeof a?document.getElementById(a)||document.getElementsByName(a)[0]:a)&&(a.$?a:new CKEDITOR.dom.element(a))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(a,e){var b=new CKEDITOR.dom.element("div",e);return b.setHtml(a),b.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(a,e,b,t){var n=e.getCustomData("list_marker_id")||e.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),o=e.getCustomData("list_marker_names")||e.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return a[n]=e,o[b]=1,e.setCustomData(b,t)},CKEDITOR.dom.element.clearAllMarkers=function(a){for(var e in a)CKEDITOR.dom.element.clearMarkers(a,a[e],1)},CKEDITOR.dom.element.clearMarkers=function(a,e,b){var t,n=e.getCustomData("list_marker_names"),o=e.getCustomData("list_marker_id");for(t in n)e.removeCustomData(t);e.removeCustomData("list_marker_names"),b&&(e.removeCustomData("list_marker_id"),delete a[o])},function(){function a(a,b){return-1<(" "+a+" ").replace(o," ").indexOf(" "+b+" ")}function e(a){var b=!0;return a.$.id||(a.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),b=!1),function(){b||a.removeAttribute("id")}}function b(a,b){var e=CKEDITOR.tools.escapeCss(a.$.id);return"#"+e+" "+b.split(/,\s*/).join(", #"+e+" ")}function t(a){for(var b=0,e=0,t=r[a].length;e<t;e++)b+=parseFloat(this.getComputedStyle(r[a][e])||0,10)||0;return b}var n=void 0!==(n=document.createElement("_").classList)&&null!==String(n.add).match(/\[Native code\]/gi),o=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:n?function(a){return this.$.classList.add(a),this}:function(g){var b=this.$.className;return b&&(a(b,g)||(b+=" "+g)),this.$.className=b||g,this},removeClass:n?function(a){var b=this.$;return b.classList.remove(a),b.className||b.removeAttribute("class"),this}:function(g){var b=this.getAttribute("class");return b&&a(b,g)&&((b=b.replace(new RegExp("(?:^|\\s+)"+g+"(?=\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",b):this.removeAttribute("class")),this},hasClass:function(b){return a(this.$.className,b)},append:function(a,b){return"string"==typeof a&&(a=this.getDocument().createElement(a)),b?this.$.insertBefore(a.$,this.$.firstChild):this.$.appendChild(a.$),a},appendHtml:function(a){if(this.$.childNodes.length){var b=new CKEDITOR.dom.element("div",this.getDocument());b.setHtml(a),b.moveChildren(this)}else this.setHtml(a)},appendText:function(a){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=a:this.append(new CKEDITOR.dom.text(a))},appendBogus:function(a){if(a||CKEDITOR.env.needsBrFiller){for(a=this.getLast();a&&a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(a.getText());)a=a.getPrevious();a&&a.is&&a.is("br")||(a=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&a.setAttribute("type","_moz"),this.append(a))}},breakParent:function(a,b){var e=new CKEDITOR.dom.range(this.getDocument());e.setStartAfter(this),e.setEndAfter(a);var t,n=e.extractContents(!1,b||!1);if(e.insertNode(this.remove()),CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(e=new CKEDITOR.dom.element("div");t=n.getFirst();)t.$.style.backgroundColor&&(t.$.style.backgroundColor=t.$.style.backgroundColor),e.append(t);e.insertAfter(this),e.remove(!0)}else n.insertAfterNode(this)},contains:document.compareDocumentPosition?function(a){return!!(16&this.$.compareDocumentPosition(a.$))}:function(a){var b=this.$;return a.type!=CKEDITOR.NODE_ELEMENT?b.contains(a.getParent().$):b!=a.$&&b.contains(a.$)},focus:function(){function a(){try{this.$.focus()}catch(e){}}return function(b){b?CKEDITOR.tools.setTimeout(a,100,this):a.call(this)}}(),getHtml:function(){var a=this.$.innerHTML;return CKEDITOR.env.ie?a.replace(/<\?[^>]*>/g,""):a},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var a=this.$.ownerDocument.createElement("div");return a.appendChild(this.$.cloneNode(!0)),a.innerHTML},getClientRect:function(a){var b=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!b.width&&(b.width=b.right-b.left),!b.height&&(b.height=b.bottom-b.top),a?CKEDITOR.tools.getAbsoluteRectPosition(this.getWindow(),b):b},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(a){try{var b=this.$;if(this.getParent())return b.innerHTML=a;var e=this.getDocument()._getHtml5ShivFrag();return e.appendChild(b),b.innerHTML=a,e.removeChild(b),a}catch(e){for(this.$.innerHTML="",(b=new CKEDITOR.dom.element("body",this.getDocument())).$.innerHTML=a,b=b.getChildren();b.count();)this.append(b.getItem(0));return a}}:function(a){return this.$.innerHTML=a},setText:function(){var a=document.createElement("p");return a.innerHTML="x",a=a.textContent,function(b){this.$[a?"textContent":"innerText"]=b}}(),getAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){switch(a){case"class":a="className";break;case"http-equiv":a="httpEquiv";break;case"name":return this.$.name;case"tabindex":return 0!==(a=this.$.getAttribute(a,2))&&0===this.$.tabIndex&&(a=null),a;case"checked":return((a=this.$.attributes.getNamedItem(a)).specified?a.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[a];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(a,2)}:function(a){return this.$.getAttribute(a,2)},getAttributes:function(a){var e,b={},t=this.$.attributes;for(a=CKEDITOR.tools.isArray(a)?a:[],e=0;e<t.length;e++)-1===CKEDITOR.tools.indexOf(a,t[e].name)&&(b[t[e].name]=t[e].value);return b},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(a){var b=this.getWindow().$.getComputedStyle(this.$,null);return b?b.getPropertyValue(a):""}:function(a){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(a)]},getDtd:function(){var a=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return a},a},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var a=this.$.tabIndex;return 0!==a||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?a:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var b=this.$.scopeName;"HTML"!=b&&(a=b.toLowerCase()+":"+a)}return this.getName=function(){return a},this.getName()},getValue:function(){return this.$.value},getFirst:function(a){var b=this.$.firstChild;return(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&(b=b.getNext(a)),b},getLast:function(a){var b=this.$.lastChild;return(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&(b=b.getPrevious(a)),b},getStyle:function(a){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]},is:function(){var a=this.getName();if("object"==typeof arguments[0])return!!arguments[0][a];for(var b=0;b<arguments.length;b++)if(arguments[b]==a)return!0;return!1},isEditable:function(a){var b=this.getName();return!(this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[b]||CKEDITOR.dtd.$empty[b]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()||!1!==a&&(!(a=CKEDITOR.dtd[b]||CKEDITOR.dtd.span)||!a["#"]))},isIdentical:function(a){var b=this.clone(0,1);if(a=a.clone(0,1),b.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),a.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),b.$.isEqualNode)return b.$.style.cssText=CKEDITOR.tools.normalizeCssText(b.$.style.cssText),a.$.style.cssText=CKEDITOR.tools.normalizeCssText(a.$.style.cssText),b.$.isEqualNode(a.$);if(b=b.getOuterHtml(),a=a.getOuterHtml(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var e=this.getParent();e.type==CKEDITOR.NODE_ELEMENT&&((e=e.clone()).setHtml(b),b=e.getHtml(),e.setHtml(a),a=e.getHtml())}return b==a},isVisible:function(){var b,e,a=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return a&&CKEDITOR.env.webkit&&!(b=this.getWindow()).equals(CKEDITOR.document.getWindow())&&(e=b.$.frameElement)&&(a=new CKEDITOR.dom.element(e).isVisible()),!!a},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var a=this.getChildren(),b=0,e=a.count();b<e;b++){var t=a.getItem(b);if((t.type!=CKEDITOR.NODE_ELEMENT||!t.data("cke-bookmark"))&&(t.type==CKEDITOR.NODE_ELEMENT&&!t.isEmptyInlineRemoveable()||t.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(t.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var a=this.$.attributes,b=0;b<a.length;b++){var e=a[b];switch(e.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(e.specified)return!0}}return!1}:function(){var a=this.$.attributes,b=a.length,e={"data-cke-expando":1,_moz_dirty:1};return 0<b&&(2<b||!e[a[0].nodeName]||2==b&&!e[a[1].nodeName])},hasAttribute:function(){function a(b){var g=this.$.attributes.getNamedItem(b);if("input"==this.getName())switch(b){case"class":return 0<this.$.className.length;case"checked":return!!this.$.checked;case"value":return"checkbox"==(b=this.getAttribute("type"))||"radio"==b?"on"!=this.$.value:!!this.$.value}return!!g&&g.specified}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(b){return"name"==b?!!this.$.name:a.call(this,b)}:a:function(a){return!!this.$.attributes.getNamedItem(a)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(a,b){var e,t=this.$;if(t!=(a=a.$))if(b)for(;e=t.lastChild;)a.insertBefore(t.removeChild(e),a.firstChild);else for(;e=t.firstChild;)a.appendChild(t.removeChild(e))},mergeSiblings:function(){function a(b,g,e){if(g&&g.type==CKEDITOR.NODE_ELEMENT){for(var t=[];g.data("cke-bookmark")||g.isEmptyInlineRemoveable();)if(t.push(g),!(g=e?g.getNext():g.getPrevious())||g.type!=CKEDITOR.NODE_ELEMENT)return;if(b.isIdentical(g)){for(var n=e?b.getLast():b.getFirst();t.length;)t.shift().move(b,!e);g.moveChildren(b,!e),g.remove(),n&&n.type==CKEDITOR.NODE_ELEMENT&&n.mergeSiblings()}}}return function(b){(!1===b||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(a(this,this.getNext(),!0),a(this,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var a=function(a,b){return this.$.setAttribute(a,b),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(b,e){return"class"==b?this.$.className=e:"style"==b?this.$.style.cssText=e:"tabindex"==b?this.$.tabIndex=e:"checked"==b?this.$.checked=e:"contenteditable"==b?a.call(this,"contentEditable",e):a.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(b,e){if("src"==b&&e.match(/^http:\/\//))try{a.apply(this,arguments)}catch(e){}else a.apply(this,arguments);return this}:a}(),setAttributes:function(a){for(var b in a)this.setAttribute(b,a[b]);return this},setValue:function(a){return this.$.value=a,this},removeAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){"class"==a?a="className":"tabindex"==a?a="tabIndex":"contenteditable"==a&&(a="contentEditable"),this.$.removeAttribute(a)}:function(a){this.$.removeAttribute(a)},removeAttributes:function(a){if(CKEDITOR.tools.isArray(a))for(var b=0;b<a.length;b++)this.removeAttribute(a[b]);else for(b in a=a||this.getAttributes())a.hasOwnProperty(b)&&this.removeAttribute(b)},removeStyle:function(a){if((b=this.$.style).removeProperty||"border"!=a&&"margin"!=a&&"padding"!=a)b.removeProperty?b.removeProperty(a):b.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(a)),this.$.style.cssText||this.removeAttribute("style");else{var e,t=["top","left","right","bottom"];"border"==a&&(e=["color","style","width"]);for(var b=[],n=0;n<t.length;n++)if(e)for(var o=0;o<e.length;o++)b.push([a,t[n],e[o]].join("-"));else b.push([a,t[n]].join("-"));for(a=0;a<b.length;a++)this.removeStyle(b[a])}},setStyle:function(a,b){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]=b,this},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},setOpacity:function(a){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(a=Math.round(100*a),this.setStyle("filter",100<=a?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")")):this.setStyle("opacity",a)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var b=this.getElementsByTag("*"),e=0,t=b.count();e<t;e++)b.getItem(e).setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var a=this;"html"!=a.getName();){if("static"!=a.getComputedStyle("position"))return a;a=a.getParent()}return null},getDocumentPosition:function(a){var b=0,e=0,t=this.getDocument(),n=t.getBody(),o="BackCompat"==t.$.compatMode;if(!document.documentElement.getBoundingClientRect||CKEDITOR.env.ie&&8===CKEDITOR.env.version)for(p=this,c=null;p&&"body"!=p.getName()&&"html"!=p.getName();){for(b+=p.$.offsetLeft-p.$.scrollLeft,e+=p.$.offsetTop-p.$.scrollTop,p.equals(this)||(b+=p.$.clientLeft||0,e+=p.$.clientTop||0);c&&!c.equals(p);)b-=c.$.scrollLeft,e-=c.$.scrollTop,c=c.getParent();c=p,p=(r=p.$.offsetParent)?new CKEDITOR.dom.element(r):null}else{var r=this.$.getBoundingClientRect(),l=t.$.documentElement,p=l.clientTop||n.$.clientTop||0,c=l.clientLeft||n.$.clientLeft||0,d=!0;CKEDITOR.env.ie&&(d=t.getDocumentElement().contains(this),t=t.getBody().contains(this),d=o&&t||!o&&d),d&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(b=n.$.scrollLeft||l.scrollLeft,e=n.$.scrollTop||l.scrollTop):(b=(e=o?n.$:l).scrollLeft,e=e.scrollTop),b=r.left+b-c,e=r.top+e-p)}return a&&(r=this.getWindow(),p=a.getWindow(),!r.equals(p)&&r.$.frameElement&&(b+=(a=new CKEDITOR.dom.element(r.$.frameElement).getDocumentPosition(a)).x,e+=a.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||o||(b+=this.$.clientLeft?1:0,e+=this.$.clientTop?1:0),{x:b,y:e}},scrollIntoView:function(a){},scrollIntoParent:function(a,b,e){var t,n,o,r;function l(e,b){/body|html/.test(a.getName())?a.getWindow().$.scrollBy(e,b):(a.$.scrollLeft+=e,a.$.scrollTop+=b)}function p(a,e){var b={x:0,y:0};if(!a.is(d?"body":"html")){var t=a.$.getBoundingClientRect();b.x=t.left,b.y=t.top}return(t=a.getWindow()).equals(e)||(t=p(CKEDITOR.dom.element.get(t.$.frameElement),e),b.x+=t.x,b.y+=t.y),b}function c(a,b){return parseInt(a.getComputedStyle("margin-"+b)||0,10)||0}!a&&(a=this.getWindow());var d="BackCompat"==(o=a.getDocument()).$.compatMode;a instanceof CKEDITOR.dom.window&&(a=d?o.getBody():o.getDocumentElement()),CKEDITOR.env.webkit&&(o=this.getEditor(!1))&&(o._.previousScrollTop=null),n=p(this,o=a.getWindow());var h=p(a,o),f=this.$.offsetHeight;t=this.$.offsetWidth;var m=a.$.clientHeight,E=a.$.clientWidth;o=n.x-c(this,"left")-h.x||0,r=n.y-c(this,"top")-h.y||0,t=n.x+t+c(this,"right")-(h.x+E)||0,n=n.y+f+c(this,"bottom")-(h.y+m)||0,(0>r||0<n)&&l(0,!0===b?r:!1===b?n:0>r?r:n),e&&(0>o||0<t)&&l(0>o?o:t,0)},setState:function(a,b,e){switch(b=b||"cke",a){case CKEDITOR.TRISTATE_ON:this.addClass(b+"_on"),this.removeClass(b+"_off"),this.removeClass(b+"_disabled"),e&&this.setAttribute("aria-pressed",!0),e&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(b+"_disabled"),this.removeClass(b+"_off"),this.removeClass(b+"_on"),e&&this.setAttribute("aria-disabled",!0),e&&this.removeAttribute("aria-pressed");break;default:this.addClass(b+"_off"),this.removeClass(b+"_on"),this.removeClass(b+"_disabled"),e&&this.removeAttribute("aria-pressed"),e&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(e){a.src=a.src}return a&&new CKEDITOR.dom.document(a.contentWindow.document)},copyAttributes:function(a,b){var e=this.$.attributes;b=b||{};for(var t=0;t<e.length;t++){var n,o=e[t],r=o.nodeName.toLowerCase();r in b||("checked"==r&&(n=this.getAttribute(r))?a.setAttribute(r,n):CKEDITOR.env.ie&&!this.hasAttribute(r)||(null===(n=this.getAttribute(r))&&(n=o.nodeValue),a.setAttribute(r,n)))}""!==this.$.style.cssText&&(a.$.style.cssText=this.$.style.cssText)},renameNode:function(a){if(this.getName()!=a){var b=this.getDocument();a=new CKEDITOR.dom.element(a,b),this.copyAttributes(a),this.moveChildren(a),this.getParent(!0)&&this.$.parentNode.replaceChild(a.$,this.$),a.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=a.$,delete this.getName}},getChild:function(){function a(b,e){var t=b.childNodes;if(0<=e&&e<t.length)return t[e]}return function(b){var e=this.$;if(b.slice)for(b=b.slice();0<b.length&&e;)e=a(e,b.shift());else e=a(e,b);return e?new CKEDITOR.dom.node(e):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function a(b){return b.type==CKEDITOR.NODE_ELEMENT&&b.hasClass("cke_enable_context_menu")}this.on("contextmenu",(function(b){b.data.getTarget().getAscendant(a,!0)||b.data.preventDefault()}))},getDirection:function(a){return a?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(a,b){return a="data-"+a,void 0===b?this.getAttribute(a):(!1===b?this.removeAttribute(a):this.setAttribute(a,b),null)},getEditor:function(a){var e,t,n,b=CKEDITOR.instances;for(e in a=a||void 0===a,b)if((t=b[e]).element.equals(this)&&t.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||!a&&(n=t.editable())&&(n.equals(this)||n.contains(this)))return t;return null},find:function(a){var t=e(this);return a=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(b(this,a))),t(),a},findOne:function(a){var t=e(this);return a=this.$.querySelector(b(this,a)),t(),a?new CKEDITOR.dom.element(a):null},forEach:function(a,b,e){if(!(e||b&&this.type!=b))var t=a(this);if(!1!==t){e=this.getChildren();for(var n=0;n<e.count();n++)(t=e.getItem(n)).type==CKEDITOR.NODE_ELEMENT?t.forEach(a,b):b&&t.type!=b||a(t)}}});var r={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(a,b,e){"number"==typeof b&&(!e||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(b-=t.call(this,a)),this.setStyle(a,b+"px"))},CKEDITOR.dom.element.prototype.getSize=function(a,b){var e=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(a)],this.$["client"+CKEDITOR.tools.capitalize(a)])||0;return b&&(e-=t.call(this,a)),e}}(),CKEDITOR.dom.documentFragment=function(a){a=a||CKEDITOR.document,this.$=a.type==CKEDITOR.NODE_DOCUMENT?a.$.createDocumentFragment():a},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(a){(a=a.$).parentNode.insertBefore(this.$,a.nextSibling)},getHtml:function(){var a=new CKEDITOR.dom.element("div");return this.clone(1,1).appendTo(a),a.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.document.prototype,!0,{find:1,findOne:1}),function(){function a(a,b){var e=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,e.collapsed)return this.end(),null;e.optimize()}var t,n=e.startContainer;t=e.endContainer;var o,g=e.startOffset,r=e.endOffset,l=this.guard,c=this.type,d=a?"getPreviousSourceNode":"getNextSourceNode";if(!a&&!this._.guardLTR){var h=t.type==CKEDITOR.NODE_ELEMENT?t:t.getParent(),f=t.type==CKEDITOR.NODE_ELEMENT?t.getChild(r):t.getNext();this._.guardLTR=function(a,b){return!(b&&h.equals(a)||f&&a.equals(f)||a.type==CKEDITOR.NODE_ELEMENT&&b&&a.equals(e.root))}}if(a&&!this._.guardRTL){var m=n.type==CKEDITOR.NODE_ELEMENT?n:n.getParent(),E=n.type==CKEDITOR.NODE_ELEMENT?g?n.getChild(g-1):null:n.getPrevious();this._.guardRTL=function(a,b){return!(b&&m.equals(a)||E&&a.equals(E)||a.type==CKEDITOR.NODE_ELEMENT&&b&&a.equals(e.root))}}var T=a?this._.guardRTL:this._.guardLTR;for(o=l?function(a,b){return!1!==T(a,b)&&l(a,b)}:T,this.current?t=this.current[d](!1,c,o):(a?t.type==CKEDITOR.NODE_ELEMENT&&(t=0<r?t.getChild(r-1):!1===o(t,!0)?null:t.getPreviousSourceNode(!0,c,o)):(t=n).type==CKEDITOR.NODE_ELEMENT&&((t=t.getChild(g))||(t=!1===o(n,!0)?null:n.getNextSourceNode(!0,c,o))),t&&!1===o(t)&&(t=null));t&&!this._.end;){if(this.current=t,this.evaluator&&!1===this.evaluator(t)){if(b&&this.evaluator)return!1}else if(!b)return t;t=t[d](!1,c,o)}return this.end(),this.current=null}function e(b){for(var e,t=null;e=a.call(this,b);)t=e;return t}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(a){this.range=a,this._={}},proto:{end:function(){this._.end=1},next:function(){return a.call(this)},previous:function(){return a.call(this,1)},checkForward:function(){return!1!==a.call(this,0,1)},checkBackward:function(){return!1!==a.call(this,1,1)},lastForward:function(){return e.call(this)},lastBackward:function(){return e.call(this,1)},reset:function(){delete this.current,this._={}}}});var b={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},t={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(a){return!("none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in t||!b[this.getComputedStyle("display")])||!!(this.is(CKEDITOR.dtd.$block)||a&&this.is(a))},CKEDITOR.dom.walker.blockBoundary=function(a){return function(b){return!(b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary(a))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(a,b){function e(a){return a&&a.getName&&"span"==a.getName()&&a.data("cke-bookmark")}return function(t){var n,g;return n=t&&t.type!=CKEDITOR.NODE_ELEMENT&&(g=t.getParent())&&e(g),n=a?n:n||e(t),!!(b^n)}},CKEDITOR.dom.walker.whitespaces=function(a){return function(b){var e;return b&&b.type==CKEDITOR.NODE_TEXT&&(e=!CKEDITOR.tools.trim(b.getText())||CKEDITOR.env.webkit&&b.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE),!!(a^e)}},CKEDITOR.dom.walker.invisible=function(a){var b=CKEDITOR.dom.walker.whitespaces(),e=CKEDITOR.env.webkit?1:0;return function(t){return b(t)?t=1:(t.type==CKEDITOR.NODE_TEXT&&(t=t.getParent()),t=t.$.offsetWidth<=e),!!(a^t)}},CKEDITOR.dom.walker.nodeType=function(a,b){return function(e){return!!(b^e.type==a)}},CKEDITOR.dom.walker.bogus=function(a){function b(a){return!o(a)&&!r(a)}return function(e){var t=CKEDITOR.env.needsBrFiller?e.is&&e.is("br"):e.getText&&n.test(e.getText());return t&&(t=e.getParent(),e=e.getNext(b),t=t.isBlockBoundary()&&(!e||e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary())),!!(a^t)}},CKEDITOR.dom.walker.temp=function(a){return function(b){return b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent()),b=b&&b.hasAttribute("data-cke-temp"),!!(a^b)}};var n=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,o=CKEDITOR.dom.walker.whitespaces(),r=CKEDITOR.dom.walker.bookmark(),g=CKEDITOR.dom.walker.temp(),l=function(a){return r(a)||o(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$inline)&&!a.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(a){return function(b){return b=o(b)||r(b)||g(b),!!(a^b)}};var c=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(a){return function(b){for(var e=0,t=b.getChildCount();e<t;++e)if(!c(b.getChild(e)))return!!a;return!a}};var d=CKEDITOR.dom.walker.empty(),h=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(a){var e,b={};for(e in a)CKEDITOR.dtd[e]["#"]&&(b[e]=1);return b}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(a){return function(b){return b=!c(b)&&!!(b.type==CKEDITOR.NODE_TEXT||b.type==CKEDITOR.NODE_ELEMENT&&(b.is(CKEDITOR.dtd.$inline)||b.is("hr")||"false"==b.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&b.is(h)&&d(b))),!!(a^b)}},CKEDITOR.dom.element.prototype.getBogus=function(){var a=this;do{a=a.getPreviousSourceNode()}while(l(a));return!(!a||!(CKEDITOR.env.needsBrFiller?a.is&&a.is("br"):a.getText&&n.test(a.getText())))&&a}}(),CKEDITOR.dom.range=function(a){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var e=a instanceof CKEDITOR.dom.document;this.document=e?a:a.getDocument(),this.root=e?a.getBody():a},function(){function a(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer.equals(a.endContainer)&&a.startOffset==a.endOffset}function e(a,b,e,t,g){function n(a,b,e,t){var n=e?a.getPrevious():a.getNext();return t&&o||(l||t?b.append(a.clone(!0,g),e):(a.remove(),r&&b.append(a,e))),n}a.optimizeBookmark();var o=0===b,r=1==b,l=2==b;b=l||r;var c,d,h,f,m,E,T=a.startContainer,C=a.endContainer,I=a.startOffset,O=a.endOffset;if(l&&C.type==CKEDITOR.NODE_TEXT&&(T.equals(C)||T.type===CKEDITOR.NODE_ELEMENT&&T.getFirst().equals(C)))e.append(a.document.createText(C.substring(I,O)));else{C.type==CKEDITOR.NODE_TEXT?l?E=!0:C=C.split(O):0<C.getChildCount()?O>=C.getChildCount()?(C=C.getChild(O-1),d=!0):C=C.getChild(O):f=d=!0,T.type==CKEDITOR.NODE_TEXT?l?m=!0:T.split(I):0<T.getChildCount()?0===I?(T=T.getChild(I),c=!0):T=T.getChild(I-1):h=c=!0;for(var D,R,v,y=T.getParents(),K=C.getParents(),_=function(){var a,b,e,t=Math.min(y.length,K.length);for(a=0;a<t;a++)if(b=y[a],e=K[a],!b.equals(e))return a;return a-1}(),k=y.length-1,w=K.length-1,S=e,N=-1,x=_;x<=k;x++){for(v=(R=y[x]).getNext(),x!=k||R.equals(K[x])&&k<w?b&&(D=S.append(R.clone(0,g))):c?n(R,S,!1,h):m&&S.append(a.document.createText(R.substring(I)));v;){if(v.equals(K[x])){N=x;break}v=n(v,S)}S=D}for(S=e,x=_;x<=w;x++)if(v=(e=K[x]).getPrevious(),e.equals(y[x]))b&&(S=S.getChild(0));else{if(x!=w||e.equals(y[x])&&w<k?b&&(D=S.append(e.clone(0,g))):d?n(e,S,!1,f):E&&S.append(a.document.createText(e.substring(0,O))),x>N)for(;v;)v=n(v,S,!0);S=D}l||function(){var b=_-1,e=h&&f&&!T.equals(C);b<k-1||b<w-1||e?(e?a.moveToPosition(C,CKEDITOR.POSITION_BEFORE_START):w==b+1&&d?a.moveToPosition(K[b],CKEDITOR.POSITION_BEFORE_END):a.moveToPosition(K[b+1],CKEDITOR.POSITION_BEFORE_START),t&&(b=y[b+1])&&b.type==CKEDITOR.NODE_ELEMENT&&((e=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',a.document)).insertAfter(b),b.mergeSiblings(!1),a.moveToBookmark({startNode:e}))):a.collapse(!0)}()}}function b(){var a=!1,b=CKEDITOR.dom.walker.whitespaces(),e=CKEDITOR.dom.walker.bookmark(!0),t=CKEDITOR.dom.walker.bogus();return function(g){return!(!e(g)&&!b(g))||(t(g)&&!a?a=!0:!(g.type==CKEDITOR.NODE_TEXT&&(g.hasAscendant("pre")||CKEDITOR.tools.trim(g.getText()).length)||g.type==CKEDITOR.NODE_ELEMENT&&!g.is(n)))}}function t(a){return function(){var b;return this[a?"getPreviousNode":"getNextNode"]((function(a){return!b&&l(a)&&(b=a),r(a)&&!(o(a)&&a.equals(b))}))}}var n={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1},o=CKEDITOR.dom.walker.bogus(),g=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,r=CKEDITOR.dom.walker.editable(),l=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var a=new CKEDITOR.dom.range(this.root);return a._setStartContainer(this.startContainer),a.startOffset=this.startOffset,a._setEndContainer(this.endContainer),a.endOffset=this.endOffset,a.collapsed=this.collapsed,a},collapse:function(a){a?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(a){var b=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||e(this,2,b,!1,void 0===a||a),b},deleteContents:function(a){this.collapsed||e(this,0,null,a)},extractContents:function(a,b){var t=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||e(this,1,t,a,void 0===b||b),t},createBookmark:function(a){var b,e,t,g,n=this.collapsed;return(b=this.document.createElement("span")).data("cke-bookmark",1),b.setStyle("display","none"),b.setHtml("&nbsp;"),a&&(t="cke_bm_"+CKEDITOR.tools.getNextNumber(),b.setAttribute("id",t+(n?"C":"S"))),n||((e=b.clone()).setHtml("&nbsp;"),a&&e.setAttribute("id",t+"E"),(g=this.clone()).collapse(),g.insertNode(e)),(g=this.clone()).collapse(!0),g.insertNode(b),e?(this.setStartAfter(b),this.setEndBefore(e)):this.moveToPosition(b,CKEDITOR.POSITION_AFTER_END),{startNode:a?t+(n?"C":"S"):b,endNode:a?t+"E":e,serializable:a,collapsed:n}},createBookmark2:function(){function a(b){var g,t=b.container,n=b.offset,o=n;if((g=(g=t).type!=CKEDITOR.NODE_ELEMENT||0===o||o==g.getChildCount()?0:g.getChild(o-1).type==CKEDITOR.NODE_TEXT&&g.getChild(o).type==CKEDITOR.NODE_TEXT)&&(n=(t=t.getChild(n-1)).getLength()),t.type==CKEDITOR.NODE_ELEMENT&&0<n){e:{for(g=t;n--;)if(0<=(o=g.getChild(n).getIndex(!0))){n=o;break e}n=-1}n+=1}if(t.type==CKEDITOR.NODE_TEXT){for(g=t,o=0;(g=g.getPrevious())&&g.type==CKEDITOR.NODE_TEXT;)o+=g.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;g=o,t.getText()?n+=g:(o=t.getPrevious(e),g?(n=g,t=o?o.getNext():t.getParent().getFirst()):(t=t.getParent(),n=o?o.getIndex(!0)+1:0))}b.container=t,b.offset=n}function b(a,e){var t=e.getCustomData("cke-fillingChar");if(t){var n=a.container;t.equals(n)&&(a.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=a.offset&&(a.offset=n.getIndex(),a.container=n.getParent()))}}var e=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(e){var t=this.collapsed,g={container:this.startContainer,offset:this.startOffset},n={container:this.endContainer,offset:this.endOffset};return e&&(a(g),b(g,this.root),t||(a(n),b(n,this.root))),{start:g.container.getAddress(e),end:t?null:n.container.getAddress(e),startOffset:g.offset,endOffset:n.offset,normalized:e,collapsed:t,is2:!0}}}(),moveToBookmark:function(a){if(a.is2){var b=this.document.getByAddress(a.start,a.normalized),e=a.startOffset,t=a.end&&this.document.getByAddress(a.end,a.normalized);a=a.endOffset,this.setStart(b,e),t?this.setEnd(t,a):this.collapse(!0)}else b=(e=a.serializable)?this.document.getById(a.startNode):a.startNode,a=e?this.document.getById(a.endNode):a.endNode,this.setStartBefore(b),b.remove(),a?(this.setEndBefore(a),a.remove()):this.collapse(!0)},getBoundaryNodes:function(){var g,a=this.startContainer,b=this.endContainer,e=this.startOffset,t=this.endOffset;if(a.type==CKEDITOR.NODE_ELEMENT)if((g=a.getChildCount())>e)a=a.getChild(e);else if(1>g)a=a.getPreviousSourceNode();else{for(a=a.$;a.lastChild;)a=a.lastChild;a=(a=new CKEDITOR.dom.node(a)).getNextSourceNode()||a}if(b.type==CKEDITOR.NODE_ELEMENT)if((g=b.getChildCount())>t)b=b.getChild(t).getPreviousSourceNode(!0);else if(1>g)b=b.getPreviousSourceNode();else{for(b=b.$;b.lastChild;)b=b.lastChild;b=new CKEDITOR.dom.node(b)}return a.getPosition(b)&CKEDITOR.POSITION_FOLLOWING&&(a=b),{startNode:a,endNode:b}},getCommonAncestor:function(a,b){var e=this.startContainer,t=this.endContainer;return e=e.equals(t)?a&&e.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?e.getChild(this.startOffset):e:e.getCommonAncestor(t),b&&!e.is?e.getParent():e},optimize:function(){var a=this.startContainer,b=this.startOffset;a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setStartAfter(a):this.setStartBefore(a)),a=this.endContainer,b=this.endOffset,a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setEndAfter(a):this.setEndBefore(a))},optimizeBookmark:function(){var a=this.startContainer,b=this.endContainer;a.is&&a.is("span")&&a.data("cke-bookmark")&&this.setStartAt(a,CKEDITOR.POSITION_BEFORE_START),b&&b.is&&b.is("span")&&b.data("cke-bookmark")&&this.setEndAt(b,CKEDITOR.POSITION_AFTER_END)},trim:function(a,b){var e=this.startContainer,t=this.startOffset,g=this.collapsed;if((!a||g)&&e&&e.type==CKEDITOR.NODE_TEXT){if(t)if(t>=e.getLength())t=e.getIndex()+1,e=e.getParent();else{var n=e.split(t);t=e.getIndex()+1,e=e.getParent(),this.startContainer.equals(this.endContainer)?this.setEnd(n,this.endOffset-this.startOffset):e.equals(this.endContainer)&&(this.endOffset+=1)}else t=e.getIndex(),e=e.getParent();if(this.setStart(e,t),g)return void this.collapse(!0)}e=this.endContainer,t=this.endOffset,b||g||!e||e.type!=CKEDITOR.NODE_TEXT||(t?(t>=e.getLength()||e.split(t),t=e.getIndex()+1):t=e.getIndex(),e=e.getParent(),this.setEnd(e,t))},enlarge:function(a,b){function e(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("contenteditable")?null:a}var t=new RegExp(/[^\s\ufeff]/);switch(a){case CKEDITOR.ENLARGE_INLINE:var g=1;case CKEDITOR.ENLARGE_ELEMENT:var n=function(a,b){var e,n;for((e=new CKEDITOR.dom.range(E)).setStart(a,b),e.setEndAt(E,CKEDITOR.POSITION_BEFORE_END),(e=new CKEDITOR.dom.walker(e)).guard=function(a){return!(a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary())};n=e.next();){if(n.type!=CKEDITOR.NODE_TEXT)return!1;if(f=n!=a?n.getText():n.substring(b),t.test(f))return!1}return!0};if(this.collapsed)break;var o,r,l,c,d,h,f,m=this.getCommonAncestor(),E=this.root,T=!1;h=this.startContainer;var C=this.startOffset;for(h.type==CKEDITOR.NODE_TEXT?(C&&(T=!!(h=!CKEDITOR.tools.trim(h.substring(0,C)).length&&h)),h&&((c=h.getPrevious())||(l=h.getParent()))):(C&&(c=h.getChild(C-1)||h.getLast()),c||(l=h)),l=e(l);l||c;){if(l&&!c){if(!d&&l.equals(m)&&(d=!0),g?l.isBlockBoundary():!E.contains(l))break;T&&"inline"==l.getComputedStyle("display")||(T=!1,d?o=l:this.setStartBefore(l)),c=l.getPrevious()}for(;c;)if(h=!1,c.type==CKEDITOR.NODE_COMMENT)c=c.getPrevious();else{if(c.type==CKEDITOR.NODE_TEXT)f=c.getText(),t.test(f)&&(c=null),h=/[\s\ufeff]$/.test(f);else if((c.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||b&&c.is("br"))&&!c.data("cke-bookmark"))if(T&&CKEDITOR.dtd.$removeEmpty[c.getName()]){if(f=c.getText(),t.test(f))c=null;else{C=c.$.getElementsByTagName("*");for(var I,O=0;I=C[O++];)if(!CKEDITOR.dtd.$removeEmpty[I.nodeName.toLowerCase()]){c=null;break}}c&&(h=!!f.length)}else c=null;if(h&&(T?d?o=l:l&&this.setStartBefore(l):T=!0),c){if(h=c.getPrevious(),!l&&!h){l=c,c=null;break}c=h}else l=null}l&&(l=e(l.getParent()))}for(h=this.endContainer,C=this.endOffset,l=c=null,d=T=!1,h.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(h.substring(C)).length?T=!0:(T=!h.getLength(),C==h.getLength()?(c=h.getNext())||(l=h.getParent()):n(h,C)&&(l=h.getParent())):(c=h.getChild(C))||(l=h);l||c;){if(l&&!c){if(!d&&l.equals(m)&&(d=!0),g?l.isBlockBoundary():!E.contains(l))break;T&&"inline"==l.getComputedStyle("display")||(T=!1,d?r=l:l&&this.setEndAfter(l)),c=l.getNext()}for(;c;){if(h=!1,c.type==CKEDITOR.NODE_TEXT)f=c.getText(),n(c,0)||(c=null),h=/^[\s\ufeff]/.test(f);else if(c.type==CKEDITOR.NODE_ELEMENT){if((0<c.$.offsetWidth||b&&c.is("br"))&&!c.data("cke-bookmark"))if(T&&CKEDITOR.dtd.$removeEmpty[c.getName()]){if(f=c.getText(),t.test(f))c=null;else for(C=c.$.getElementsByTagName("*"),O=0;I=C[O++];)if(!CKEDITOR.dtd.$removeEmpty[I.nodeName.toLowerCase()]){c=null;break}c&&(h=!!f.length)}else c=null}else h=1;if(h&&T&&(d?r=l:this.setEndAfter(l)),c){if(h=c.getNext(),!l&&!h){l=c,c=null;break}c=h}else l=null}l&&(l=e(l.getParent()))}o&&r&&(m=o.contains(r)?r:o,this.setStartBefore(m),this.setEndAfter(m));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:l=new CKEDITOR.dom.range(this.root),E=this.root,l.setStartAt(E,CKEDITOR.POSITION_AFTER_START),l.setEnd(this.startContainer,this.startOffset),l=new CKEDITOR.dom.walker(l);var D,R,v=CKEDITOR.dom.walker.blockBoundary(a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),y=null,K=function(a){if(a.type==CKEDITOR.NODE_ELEMENT&&"false"==a.getAttribute("contenteditable"))if(y){if(y.equals(a))return void(y=null)}else y=a;else if(y)return;var b=v(a);return b||(D=a),b};if(g=function(a){var b=K(a);return!b&&a.is&&a.is("br")&&(R=a),b},l.guard=K,l=l.lastBackward(),D=D||E,this.setStartAt(D,!D.is("br")&&(!l&&this.checkStartOfBlock()||l&&D.contains(l))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){l=this.clone(),l=new CKEDITOR.dom.walker(l);var _=CKEDITOR.dom.walker.whitespaces(),k=CKEDITOR.dom.walker.bookmark();if(l.evaluator=function(a){return!_(a)&&!k(a)},(l=l.previous())&&l.type==CKEDITOR.NODE_ELEMENT&&l.is("br"))break}(l=this.clone()).collapse(),l.setEndAt(E,CKEDITOR.POSITION_BEFORE_END),(l=new CKEDITOR.dom.walker(l)).guard=a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?g:K,D=y=R=null,l=l.lastForward(),D=D||E,this.setEndAt(D,!l&&this.checkEndOfBlock()||l&&D.contains(l)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),R&&this.setEndAfter(R)}},shrink:function(a,b,e){var t="boolean"==typeof e?e:!e||"boolean"!=typeof e.shrinkOnBlockBoundary||e.shrinkOnBlockBoundary,g=e&&e.skipBogus;if(!this.collapsed){a=a||CKEDITOR.SHRINK_TEXT;var n=this.clone(),o=this.startContainer,r=this.endContainer,l=this.startOffset,c=this.endOffset,d=e=1;o&&o.type==CKEDITOR.NODE_TEXT&&(l?l>=o.getLength()?n.setStartAfter(o):(n.setStartBefore(o),e=0):n.setStartBefore(o)),r&&r.type==CKEDITOR.NODE_TEXT&&(c?c>=r.getLength()?n.setEndAfter(r):(n.setEndAfter(r),d=0):n.setEndBefore(r)),n=new CKEDITOR.dom.walker(n);var h,f=CKEDITOR.dom.walker.bookmark(),m=CKEDITOR.dom.walker.bogus();return n.evaluator=function(b){return b.type==(a==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)},n.guard=function(b,e){return!!(g&&m(b)||f(b))||!(a==CKEDITOR.SHRINK_ELEMENT&&b.type==CKEDITOR.NODE_TEXT||e&&b.equals(h)||!1===t&&b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary()||b.type==CKEDITOR.NODE_ELEMENT&&b.hasAttribute("contenteditable"))&&(e||b.type!=CKEDITOR.NODE_ELEMENT||(h=b),!0)},e&&(o=n[a==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(o,b?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),d&&(n.reset(),(n=n[a==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(n,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!e&&!d)}},insertNode:function(a){this.optimizeBookmark(),this.trim(!1,!0);var b=this.startContainer,e=b.getChild(this.startOffset);e?a.insertBefore(e):b.append(a),a.getParent()&&a.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(a)},moveToPosition:function(a,b){this.setStartAt(a,b),this.collapse(!0)},moveToRange:function(a){this.setStart(a.startContainer,a.startOffset),this.setEnd(a.endContainer,a.endOffset)},selectNodeContents:function(a){this.setStart(a,0),this.setEnd(a,a.type==CKEDITOR.NODE_TEXT?a.getLength():a.getChildCount())},setStart:function(b,e){b.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[b.getName()]&&(e=b.getIndex(),b=b.getParent()),this._setStartContainer(b),this.startOffset=e,this.endContainer||(this._setEndContainer(b),this.endOffset=e),a(this)},setEnd:function(b,e){b.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[b.getName()]&&(e=b.getIndex()+1,b=b.getParent()),this._setEndContainer(b),this.endOffset=e,this.startContainer||(this._setStartContainer(b),this.startOffset=e),a(this)},setStartAfter:function(a){this.setStart(a.getParent(),a.getIndex()+1)},setStartBefore:function(a){this.setStart(a.getParent(),a.getIndex())},setEndAfter:function(a){this.setEnd(a.getParent(),a.getIndex()+1)},setEndBefore:function(a){this.setEnd(a.getParent(),a.getIndex())},setStartAt:function(b,e){switch(e){case CKEDITOR.POSITION_AFTER_START:this.setStart(b,0);break;case CKEDITOR.POSITION_BEFORE_END:b.type==CKEDITOR.NODE_TEXT?this.setStart(b,b.getLength()):this.setStart(b,b.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(b);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(b)}a(this)},setEndAt:function(b,e){switch(e){case CKEDITOR.POSITION_AFTER_START:this.setEnd(b,0);break;case CKEDITOR.POSITION_BEFORE_END:b.type==CKEDITOR.NODE_TEXT?this.setEnd(b,b.getLength()):this.setEnd(b,b.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(b);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(b)}a(this)},fixBlock:function(a,b){var e=this.createBookmark(),t=this.document.createElement(b);this.collapse(a),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(t),t.trim(),this.insertNode(t);var g=t.getBogus();return g&&g.remove(),t.appendBogus(),this.moveToBookmark(e),t},splitBlock:function(a,b){var e=new CKEDITOR.dom.elementPath(this.startContainer,this.root),t=new CKEDITOR.dom.elementPath(this.endContainer,this.root),g=e.block,n=t.block,o=null;return e.blockLimit.equals(t.blockLimit)?("br"!=a&&(g||(g=this.fixBlock(!0,a),n=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),n||(n=this.fixBlock(!1,a))),e=g&&this.checkStartOfBlock(),t=n&&this.checkEndOfBlock(),this.deleteContents(),g&&g.equals(n)&&(t?(o=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(n,CKEDITOR.POSITION_AFTER_END),n=null):e?(o=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(g,CKEDITOR.POSITION_BEFORE_START),g=null):(n=this.splitElement(g,b||!1),g.is("ul","ol")||g.appendBogus())),{previousBlock:g,nextBlock:n,wasStartOfBlock:e,wasEndOfBlock:t,elementPath:o}):null},splitElement:function(a,b){if(!this.collapsed)return null;this.setEndAt(a,CKEDITOR.POSITION_BEFORE_END);var e=this.extractContents(!1,b||!1),t=a.clone(!1,b||!1);return e.appendTo(t),t.insertAfter(a),this.moveToPosition(a,CKEDITOR.POSITION_AFTER_END),t},removeEmptyBlocksAtEnd:function(){function a(t){return function(a){return!(b(a)||e(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.isEmptyInlineRemoveable()||t.is("table")&&a.is("caption"))}}var b=CKEDITOR.dom.walker.whitespaces(),e=CKEDITOR.dom.walker.bookmark(!1);return function(b){for(var e,t=this.createBookmark(),n=this[b?"endPath":"startPath"](),g=n.block||n.blockLimit;g&&!g.equals(n.root)&&!g.getFirst(a(g));)e=g.getParent(),this[b?"setEndAt":"setStartAt"](g,CKEDITOR.POSITION_AFTER_END),g.remove(1),g=e;this.moveToBookmark(t)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(a,b){var e=b==CKEDITOR.START,g=this.clone();return g.collapse(e),g[e?"setStartAt":"setEndAt"](a,e?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),(g=new CKEDITOR.dom.walker(g)).evaluator=function(a){var b=CKEDITOR.dom.walker.whitespaces(),e=CKEDITOR.dom.walker.bookmark(1);return function(t){return!(!e(t)&&!b(t))||!a&&o(t)||t.type==CKEDITOR.NODE_ELEMENT&&t.is(CKEDITOR.dtd.$removeEmpty)}}(e),g[e?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var a=this.startContainer,e=this.startOffset;return CKEDITOR.env.ie&&e&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.ltrim(a.substring(0,e)),g.test(a)&&this.trim(0,1)),this.trim(),a=new CKEDITOR.dom.elementPath(this.startContainer,this.root),(e=this.clone()).collapse(!0),e.setStartAt(a.block||a.blockLimit,CKEDITOR.POSITION_AFTER_START),(a=new CKEDITOR.dom.walker(e)).evaluator=b(),a.checkBackward()},checkEndOfBlock:function(){var a=this.endContainer,e=this.endOffset;return CKEDITOR.env.ie&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.rtrim(a.substring(e)),g.test(a)&&this.trim(1,0)),this.trim(),a=new CKEDITOR.dom.elementPath(this.endContainer,this.root),(e=this.clone()).collapse(!1),e.setEndAt(a.block||a.blockLimit,CKEDITOR.POSITION_BEFORE_END),(a=new CKEDITOR.dom.walker(e)).evaluator=b(),a.checkForward()},getPreviousNode:function(a,b,e){var t=this.clone();return t.collapse(1),t.setStartAt(e||this.root,CKEDITOR.POSITION_AFTER_START),(e=new CKEDITOR.dom.walker(t)).evaluator=a,e.guard=b,e.previous()},getNextNode:function(a,b,e){var t=this.clone();return t.collapse(),t.setEndAt(e||this.root,CKEDITOR.POSITION_BEFORE_END),(e=new CKEDITOR.dom.walker(t)).evaluator=a,e.guard=b,e.next()},checkReadOnly:function(){function a(b,e){for(;b;){if(b.type==CKEDITOR.NODE_ELEMENT){if("false"==b.getAttribute("contentEditable")&&!b.data("cke-editable"))return 0;if(b.is("html")||"true"==b.getAttribute("contentEditable")&&(b.contains(e)||b.equals(e)))break}b=b.getParent()}return 1}return function(){var b=this.startContainer,e=this.endContainer;return!(a(b,e)&&a(e,b))}}(),moveToElementEditablePosition:function(a,b){if(a.type==CKEDITOR.NODE_ELEMENT&&!a.isEditable(!1))return this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var e=0;a;){if(a.type==CKEDITOR.NODE_TEXT){b&&this.endContainer&&this.checkEndOfBlock()&&g.test(a.getText())?this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),e=1;break}if(a.type==CKEDITOR.NODE_ELEMENT)if(a.isEditable())this.moveToPosition(a,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),e=1;else if(b&&a.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START);else if("false"==a.getAttribute("contenteditable")&&a.is(CKEDITOR.dtd.$block))return this.setStartBefore(a),this.setEndAfter(a),!0;var t=a,n=e,o=void 0;t.type==CKEDITOR.NODE_ELEMENT&&t.isEditable(!1)&&(o=t[b?"getLast":"getFirst"](l)),n||o||(o=t[b?"getPrevious":"getNext"](l)),a=o}return!!e},moveToClosestEditablePosition:function(a,b){var e,g,t,n=0,o=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];return a?(e=new CKEDITOR.dom.range(this.root)).moveToPosition(a,o[b?0:1]):e=this.clone(),a&&!a.is(CKEDITOR.dtd.$block)?n=1:(g=e[b?"getNextEditableNode":"getPreviousEditableNode"]())&&(n=1,(t=g.type==CKEDITOR.NODE_ELEMENT)&&g.is(CKEDITOR.dtd.$block)&&"false"==g.getAttribute("contenteditable")?(e.setStartAt(g,CKEDITOR.POSITION_BEFORE_START),e.setEndAt(g,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&t&&g.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(e.setEnd(g,0),e.collapse()):e.moveToPosition(g,o[b?1:0])),n&&this.moveToRange(e),!!n},moveToElementEditStart:function(a){return this.moveToElementEditablePosition(a)},moveToElementEditEnd:function(a){return this.moveToElementEditablePosition(a,!0)},getEnclosedNode:function(){if((a=this.clone()).optimize(),a.startContainer.type!=CKEDITOR.NODE_ELEMENT||a.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var a=new CKEDITOR.dom.walker(a),b=CKEDITOR.dom.walker.bookmark(!1,!0),e=CKEDITOR.dom.walker.whitespaces(!0);a.evaluator=function(a){return e(a)&&b(a)};var t=a.next();return a.reset(),t&&t.equals(a.previous())?t:null},getTouchedStartNode:function(){var a=this.startContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.startOffset)||a},getTouchedEndNode:function(){var a=this.endContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.endOffset-1)||a},getNextEditableNode:t(),getPreviousEditableNode:t(1),_getTableElement:function(a){a=a||{td:1,th:1,tr:1,tbody:1,thead:1,tfoot:1,table:1};var b=this.startContainer,e=this.endContainer,t=b.getAscendant("table",!0),g=e.getAscendant("table",!0);return t&&!this.root.contains(t)?null:CKEDITOR.env.safari&&t&&e.equals(this.root)?b.getAscendant(a,!0):this.getEnclosedNode()?this.getEnclosedNode().getAscendant(a,!0):t&&g&&(t.equals(g)||t.contains(g)||g.contains(t))?b.getAscendant(a,!0):null},scrollIntoView:function(){var b,e,t,a=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),g=this.clone();g.optimize(),(t=g.startContainer.type==CKEDITOR.NODE_TEXT)?(e=g.startContainer.getText(),b=g.startContainer.split(g.startOffset),a.insertAfter(g.startContainer)):g.insertNode(a),a.scrollIntoView(),t&&(g.startContainer.setText(e),b.remove()),a.remove()},getClientRects:function(){function b(a,e,n){var g;return e.collapsed?n.startContainer instanceof CKEDITOR.dom.element?(a=n.checkStartOfBlock(),g=new CKEDITOR.dom.text("​"),a?n.startContainer.append(g,!0):0===n.startOffset?g.insertBefore(n.startContainer.getFirst()):(n=n.startContainer.getChildren().getItem(n.startOffset-1),g.insertAfter(n)),e.setStart(g.$,0),e.setEnd(g.$,0),a=e.getClientRects(),g.remove()):n.startContainer instanceof CKEDITOR.dom.text&&(""===n.startContainer.getText()?(n.startContainer.setText("​"),a=e.getClientRects(),n.startContainer.setText("")):a=[t(n.createBookmark())]):a=[t(n.createBookmark())],a}function e(a,b,e){return a=CKEDITOR.tools.extend({},a),b&&(a=CKEDITOR.tools.getAbsoluteRectPosition(e.document.getWindow(),a)),!a.width&&(a.width=a.right-a.left),!a.height&&(a.height=a.bottom-a.top),a}function t(a){var e,b=a.startNode;return a=a.endNode,b.setText("​"),b.removeStyle("display"),a?(a.setText("​"),a.removeStyle("display"),e=[b.getClientRect(),a.getClientRect()],a.remove()):e=[b.getClientRect(),b.getClientRect()],b.remove(),{right:Math.max(e[0].right,e[1].right),bottom:Math.max(e[0].bottom,e[1].bottom),left:Math.min(e[0].left,e[1].left),top:Math.min(e[0].top,e[1].top),width:Math.abs(e[0].left-e[1].left),height:Math.max(e[0].bottom,e[1].bottom)-Math.min(e[0].top,e[1].top)}}return void 0!==this.document.getSelection?function(t){var n,g=this.root.getDocument().$.createRange();return g.setStart(this.startContainer.$,this.startOffset),g.setEnd(this.endContainer.$,this.endOffset),(n=function(b,e){var g,t,n,o=CKEDITOR.tools.array.map(b,(function(a){return a})),r=new CKEDITOR.dom.range(e.root);if(e.startContainer instanceof CKEDITOR.dom.element&&(t=0===e.startOffset&&e.startContainer.hasAttribute("data-widget")),e.endContainer instanceof CKEDITOR.dom.element&&(n=(n=e.endOffset===(e.endContainer.getChildCount?e.endContainer.getChildCount():e.endContainer.length))&&e.endContainer.hasAttribute("data-widget")),t&&r.setStart(e.startContainer.getParent(),e.startContainer.getIndex()),n&&r.setEnd(e.endContainer.getParent(),e.endContainer.getIndex()+1),(t||n)&&(e=r),r=e.cloneContents().find("[data-cke-widget-id]").toArray(),r=CKEDITOR.tools.array.map(r,(function(a){var b=e.root.editor;return a=a.getAttribute("data-cke-widget-id"),b.widgets.instances[a].element})))return r=CKEDITOR.tools.array.map(r,(function(a){var b;return b=a.getParent().hasClass("cke_widget_wrapper")?a.getParent():a,(g=this.root.getDocument().$.createRange()).setStart(b.getParent().$,b.getIndex()),g.setEnd(b.getParent().$,b.getIndex()+1),(b=g.getClientRects()).widgetRect=a.getClientRect(),b}),e),CKEDITOR.tools.array.forEach(r,(function(a){var e;!function b(t){CKEDITOR.tools.array.forEach(o,(function(b,g){var n=CKEDITOR.tools.objectCompare(a[t],b);n||(n=CKEDITOR.tools.objectCompare(a.widgetRect,b)),n&&(Array.prototype.splice.call(o,g,a.length-t,a.widgetRect),e=!0)})),e||(t<o.length-1?b(t+1):o.push(a.widgetRect))}(0)})),o}(n=g.getClientRects(),this)).length||(n=b(n,g,this)),CKEDITOR.tools.array.map(n,(function(a){return e(a,t,this)}),this)}:function(a){return[e(t(this.createBookmark()),a,this)]}}(),_setStartContainer:function(a){this.startContainer=a},_setEndContainer:function(a){this.endContainer=a},_find:function(a,b){var e,t,n,o,r=this.getCommonAncestor(),l=this.getBoundaryNodes(),g=[];if(r&&r.find)for(t=r.find(a),e=0;e<t.count();e++)r=t.getItem(e),(b||!r.isReadOnly())&&(n=r.getPosition(l.startNode)&CKEDITOR.POSITION_FOLLOWING||l.startNode.equals(r),o=r.getPosition(l.endNode)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IS_CONTAINED||l.endNode.equals(r),n&&o&&g.push(r));return g}},CKEDITOR.dom.range.mergeRanges=function(a){return CKEDITOR.tools.array.reduce(a,(function(a,b){var e=a[a.length-1],t=!1;if((b=b.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),e){var n=new CKEDITOR.dom.range(b.root),g=(t=new CKEDITOR.dom.walker(n),CKEDITOR.dom.walker.whitespaces());for(n.setStart(e.endContainer,e.endOffset),n.setEnd(b.startContainer,b.startOffset),n=t.next();g(n)||b.endContainer.equals(n);)n=t.next();t=!n}return t?e.setEnd(b.endContainer,b.endOffset):a.push(b),a}),[])}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function a(a){1>arguments.length||(this.range=a,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function b(a,e,t,g){e:{null==g&&(g=function(a){var b=[];return a.forEach((function(a){if("true"==a.getAttribute("contenteditable"))return b.push(a),!1}),CKEDITOR.NODE_ELEMENT,!0),b}(t));for(var n;n=g.shift();)if(n.getDtd().p){g={element:n,remaining:g};break e}g=null}return g?(n=CKEDITOR.filter.instances[g.element.data("cke-filter")])&&!n.check(e)?b(a,e,t,g.remaining):((e=new CKEDITOR.dom.range(g.element)).selectNodeContents(g.element),(e=e.createIterator()).enlargeBr=a.enlargeBr,e.enforceRealBlocks=a.enforceRealBlocks,e.activeFilter=e.filter=n,a._.nestedEditable={element:g.element,container:t,remaining:g.remaining,iterator:e},1):0}function e(a,b,e){return!!b&&((a=a.clone()).collapse(!e),a.checkBoundaryOfElement(b,e?CKEDITOR.START:CKEDITOR.END))}var t=/^[\r\n\t ]+$/,n=CKEDITOR.dom.walker.bookmark(!1,!0),o=CKEDITOR.dom.walker.whitespaces(!0),g=function(a){return n(a)&&o(a)},r={dd:1,dt:1,li:1};a.prototype={getNextParagraph:function(a){var o,l,c,d,u;if(a=a||"p",this._.nestedEditable){if(o=this._.nestedEditable.iterator.getNextParagraph(a))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,o;if(this.activeFilter=this.filter,b(this,a,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(a);this._.nestedEditable=null}if(!this.range.root.getDtd()[a])return null;if(!this._.started){var p=this.range.clone();l=p.startPath();var h=p.endPath(),f=!p.collapsed&&e(p,l.block),m=!p.collapsed&&e(p,h.block,1);p.shrink(CKEDITOR.SHRINK_ELEMENT,!0),f&&p.setStartAt(l.block,CKEDITOR.POSITION_BEFORE_END),m&&p.setEndAt(h.block,CKEDITOR.POSITION_AFTER_START),l=p.endContainer.hasAscendant("pre",!0)||p.startContainer.hasAscendant("pre",!0),p.enlarge(this.forceBrBreak&&!l||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),p.collapsed||(l=new CKEDITOR.dom.walker(p.clone()),h=CKEDITOR.dom.walker.bookmark(!0,!0),l.evaluator=h,this._.nextNode=l.next(),(l=new CKEDITOR.dom.walker(p.clone())).evaluator=h,l=l.previous(),this._.lastNode=l.getNextSourceNode(!0,null,p.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&((h=this.range.clone()).moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),h.checkEndOfBlock()&&(h=new CKEDITOR.dom.elementPath(h.endContainer,h.root),this._.lastNode=(h.block||h.blockLimit).getNextSourceNode(!0))),this._.lastNode&&p.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=p.document.createText(""),this._.lastNode.insertAfter(l)),p=null),this._.started=1,l=p}for(h=this._.nextNode,p=this._.lastNode,this._.nextNode=null;h;){f=0,m=h.hasAscendant("pre");var E=h.type!=CKEDITOR.NODE_ELEMENT,T=0;if(E)h.type==CKEDITOR.NODE_TEXT&&t.test(h.getText())&&(E=0);else{var C=h.getName();if(CKEDITOR.dtd.$block[C]&&"false"==h.getAttribute("contenteditable")){b(this,a,o=h);break}if(h.isBlockBoundary(this.forceBrBreak&&!m&&{br:1})){if("br"==C)E=1;else if(!l&&!h.getChildCount()&&"hr"!=C){o=h,c=h.equals(p);break}l&&(l.setEndAt(h,CKEDITOR.POSITION_BEFORE_START),"br"!=C&&(this._.nextNode=h)),f=1}else{if(h.getFirst()){l||(l=this.range.clone()).setStartAt(h,CKEDITOR.POSITION_BEFORE_START),h=h.getFirst();continue}E=1}}if(E&&!l&&(l=this.range.clone()).setStartAt(h,CKEDITOR.POSITION_BEFORE_START),c=(!f||E)&&h.equals(p),l&&!f)for(;!h.getNext(g)&&!c;){if((C=h.getParent()).isBlockBoundary(this.forceBrBreak&&!m&&{br:1})){f=1,E=0,c||C.equals(p),l.setEndAt(C,CKEDITOR.POSITION_BEFORE_END);break}E=1,c=(h=C).equals(p),T=1}if(E&&l.setEndAt(h,CKEDITOR.POSITION_AFTER_END),(c=!(h=this._getNextSourceNode(h,T,p)))||f&&l)break}if(!o){if(!l)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;h=(o=new CKEDITOR.dom.elementPath(l.startContainer,l.root)).blockLimit,f={div:1,th:1,td:1},!(o=o.block)&&h&&!this.enforceRealBlocks&&f[h.getName()]&&l.checkStartOfBlock()&&l.checkEndOfBlock()&&!h.equals(l.root)?o=h:!o||this.enforceRealBlocks&&o.is(r)?(o=this.range.document.createElement(a),l.extractContents().appendTo(o),o.trim(),l.insertNode(o),d=u=!0):"li"!=o.getName()?l.checkStartOfBlock()&&l.checkEndOfBlock()||(o=o.clone(!1),l.extractContents().appendTo(o),o.trim(),d=!(u=l.splitBlock()).wasStartOfBlock,u=!u.wasEndOfBlock,l.insertNode(o)):c||(this._.nextNode=o.equals(p)?null:this._getNextSourceNode(l.getBoundaryNodes().endNode,1,p))}return d&&(d=o.getPrevious())&&d.type==CKEDITOR.NODE_ELEMENT&&("br"==d.getName()?d.remove():d.getLast()&&"br"==d.getLast().$.nodeName.toLowerCase()&&d.getLast().remove()),u&&(d=o.getLast())&&d.type==CKEDITOR.NODE_ELEMENT&&"br"==d.getName()&&(!CKEDITOR.env.needsBrFiller||d.getPrevious(n)||d.getNext(n))&&d.remove(),this._.nextNode||(this._.nextNode=c||o.equals(p)||!p?null:this._getNextSourceNode(o,1,p)),o},_getNextSourceNode:function(a,b,e){function t(a){return!(a.equals(e)||a.equals(g))}var g=this.range.root;for(a=a.getNextSourceNode(b,null,t);!n(a);)a=a.getNextSourceNode(b,null,t);return a}},CKEDITOR.dom.range.prototype.createIterator=function(){return new a(this)}}(),CKEDITOR.command=function(a,e){var b;this.uiItems=[],this.exec=function(b){return!(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())&&(this.editorFocus&&a.focus(),!1===this.fire("exec")||!1!==e.exec.call(this,a,b))},this.refresh=function(a,b){return!(this.readOnly||!a.readOnly)||(this.context&&!b.isContextFor(this.context)||!this.checkAllowed(!0)?(this.disable(),!0):(this.startDisabled||this.enable(),this.modes&&!this.modes[a.mode]&&this.disable(),!1===this.fire("refresh",{editor:a,path:b})||e.refresh&&!1!==e.refresh.apply(this,arguments)))},this.checkAllowed=function(e){return e||"boolean"!=typeof b?b=a.activeFilter.checkFeature(this):b},CKEDITOR.tools.extend(this,e,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!e.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&void 0!==this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(a){return!(this.state==a||a!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()||(this.previousState=this.state,this.state=a,this.fire("state"),0))},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function a(a,b,e,t,n){var g,o,l;for(g in a=[],b){o="boolean"==typeof(o=b[g])?{}:"function"==typeof o?{match:o}:_(o),"$"!=g.charAt(0)&&(o.elements=g),e&&(o.featureName=e.toLowerCase());var c=o;c.elements=r(c.elements,/\s+/)||null,c.propertiesOnly=c.propertiesOnly||!0===c.elements;var d=/\s*,\s*/,h=void 0;for(h in N){c[h]=r(c[h],d)||null;var f=c,m=x[h],T=r(c[x[h]],d),C=c[h],I=[],O=!0,D=void 0;for(D in T?O=!1:T={},C)"!"==D.charAt(0)&&(D=D.slice(1),I.push(D),T[D]=!0,O=!1);for(;D=I.pop();)C[D]=C["!"+D],delete C["!"+D];f[m]=!O&&T||null}c.match=c.match||null,t.push(o),a.push(o)}for(b=n.elements,n=n.generic,e=0,t=a.length;e<t;++e){for(d in o=!0===(g=_(a[e])).classes||!0===g.styles||!0===g.attributes,c=g,h=m=d=void 0,N)c[d]=E(c[d]);for(h in f=!0,x){for(C in T=[],C=void 0,m=c[d=x[h]])-1<C.indexOf("*")?T.push(new RegExp("^"+C.replace(/\*/g,".*")+"$")):T.push(C);(m=T).length&&(c[d]=m,f=!1)}if(c.nothingRequired=f,c.noProperties=!(c.attributes||c.classes||c.styles),!0===g.elements||null===g.elements)n[o?"unshift":"push"](g);else for(l in c=g.elements,delete g.elements,c)b[l]?b[l][o?"unshift":"push"](g):b[l]=[g]}}function e(a,e,t,n){if((!a.match||a.match(e))&&(n||g(a,e))&&(a.propertiesOnly||(t.valid=!0),t.allAttributes||(t.allAttributes=b(a.attributes,e.attributes,t.validAttributes)),t.allStyles||(t.allStyles=b(a.styles,e.styles,t.validStyles)),!t.allClasses)){if(a=a.classes,e=e.classes,n=t.validClasses,a)if(!0===a)a=!0;else{for(var o,r=0,l=e.length;r<l;++r)n[o=e[r]]||(n[o]=a(o));a=!1}else a=!1;t.allClasses=a}}function b(a,b,e){if(!a)return!1;if(!0===a)return!0;for(var t in b)e[t]||(e[t]=a(t));return!1}function t(a,b,e){if(!a.match||a.match(b)){if(a.noProperties)return!1;if(e.hadInvalidAttribute=n(a.attributes,b.attributes)||e.hadInvalidAttribute,e.hadInvalidStyle=n(a.styles,b.styles)||e.hadInvalidStyle,a=a.classes,b=b.classes,a){for(var t=!1,g=!0===a,o=b.length;o--;)(g||a(b[o]))&&(b.splice(o,1),t=!0);a=t}else a=!1;e.hadInvalidClass=a||e.hadInvalidClass}}function n(a,b){if(!a)return!1;var e,t=!1,n=!0===a;for(e in b)(n||a(e))&&(delete b[e],t=!0);return t}function o(a,b,e){return!(a.disabled||a.customConfig&&!e||!b||(a._.cachedChecks={},0))}function r(a,b){if(!a)return!1;if(!0===a)return a;if("string"==typeof a)return"*"==(a=k(a))||CKEDITOR.tools.convertArrayToObject(a.split(b));if(CKEDITOR.tools.isArray(a))return!!a.length&&CKEDITOR.tools.convertArrayToObject(a);var e,t={},n=0;for(e in a)t[e]=a[e],n++;return!!n&&t}function g(a,b){if(a.nothingRequired)return!0;var e,t,n,g;if(n=a.requiredClasses)for(g=b.classes,e=0;e<n.length;++e)if("string"==typeof(t=n[e])){if(-1==CKEDITOR.tools.indexOf(g,t))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(g,t))return!1;return l(b.styles,a.requiredStyles)&&l(b.attributes,a.requiredAttributes)}function l(a,b){if(!b)return!0;for(var e,t=0;t<b.length;++t)if("string"==typeof(e=b[t])){if(!(e in a))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(a,e))return!1;return!0}function c(a){if(!a)return{};a=a.split(/\s*,\s*/).sort();for(var b={};a.length;)b[a.shift()]="cke-test";return b}function d(a){var b,e,t,n,g={},o=1;for(a=k(a);b=a.match(A);)(e=b[2])?(t=h(e,"styles"),n=h(e,"attrs"),e=h(e,"classes")):t=n=e=null,g["$"+o++]={elements:b[1],classes:e,styles:t,attributes:n},a=a.slice(b[0].length);return g}function h(a,b){var e=a.match(L[b]);return e?k(e[1]):null}function q(a){var b=a.styleBackup=a.attributes.style,e=a.classBackup=a.attributes.class;a.styles||(a.styles=CKEDITOR.tools.parseCssText(b||"",1)),a.classes||(a.classes=e?e.split(/\s+/):[])}function f(a,b,n,o){var r,g=0;if(o.toHtml&&(b.name=b.name.replace(F,"$1")),o.doCallbacks&&a.elementCallbacks){e:{for(var l,c=0,d=(r=a.elementCallbacks).length;c<d;++c)if(l=r[c](b)){r=l;break e}r=void 0}if(r)return r}if(o.doTransform&&(r=a._.transformations[b.name])){for(q(b),c=0;c<r.length;++c)O(a,b,r[c]);p(b)}if(o.doFilter){e:{c=b.name,a=(d=a._).allowedRules.elements[c],r=d.allowedRules.generic,c=d.disallowedRules.elements[c],d=d.disallowedRules.generic,l=o.skipRequired;var h,f,E={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1};if(a||r){if(q(b),c)for(h=0,f=c.length;h<f;++h)if(!1===t(c[h],b,E)){a=null;break e}if(d)for(h=0,f=d.length;h<f;++h)t(d[h],b,E);if(a)for(h=0,f=a.length;h<f;++h)e(a[h],b,E,l);if(r)for(h=0,f=r.length;h<f;++h)e(r[h],b,E,l);a=E}else a=null}if(!a||!a.valid)return n.push(b),1;f=a.validAttributes;var T=a.validStyles;r=a.validClasses,c=b.attributes;var C=b.styles;d=b.classes,l=b.classBackup;var I,D,R=b.styleBackup,v=[],y=(E=[],/^data-cke-/);if(h=!1,delete c.style,delete c.class,delete b.classBackup,delete b.styleBackup,!a.allAttributes)for(I in c)f[I]||y.test(I)&&(I==(D=I.replace(/^data-cke-saved-/,""))||f[D])||(delete c[I],h=!0);if(!a.allStyles||a.hadInvalidStyle){for(I in C)a.allStyles||T[I]?v.push(I+":"+C[I]):h=!0;v.length&&(c.style=v.sort().join("; "))}else R&&(c.style=R);if(!a.allClasses||a.hadInvalidClass){for(I=0;I<d.length;++I)(a.allClasses||r[d[I]])&&E.push(d[I]);E.length&&(c.class=E.sort().join(" ")),l&&E.length<l.split(/\s+/).length&&(h=!0)}else l&&(c.class=l);if(h&&(g=1),!o.skipFinalValidation&&!m(b))return n.push(b),1}return o.toHtml&&(b.name=b.name.replace(P,"cke:$1")),g}function p(a){var e,b=a.attributes;delete b.style,delete b.class,(e=CKEDITOR.tools.writeCssText(a.styles,!0))&&(b.style=e),a.classes.length&&(b.class=a.classes.sort().join(" "))}function m(a){switch(a.name){case"a":if(!(a.children.length||a.attributes.name||a.attributes.id))return!1;break;case"img":if(!a.attributes.src)return!1}return!0}function E(a){if(!a)return!1;if(!0===a)return!0;var b=function(a){var e,b=[];for(e in a)-1<e.indexOf("*")&&b.push(e.replace(/\*/g,".*"));return b.length?new RegExp("^(?:"+b.join("|")+")$"):null}(a);return function(e){return e in a||b&&e.match(b)}}function T(){return new CKEDITOR.htmlParser.element("br")}function C(a){return a.type==CKEDITOR.NODE_ELEMENT&&("br"==a.name||K.$block[a.name])}function I(a,b,e){var t=a.name;if(K.$empty[t]||!a.children.length)"hr"==t&&"br"==b?a.replaceWith(T()):(a.parent&&e.push({check:"it",el:a.parent}),a.remove());else if(K.$block[t]||"tr"==t)if("br"==b)a.previous&&!C(a.previous)&&(b=T()).insertBefore(a),a.next&&!C(a.next)&&(b=T()).insertAfter(a),a.replaceWithChildren();else{var n;t=a.children;e:{n=K[b];for(var o,g=0,r=t.length;g<r;++g)if((o=t[g]).type==CKEDITOR.NODE_ELEMENT&&!n[o.name]){n=!1;break e}n=!0}if(n)a.name=b,a.attributes={},e.push({check:"parent-down",el:a});else{var l,c;for(g=(n=a.parent).type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==n.name,r=t.length;0<r;)o=t[--r],g&&(o.type==CKEDITOR.NODE_TEXT||o.type==CKEDITOR.NODE_ELEMENT&&K.$inline[o.name])?(l||((l=new CKEDITOR.htmlParser.element(b)).insertAfter(a),e.push({check:"parent-down",el:l})),l.add(o,0)):(l=null,c=K[n.name]||K.span,o.insertAfter(a),n.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||o.type!=CKEDITOR.NODE_ELEMENT||c[o.name]||e.push({check:"el-up",el:o}));a.remove()}}else t in{style:1,script:1}?a.remove():(a.parent&&e.push({check:"it",el:a.parent}),a.replaceWithChildren())}function O(a,b,e){var t,n;for(t=0;t<e.length;++t)if(!((n=e[t]).check&&!a.check(n.check,!1)||n.left&&!n.left(b))){n.right(b,S);break}}function D(a,b){var g,e,t,n,o=b.getDefinition(),r=o.attributes,l=o.styles;if(a.name!=o.element)return!1;for(g in r)if("class"==g){for(o=r[g].split(/\s+/),t=a.classes.join("|");n=o.pop();)if(-1==t.indexOf(n))return!1}else if(a.attributes[g]!=r[g])return!1;for(e in l)if(a.styles[e]!=l[e])return!1;return!0}function R(a,b){var e,t;return"string"==typeof a?e=a:a instanceof CKEDITOR.style?t=a:(e=a[0],t=a[1]),[{element:e,left:t,right:function(a,e){e.transform(a,b)}}]}function v(a){return function(b){return D(b,a)}}function y(a){return function(b,e){e[a](b)}}var K=CKEDITOR.dtd,_=CKEDITOR.tools.copy,k=CKEDITOR.tools.trim,w=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2,CKEDITOR.filter=function(a,b){this.allowedContent=[],this.disallowedContent=[],this.elementCallbacks=null,this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{},cachedChecks:{}},CKEDITOR.filter.instances[this.id]=this;var e=this.editor=a instanceof CKEDITOR.editor?a:null;if(e&&!b){this.customConfig=!0;var t=e.config.allowedContent;!0===t?this.disabled=!0:(t||(this.customConfig=!1),this.allow(t,"config",1),this.allow(e.config.extraAllowedContent,"extra",1),this.allow(w[e.enterMode]+" "+w[e.shiftEnterMode],"default",1),this.disallow(e.config.disallowedContent))}else this.customConfig=!1,this.allow(b||a,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(b,e,t){if(!o(this,b,t))return!1;var g,n;if("string"==typeof b)b=d(b);else if(b instanceof CKEDITOR.style){if(b.toAllowedContentRules)return this.allow(b.toAllowedContentRules(this.editor),e,t);g=b.getDefinition(),b={},t=g.attributes,b[g.element]=g={styles:g.styles,requiredStyles:g.styles&&CKEDITOR.tools.object.keys(g.styles)},t&&(t=_(t),g.classes=t.class?t.class.split(/\s+/):null,g.requiredClasses=g.classes,delete t.class,g.attributes=t,g.requiredAttributes=t&&CKEDITOR.tools.object.keys(t))}else if(CKEDITOR.tools.isArray(b)){for(g=0;g<b.length;++g)n=this.allow(b[g],e,t);return n}return a(this,b,e,this.allowedContent,this._.allowedRules),!0},applyTo:function(a,b,e,t){if(this.disabled)return!1;var n,o,r,l=this,g=[],c=this.editor&&this.editor.config.protectedSource,d=!1,h={doFilter:!e,doTransform:!0,doCallbacks:!0,toHtml:b};for(a.forEach((function(a){if(a.type==CKEDITOR.NODE_ELEMENT){if("off"==a.attributes["data-cke-filter"])return!1;if(!b||"span"!=a.name||!~CKEDITOR.tools.object.keys(a.attributes).join("|").indexOf("data-cke-"))if(1&(n=f(l,a,g,h)))d=!0;else if(2&n)return!1}else if(a.type==CKEDITOR.NODE_COMMENT&&a.value.match(/^\{cke_protected\}(?!\{C\})/)){var e;e:{var t,o,r,m=decodeURIComponent(a.value.replace(/^\{cke_protected\}/,""));if(e=[],c)for(o=0;o<c.length;++o)if((r=m.match(c[o]))&&r[0].length==m.length){e=!0;break e}1==(m=CKEDITOR.htmlParser.fragment.fromHtml(m)).children.length&&(t=m.children[0]).type==CKEDITOR.NODE_ELEMENT&&f(l,t,e,h),e=!e.length}e||g.push(a)}}),null,!0),g.length&&(d=!0),a=[],t=w[t||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];e=g.pop();)e.type==CKEDITOR.NODE_ELEMENT?I(e,t,a):e.remove();for(;o=a.pop();)if((e=o.el).parent)switch(r=K[e.parent.name]||K.span,o.check){case"it":K.$removeEmpty[e.name]&&!e.children.length?I(e,t,a):m(e)||I(e,t,a);break;case"el-up":e.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||r[e.name]||I(e,t,a);break;case"parent-down":e.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||r[e.name]||I(e.parent,t,a)}return d},checkFeature:function(a){return!(!this.disabled&&a)||(a.toFeature&&(a=a.toFeature(this.editor)),!a.requiredContent||this.check(a.requiredContent))},disable:function(){this.disabled=!0},disallow:function(b){return!!o(this,b,!0)&&("string"==typeof b&&(b=d(b)),a(this,b,null,this.disallowedContent,this._.disallowedRules),!0)},addContentForms:function(a){if(!this.disabled&&a){var b,e,t,n=[];for(b=0;b<a.length&&!t;++b)("string"==typeof(e=a[b])||e instanceof CKEDITOR.style)&&this.check(e)&&(t=e);if(t){for(b=0;b<a.length;++b)n.push(R(a[b],t));this.addTransformations(n)}}},addElementCallback:function(a){this.elementCallbacks||(this.elementCallbacks=[]),this.elementCallbacks.push(a)},addFeature:function(a){return!(!this.disabled&&a)||(a.toFeature&&(a=a.toFeature(this.editor)),this.allow(a.allowedContent,a.name),this.addTransformations(a.contentTransformations),this.addContentForms(a.contentForms),!a.requiredContent||!this.customConfig&&!this.disallowedContent.length||this.check(a.requiredContent))},addTransformations:function(a){var b,e;if(!this.disabled&&a){var t,n=this._.transformations;for(t=0;t<a.length;++t){b=a[t];var g=void 0,o=void 0,r=void 0,l=void 0,c=void 0,d=void 0;for(e=[],o=0;o<b.length;++o)"string"==typeof(r=b[o])?(l=(r=r.split(/\s*:\s*/))[0],c=null,d=r[1]):(l=r.check,c=r.left,d=r.right),g||(g=(g=r).element?g.element:l?l.match(/^([a-z0-9]+)/i)[0]:g.left.getDefinition().element),c instanceof CKEDITOR.style&&(c=v(c)),e.push({check:l==g?null:l,left:c,right:"string"==typeof d?y(d):d});n[b=g]||(n[b]=[]),n[b].push(e)}}},check:function(a,b,e){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(a)){for(var t=a.length;t--;)if(this.check(a[t],b,e))return!0;return!1}var g,n;if("string"==typeof a){if((n=a+"<"+(!1===b?"0":"1")+(e?"1":"0")+">")in this._.cachedChecks)return this._.cachedChecks[n];var o=(g=d(a).$1).styles;t=g.classes,g.name=g.elements,g.classes=t=t?t.split(/\s*,\s*/):[],g.styles=c(o),g.attributes=c(g.attributes),g.children=[],t.length&&(g.attributes.class=t.join(" ")),o&&(g.attributes.style=CKEDITOR.tools.writeCssText(g.styles))}else o=(g=a.getDefinition()).styles,t=g.attributes||{},o&&!CKEDITOR.tools.isEmpty(o)?(o=_(o),t.style=CKEDITOR.tools.writeCssText(o,!0)):o={},g={name:g.element,attributes:t,classes:t.class?t.class.split(/\s+/):[],styles:o,children:[]};o=CKEDITOR.tools.clone(g);var r,l=[];if(!1!==b&&(r=this._.transformations[g.name])){for(t=0;t<r.length;++t)O(this,g,r[t]);p(g)}return f(this,o,l,{doFilter:!0,doTransform:!1!==b,skipRequired:!e,skipFinalValidation:!e}),0<l.length?e=!1:((b=g.attributes.class)&&(g.attributes.class=g.attributes.class.split(" ").sort().join(" ")),e=CKEDITOR.tools.objectCompare(g.attributes,o.attributes,!0),b&&(g.attributes.class=b)),"string"==typeof a&&(this._.cachedChecks[n]=e),e},getAllowedEnterMode:function(){var a=["p","div","br"],b={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(e,t){var g,n=a.slice();if(this.check(w[e]))return e;for(t||(n=n.reverse());g=n.pop();)if(this.check(g))return b[g];return CKEDITOR.ENTER_BR}}(),clone:function(){var a=new CKEDITOR.filter,b=CKEDITOR.tools.clone;return a.allowedContent=b(this.allowedContent),a._.allowedRules=b(this._.allowedRules),a.disallowedContent=b(this.disallowedContent),a._.disallowedRules=b(this._.disallowedRules),a._.transformations=b(this._.transformations),a.disabled=this.disabled,a.editor=this.editor,a},destroy:function(){delete CKEDITOR.filter.instances[this.id],delete this._,delete this.allowedContent,delete this.disallowedContent}};var S,N={styles:1,attributes:1,classes:1},x={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},A=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,L={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},F=/^cke:(object|embed|param)$/,P=/^(object|embed|param)$/;S=CKEDITOR.filter.transformationsTools={sizeToStyle:function(a){this.lengthToStyle(a,"width"),this.lengthToStyle(a,"height")},sizeToAttribute:function(a){this.lengthToAttribute(a,"width"),this.lengthToAttribute(a,"height")},lengthToStyle:function(a,b,e){if(!((e=e||b)in a.styles)){var t=a.attributes[b];t&&(/^\d+$/.test(t)&&(t+="px"),a.styles[e]=t)}delete a.attributes[b]},lengthToAttribute:function(a,b,e){if(!((e=e||b)in a.attributes)){var t=a.styles[b],n=t&&t.match(/^(\d+)(?:\.\d*)?px$/);n?a.attributes[e]=n[1]:"cke-test"==t&&(a.attributes[e]="cke-test")}delete a.styles[b]},alignmentToStyle:function(a){if(!("float"in a.styles)){var b=a.attributes.align;"left"!=b&&"right"!=b||(a.styles.float=b)}delete a.attributes.align},alignmentToAttribute:function(a){if(!("align"in a.attributes)){var b=a.styles.float;"left"!=b&&"right"!=b||(a.attributes.align=b)}delete a.styles.float},splitBorderShorthand:function(a){if(a.styles.border){var b=CKEDITOR.tools.style.parse.border(a.styles.border);b.color&&(a.styles["border-color"]=b.color),b.style&&(a.styles["border-style"]=b.style),b.width&&(a.styles["border-width"]=b.width),delete a.styles.border}},listTypeToStyle:function(a){if(a.attributes.type)switch(a.attributes.type){case"a":a.styles["list-style-type"]="lower-alpha";break;case"A":a.styles["list-style-type"]="upper-alpha";break;case"i":a.styles["list-style-type"]="lower-roman";break;case"I":a.styles["list-style-type"]="upper-roman";break;case"1":a.styles["list-style-type"]="decimal";break;default:a.styles["list-style-type"]=a.attributes.type}},splitMarginShorthand:function(a){function b(t){a.styles["margin-top"]=e[t[0]],a.styles["margin-right"]=e[t[1]],a.styles["margin-bottom"]=e[t[2]],a.styles["margin-left"]=e[t[3]]}if(a.styles.margin){var e=a.styles.margin.match(/(\-?[\.\d]+\w+)/g)||["0px"];switch(e.length){case 1:b([0,0,0,0]);break;case 2:b([0,1,0,1]);break;case 3:b([0,1,2,1]);break;case 4:b([0,1,2,3])}delete a.styles.margin}},matchesStyle:D,transform:function(a,b){if("string"==typeof b)a.name=b;else{var g,e,t,n,o=b.getDefinition(),r=o.styles,l=o.attributes;for(g in a.name=o.element,l)if("class"==g)for(o=a.classes.join("|"),t=l[g].split(/\s+/);n=t.pop();)-1==o.indexOf(n)&&a.classes.push(n);else a.attributes[g]=l[g];for(e in r)a.styles[e]=r[e]}}}}(),CKEDITOR.focusManager=function(a){return a.focusManager?a.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:a},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(a){this._.timer&&clearTimeout(this._.timer),a&&(this.currentActive=a),this.hasFocus||this._.locked||((a=CKEDITOR.currentInstance)&&a.focusManager.blur(1),this.hasFocus=!0,(a=this._.editor.container)&&a.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(a){function e(){if(this.hasFocus){this.hasFocus=!1;var a=this._.editor.container;a&&a.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var b=CKEDITOR.focusManager._.blurDelay;a||!b?e.call(this):this._.timer=CKEDITOR.tools.setTimeout((function(){delete this._.timer,e.call(this)}),b,this)}},add:function(a,e){if(!(b=a.getCustomData("focusmanager"))||b!=this){b&&b.remove(a);var b="focus",t="blur";e&&(CKEDITOR.env.ie?(b="focusin",t="focusout"):CKEDITOR.event.useCapture=1);var n={blur:function(){a.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(a)}};a.on(b,n.focus,this),a.on(t,n.blur,this),e&&(CKEDITOR.event.useCapture=0),a.setCustomData("focusmanager",this),a.setCustomData("focusmanager_handlers",n)}},remove:function(a){a.removeCustomData("focusmanager");var e=a.removeCustomData("focusmanager_handlers");a.removeListener("blur",e.blur),a.removeListener("focus",e.focus)}},CKEDITOR.keystrokeHandler=function(a){return a.keystrokeHandler?a.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:a},this)},function(){var a,e=function(b){var e=(b=b.data).getKeystroke(),t=this.keystrokes[e],n=this._.editor;return(a=!1===n.fire("key",{keyCode:e,domEvent:b}))||(t&&(a=!1!==n.execCommand(t,{from:"keystrokeHandler"})),a||(a=!!this.blockedKeystrokes[e])),a&&b.preventDefault(!0),!a},b=function(b){a&&(a=!1,b.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(a){a.on("keydown",e,this),CKEDITOR.env.gecko&&CKEDITOR.env.mac&&a.on("keypress",b,this)}}}(),CKEDITOR.lang={languages:{af:1,ar:1,az:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,oc:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(a,e,b){a&&CKEDITOR.lang.languages[a]||(a=this.detect(e,a));var t=this;e=function(){t[a].dir=t.rtl[a]?"rtl":"ltr",b(a,t[a])},this[a]?e():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+a+".js"),e,this)},detect:function(a,e){var b=this.languages,t=(n=(e=e||navigator.userLanguage||navigator.language||a).toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/))[1],n=n[2];return b[t+"-"+n]?t=t+"-"+n:b[t]||(t=null),CKEDITOR.lang.detect=t?function(){return t}:function(a){return a},t||a}},CKEDITOR.scriptLoader=function(){var a={},e={};return{load:function(b,t,n,o){var r="string"==typeof b;r&&(b=[b]),n||(n=CKEDITOR);var g=b.length,l=[],c=[],d=function(a){t&&(r?t.call(n,a):t.call(n,l,c))};if(0===g)d(!0);else{var h=function(a,b){(b?l:c).push(a),0>=--g&&(o&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),d(b))},q=function(b,t){a[b]=1;var n=e[b];delete e[b];for(var o=0;o<n.length;o++)n[o](b,t)},f=function(b){if(a[b])h(b,!0);else{var n=e[b]||(e[b]=[]);if(n.push(h),!(1<n.length)){var o=new CKEDITOR.dom.element("script");o.setAttributes({type:"text/javascript",src:b}),t&&(CKEDITOR.env.ie&&(8>=CKEDITOR.env.version||CKEDITOR.env.ie9Compat)?o.$.onreadystatechange=function(){"loaded"!=o.$.readyState&&"complete"!=o.$.readyState||(o.$.onreadystatechange=null,q(b,!0))}:(o.$.onload=function(){setTimeout((function(){o.$.onload=null,o.$.onerror=null,q(b,!0)}),0)},o.$.onerror=function(){o.$.onload=null,o.$.onerror=null,q(b,!1)})),o.appendTo(CKEDITOR.document.getHead())}}};o&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var u=0;u<g;u++)f(b[u])}},queue:function(){function a(){var b;(b=e[0])&&this.load(b.scriptUrl,b.callback,CKEDITOR,0)}var e=[];return function(t,n){var o=this;e.push({scriptUrl:t,callback:function(){n&&n.apply(this,arguments),e.shift(),a.call(o)}}),1==e.length&&a.call(this)}}()}}(),CKEDITOR.resourceManager=function(a,e){this.basePath=a,this.fileName=e,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(a,e){if(this.registered[a])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+a+'" is already registered.');var b=this.registered[a]=e||{};return b.name=a,b.path=this.getPath(a),CKEDITOR.fire(a+CKEDITOR.tools.capitalize(this.fileName)+"Ready",b),this.get(a)},get:function(a){return this.registered[a]||null},getPath:function(a){var e=this.externals[a];return CKEDITOR.getUrl(e&&e.dir||this.basePath+a+"/")},getFilePath:function(a){var e=this.externals[a];return CKEDITOR.getUrl(this.getPath(a)+(e?e.file:this.fileName+".js"))},addExternal:function(a,e,b){a=a.split(",");for(var t=0;t<a.length;t++){var n=a[t];b||(e=e.replace(/[^\/]+$/,(function(a){return b=a,""}))),this.externals[n]={dir:e,file:b||this.fileName+".js"}}},load:function(a,e,b){CKEDITOR.tools.isArray(a)||(a=a?[a]:[]);for(var t=this.loaded,n=this.registered,o=[],r={},g={},l=0;l<a.length;l++){var c=a[l];if(c)if(t[c]||n[c])g[c]=this.get(c);else{var d=this.getFilePath(c);o.push(d),d in r||(r[d]=[]),r[d].push(c)}}CKEDITOR.scriptLoader.load(o,(function(a,n){if(n.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+r[n[0]].join(",")+'" was not found at "'+n[0]+'".');for(var o=0;o<a.length;o++)for(var l=r[a[o]],c=0;c<l.length;c++){var d=l[c];g[d]=this.get(d),t[d]=1}e.call(b,g)}),this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,(function(a){var e={};return function(b,t,n){var o={},r=function(b){a.call(this,b,(function(a){CKEDITOR.tools.extend(o,a);var l,b=[];for(l in a){var g=a[l],q=g&&g.requires;if(!e[l]){if(g.icons)for(var c=g.icons.split(","),u=c.length;u--;)CKEDITOR.skin.addIcon(c[u],g.path+"icons/"+(CKEDITOR.env.hidpi&&g.hidpi?"hidpi/":"")+c[u]+".png");g.isSupportedEnvironment=g.isSupportedEnvironment||function(){return!0},e[l]=1}if(q)for(q.split&&(q=q.split(",")),g=0;g<q.length;g++)o[q[g]]||b.push(q[g])}if(b.length)r.call(this,b);else{for(l in o)(g=o[l]).onLoad&&!g.onLoad._called&&(!1===g.onLoad()&&delete o[l],g.onLoad._called=1);t&&t.call(n||window,o)}}),this)};r.call(this,b)}})),CKEDITOR.plugins.setLang=function(a,e,b){var t=this.get(a);a=t.langEntries||(t.langEntries={}),(t=t.lang||(t.lang=[])).split&&(t=t.split(",")),-1==CKEDITOR.tools.indexOf(t,e)&&t.push(e),a[e]=b},CKEDITOR.ui=function(a){return a.ui?a.ui:(this.items={},this.instances={},this.editor=a,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(a,e,b){b.name=a.toLowerCase();var t=this.items[a]={type:e,command:b.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(t,b)},get:function(a){return this.instances[a]},create:function(a){var e=this.items[a],b=e&&this._.handlers[e.type],t=e&&e.command&&this.editor.getCommand(e.command);return b=b&&b.create.apply(this,e.args),this.instances[a]=b,t&&t.uiItems.push(b),b&&!b.type&&(b.type=e.type),b},addHandler:function(a,e){this._.handlers[a]=e},space:function(a){return CKEDITOR.document.getById(this.spaceId(a))},spaceId:function(a){return this.editor.id+"_"+a}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function a(a,t,l){if(CKEDITOR.event.call(this),a=a&&CKEDITOR.tools.clone(a),void 0!==t){if(!(t instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!l)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&l==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!function(a,b){return b==CKEDITOR.ELEMENT_MODE_INLINE?a.is(CKEDITOR.dtd.$editable)||a.is("textarea"):b==CKEDITOR.ELEMENT_MODE_REPLACE?!a.is(CKEDITOR.dtd.$nonBodyContent):1}(t,l))throw Error('The specified element mode is not supported on element: "'+t.getName()+'".');this.element=t,this.elementMode=l,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(t.getId()||t.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||function(){do{var a="editor"+ ++u}while(CKEDITOR.instances[a]);return a}(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",e),this.on("selectionChange",(function(a){n(this,a.data.path)})),this.on("activeFilterChange",(function(){n(this,this.elementPath(),!0)})),this.on("mode",e),this.on("instanceReady",(function(){if(this.config.startupFocus){if("end"===this.config.startupFocus){var a=this.createRange();a.selectNodeContents(this.editable()),a.shrink(CKEDITOR.SHRINK_ELEMENT,!0),a.collapse(),this.getSelection().selectRanges([a])}this.focus()}})),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout((function(){"destroyed"!==this.status?function(a,b){a.on("customConfigLoaded",(function(){if(b){if(b.on)for(var e in b.on)a.on(e,b.on[e]);CKEDITOR.tools.extend(a.config,b,!0),delete a.config.on}e=a.config,a.readOnly=!!e.readOnly||(a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.is("textarea")?a.element.hasAttribute("disabled")||a.element.hasAttribute("readonly"):a.element.isReadOnly():a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.element.hasAttribute("disabled")||a.element.hasAttribute("readonly"))),a.blockless=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!(a.element.is("textarea")||CKEDITOR.dtd[a.element.getName()].p),a.tabIndex=e.tabIndex||a.element&&a.element.getAttribute("tabindex")||0,a.activeEnterMode=a.enterMode=a.blockless?CKEDITOR.ENTER_BR:e.enterMode,a.activeShiftEnterMode=a.shiftEnterMode=a.blockless?CKEDITOR.ENTER_BR:e.shiftEnterMode,e.skin&&(CKEDITOR.skinName=e.skin),a.fireOnce("configLoaded"),a.dataProcessor=new CKEDITOR.htmlDataProcessor(a),a.filter=a.activeFilter=new CKEDITOR.filter(a),function(a){CKEDITOR.skin.loadPart("editor",(function(){r(a)}))}(a)})),b&&null!=b.customConfig&&(a.config.customConfig=b.customConfig),o(a)||a.fireOnce("customConfigLoaded")}(this,a):CKEDITOR.warn("editor-incorrect-destroy")}),0,this)}function e(){var b,a=this.commands;for(b in a)t(this,a[b])}function t(a,b){b[b.startDisabled||a.readOnly&&!b.readOnly?"disable":b.modes[a.mode]?"enable":"disable"]()}function n(a,b,e){if(b){var t,n,g=a.commands;for(n in g)t=g[n],(e||t.contextSensitive)&&t.refresh(a,b)}}function o(a){if(!(b=a.config.customConfig))return!1;var b=CKEDITOR.getUrl(b),e=p[b]||(p[b]={});return e.fn?(e.fn.call(a,a.config),CKEDITOR.getUrl(a.config.customConfig)!=b&&o(a)||a.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(b,(function(){e.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},o(a)})),!0}function r(a){CKEDITOR.lang.load(a.config.language,a.config.defaultLanguage,(function(b,e){var t=a.config.title;a.langCode=b,a.lang=CKEDITOR.tools.prototypedCopy(e),a.title="string"==typeof t||!1===t?t:[a.lang.editor,a.name].join(", "),a.config.contentsLangDirection||(a.config.contentsLangDirection=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.getDirection(1):a.lang.dir),a.fire("langLoaded"),function(a){a.getStylesSet((function(b){a.once("loaded",(function(){a.fire("stylesSet",{styles:b})}),null,null,1),function(a){function b(a){return a?(CKEDITOR.tools.isArray(a)&&(a=a.join(",")),a.replace(/\s/g,"")):""}var e=a.config,t=b(e.plugins),n=b(e.extraPlugins),g=b(e.removePlugins);if(n){var o=new RegExp("(?:^|,)(?:"+n.replace(/,/g,"|")+")(?=,|$)","g");t=(t=t.replace(o,""))+","+n}if(g){var r=new RegExp("(?:^|,)(?:"+g.replace(/,/g,"|")+")(?=,|$)","g");t=t.replace(r,"")}CKEDITOR.env.air&&(t+=",adobeair"),CKEDITOR.plugins.load(t.split(","),(function(b){var t=[],n=[],g=[];for(var o in a.plugins=CKEDITOR.tools.extend({},a.plugins,b),b){var l,c=b[o],d=c.lang,h=null,f=c.requires;if(CKEDITOR.tools.isArray(f)&&(f=f.join(",")),f&&(l=f.match(r)))for(;f=l.pop();)CKEDITOR.error("editor-plugin-required",{plugin:f.replace(",",""),requiredBy:o});d&&!a.lang[o]&&(d.split&&(d=d.split(",")),h=0<=CKEDITOR.tools.indexOf(d,a.langCode)?a.langCode:(h=a.langCode.replace(/-.*/,""))!=a.langCode&&0<=CKEDITOR.tools.indexOf(d,h)?h:0<=CKEDITOR.tools.indexOf(d,"en")?"en":d[0],c.langEntries&&c.langEntries[h]?(a.lang[o]=c.langEntries[h],h=null):g.push(CKEDITOR.getUrl(c.path+"lang/"+h+".js"))),n.push(h),t.push(c)}CKEDITOR.scriptLoader.load(g,(function(){for(var b=["beforeInit","init","afterInit"],g=0;g<b.length;g++)for(var o=0;o<t.length;o++){var r=t[o];0===g&&n[o]&&r.lang&&r.langEntries&&(a.lang[r.name]=r.langEntries[n[o]]),r[b[g]]&&r[b[g]](a)}for(a.fireOnce("pluginsLoaded"),e.keystrokes&&a.setKeystroke(a.config.keystrokes),o=0;o<a.config.blockedKeystrokes.length;o++)a.keystrokeHandler.blockedKeystrokes[a.config.blockedKeystrokes[o]]=1;a.status="loaded",a.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,a)}))}))}(a)}))}(a)}))}function q(){var a=this.element;if(a&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var b=this.getData();return this.config.htmlEncodeOutput&&(b=CKEDITOR.tools.htmlEncode(b)),a.is("textarea")?a.setValue(b):a.setHtml(b),!0}return!1}a.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=a;var u=0,p={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{plugins:{detectConflict:function(a,b){for(var e=0;e<b.length;e++){var t=b[e];if(this[t])return CKEDITOR.warn("editor-plugin-conflict",{plugin:a,replacedWith:t}),!0}return!1}},addCommand:function(a,b){b.name=a.toLowerCase();var e=b instanceof CKEDITOR.command?b:new CKEDITOR.command(this,b);return this.mode&&t(this,e),this.commands[a]=e},_attachToForm:function(){function a(b){e.updateElement(),e._.required&&!t.getValue()&&!1===e.fire("required")&&b.data.preventDefault()}var e=this,t=e.element,n=new CKEDITOR.dom.element(t.$.form);t.is("textarea")&&n&&(n.on("submit",a),function(a){return!!(a&&a.call&&a.apply)}(n.$.submit)&&(n.$.submit=CKEDITOR.tools.override(n.$.submit,(function(b){return function(){a(),b.apply?b.apply(this):b()}}))),e.on("destroy",(function(){n.removeListener("submit",a)})))},destroy:function(a){var b=CKEDITOR.filter.instances,e=this;this.fire("beforeDestroy"),!a&&q.call(this),this.editable(null),this.filter&&delete this.filter,CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(b),(function(a){a=b[a],e===a.editor&&a.destroy()})),delete this.activeFilter,this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(a){if(!a){if(!(a=this.getSelection()))return null;a=a.getStartElement()}return a?new CKEDITOR.dom.elementPath(a,this.editable()):null},createRange:function(){var a=this.editable();return a?new CKEDITOR.dom.range(a):null},execCommand:function(a,b){var e=this.getCommand(a),t={name:a,commandData:b||{},command:e};return!(!e||e.state==CKEDITOR.TRISTATE_DISABLED||!1===this.fire("beforeCommandExec",t)||(t.returnValue=e.exec(t.commandData),e.async||!1===this.fire("afterCommandExec",t)))&&t.returnValue},getCommand:function(a){return this.commands[a]},getData:function(a){!a&&this.fire("beforeGetData");var b=this._.data;return"string"!=typeof b&&(b=(b=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?b.is("textarea")?b.getValue():b.getHtml():""),b={dataValue:b},!a&&this.fire("getData",b),b.dataValue},getSnapshot:function(){var a=this.fire("getSnapshot");return"string"!=typeof a&&(a=(a=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?a.is("textarea")?a.getValue():a.getHtml():""),a},loadSnapshot:function(a){this.fire("loadSnapshot",a)},setData:function(a,b,e){var t=!0,n=b;b&&"object"==typeof b&&(e=b.internal,n=b.callback,t=!b.noSnapshot),!e&&t&&this.fire("saveSnapshot"),!n&&e||this.once("dataReady",(function(a){!e&&t&&this.fire("saveSnapshot"),n&&n.call(a.editor)})),a={dataValue:a},!e&&this.fire("setData",a),this._.data=a.dataValue,!e&&this.fire("afterSetData",a)},setReadOnly:function(a){a=null==a||a,this.readOnly!=a&&(this.readOnly=a,this.keystrokeHandler.blockedKeystrokes[8]=+a,this.editable().setReadOnly(a),this.fire("readOnly"))},insertHtml:function(a,b,e){this.fire("insertHtml",{dataValue:a,mode:b,range:e})},insertText:function(a){this.fire("insertText",a)},insertElement:function(a){this.fire("insertElement",a)},getSelectedHtml:function(a){var b=this.editable(),e=(e=this.getSelection())&&e.getRanges();return b&&e&&0!==e.length?(b=function(a,b){function e(a){var b=a.startContainer,e=a.endContainer;return!(!b.is||!(b.is("tr")||b.is("td")&&b.equals(e)&&a.endOffset===b.getChildCount()))}function t(a){var b=a.startContainer;return b.is("tr")?a.cloneContents():b.clone(!0)}for(var g,n,o,r=new CKEDITOR.dom.documentFragment,l=0;l<a.length;l++){var c=a[l],d=c.startContainer.getAscendant("tr",!0);e(c)?(g||((g=d.getAscendant("table").clone()).append(d.getAscendant({thead:1,tbody:1,tfoot:1}).clone()),r.append(g),g=g.findOne("thead, tbody, tfoot")),n&&n.equals(d)||(n=d,o=d.clone(),g.append(o)),o.append(t(c))):r.append(c.cloneContents())}return g?r:b.getHtmlFromRange(a[0])}(e,b),a?b.getHtml():b):null},extractSelectedHtml:function(a,b){var g,e=this.editable(),t=this.getSelection().getRanges(),n=new CKEDITOR.dom.documentFragment;if(!e||0===t.length)return null;for(g=0;g<t.length;g++)n.append(e.extractHtmlFromRange(t[g],b));return b||this.getSelection().selectRanges([t[0]]),a?n.getHtml():n},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return q.call(this)},setKeystroke:function(){for(var e,t,a=this.keystrokeHandler.keystrokes,b=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],n=b.length;n--;)e=b[n],t=0,CKEDITOR.tools.isArray(e)&&(t=e[1],e=e[0]),t?a[e]=t:delete a[e]},getCommandKeystroke:function(a,b){var e="string"==typeof a?this.getCommand(a):a,t=[];if(e){var n=CKEDITOR.tools.object.findKey(this.commands,e),g=this.keystrokeHandler.keystrokes;if(e.fakeKeystroke)t.push(e.fakeKeystroke);else for(var o in g)g[o]===n&&t.push(o)}return b?t:t[0]||null},addFeature:function(a){return this.filter.addFeature(a)},setActiveFilter:function(a){a||(a=this.filter),this.activeFilter!==a&&(this.activeFilter=a,this.fire("activeFilterChange"),a===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(a.getAllowedEnterMode(this.enterMode),a.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(a,b){a=a?this.blockless?CKEDITOR.ENTER_BR:a:this.enterMode,b=b?this.blockless?CKEDITOR.ENTER_BR:b:this.shiftEnterMode,this.activeEnterMode==a&&this.activeShiftEnterMode==b||(this.activeEnterMode=a,this.activeShiftEnterMode=b,this.fire("activeEnterModeChange"))},showNotification:function(a){alert(a)}}),CKEDITOR.editor._getEditorElement=function(a){if(!CKEDITOR.env.isCompatible)return null;var b=CKEDITOR.dom.element.get(a);return b?b.getEditor()?(CKEDITOR.error("editor-element-conflict",{editorName:b.getEditor().name}),null):b:(CKEDITOR.error("editor-incorrect-element",{element:a}),null)}}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},function(){var a=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,e={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(b){for(var t,n,o,r=0;t=this._.htmlPartsRegex.exec(b);)if((n=t.index)>r&&(r=b.substring(r,n),o?o.push(r):this.onText(r)),r=this._.htmlPartsRegex.lastIndex,!(n=t[1])||(n=n.toLowerCase(),o&&CKEDITOR.dtd.$cdata[n]&&(this.onCDATA(o.join("")),o=null),o))if(o)o.push(t[0]);else if(n=t[3]){if(n=n.toLowerCase(),!/="/.test(n)){var l,g={},c=t[4];if(t=!!t[5],c)for(;l=a.exec(c);){var d=l[1].toLowerCase();l=l[2]||l[3]||l[4]||"",g[d]=!l&&e[d]?d:CKEDITOR.tools.htmlDecodeAttr(l)}this.onTagOpen(n,g,t),!o&&CKEDITOR.dtd.$cdata[n]&&(o=[])}}else(n=t[2])&&this.onComment(n);else this.onTagClose(n);b.length>r&&this.onText(b.substring(r,b.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(a){this._.output.push("<",a)},openTagClose:function(a,e){e?this._.output.push(" />"):this._.output.push(">")},attribute:function(a,e){"string"==typeof e&&(e=CKEDITOR.tools.htmlEncodeAttr(e)),this._.output.push(" ",a,'="',e,'"')},closeTag:function(a){this._.output.push("</",a,">")},text:function(a){this._.output.push(a)},comment:function(a){this._.output.push("\x3c!--",a,"--\x3e")},write:function(a){this._.output.push(a)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(a){var e=this._.output.join("");return a&&this.reset(),e}}}),CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var a=this.parent.children,e=CKEDITOR.tools.indexOf(a,this),b=this.previous,t=this.next;b&&(b.next=t),t&&(t.previous=b),a.splice(e,1),this.parent=null},replaceWith:function(a){var e=this.parent.children,b=CKEDITOR.tools.indexOf(e,this),t=a.previous=this.previous,n=a.next=this.next;t&&(t.next=a),n&&(n.previous=a),e[b]=a,a.parent=this.parent,this.parent=null},insertAfter:function(a){var e=a.parent.children,b=CKEDITOR.tools.indexOf(e,a),t=a.next;e.splice(b+1,0,this),this.next=a.next,this.previous=a,a.next=this,t&&(t.previous=this),this.parent=a.parent},insertBefore:function(a){var e=a.parent.children,b=CKEDITOR.tools.indexOf(e,a);e.splice(b,0,this),this.next=a,(this.previous=a.previous)&&(a.previous.next=this),a.previous=this,this.parent=a.parent},getAscendant:function(a){for(var e="function"==typeof a?a:"string"==typeof a?function(b){return b.name==a}:function(b){return b.name in a},b=this.parent;b&&b.type==CKEDITOR.NODE_ELEMENT;){if(e(b))return b;b=b.parent}return null},wrapWith:function(a){return this.replaceWith(a),a.add(this),a},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(a){return a||{}}},CKEDITOR.htmlParser.comment=function(a){this.value=a,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(a,e){var b=this.value;return(b=a.onComment(e,b,this))?"string"!=typeof b?(this.replaceWith(b),!1):(this.value=b,!0):(this.remove(),!1)},writeHtml:function(a,e){e&&this.filter(e),a.comment(this.value)}}),CKEDITOR.htmlParser.text=function(a){this.value=a,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(a,e){if(!(this.value=a.onText(e,this.value,this)))return this.remove(),!1},writeHtml:function(a,e){e&&this.filter(e),a.text(this.value)}}),CKEDITOR.htmlParser.cdata=function(a){this.value=a},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(a){a.write(this.value)}}),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function a(a){return!a.attributes["data-cke-survive"]&&("a"==a.name&&a.attributes.href||CKEDITOR.dtd.$removeEmpty[a.name])}var e=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),b={ol:1,ul:1},t=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),n={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(o,r,g){function l(a){var b;if(0<m.length)for(var e=0;e<m.length;e++){var t=m[e],n=t.name,g=CKEDITOR.dtd[n],o=T.name&&CKEDITOR.dtd[T.name];o&&!o[n]||a&&g&&!g[a]&&CKEDITOR.dtd[a]?n==T.name&&(h(T,T.parent,1),e--):(b||(c(),b=1),(t=t.clone()).parent=T,T=t,m.splice(e,1),e--)}}function c(){for(;E.length;)h(E.shift(),T)}function d(a){if(a._.isBlockLike&&"pre"!=a.name&&"textarea"!=a.name){var e,b=a.children.length,t=a.children[b-1];t&&t.type==CKEDITOR.NODE_TEXT&&((e=CKEDITOR.tools.rtrim(t.value))?t.value=e:a.children.length=b-1)}}function h(b,e,t){e=e||T||p;var n=T;void 0===b.previous&&(q(e,b)&&(T=e,u.onTagOpen(g,{}),b.returnPoint=e=T),d(b),a(b)&&!b.children.length||e.add(b),"pre"==b.name&&(I=!1),"textarea"==b.name&&(C=!1)),b.returnPoint?(T=b.returnPoint,delete b.returnPoint):T=t?e:n}function q(a,b){var e,t;if((a==p||"body"==a.name)&&g&&(!a.name||CKEDITOR.dtd[a.name][g]))return(e=b.attributes&&(t=b.attributes["data-cke-real-element-type"])?t:b.name)&&e in CKEDITOR.dtd.$inline&&!(e in CKEDITOR.dtd.head)&&!b.isOrphan||b.type==CKEDITOR.NODE_TEXT}function f(a,b){return(a in CKEDITOR.dtd.$listItem||a in CKEDITOR.dtd.$tableContent)&&(a==b||"dt"==a&&"dd"==b||"dd"==a&&"dt"==b)}var u=new CKEDITOR.htmlParser,p=r instanceof CKEDITOR.htmlParser.element?r:"string"==typeof r?new CKEDITOR.htmlParser.element(r):new CKEDITOR.htmlParser.fragment,m=[],E=[],T=p,C="textarea"==p.name,I="pre"==p.name;for(u.onTagOpen=function(n,o,g,r){if((o=new CKEDITOR.htmlParser.element(n,o)).isUnknown&&g&&(o.isEmpty=!0),o.isOptionalClose=r,a(o))m.push(o);else{if("pre"==n)I=!0;else{if("br"==n&&I)return void T.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==n&&(C=!0)}if("br"==n)E.push(o);else{for(;r=(g=T.name)?CKEDITOR.dtd[g]||(T._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):t,!(o.isUnknown||T.isUnknown||r[n]);)if(T.isOptionalClose)u.onTagClose(g);else if(n in b&&g in b)(g=(g=T.children)[g.length-1])&&"li"==g.name||h(g=new CKEDITOR.htmlParser.element("li"),T),!o.returnPoint&&(o.returnPoint=T),T=g;else if(n in CKEDITOR.dtd.$listItem&&!f(n,g))u.onTagOpen("li"==n?"ul":"dl",{},0,1);else if(g in e&&!f(n,g))!o.returnPoint&&(o.returnPoint=T),T=T.parent;else{if(g in CKEDITOR.dtd.$inline&&m.unshift(T),!T.parent){o.isOrphan=1;break}h(T,T.parent,1)}l(n),c(),o.parent=T,o.isEmpty?h(o):T=o}}},u.onTagClose=function(a){for(var b=m.length-1;0<=b;b--)if(a==m[b].name)return void m.splice(b,1);for(var e=[],t=[],n=T;n!=p&&n.name!=a;)n._.isBlockLike||t.unshift(n),e.push(n),n=n.returnPoint||n.parent;if(n!=p){for(b=0;b<e.length;b++){var o=e[b];h(o,o.parent)}T=n,n._.isBlockLike&&c(),h(n,n.parent),n==T&&(T=T.parent),m=m.concat(t)}"body"==a&&(g=!1)},u.onText=function(a){if(T._.hasInlineStarted&&!E.length||I||C||0!==(a=CKEDITOR.tools.ltrim(a)).length){var b=T.name,o=b?CKEDITOR.dtd[b]||(T._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):t;C||o["#"]||!(b in e)?(c(),l(),I||C||(a=a.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),a=new CKEDITOR.htmlParser.text(a),q(T,a)&&this.onTagOpen(g,{},0,1),T.add(a)):(u.onTagOpen(n[b]||""),u.onText(a))}},u.onCDATA=function(a){T.add(new CKEDITOR.htmlParser.cdata(a))},u.onComment=function(a){c(),l(),T.add(new CKEDITOR.htmlParser.comment(a))},u.parse(o),c();T!=p;)h(T,T.parent,1);return d(p),p},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(a,b){isNaN(b)&&(b=this.children.length);var e=0<b?this.children[b-1]:null;if(e){if(a._.isBlockLike&&e.type==CKEDITOR.NODE_TEXT&&(e.value=CKEDITOR.tools.rtrim(e.value),0===e.value.length))return this.children.pop(),void this.add(a);e.next=a}a.previous=e,a.parent=this,this.children.splice(b,0,a),this._.hasInlineStarted||(this._.hasInlineStarted=a.type==CKEDITOR.NODE_TEXT||a.type==CKEDITOR.NODE_ELEMENT&&!a._.isBlockLike)},filter:function(a,b){b=this.getFilterContext(b),a.onRoot(b,this),this.filterChildren(a,!1,b)},filterChildren:function(a,b,e){if(this.childrenFilteredBy!=a.id)for(e=this.getFilterContext(e),b&&!this.parent&&a.onRoot(e,this),this.childrenFilteredBy=a.id,b=0;b<this.children.length;b++)!1===this.children[b].filter(a,e)&&b--},writeHtml:function(a,b){b&&this.filter(b),this.writeChildrenHtml(a)},writeChildrenHtml:function(a,b,e){var t=this.getFilterContext();for(e&&!this.parent&&b&&b.onRoot(t,this),b&&this.filterChildren(b,!1,t),b=0,t=(e=this.children).length;b<t;b++)e[b].writeHtml(a)},forEach:function(a,b,e){if(!(e||b&&this.type!=b))var t=a(this);if(!1!==t){e=this.children;for(var n=0;n<e.length;n++)(t=e[n]).type==CKEDITOR.NODE_ELEMENT?t.forEach(a,b):b&&t.type!=b||a(t)}},getFilterContext:function(a){return a||{}}}}(),function(){function a(){this.rules=[]}function e(b,e,t,n){var o,g;for(o in e)(g=b[o])||(g=b[o]=new a),g.add(e[o],t,n)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(b){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new a,this.attributeNameRules=new a,this.elementsRules={},this.attributesRules={},this.textRules=new a,this.commentRules=new a,this.rootRules=new a,b&&this.addRules(b,10)},proto:{addRules:function(a,t){var n;"number"==typeof t?n=t:t&&"priority"in t&&(n=t.priority),"number"!=typeof n&&(n=10),"object"!=typeof t&&(t={}),a.elementNames&&this.elementNameRules.addMany(a.elementNames,n,t),a.attributeNames&&this.attributeNameRules.addMany(a.attributeNames,n,t),a.elements&&e(this.elementsRules,a.elements,n,t),a.attributes&&e(this.attributesRules,a.attributes,n,t),a.text&&this.textRules.add(a.text,n,t),a.comment&&this.commentRules.add(a.comment,n,t),a.root&&this.rootRules.add(a.root,n,t)},applyTo:function(a){a.filter(this)},onElementName:function(a,e){return this.elementNameRules.execOnName(a,e)},onAttributeName:function(a,e){return this.attributeNameRules.execOnName(a,e)},onText:function(a,e,t){return this.textRules.exec(a,e,t)},onComment:function(a,e,t){return this.commentRules.exec(a,e,t)},onRoot:function(a,e){return this.rootRules.exec(a,e)},onElement:function(a,e){for(var t,n=[this.elementsRules["^"],this.elementsRules[e.name],this.elementsRules.$],o=0;3>o;o++)if(t=n[o]){if(!1===(t=t.exec(a,e,this)))return null;if(t&&t!=e)return this.onNode(a,t);if(e.parent&&!e.name)break}return e},onNode:function(a,e){var t=e.type;return t==CKEDITOR.NODE_ELEMENT?this.onElement(a,e):t==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(a,e.value)):t==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(a,e.value)):null},onAttribute:function(a,e,t,n){return(t=this.attributesRules[t])?t.exec(a,n,e,this):n}}}),CKEDITOR.htmlParser.filterRulesGroup=a,a.prototype={add:function(a,e,t){this.rules.splice(this.findIndex(e),0,{value:a,priority:e,options:t})},addMany:function(a,e,t){for(var n=[this.findIndex(e),0],o=0,g=a.length;o<g;o++)n.push({value:a[o],priority:e,options:t});this.rules.splice.apply(this.rules,n)},findIndex:function(a){for(var e=this.rules,t=e.length-1;0<=t&&a<e[t].priority;)t--;return t+1},exec:function(a,e){var t,n,o,r,l=e instanceof CKEDITOR.htmlParser.node||e instanceof CKEDITOR.htmlParser.fragment,c=Array.prototype.slice.call(arguments,1),d=this.rules,g=d.length;for(r=0;r<g;r++)if(l&&(t=e.type,n=e.name),o=d[r],!(a.nonEditable&&!o.options.applyToAll||a.nestedEditable&&o.options.excludeNestedEditable)){if(!1===(o=o.value.apply(null,c))||l&&o&&(o.name!=n||o.type!=t))return o;null!=o&&(c[0]=e=o)}return e},execOnName:function(a,e){for(var g,t=0,n=this.rules,o=n.length;e&&t<o;t++)g=n[t],a.nonEditable&&!g.options.applyToAll||a.nestedEditable&&g.options.excludeNestedEditable||(e=e.replace(g.value[0],g.value[1]));return e}}}(),function(){function a(a,e){function g(a){return a||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function l(a,e){return function(n){if(n.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var r,l,d=[],h=b(n);if(h)for(c(h,1)&&d.push(h);h;)o(h)&&(r=t(h))&&c(r)&&((l=t(r))&&!o(l)?d.push(r):(g(m).insertAfter(r),r.remove())),h=h.previous;for(h=0;h<d.length;h++)d[h].remove();(d=!a||!1!==("function"==typeof e?e(n):e))&&(d=!(!m&&!CKEDITOR.env.needsBrFiller&&n.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||!m&&!CKEDITOR.env.needsBrFiller&&(7<document.documentMode||n.name in CKEDITOR.dtd.tr||n.name in CKEDITOR.dtd.$listItem))&&(!(d=b(n))||"form"==n.name&&"input"==d.name)),d&&n.add(g(a))}}}function c(a,b){return!(m&&!CKEDITOR.env.needsBrFiller||a.type!=CKEDITOR.NODE_ELEMENT||"br"!=a.name||a.attributes["data-cke-eol"])||!!(a.type==CKEDITOR.NODE_TEXT&&(e=a.value.match(f))&&(e.index&&(new CKEDITOR.htmlParser.text(a.value.substring(0,e.index)).insertBefore(a),a.value=e[0]),!CKEDITOR.env.needsBrFiller&&m&&(!b||a.parent.name in T)||!m&&((e=a.previous)&&"br"==e.name||!e||o(e))));var e}var d,h={elements:{}},m="html"==e,T=CKEDITOR.tools.extend({},C);for(d in T)"#"in E[d]||delete T[d];for(d in T)h.elements[d]=l(m,a.config.fillEmptyBlocks);return h.root=l(m,!1),h.elements.br=function(a){return function(b){if(b.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var e=b.attributes;if("data-cke-bogus"in e||"data-cke-eol"in e)delete e["data-cke-bogus"];else{for(e=b.next;e&&n(e);)e=e.next;var l=t(b);!e&&o(b.parent)?r(b.parent,g(a)):o(e)&&l&&!o(l)&&g(a).insertBefore(e)}}}}(m),h}function e(a,b){return a!=CKEDITOR.ENTER_BR&&!1!==b&&(a==CKEDITOR.ENTER_DIV?"div":"p")}function b(a){for(a=a.children[a.children.length-1];a&&n(a);)a=a.previous;return a}function t(a){for(a=a.previous;a&&n(a);)a=a.previous;return a}function n(a){return a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(a.value)||a.type==CKEDITOR.NODE_ELEMENT&&a.attributes["data-cke-bookmark"]}function o(a){return a&&(a.type==CKEDITOR.NODE_ELEMENT&&a.name in C||a.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function r(a,b){var e=a.children[a.children.length-1];a.children.push(b),b.parent=a,e&&(e.next=b,b.previous=e)}function g(a){"false"!=(a=a.attributes).contenteditable&&(a["data-cke-editable"]=a.contenteditable?"true":1),a.contenteditable="false"}function l(a){switch((a=a.attributes)["data-cke-editable"]){case"true":a.contenteditable="true";break;case"1":delete a.contenteditable}}function c(a,b){return a.replace(b,(function(a,b,e){return 0===a.indexOf("<textarea")&&(a=b+p(e).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(a)+"</cke:encoded>"}))}function d(a){return CKEDITOR.tools.array.reduce(a.split(""),(function(a,b){var e=b.toLowerCase(),t=b.toUpperCase(),n=u(e);return e!==t&&(n+="|"+u(t)),a+"("+n+")"}),"")}function u(a){var b,e=(b=a.charCodeAt(0)).toString(16);for(var t in b={htmlCode:"&#"+b+";?",hex:"&#x0*"+e+";?",entity:{"<":"&lt;",">":"&gt;",":":"&colon;"}[a]})b[t]&&(a+="|"+b[t]);return a}function p(a){return a.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,(function(a,b){return decodeURIComponent(b)}))}function h(a,b){var e=b._.dataStore;return a.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,(function(a,b){return decodeURIComponent(b)})).replace(/\{cke_protected_(\d+)\}/g,(function(a,b){return e&&e[b]||""}))}CKEDITOR.htmlDataProcessor=function(b){var t,n,g=this;this.editor=b,this.dataFilter=t=new CKEDITOR.htmlParser.filter,this.htmlFilter=n=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,t.addRules(I),t.addRules(O,{applyToAll:!0}),t.addRules(a(b,"data"),{applyToAll:!0}),n.addRules(D),n.addRules(R,{applyToAll:!0}),n.addRules(a(b,"html"),{applyToAll:!0}),b.on("toHtml",(function(a){var t,g,n=function(a,b){var e=[],t=b.config.protectedSource,n=b._.dataStore||(b._.dataStore={id:1}),g=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g;t=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(t),a=a.replace(/\x3c!--[\s\S]*?--\x3e/g,(function(a){return"\x3c!--{cke_tempcomment}"+(e.push(a)-1)+"--\x3e"}));for(var o=0;o<t.length;o++)a=a.replace(t[o],(function(a){return a=a.replace(g,(function(a,b,t){return e[t]})),/cke_temp(comment)?/.test(a)?a:"\x3c!--{cke_temp}"+(e.push(a)-1)+"--\x3e"}));return(a=(a=a.replace(g,(function(a,b,t){return"\x3c!--"+m+(b?"{C}":"")+encodeURIComponent(e[t]).replace(/--/g,"%2D%2D")+"--\x3e"}))).replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,(function(a){return a.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,(function(a,b){return n[n.id]=decodeURIComponent(b),"{cke_protected_"+n.id+++"}"}))}))).replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,(function(a,e,t,n){return"<"+e+t+">"+h(p(n),b)+"</"+e+">"}))}(n=(n=(a=a.data).dataValue).replace(S,""),b);n=c(n,k),n=(n=(n=(n=(n=c(n=function(a){return a.replace(v,(function(a,b,e){return"<"+b+e.replace(y,(function(a,b){return K.test(b)&&-1==e.indexOf("data-cke-saved-"+b)?" data-cke-saved-"+a+" data-cke-"+CKEDITOR.rnd+"-"+a:a}))+">"}))}(n),_)).replace(N,"$1cke:$2")).replace(A,"<cke:$1$2></cke:$1>")).replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2")).replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2"),t=a.context||b.editable().getName(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==t&&(t="div",n="<pre>"+n+"</pre>",g=1),(t=b.document.createElement(t)).setHtml("a"+n),n=(n=t.getHtml().substr(1)).replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),g&&(n=n.replace(/^<pre>|<\/pre>$/gi,"")),n=p(n=function(a){return a.replace(w,(function(a,b){return decodeURIComponent(b)}))}(n=n.replace(x,"$1$2"))),t=!1!==a.fixForBody&&e(a.enterMode,b.config.autoParagraph),n=CKEDITOR.htmlParser.fragment.fromHtml(n,a.context,t),t&&!(g=n).children.length&&CKEDITOR.dtd[g.name][t]&&(t=new CKEDITOR.htmlParser.element(t),g.add(t)),a.dataValue=n}),null,null,5),b.on("toHtml",(function(a){a.data.filter.applyTo(a.data.dataValue,!0,a.data.dontFilter,a.data.enterMode)&&b.fire("dataFiltered")}),null,null,6),b.on("toHtml",(function(a){a.data.dataValue.filterChildren(g.dataFilter,!0)}),null,null,10),b.on("toHtml",(function(a){var b=(a=a.data).dataValue,e=new CKEDITOR.htmlParser.basicWriter;b.writeChildrenHtml(e),b=e.getHtml(!0),a.dataValue=function(a){return a.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,(function(a){return"\x3c!--"+m+"{C}"+encodeURIComponent(a).replace(/--/g,"%2D%2D")+"--\x3e"}))}(b)}),null,null,15),b.on("toDataFormat",(function(a){var t=a.data.dataValue;a.data.enterMode!=CKEDITOR.ENTER_BR&&(t=t.replace(/^<br *\/?>/i,"")),a.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(t,a.data.context,e(a.data.enterMode,b.config.autoParagraph))}),null,null,5),b.on("toDataFormat",(function(a){a.data.dataValue.filterChildren(g.htmlFilter,!0)}),null,null,10),b.on("toDataFormat",(function(a){a.data.filter.applyTo(a.data.dataValue,!1,!0)}),null,null,11),b.on("toDataFormat",(function(a){var e=a.data.dataValue,t=g.writer;t.reset(),e.writeChildrenHtml(t),e=h(e=p(e=t.getHtml(!0)),b),a.data.dataValue=e}),null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(a,b,e,t){var g,n,o,r,l=this.editor;return b&&"object"==typeof b?(g=b.context,e=b.fixForBody,t=b.dontFilter,n=b.filter,o=b.enterMode,r=b.protectedWhitespaces):g=b,g||null===g||(g=l.editable().getName()),l.fire("toHtml",{dataValue:a,context:g,fixForBody:e,dontFilter:t,filter:n||l.filter,enterMode:o||l.enterMode,protectedWhitespaces:r}).dataValue},toDataFormat:function(a,b){var e,t,n;return b&&(e=b.context,t=b.filter,n=b.enterMode),e||null===e||(e=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:a,filter:t||this.editor.filter,context:e,enterMode:n||this.editor.enterMode}).dataValue}};var f=/(?:&nbsp;|\xa0)$/,m="{cke_protected}",E=CKEDITOR.dtd,T="caption colgroup col thead tfoot tbody".split(" "),C=CKEDITOR.tools.extend({},E.$blockLimit,E.$block),I={elements:{input:g,textarea:g}},O={attributeNames:[[/^on/,"data-cke-pa-on"],[/^srcdoc/,"data-cke-pa-srcdoc"],[/^data-cke-expando$/,""]],elements:{iframe:function(a){if(a.attributes&&a.attributes.src){var b=a.attributes.src.toLowerCase().replace(/[^a-z]/gi,"");0!==b.indexOf("javascript")&&0!==b.indexOf("data")||(a.attributes["data-cke-pa-src"]=a.attributes.src,delete a.attributes.src)}}}},D={elements:{embed:function(a){if((b=a.parent)&&"object"==b.name){var e=b.attributes.width,b=b.attributes.height;e&&(a.attributes.width=e),b&&(a.attributes.height=b)}},a:function(a){var b=a.attributes;if(!(a.children.length||b.name||b.id||a.attributes["data-cke-saved-name"]))return!1}}},R={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(a){var b=a.attributes;if(b){if(b["data-cke-temp"])return!1;for(var e=["name","href","src"],t=0;t<e.length;t++)"data-cke-saved-"+e[t]in b&&delete b[e[t]]}return a},table:function(a){a.children.slice(0).sort((function(a,b){var e,t;return a.type==CKEDITOR.NODE_ELEMENT&&b.type==a.type&&(e=CKEDITOR.tools.indexOf(T,a.name),t=CKEDITOR.tools.indexOf(T,b.name)),-1<e&&-1<t&&e!=t||(e=a.parent?a.getIndex():-1,t=b.parent?b.getIndex():-1),e>t?1:-1}))},param:function(a){return a.children=[],a.isEmpty=!0,a},span:function(a){"Apple-style-span"==a.attributes.class&&delete a.name},html:function(a){delete a.attributes.contenteditable,delete a.attributes.class},body:function(a){delete a.attributes.spellcheck,delete a.attributes.contenteditable},style:function(a){var b=a.children[0];b&&b.value&&(b.value=CKEDITOR.tools.trim(b.value)),a.attributes.type||(a.attributes.type="text/css")},title:function(a){var b=a.children[0];!b&&r(a,b=new CKEDITOR.htmlParser.text),b.value=a.attributes["data-cke-title"]||""},input:l,textarea:l},attributes:{class:function(a){return CKEDITOR.tools.ltrim(a.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(R.attributes.style=function(a){return a.replace(/(^|;)([^\:]+)/g,(function(a){return a.toLowerCase()}))});var v=/<(a|area|img|input|source)\b([^>]*)>/gi,y=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,K=/^(href|src|name)$/i,_=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,k=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,w=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,S=new RegExp("("+d("<cke:encoded>")+"(.*?)"+d("</cke:encoded>")+")|("+d("<")+d("/")+"?"+d("cke:encoded>")+")","gi"),N=/(<\/?)((?:object|embed|param|html|body|head|title)([\s][^>]*)?>)/gi,x=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,A=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),CKEDITOR.htmlParser.element=function(a,e){this.name=a,this.attributes=e||{},this.children=[];var b=a||"",t=b.match(/^cke:(.*)/);t&&(b=t[1]),b=!!(CKEDITOR.dtd.$nonBodyContent[b]||CKEDITOR.dtd.$block[b]||CKEDITOR.dtd.$listItem[b]||CKEDITOR.dtd.$tableContent[b]||CKEDITOR.dtd.$nonEditable[b]||"br"==b),this.isEmpty=!!CKEDITOR.dtd.$empty[a],this.isUnknown=!CKEDITOR.dtd[a],this._={isBlockLike:b,hasInlineStarted:this.isEmpty||!b}},CKEDITOR.htmlParser.cssStyle=function(a){var e={};return((a instanceof CKEDITOR.htmlParser.element?a.attributes.style:a)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,(function(a,t,n){"font-family"==t&&(n=n.replace(/["']/g,"")),e[t.toLowerCase()]=n})),{rules:e,populate:function(a){var e=this.toString();e&&(a instanceof CKEDITOR.dom.element?a.setAttribute("style",e):a instanceof CKEDITOR.htmlParser.element?a.attributes.style=e:a.style=e)},toString:function(){var t,a=[];for(t in e)e[t]&&a.push(t,":",e[t],";");return a.join("")}}},function(){var e=function(a,b){return(a=a[0])<(b=b[0])?-1:a>b?1:0},b=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:b.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(a,b){var e,g,t,n,o=this;for(b=o.getFilterContext(b),o.parent||a.onRoot(b,o);;){if(e=o.name,!(g=a.onElementName(b,e)))return this.remove(),!1;if(o.name=g,!(o=a.onElement(b,o)))return this.remove(),!1;if(o!==this)return this.replaceWith(o),!1;if(o.name==e)break;if(o.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(o),!1;if(!o.name)return this.replaceWithChildren(),!1}for(t in e=o.attributes){for(g=e[t];;){if(!(n=a.onAttributeName(b,t))){delete e[t];break}if(n==t)break;delete e[t],t=n}n&&(!1===(g=a.onAttribute(b,o,n,g))?delete e[n]:e[n]=g)}return o.isEmpty||this.filterChildren(a,!1,b),!0},filterChildren:b.filterChildren,writeHtml:function(a,b){b&&this.filter(b);var t,n,o=this.name,r=[],g=this.attributes;for(t in a.openTag(o,g),g)r.push([t,g[t]]);for(a.sortAttributes&&r.sort(e),t=0,n=r.length;t<n;t++)g=r[t],a.attribute(g[0],g[1]);a.openTagClose(o,this.isEmpty),this.writeChildrenHtml(a),this.isEmpty||a.closeTag(o)},writeChildrenHtml:b.writeChildrenHtml,replaceWithChildren:function(){for(var a=this.children,b=a.length;b;)a[--b].insertAfter(this);this.remove()},forEach:b.forEach,getFirst:function(b){if(!b)return this.children.length?this.children[0]:null;"function"!=typeof b&&(b=function(a){return function(b){return b.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof a?b.name==a:b.name in a)}}(b));for(var e=0,t=this.children.length;e<t;++e)if(b(this.children[e]))return this.children[e];return null},getHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(a),a.getHtml()},setHtml:function(a){for(var b=0,e=(a=this.children=CKEDITOR.htmlParser.fragment.fromHtml(a).children).length;b<e;++b)a[b].parent=this},getOuterHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(a),a.getHtml()},split:function(a){for(var b=this.children.splice(a,this.children.length-a),e=this.clone(),t=0;t<b.length;++t)b[t].parent=e;return e.children=b,b[0]&&(b[0].previous=null),0<a&&(this.children[a-1].next=null),this.parent.add(e,this.getIndex()+1),e},find:function(a,b){void 0===b&&(b=!1);var e,t=[];for(e=0;e<this.children.length;e++){var g=this.children[e];("function"==typeof a&&a(g)||"string"==typeof a&&g.name===a)&&t.push(g),b&&g.find&&(t=t.concat(g.find(a,b)))}return t},findOne:function(a,b){var e=null,t=CKEDITOR.tools.array.find(this.children,(function(g){var t="function"==typeof a?a(g):g.name===a;return t||!b?t:(g.children&&g.findOne&&(e=g.findOne(a,!0)),!!e)}));return e||t||null},addClass:function(a){if(!this.hasClass(a)){var b=this.attributes.class||"";this.attributes.class=b+(b?" ":"")+a}},removeClass:function(a){var b=this.attributes.class;b&&((b=CKEDITOR.tools.trim(b.replace(new RegExp("(?:\\s+|^)"+a+"(?:\\s+|$)")," ")))?this.attributes.class=b:delete this.attributes.class)},hasClass:function(a){var b=this.attributes.class;return!!b&&new RegExp("(?:^|\\s)"+a+"(?=\\s|$)").test(b)},getFilterContext:function(a){var b=[];if(a||(a={nonEditable:!1,nestedEditable:!1}),a.nonEditable||"false"!=this.attributes.contenteditable?a.nonEditable&&!a.nestedEditable&&"true"==this.attributes.contenteditable&&b.push("nestedEditable",!0):b.push("nonEditable",!0),b.length){a=CKEDITOR.tools.copy(a);for(var e=0;e<b.length;e+=2)a[b[e]]=b[e+1]}return a}},!0)}(),function(){var a=/{([^}]+)}/g;CKEDITOR.template=function(a){this.source="function"==typeof a?a:String(a)},CKEDITOR.template.prototype.output=function(e,b){var t=("function"==typeof this.source?this.source(e):this.source).replace(a,(function(a,b){return void 0!==e[b]?e[b]:a}));return b?b.push(t):t}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(a){function e(){CKEDITOR.currentInstance==a&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}CKEDITOR.instances[a.name]=a,a.on("focus",(function(){CKEDITOR.currentInstance!=a&&(CKEDITOR.currentInstance=a,CKEDITOR.fire("currentInstance"))})),a.on("blur",e),a.on("destroy",e),CKEDITOR.fire("instance",null,a)},CKEDITOR.remove=function(a){delete CKEDITOR.instances[a.name]},function(){var a={};CKEDITOR.addTemplate=function(e,b){var t=a[e];return t||(t={name:e,source:b},CKEDITOR.fire("template",t),a[e]=new CKEDITOR.template(t.source))},CKEDITOR.getTemplate=function(e){return a[e]}}(),function(){var a=[];CKEDITOR.addCss=function(e){a.push(e)},CKEDITOR.getCss=function(){return a.join("\n")}}(),CKEDITOR.on("instanceDestroyed",(function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")})),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,CKEDITOR.inline=function(a,e){if(!(a=CKEDITOR.editor._getEditorElement(a)))return null;var b=new CKEDITOR.editor(e,a,CKEDITOR.ELEMENT_MODE_INLINE),t=a.is("textarea")?a:null;return t?(b.setData(t.getValue(),null,!0),(a=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!b.readOnly+'" class="cke_textarea_inline">'+t.getValue()+"</div>",CKEDITOR.document)).insertAfter(t),t.hide(),t.$.form&&b._attachToForm()):b.setData(a.getHtml(),null,!0),b.on("loaded",(function(){b.fire("uiReady"),b.editable(a),b.container=a,b.ui.contentsElement=a,b.setData(b.getData(1)),b.resetDirty(),b.fire("contentDom"),b.mode="wysiwyg",b.fire("mode"),b.status="ready",b.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,b)}),null,null,1e4),b.on("destroy",(function(){t&&(b.container.clearCustomData(),b.container.remove(),t.show()),b.element.clearCustomData(),delete b.element})),b},CKEDITOR.inlineAll=function(){var a,e,b;for(b in CKEDITOR.dtd.$editable)for(var t=CKEDITOR.document.getElementsByTag(b),n=0,o=t.count();n<o;n++)"true"==(a=t.getItem(n)).getAttribute("contenteditable")&&(e={element:a,config:{}},!1!==CKEDITOR.fire("inline",e)&&CKEDITOR.inline(a,e.config))},CKEDITOR.domReady((function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})),CKEDITOR.replaceClass="ckeditor",function(){function a(a,t,n,o){if(!(a=CKEDITOR.editor._getEditorElement(a)))return null;var g=new CKEDITOR.editor(t,a,o);return o==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.setStyle("visibility","hidden"),g._.required=a.hasAttribute("required"),a.removeAttribute("required")),n&&g.setData(n,null,!0),g.on("loaded",(function(){!function(a){var b=a.name,e=a.element,t=a.elementMode,g=a.fire("uiSpace",{space:"top",html:""}).html,n=a.fire("uiSpace",{space:"bottom",html:""}).html,o=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(a.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(a.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>');b=CKEDITOR.dom.element.createFromHtml(o.output({id:a.id,name:b,langDir:a.lang.dir,langCode:a.langCode,voiceLabel:a.title,topHtml:g?'<span id="'+a.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+g+"</span>":"",contentId:a.ui.spaceId("contents"),bottomHtml:n?'<span id="'+a.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+n+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"})),t==CKEDITOR.ELEMENT_MODE_REPLACE?(e.hide(),b.insertAfter(e)):e.append(b),a.container=b,a.ui.contentsElement=a.ui.space("contents"),g&&a.ui.space("top").unselectable(),n&&a.ui.space("bottom").unselectable(),e=a.config.width,t=a.config.height,e&&b.setStyle("width",CKEDITOR.tools.cssLength(e)),t&&a.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(t)),b.disableContextMenu(),CKEDITOR.env.webkit&&b.on("focus",(function(){a.focus()})),a.fireOnce("uiReady")}(g),o==CKEDITOR.ELEMENT_MODE_REPLACE&&g.config.autoUpdateElement&&a.$.form&&g._attachToForm(),g.setMode(g.config.startupMode,(function(){g.resetDirty(),g.status="ready",g.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,g)}))})),g.on("destroy",e),g}function e(){var a=this.container,b=this.element;a&&(a.clearCustomData(),a.remove()),b&&(b.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(b.show(),this._.required&&b.setAttribute("required","required")),delete this.element)}CKEDITOR.replace=function(b,e){return a(b,e,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(b,e,t){return a(b,e,t,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var a=document.getElementsByTagName("textarea"),b=0;b<a.length;b++){var e=null,t=a[b];if(t.name||t.id){if("string"==typeof arguments[0]){if(!new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(t.className))continue}else if("function"==typeof arguments[0]&&!1===arguments[0](t,e={}))continue;this.replace(t,e)}}},CKEDITOR.editor.prototype.addMode=function(a,b){(this._.modes||(this._.modes={}))[a]=b},CKEDITOR.editor.prototype.setMode=function(a,b){var e=this,t=this._.modes;if(a!=e.mode&&t&&t[a]){if(e.fire("beforeSetMode",a),e.mode){var n,g=e.checkDirty(),o=(t=e._.previousModeData,0);e.fire("beforeModeUnload"),e.editable(0),e._.previousMode=e.mode,e._.previousModeData=n=e.getData(1),"source"==e.mode&&t==n&&(e.fire("lockSnapshot",{forceUpdate:!0}),o=1),e.ui.space("contents").setHtml(""),e.mode=""}else e._.previousModeData=e.getData(1);this._.modes[a]((function(){e.mode=a,void 0!==g&&!g&&e.resetDirty(),o?e.fire("unlockSnapshot"):"wysiwyg"==a&&e.fire("saveSnapshot"),setTimeout((function(){e.fire("mode"),b&&b.call(e)}),0)}))}},CKEDITOR.editor.prototype.resize=function(a,b,e,t){var g=this.container,n=this.ui.space("contents"),o=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;(t=t?this.container.getFirst((function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_inner")})):g).setSize("width",a,!0),o&&(o.style.width="1%");var r=(t.$.offsetHeight||0)-(n.$.clientHeight||0);g=Math.max(b-(e?0:r),0),b=e?b+r:b,n.setStyle("height",g+"px"),o&&(o.style.width="100%"),this.fire("resize",{outerHeight:b,contentsHeight:g,outerWidth:a||t.getSize("width")})},CKEDITOR.editor.prototype.getResizable=function(a){return a?this.ui.space("contents"):this.container},CKEDITOR.domReady((function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)}))}(),CKEDITOR.config.startupMode="wysiwyg",function(){function a(a){var t,b=a.editor,n=a.data.path,r=n.blockLimit,g=a.data.selection,l=g.getRanges()[0];(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(g=function(a,b){if(a.isFake)return 0;var t=b.block||b.blockLimit,n=t&&t.getLast(e);return!t||!t.isBlockBoundary()||n&&n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary()||t.is("pre")||t.getBogus()?void 0:t}(g,n))&&(g.appendBogus(),t=CKEDITOR.env.ie),o(b,n.block,r)&&l.collapsed&&!l.getCommonAncestor().isReadOnly()&&((n=l.clone()).enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),(r=new CKEDITOR.dom.walker(n)).guard=function(a){return!e(a)||a.type==CKEDITOR.NODE_COMMENT||a.isReadOnly()},!r.checkForward()||n.checkStartOfBlock()&&n.checkEndOfBlock())&&(b=l.fixBlock(!0,b.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(b=b.getFirst(e))&&b.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(b.getText()).match(/^(?:&nbsp;|\xa0)$/)&&b.remove(),t=1,a.cancel()),t&&l.select()}function b(a){var b=a.data.getTarget();b.is("input")&&("submit"!=(b=b.getAttribute("type"))&&"reset"!=b||a.data.preventDefault())}function e(a){return d(a)&&q(a)}function t(a,b){return function(e){var t=e.data.$.toElement||e.data.$.fromElement||e.data.$.relatedTarget;(t=t&&t.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(t):null)&&(b.equals(t)||b.contains(t))||a.call(this,e)}}function n(a){function b(a){return function(b,n){if(n&&b.type==CKEDITOR.NODE_ELEMENT&&b.is(g)&&(t=b),!(n||!e(b)||a&&u(b)))return!1}}var t,n=a.getRanges()[0];a=a.root;var g={table:1,ul:1,ol:1,dl:1};if(n.startPath().contains(g)){var o=n.clone();if(o.collapse(1),o.setStartAt(a,CKEDITOR.POSITION_AFTER_START),(a=new CKEDITOR.dom.walker(o)).guard=b(),a.checkBackward(),t)return(o=n.clone()).collapse(),o.setEndAt(t,CKEDITOR.POSITION_AFTER_END),(a=new CKEDITOR.dom.walker(o)).guard=b(!0),t=!1,a.checkForward(),t}return null}function o(a,b,e){return!1!==a.config.autoParagraph&&a.activeEnterMode!=CKEDITOR.ENTER_BR&&(a.editable().equals(e)&&!b||b&&"true"==b.getAttribute("contenteditable"))}function g(a){return a.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==a.config.autoParagraph&&(a.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p")}function r(a){a&&a.isEmptyInlineRemoveable()&&a.remove()}function l(a){var b=a.editor;b.getSelection().scrollIntoView(),setTimeout((function(){b.fire("saveSnapshot")}),0)}function c(a,b,e){var t=a.getCommonAncestor(b);for(b=a=e?b:a;(a=a.getParent())&&!t.equals(a)&&1==a.getChildCount();)b=a;b.remove()}var d,q,h,u,p,f,m,E,T,C;CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(a,b){this.base(b.$||b),this.editor=a,this.status="unloaded",this.hasFocus=!1,this.setup()},proto:{focus:function(){var a;if(CKEDITOR.env.webkit&&!this.hasFocus&&(a=this.editor._.previousActive||this.getDocument().getActive(),this.contains(a)))a.focus();else{CKEDITOR.env.edge&&14<CKEDITOR.env.version&&!this.hasFocus&&this.getDocument().equals(CKEDITOR.document)&&(this.editor._.previousScrollTop=this.$.scrollTop);try{if(!CKEDITOR.env.ie||CKEDITOR.env.edge&&14<CKEDITOR.env.version||!this.getDocument().equals(CKEDITOR.document))if(CKEDITOR.env.chrome){var b=this.$.scrollTop;this.$.focus(),this.$.scrollTop=b}else this.$.focus();else this.$.setActive()}catch(e){if(!CKEDITOR.env.ie)throw e}CKEDITOR.env.safari&&!this.isInline()&&((a=CKEDITOR.document.getActive()).equals(this.getWindow().getFrame())||this.getWindow().focus())}},on:function(a,b){var e=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(a)&&(a="focus"==a?"focusin":"focusout",b=t(b,this),e[0]=a,e[1]=b),CKEDITOR.dom.element.prototype.on.apply(this,e)},attachListener:function(a){!this._.listeners&&(this._.listeners=[]);var b=Array.prototype.slice.call(arguments,1);return b=a.on.apply(a,b),this._.listeners.push(b),b},clearListeners:function(){var a=this._.listeners;try{for(;a.length;)a.pop().removeListener()}catch(e){}},restoreAttrs:function(){var b,e,a=this._.attrChanges;for(e in a)a.hasOwnProperty(e)&&(null!==(b=a[e])?this.setAttribute(e,b):this.removeAttribute(e))},attachClass:function(a){var b=this.getCustomData("classes");this.hasClass(a)||(!b&&(b=[]),b.push(a),this.setCustomData("classes",b),this.addClass(a))},changeAttr:function(a,b){var e=this.getAttribute(a);b!==e&&(!this._.attrChanges&&(this._.attrChanges={}),a in this._.attrChanges||(this._.attrChanges[a]=e),this.setAttribute(a,b))},insertText:function(a){this.editor.focus(),this.insertHtml(this.transformPlainTextToHtml(a),"text")},transformPlainTextToHtml:function(a){var b=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(a,b)},insertHtml:function(a,b,e){var t=this.editor;t.focus(),t.fire("saveSnapshot"),e||(e=t.getSelection().getRanges()[0]),f(this,b||"html",a,e),e.select(),l(this),this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(a,b,e){f(this,e||"html",a,b),this.editor.fire("afterInsertHtml",{intoRange:b})},insertElement:function(a,b){(n=this.editor).focus(),n.fire("saveSnapshot");var t=n.activeEnterMode,n=n.getSelection(),g=a.getName();g=CKEDITOR.dtd.$block[g],b||(b=n.getRanges()[0]),this.insertElementIntoRange(a,b)&&(b.moveToPosition(a,CKEDITOR.POSITION_AFTER_END),g&&((g=a.getNext((function(a){return e(a)&&!u(a)})))&&g.type==CKEDITOR.NODE_ELEMENT&&g.is(CKEDITOR.dtd.$block)?g.getDtd()["#"]?b.moveToElementEditStart(g):b.moveToElementEditEnd(a):g||t==CKEDITOR.ENTER_BR||(g=b.fixBlock(!0,t==CKEDITOR.ENTER_DIV?"div":"p"),b.moveToElementEditStart(g)))),n.selectRanges([b]),l(this)},insertElementIntoSelection:function(a){this.insertElement(a)},insertElementIntoRange:function(a,b){var e,t,n=this.editor,o=n.config.enterMode,l=a.getName(),g=CKEDITOR.dtd.$block[l];if(b.checkReadOnly())return!1;if(b.deleteContents(1),b.startContainer.type==CKEDITOR.NODE_ELEMENT&&(b.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})?m(b):b.startContainer.is(CKEDITOR.dtd.$list)&&E(b)),g)for(;(e=b.getCommonAncestor(0,1))&&(t=CKEDITOR.dtd[e.getName()])&&(!t||!t[l]);)if(e.getName()in CKEDITOR.dtd.span){g=b.splitElement(e);var c=b.createBookmark();r(e),r(g),b.moveToBookmark(c)}else b.checkStartOfBlock()&&b.checkEndOfBlock()?(b.setStartBefore(e),b.collapse(!0),e.remove()):b.splitBlock(o==CKEDITOR.ENTER_DIV?"div":"p",n.editable());return b.insertNode(a),!0},setData:function(a,b){b||(a=this.editor.dataProcessor.toHtml(a)),this.setHtml(a),this.fixInitialSelection(),"unloaded"==this.status&&(this.status="ready"),this.editor.fire("dataReady")},getData:function(a){var b=this.getHtml();return a||(b=this.editor.dataProcessor.toDataFormat(b)),b},setReadOnly:function(a){this.setAttribute("contenteditable",!a)},detach:function(){this.removeClass("cke_editable"),this.status="detached";var a=this.editor;this._.detach(),delete a.document,delete a.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function a(){var t,b=e.getDocument().$,n=b.getSelection();e:if(n.anchorNode&&n.anchorNode==e.$)t=!0;else{if(CKEDITOR.env.webkit&&(t=e.getDocument().getActive())&&t.equals(e)&&!n.anchorNode){t=!0;break e}t=void 0}t&&((t=new CKEDITOR.dom.range(e)).moveToElementEditStart(e),(b=b.createRange()).setStart(t.startContainer.$,t.startOffset),b.collapse(!0),n.removeAllRanges(),n.addRange(b))}var e=this;CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks)?this.hasFocus&&(this.focus(),function(){var a=e.getDocument().$,t=a.selection,n=e.getDocument().getActive();"None"==t.type&&n.equals(e)&&(t=new CKEDITOR.dom.range(e),a=a.body.createTextRange(),t.moveToElementEditStart(e),(t=t.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent()),a.moveToElementText(t.$),a.collapse(!0),a.select())}()):this.hasFocus?(this.focus(),a()):this.once("focus",(function(){a()}),null,null,-999)},getHtmlFromRange:function(a){return a.collapsed?new CKEDITOR.dom.documentFragment(a.document):(a={doc:this.getDocument(),range:a.clone()},T.eol.detect(a,this),T.bogus.exclude(a),T.cell.shrink(a),a.fragment=a.range.cloneContents(),T.tree.rebuild(a,this),T.eol.fix(a,this),new CKEDITOR.dom.documentFragment(a.fragment.$))},extractHtmlFromRange:function(a,b){var e=C,t={range:a,doc:a.document},n=this.getHtmlFromRange(a);if(a.collapsed)return a.optimize(),n;if(a.enlarge(CKEDITOR.ENLARGE_INLINE,1),e.table.detectPurge(t),t.bookmark=a.createBookmark(),delete t.range,(g=this.editor.createRange()).moveToPosition(t.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START),t.targetBookmark=g.createBookmark(),e.list.detectMerge(t,this),e.table.detectRanges(t,this),e.block.detectMerge(t,this),t.tableContentsRanges?(e.table.deleteRanges(t),a.moveToBookmark(t.bookmark),t.range=a):(a.moveToBookmark(t.bookmark),t.range=a,a.extractContents(e.detectExtractMerge(t))),a.moveToBookmark(t.targetBookmark),a.optimize(),e.fixUneditableRangePosition(a),e.list.merge(t,this),e.table.purge(t,this),e.block.merge(t,this),b){if(e=a.startPath(),t=a.checkStartOfBlock()&&a.checkEndOfBlock()&&e.block&&!a.root.equals(e.block)){e:{var o,g=0;if(t=e.block.getElementsByTag("span"))for(;o=t.getItem(g++);)if(!q(o)){t=!0;break e}t=!1}t=!t}t&&(a.moveToPosition(e.block,CKEDITOR.POSITION_BEFORE_START),e.block.remove())}else e.autoParagraph(this.editor,a),h(a.startContainer)&&a.startContainer.appendBogus();return a.startContainer.mergeSiblings(),n},setup:function(){var a=this.editor;if(this.attachListener(a,"beforeGetData",(function(){var b=this.getData();this.is("textarea")||!1!==a.config.ignoreEmptyParagraph&&(b=b.replace(p,(function(a,b){return b}))),a.setData(b,null,1)}),this),this.attachListener(a,"getSnapshot",(function(a){a.data=this.getData(1)}),this),this.attachListener(a,"afterSetData",(function(){this.setData(a.getData(1))}),this),this.attachListener(a,"loadSnapshot",(function(a){this.setData(a.data,1)}),this),this.attachListener(a,"beforeFocus",(function(){var b=a.getSelection();(b=b&&b.getNative())&&"Control"==b.type||this.focus()}),this),this.attachListener(a,"insertHtml",(function(a){this.insertHtml(a.data.dataValue,a.data.mode,a.data.range)}),this),this.attachListener(a,"insertElement",(function(a){this.insertElement(a.data)}),this),this.attachListener(a,"insertText",(function(a){this.insertText(a.data)}),this),this.setReadOnly(a.readOnly),this.attachClass("cke_editable"),a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):a.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&a.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed"),this.attachClass("cke_contents_"+a.config.contentsLangDirection),a.keystrokeHandler.blockedKeystrokes[8]=+a.readOnly,a.keystrokeHandler.attach(this),this.on("blur",(function(){this.hasFocus=!1}),null,null,-1),this.on("focus",(function(){this.hasFocus=!0}),null,null,-1),CKEDITOR.env.webkit&&this.on("scroll",(function(){a._.previousScrollTop=a.editable().$.scrollTop}),null,null,-1),CKEDITOR.env.edge&&14<CKEDITOR.env.version){var t=function(){var b=a.editable();null!=a._.previousScrollTop&&b.getDocument().equals(CKEDITOR.document)&&(b.$.scrollTop=a._.previousScrollTop,a._.previousScrollTop=null,this.removeListener("scroll",t))};this.on("scroll",t)}if(a.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,a.once("contentDom",(function(){a.focusManager.focus(this)}),this)),this.isInline()&&this.changeAttr("tabindex",a.tabIndex),!this.is("textarea")){a.document=this.getDocument(),a.window=this.getWindow();var g=a.document;this.changeAttr("spellcheck",!a.config.disableNativeSpellChecker);var o=a.config.contentsLangDirection;this.getDirection(1)!=o&&this.changeAttr("dir",o);var r=CKEDITOR.getCss();if(r){var l=(o=g.getHead()).getCustomData("stylesheet");l?r!=l.getText()&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?l.$.styleSheet.cssText=r:l.setText(r)):(r=g.appendStyleText(r),r=new CKEDITOR.dom.element(r.ownerNode||r.owningElement),o.setCustomData("stylesheet",r),r.data("cke-temp",1))}o=g.getCustomData("stylesheet_ref")||0,g.setCustomData("stylesheet_ref",o+1),this.setCustomData("cke_includeReadonly",!a.config.disableReadonlyStyling),this.attachListener(this,"click",(function(a){a=a.data;var b=new CKEDITOR.dom.elementPath(a.getTarget(),this).contains("a");b&&2!=a.$.button&&b.isReadOnly()&&a.preventDefault()}));var h={8:1,46:1};this.attachListener(a,"key",(function(b){if(a.readOnly)return!0;var e,t=b.data.domEvent.getKey();if(0!==(b=a.getSelection()).getRanges().length){if(t in h){var o,r,l,q,g=b.getRanges()[0],c=g.startPath();t=8==t,CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(o=b.getSelectedElement())||(o=n(b))?(a.fire("saveSnapshot"),g.moveToPosition(o,CKEDITOR.POSITION_BEFORE_START),o.remove(),g.select(),a.fire("saveSnapshot"),e=1):g.collapsed&&((r=c.block)&&(q=r[t?"getPrevious":"getNext"](d))&&q.type==CKEDITOR.NODE_ELEMENT&&q.is("table")&&g[t?"checkStartOfBlock":"checkEndOfBlock"]()?(a.fire("saveSnapshot"),g[t?"checkEndOfBlock":"checkStartOfBlock"]()&&r.remove(),g["moveToElementEdit"+(t?"End":"Start")](q),g.select(),a.fire("saveSnapshot"),e=1):c.blockLimit&&c.blockLimit.is("td")&&(l=c.blockLimit.getAscendant("table"))&&g.checkBoundaryOfElement(l,t?CKEDITOR.START:CKEDITOR.END)&&(q=l[t?"getPrevious":"getNext"](d))?(a.fire("saveSnapshot"),g["moveToElementEdit"+(t?"End":"Start")](q),g.checkStartOfBlock()&&g.checkEndOfBlock()?q.remove():g.select(),a.fire("saveSnapshot"),e=1):(l=c.contains(["td","th","caption"]))&&g.checkBoundaryOfElement(l,t?CKEDITOR.START:CKEDITOR.END)&&(e=1))}return!e}})),a.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",(function(b){b.data.getKeystroke()in h&&!this.getFirst(e)&&(this.appendBogus(),(b=a.createRange()).moveToPosition(this,CKEDITOR.POSITION_AFTER_START),b.select())})),this.attachListener(this,"dblclick",(function(b){if(a.readOnly)return!1;b={element:b.data.getTarget()},a.fire("doubleclick",b)})),CKEDITOR.env.ie&&this.attachListener(this,"click",b),CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",(function(b){var e=b.data.getTarget();e.is("img","hr","input","textarea","select")&&!e.isReadOnly()&&(a.getSelection().selectElement(e),e.is("input","textarea","select")&&b.data.preventDefault())})),CKEDITOR.env.edge&&this.attachListener(this,"mouseup",(function(b){(b=b.data.getTarget())&&b.is("img")&&!b.isReadOnly()&&a.getSelection().selectElement(b)})),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",(function(b){if(2==b.data.$.button&&!(b=b.data.getTarget()).getAscendant("table")&&!b.getOuterHtml().replace(p,"")){var e=a.createRange();e.moveToElementEditStart(b),e.select(!0)}})),CKEDITOR.env.webkit&&(this.attachListener(this,"click",(function(a){a.data.getTarget().is("input","select")&&a.data.preventDefault()})),this.attachListener(this,"mouseup",(function(a){a.data.getTarget().is("input","textarea")&&a.data.preventDefault()}))),CKEDITOR.env.webkit&&this.attachListener(a,"key",(function(b){if(a.readOnly)return!0;if((e=b.data.domEvent.getKey())in h&&0!==(b=a.getSelection()).getRanges().length){var e=8==e,t=b.getRanges()[0];if(b=t.startPath(),t.collapsed)e:{var g=b.block;if(g&&t[e?"checkStartOfBlock":"checkEndOfBlock"]()&&t.moveToClosestEditablePosition(g,!e)&&t.collapsed){if(t.startContainer.type==CKEDITOR.NODE_ELEMENT){var n=t.startContainer.getChild(t.startOffset-(e?1:0));if(n&&n.type==CKEDITOR.NODE_ELEMENT&&n.is("hr")){a.fire("saveSnapshot"),n.remove(),b=!0;break e}}var o;!(t=t.startPath().block)||t&&t.contains(g)?b=void 0:(a.fire("saveSnapshot"),(o=(e?t:g).getBogus())&&o.remove(),n=(o=a.getSelection()).createBookmarks(),(e?g:t).moveChildren(e?t:g,!1),b.lastElement.mergeSiblings(),c(g,t,!e),o.selectBookmarks(n),b=!0)}else b=!1}else e=t,o=b.block,t=e.endPath().block,o&&t&&!o.equals(t)?(a.fire("saveSnapshot"),(g=o.getBogus())&&g.remove(),e.enlarge(CKEDITOR.ENLARGE_INLINE),e.deleteContents(),t.getParent()&&(t.moveChildren(o,!1),b.lastElement.mergeSiblings(),c(o,t,!0)),(e=a.getSelection().getRanges()[0]).collapse(1),e.optimize(),""===e.startContainer.getHtml()&&e.startContainer.appendBogus(),e.select(),b=!0):b=!1;if(!b)return;return a.getSelection().scrollIntoView(),a.fire("saveSnapshot"),!1}}),this,null,100)}}},_:{detach:function(){var a;if(this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs(),a=this.removeCustomData("classes"))for(;a.length;)this.removeClass(a.pop());if(!this.is("textarea")){var b=(a=this.getDocument()).getHead();if(b.getCustomData("stylesheet")){var e=a.getCustomData("stylesheet_ref");--e?a.setCustomData("stylesheet_ref",e):(a.removeCustomData("stylesheet_ref"),b.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload"),delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(a){var b=this._.editable;return b&&a?0:(arguments.length&&(b=this._.editable=a?a instanceof CKEDITOR.editable?a:new CKEDITOR.editable(this,a):(b&&b.detach(),null)),b)},CKEDITOR.on("instanceLoaded",(function(b){var e=b.editor;e.on("insertElement",(function(a){(a=a.data).type==CKEDITOR.NODE_ELEMENT&&(a.is("input")||a.is("textarea"))&&("false"!=a.getAttribute("contentEditable")&&a.data("cke-editable",a.hasAttribute("contenteditable")?"true":"1"),a.setAttribute("contentEditable",!1))})),e.on("selectionChange",(function(b){if(!e.readOnly){var t=e.getSelection();t&&!t.isLocked&&(t=e.checkDirty(),e.fire("lockSnapshot"),a(b),e.fire("unlockSnapshot"),!t&&e.resetDirty())}}))})),CKEDITOR.on("instanceCreated",(function(a){var b=a.editor;b.on("mode",(function(){var a=b.editable();if(a&&a.isInline()){var e=b.title;if(a.changeAttr("role","textbox"),a.changeAttr("aria-multiline","true"),a.changeAttr("aria-label",e),e&&a.changeAttr("title",e),(n=b.fire("ariaEditorHelpLabel",{}).label)&&(e=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var t=CKEDITOR.tools.getNextId(),n=CKEDITOR.dom.element.createFromHtml('<span id="'+t+'" class="cke_voice_label">'+n+"</span>");e.append(n),a.changeAttr("aria-describedby",t)}}}))})),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}"),d=CKEDITOR.dom.walker.whitespaces(!0),q=CKEDITOR.dom.walker.bookmark(!1,!0),h=CKEDITOR.dom.walker.empty(),u=CKEDITOR.dom.walker.bogus(),p=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,f=function(){function a(b){return b.type==CKEDITOR.NODE_ELEMENT}function b(e,t){var n,g,o,r,l=[],c=t.range.startContainer;n=t.range.startPath(),c=d[c.getName()];for(var h=0,q=e.getChildren(),f=q.count(),m=-1,E=-1,T=0,C=n.contains(d.$list);h<f;++h)a(n=q.getItem(h))?(o=n.getName(),C&&o in CKEDITOR.dtd.$list?l=l.concat(b(n,t)):(r=!!c[o],"br"!=o||!n.data("cke-eol")||h&&h!=f-1||(T=(g=h?l[h-1].node:q.getItem(h+1))&&(!a(g)||!g.is("br")),g=g&&a(g)&&d.$block[g.getName()]),-1!=m||r||(m=h),r||(E=h),l.push({isElement:1,isLineBreak:T,isBlock:n.isBlockBoundary(),hasBlockSibling:g,node:n,name:o,allowed:r}),g=T=0)):l.push({isElement:0,node:n,allowed:1});return-1<m&&(l[m].firstNotAllowed=1),-1<E&&(l[E].lastNotAllowed=1),l}function t(b,e){var n,o=[],g=b.getChildren(),r=g.count(),l=0,c=d[e],h=!b.is(d.$inline)||b.is("br");for(h&&o.push(" ");l<r;l++)a(n=g.getItem(l))&&!n.is(c)?o=o.concat(t(n,e)):o.push(n);return h&&o.push(" "),o}function n(b){return a(b.startContainer)&&b.startContainer.getChild(b.startOffset-1)}function l(b){return b&&a(b)&&(b.is(d.$removeEmpty)||b.is("a")&&!b.isBlockBoundary())}function c(b,e,t,n){var o,r,g=b.clone();g.setEndAt(e,CKEDITOR.POSITION_BEFORE_END),(o=new CKEDITOR.dom.walker(g).next())&&a(o)&&q[o.getName()]&&(r=o.getPrevious())&&a(r)&&!r.getParent().equals(b.startContainer)&&t.contains(r)&&n.contains(o)&&o.isIdentical(r)&&(o.moveChildren(r),o.remove(),c(b,e,t,n))}var d=CKEDITOR.dtd,q={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},h={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},f=CKEDITOR.tools.extend({},d.$inline);return delete f.br,function(m,q,E,T){var C=m.editor,I=!1;if("unfiltered_html"==q&&(q="html",I=!0),!T.checkReadOnly()){I=(q={type:q,dontFilter:I,editable:m,editor:C,range:T,blockLimit:_=new CKEDITOR.dom.elementPath(T.startContainer,T.root).blockLimit||T.root,mergeCandidates:[],zombies:[]}).range;var p,O,D,R,v,y,K,_=q.mergeCandidates,u="html"===q.type;if("text"==q.type&&I.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(O=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",I.document),I.insertNode(O),I.setStartAfter(O)),D=new CKEDITOR.dom.elementPath(I.startContainer),q.endPath=R=new CKEDITOR.dom.elementPath(I.endContainer),!I.collapsed){p=R.block||R.blockLimit;var k=I.getCommonAncestor();p&&!p.equals(k)&&!p.contains(k)&&I.checkEndOfBlock()&&q.zombies.push(p),I.deleteContents()}for(;(v=n(I))&&a(v)&&v.isBlockBoundary()&&D.contains(v);)I.moveToPosition(v,CKEDITOR.POSITION_BEFORE_END);for(c(I,q.blockLimit,D,R),O&&(I.setEndBefore(O),I.collapse(),O.remove()),(p=(O=I.startPath()).contains(l,!1,1))&&(y=I.splitElement(p),q.inlineStylesRoot=p,q.inlineStylesPeak=O.lastElement),O=I.createBookmark(),u&&(r(p),r(y)),(p=O.startNode.getPrevious(e))&&a(p)&&l(p)&&_.push(p),(p=O.startNode.getNext(e))&&a(p)&&l(p)&&_.push(p),p=O.startNode;(p=p.getParent())&&l(p);)_.push(p);if(I.moveToBookmark(O),""===C.getData()&&C.enterMode===CKEDITOR.ENTER_DIV&&((C=m.getFirst())&&C.remove(),T.setStartAt(m,CKEDITOR.POSITION_AFTER_START),T.collapse(!0)),m=E){if(m=q.range,"text"==q.type&&q.inlineStylesRoot){for(C=(T=q.inlineStylesPeak).getDocument().createText("{cke-peak}"),y=q.inlineStylesRoot.getParent();!T.equals(y);)C=C.appendTo(T.clone()),T=T.getParent();E=C.getOuterHtml().split("{cke-peak}").join(E)}if(T=q.blockLimit.getName(),/^\s+|\s+$/.test(E)&&"span"in CKEDITOR.dtd[T]&&(E=(F='<span data-cke-marker="1">&nbsp;</span>')+E+F),E=q.editor.dataProcessor.toHtml(E,{context:null,fixForBody:!1,protectedWhitespaces:!!F,dontFilter:q.dontFilter,filter:q.editor.activeFilter,enterMode:q.editor.activeEnterMode}),(T=m.document.createElement("body")).setHtml(E),F&&(T.getFirst().remove(),T.getLast().remove()),(F=m.startPath().block)&&(1!=F.getChildCount()||!F.getBogus()))e:{var w;if(1==T.getChildCount()&&a(w=T.getFirst())&&w.is(h)&&!w.hasAttribute("contenteditable")){for(m=0,y=(F=w.getElementsByTag("*")).count();m<y;m++)if(!(C=F.getItem(m)).is(f))break e;w.moveChildren(w.getParent(1)),w.remove()}}q.dataWrapper=T,m=E}if(m){m=(w=q.range).document,T=q.blockLimit,y=0;var S,N,x,A,L,F=[];for(E=O=0,C=w.startContainer,I=(v=q.endPath.elements[0]).getPosition(C),_=!(!v.getCommonAncestor(C)||I==CKEDITOR.POSITION_IDENTICAL||I&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),function(b,e){function t(b,e){if(e.isBlock&&e.isElement&&!e.node.is("br")&&a(b)&&b.is("br"))return b.remove(),1}var n=e.endContainer.getChild(e.endOffset),g=e.endContainer.getChild(e.endOffset-1);n&&t(n,b[b.length-1]),g&&t(g,b[0])&&(e.setEnd(e.endContainer,e.endOffset-1),e.collapse())}(C=b(q.dataWrapper,q),w);y<C.length;y++)if((u=(I=C[y]).isLineBreak)&&(u=w,p=T,R=D=void 0,I.hasBlockSibling?u=1:(D=u.startContainer.getAscendant(d.$block,1))&&D.is({div:1,p:1})?(R=D.getPosition(p))==CKEDITOR.POSITION_IDENTICAL||R==CKEDITOR.POSITION_CONTAINS?u=0:(p=u.splitElement(D),u.moveToPosition(p,CKEDITOR.POSITION_AFTER_START),u=1):u=0),u)E=0<y;else{if(u=w.startPath(),!I.isBlock&&o(q.editor,u.block,u.blockLimit)&&(x=g(q.editor))&&((x=m.createElement(x)).appendBogus(),w.insertNode(x),CKEDITOR.env.needsBrFiller&&(S=x.getBogus())&&S.remove(),w.moveToPosition(x,CKEDITOR.POSITION_BEFORE_END)),(u=w.startPath().block)&&!u.equals(N)&&((S=u.getBogus())&&(S.remove(),F.push(u)),N=u),I.firstNotAllowed&&(O=1),O&&I.isElement){for(u=w.startContainer,p=null;u&&!d[u.getName()][I.name];){if(u.equals(T)){u=null;break}p=u,u=u.getParent()}if(u)p&&(A=w.splitElement(p),q.zombies.push(A),q.zombies.push(p));else{p=T.getName(),L=!y,u=y==C.length-1,D=[],R=(p=t(I.node,p)).length,k=0;for(var P=void 0,B=0,M=-1;k<R;k++)" "==(P=p[k])?(B||L&&!k||(D.push(new CKEDITOR.dom.text(" ")),M=D.length),B=1):(D.push(P),B=0);u&&M==D.length&&D.pop(),L=D}}if(L){for(;u=L.pop();)w.insertNode(u);L=0}else w.insertNode(I.node);I.lastNotAllowed&&y<C.length-1&&((A=_?v:A)&&w.setEndAt(A,CKEDITOR.POSITION_AFTER_START),O=0),w.collapse()}(S=1==C.length&&((S=C[0]).isElement&&"false"==S.node.getAttribute("contenteditable")))&&(E=!0,u=C[0].node,w.setStartAt(u,CKEDITOR.POSITION_BEFORE_START),w.setEndAt(u,CKEDITOR.POSITION_AFTER_END)),q.dontMoveCaret=E,q.bogusNeededBlocks=F}for(S=q.range,A=q.bogusNeededBlocks,L=S.createBookmark();N=q.zombies.pop();)N.getParent()&&((x=S.clone()).moveToElementEditStart(N),x.removeEmptyBlocksAtEnd());if(A)for(;N=A.pop();)CKEDITOR.env.needsBrFiller?N.appendBogus():N.append(S.document.createText(" "));for(;N=q.mergeCandidates.pop();)N.mergeSiblings();if(S.moveToBookmark(L),!q.dontMoveCaret){for(N=n(S);N&&a(N)&&!N.is(d.$empty);){if(N.isBlockBoundary())S.moveToPosition(N,CKEDITOR.POSITION_BEFORE_END);else{if(l(N)&&N.getHtml().match(/(\s|&nbsp;)$/g)){K=null;break}(K=S.clone()).moveToPosition(N,CKEDITOR.POSITION_BEFORE_END)}N=N.getLast(e)}K&&S.moveToRange(K)}}}}(),m=function(){function a(b){return(b=new CKEDITOR.dom.walker(b)).guard=function(a,b){return!b&&(a.type==CKEDITOR.NODE_ELEMENT?a.is(CKEDITOR.dtd.$tableContent):void 0)},b.evaluator=function(a){return a.type==CKEDITOR.NODE_ELEMENT},b}function b(a,e,t){return e=a.getDocument().createElement(e),a.append(e,t),e}function e(a){for(var e,b=a.count();0<b--;)e=a.getItem(b),CKEDITOR.tools.trim(e.getHtml())||(e.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&e.getChildCount()&&e.getFirst().remove())}return function(t){var n=t.startContainer,g=n.getAscendant("table",1),o=!1;e(g.getElementsByTag("td")),e(g.getElementsByTag("th")),(g=t.clone()).setStart(n,0),(g=a(g).lastBackward())||((g=t.clone()).setEndAt(n,CKEDITOR.POSITION_BEFORE_END),g=a(g).lastForward(),o=!0),g||(g=n),g.is("table")?(t.setStartAt(g,CKEDITOR.POSITION_BEFORE_START),t.collapse(!0),g.remove()):(g.is({tbody:1,thead:1,tfoot:1})&&(g=b(g,"tr",o)),g.is("tr")&&(g=b(g,g.getParent().is("thead")?"th":"td",o)),(n=g.getBogus())&&n.remove(),t.moveToPosition(g,o?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}(),E=function(){function a(b){return(b=new CKEDITOR.dom.walker(b)).guard=function(a,b){return!b&&(a.type==CKEDITOR.NODE_ELEMENT?a.is(CKEDITOR.dtd.$list)||a.is(CKEDITOR.dtd.$listItem):void 0)},b.evaluator=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$listItem)},b}return function(b){var e,t=b.startContainer,n=!1;(e=b.clone()).setStart(t,0),(e=a(e).lastBackward())||((e=b.clone()).setEndAt(t,CKEDITOR.POSITION_BEFORE_END),e=a(e).lastForward(),n=!0),e||(e=t),e.is(CKEDITOR.dtd.$list)?(b.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),b.collapse(!0),e.remove()):((t=e.getBogus())&&t.remove(),b.moveToPosition(e,n?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),b.select())}}(),T={eol:{detect:function(a,b){var e=a.range,t=e.clone(),n=e.clone(),g=new CKEDITOR.dom.elementPath(e.startContainer,b),o=new CKEDITOR.dom.elementPath(e.endContainer,b);t.collapse(1),n.collapse(),g.block&&t.checkBoundaryOfElement(g.block,CKEDITOR.END)&&(e.setStartAfter(g.block),a.prependEolBr=1),o.block&&n.checkBoundaryOfElement(o.block,CKEDITOR.START)&&(e.setEndBefore(o.block),a.appendEolBr=1)},fix:function(a,b){var e,t=b.getDocument();a.appendEolBr&&(e=this.createEolBr(t),a.fragment.append(e)),!a.prependEolBr||e&&!e.getPrevious()||a.fragment.append(this.createEolBr(t),1)},createEolBr:function(a){return a.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(a){var b,e=(b=a.range.getBoundaryNodes()).startNode;!(b=b.endNode)||!u(b)||e&&e.equals(b)||a.range.setEndBefore(b)}},tree:{rebuild:function(a,b){var e,t=(o=a.range).getCommonAncestor(),n=new CKEDITOR.dom.elementPath(t,b),g=new CKEDITOR.dom.elementPath(o.startContainer,b),o=new CKEDITOR.dom.elementPath(o.endContainer,b);if(t.type==CKEDITOR.NODE_TEXT&&(t=t.getParent()),n.blockLimit.is({tr:1,table:1})){var r=n.contains("table").getParent();e=function(a){return!a.equals(r)}}else if(n.block&&n.block.is(CKEDITOR.dtd.$listItem)&&(g=g.contains(CKEDITOR.dtd.$list),o=o.contains(CKEDITOR.dtd.$list),!g.equals(o))){var l=n.contains(CKEDITOR.dtd.$list).getParent();e=function(a){return!a.equals(l)}}e||(e=function(a){return!a.equals(n.block)&&!a.equals(n.blockLimit)}),this.rebuildFragment(a,b,t,e)},rebuildFragment:function(a,b,e,t){for(var n;e&&!e.equals(b)&&t(e);)n=e.clone(0,1),a.fragment.appendTo(n),a.fragment=n,e=e.getParent()}},cell:{shrink:function(a){var b=(a=a.range).startContainer,e=a.endContainer,t=a.startOffset,n=a.endOffset;b.type==CKEDITOR.NODE_ELEMENT&&b.equals(e)&&b.is("tr")&&++t==n&&a.shrink(CKEDITOR.SHRINK_TEXT)}}},C=function(){function a(b,e){var t=b.getParent();t.is(CKEDITOR.dtd.$inline)&&b[e?"insertBefore":"insertAfter"](t)}function b(e,t,n){a(t),a(n,1);for(var g;g=n.getNext();)g.insertAfter(t),t=g;h(e)&&e.remove()}function e(a,b){var e=new CKEDITOR.dom.range(a);return e.setStartAfter(b.startNode),e.setEndBefore(b.endNode),e}return{list:{detectMerge:function(a,b){var t=e(b,a.bookmark),n=t.startPath(),g=t.endPath(),o=n.contains(CKEDITOR.dtd.$list),r=g.contains(CKEDITOR.dtd.$list);a.mergeList=o&&r&&o.getParent().equals(r.getParent())&&!o.equals(r),a.mergeListItems=n.block&&g.block&&n.block.is(CKEDITOR.dtd.$listItem)&&g.block.is(CKEDITOR.dtd.$listItem),(a.mergeList||a.mergeListItems)&&((t=t.clone()).setStartBefore(a.bookmark.startNode),t.setEndAfter(a.bookmark.endNode),a.mergeListBookmark=t.createBookmark())},merge:function(a,e){if(a.mergeListBookmark){var t=a.mergeListBookmark.startNode,n=a.mergeListBookmark.endNode,g=new CKEDITOR.dom.elementPath(t,e),o=new CKEDITOR.dom.elementPath(n,e);if(a.mergeList){var r=g.contains(CKEDITOR.dtd.$list),l=o.contains(CKEDITOR.dtd.$list);r.equals(l)||(l.moveChildren(r),l.remove())}a.mergeListItems&&(g=g.contains(CKEDITOR.dtd.$listItem),o=o.contains(CKEDITOR.dtd.$listItem),g.equals(o)||b(o,t,n)),t.remove(),n.remove()}}},block:{detectMerge:function(a,b){if(!a.tableContentsRanges&&!a.mergeListBookmark){var e=new CKEDITOR.dom.range(b);e.setStartBefore(a.bookmark.startNode),e.setEndAfter(a.bookmark.endNode),a.mergeBlockBookmark=e.createBookmark()}},merge:function(a,e){if(a.mergeBlockBookmark&&!a.purgeTableBookmark){var t=a.mergeBlockBookmark.startNode,n=a.mergeBlockBookmark.endNode,g=new CKEDITOR.dom.elementPath(t,e),o=new CKEDITOR.dom.elementPath(n,e);g=g.block,o=o.block,g&&o&&!g.equals(o)&&b(o,t,n),t.remove(),n.remove()}}},table:function(){function a(e){var g,n=[],o=new CKEDITOR.dom.walker(e),r=e.startPath().contains(t),l=e.endPath().contains(t),c={};return o.guard=function(a,o){if(a.type==CKEDITOR.NODE_ELEMENT){var d="visited_"+(o?"out":"in");if(a.getCustomData(d))return;CKEDITOR.dom.element.setMarker(c,a,d,1)}if(o&&r&&a.equals(r))(g=e.clone()).setEndAt(r,CKEDITOR.POSITION_BEFORE_END),n.push(g);else if(!o&&l&&a.equals(l))(g=e.clone()).setStartAt(l,CKEDITOR.POSITION_AFTER_START),n.push(g);else{if((d=!o)&&(d=a.type==CKEDITOR.NODE_ELEMENT&&a.is(t)&&(!r||b(a,r))&&(!l||b(a,l))),!d&&(d=o))if(a.is(t)){d=r&&r.getAscendant("table",!0);var h=l&&l.getAscendant("table",!0),q=a.getAscendant("table",!0);d=d&&d.contains(q)||h&&h.contains(q)}else d=void 0;d&&((g=e.clone()).selectNodeContents(a),n.push(g))}},o.lastForward(),CKEDITOR.dom.element.clearAllMarkers(c),n}function b(a,e){var t=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,n=a.getPosition(e);return n!==CKEDITOR.POSITION_IDENTICAL&&0==(n&t)}var t={td:1,th:1,caption:1};return{detectPurge:function(a){var b=a.range;(e=b.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT);var e=new CKEDITOR.dom.walker(e),n=0;if(e.evaluator=function(a){a.type==CKEDITOR.NODE_ELEMENT&&a.is(t)&&++n},e.checkForward(),1<n){e=b.startPath().contains("table");var g=b.endPath().contains("table");e&&g&&b.checkBoundaryOfElement(e,CKEDITOR.START)&&b.checkBoundaryOfElement(g,CKEDITOR.END)&&((b=a.range.clone()).setStartBefore(e),b.setEndAfter(g),a.purgeTableBookmark=b.createBookmark())}},detectRanges:function(n,g){var o,r,l=e(g,n.bookmark),c=l.clone(),d=l.getCommonAncestor();d.is(CKEDITOR.dtd.$tableContent)&&!d.is(t)&&(d=d.getAscendant("table",!0)),r=d,d=new CKEDITOR.dom.elementPath(l.startContainer,r),r=new CKEDITOR.dom.elementPath(l.endContainer,r),d=d.contains("table"),r=r.contains("table"),(d||r)&&(d&&r&&b(d,r)?(n.tableSurroundingRange=c,c.setStartAt(d,CKEDITOR.POSITION_AFTER_END),c.setEndAt(r,CKEDITOR.POSITION_BEFORE_START),(c=l.clone()).setEndAt(d,CKEDITOR.POSITION_AFTER_END),(o=l.clone()).setStartAt(r,CKEDITOR.POSITION_BEFORE_START),o=a(c).concat(a(o))):d?r||(n.tableSurroundingRange=c,c.setStartAt(d,CKEDITOR.POSITION_AFTER_END),l.setEndAt(d,CKEDITOR.POSITION_AFTER_END)):(n.tableSurroundingRange=c,c.setEndAt(r,CKEDITOR.POSITION_BEFORE_START),l.setStartAt(r,CKEDITOR.POSITION_AFTER_START)),n.tableContentsRanges=o||a(l))},deleteRanges:function(a){for(var b;b=a.tableContentsRanges.pop();)b.extractContents(),h(b.startContainer)&&b.startContainer.appendBogus();a.tableSurroundingRange&&a.tableSurroundingRange.extractContents()},purge:function(a){if(a.purgeTableBookmark){var b=a.doc,e=a.range.clone();(b=b.createElement("p")).insertBefore(a.purgeTableBookmark.startNode),e.moveToBookmark(a.purgeTableBookmark),e.deleteContents(),a.range.moveToPosition(b,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(a){return!(a.range.startPath().contains(CKEDITOR.dtd.$listItem)&&a.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(a){a.startContainer.getDtd()["#"]||a.moveToClosestEditablePosition(null,!0)},autoParagraph:function(a,b){var e,t=b.startPath();o(a,t.block,t.blockLimit)&&(e=g(a))&&((e=b.document.createElement(e)).appendBogus(),b.insertNode(e),b.moveToPosition(e,CKEDITOR.POSITION_AFTER_START))}}}()}(),function(){function a(a){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(a)}function e(b,e){if(0===b.length||a(b[0].getEnclosedNode()))return!1;var t,n;if((t=!e&&1===b.length)&&!(t=b[0].collapsed)){var g=b[0];t=g.startContainer.getAscendant({td:1,th:1},!0);var o=g.endContainer.getAscendant({td:1,th:1},!0);n=CKEDITOR.tools.trim,t=!(!t||!t.equals(o)||t.findOne("td, th, tr, tbody, table"))&&(!(g=g.cloneContents()).getFirst()||n(g.getFirst().getText())!==n(t.getText()))}if(t)return!1;for(n=0;n<b.length;n++)if(!(t=b[n]._getTableElement()))return!1;return!0}function t(a){a=function(a){function b(a){a=a.find("td, th");var e,t=[];for(e=0;e<a.count();e++)t.push(a.getItem(e));return t}var e,t,n=[];for(t=0;t<a.length;t++)(e=a[t]._getTableElement()).is&&e.is({td:1,th:1})?n.push(e):n=n.concat(b(e));return n}(a);var e,g,t="",n=[];for(g=0;g<a.length;g++)e&&!e.equals(a[g].getAscendant("tr"))?(t+=n.join("\t")+"\n",e=a[g].getAscendant("tr"),n=[]):0===g&&(e=a[g].getAscendant("tr")),n.push(a[g].getText());return t+n.join("\t")}function n(a){var b=this.root.editor,e=b.getSelection(1);this.reset(),f=!0,e.root.once("selectionchange",(function(a){a.cancel()}),null,null,0),e.selectRanges([a[0]]),(e=this._.cache).ranges=new CKEDITOR.dom.rangeList(a),e.type=CKEDITOR.SELECTION_TEXT,e.selectedElement=a[0]._getTableElement(),e.selectedText=t(a),e.nativeSel=null,this.isFake=1,this.rev=C++,b._.fakeSelection=this,f=!1,this.root.fire("selectionchange")}function o(){var t,b=this._.fakeSelection;if(b){var n;if(!(n=!(t=this.getSelection(1)))&&(n=!t.isHidden())){n=b;var o=t.getRanges(),g=n.getRanges(),r=o.length&&o[0]._getTableElement()&&o[0]._getTableElement().getAscendant("table",!0),l=g.length&&g[0]._getTableElement()&&g[0]._getTableElement().getAscendant("table",!0),c=1===o.length&&o[0]._getTableElement()&&o[0]._getTableElement().is("table"),d=1===g.length&&g[0]._getTableElement()&&g[0]._getTableElement().is("table");if(a(n.getSelectedElement()))n=!1;else{var h=1===o.length&&o[0].collapsed;g=e(o,!!CKEDITOR.env.webkit)&&e(g),(r=!(!r||!l)&&(r.equals(l)||l.contains(r)))&&(h||g)?(c&&!d&&n.selectRanges(o),n=!0):n=!1}n=!n}n&&(b.reset(),b=0)}(b||(b=t||this.getSelection(1))&&b.getType()!=CKEDITOR.SELECTION_NONE)&&(this.fire("selectionCheck",b),(t=this.elementPath()).compare(this._.selectionPreviousPath)||(n=this._.selectionPreviousPath&&this._.selectionPreviousPath.blockLimit.equals(t.blockLimit),!CKEDITOR.env.webkit&&!CKEDITOR.env.gecko||n||(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=t,this.fire("selectionChange",{selection:b,path:t})))}function r(){E=!0,m||(g.call(this),m=CKEDITOR.tools.setTimeout(g,200,this))}function g(){m=null,E&&(CKEDITOR.tools.setTimeout(o,0,this),E=!1)}function l(a){return!(!D(a)&&(a.type!=CKEDITOR.NODE_ELEMENT||a.is(CKEDITOR.dtd.$empty)))}function c(a){function b(e,t){return!(!e||e.type==CKEDITOR.NODE_TEXT)&&a.clone()["moveToElementEdit"+(t?"End":"Start")](e)}if(!(a.root instanceof CKEDITOR.editable))return!1;var e=a.startContainer,t=a.getPreviousNode(l,null,e),n=a.getNextNode(l,null,e);return!(!b(t)&&!b(n,1)&&(t||n||e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary()&&e.getBogus()))}function d(a){h(a,!1);var b=a.getDocument().createText(I);return a.setCustomData("cke-fillingChar",b),b}function h(a,b){var e=a&&a.removeCustomData("cke-fillingChar");if(e){if(!1!==b){var t=a.getDocument().getSelection().getNative(),n=t&&"None"!=t.type&&t.getRangeAt(0),g=I.length;if(e.getLength()>g&&n&&n.intersectsNode(e.$)){var o=[{node:t.anchorNode,offset:t.anchorOffset},{node:t.focusNode,offset:t.focusOffset}];t.anchorNode==e.$&&t.anchorOffset>g&&(o[0].offset-=g),t.focusNode==e.$&&t.focusOffset>g&&(o[1].offset-=g)}}e.setText(q(e.getText(),1)),o&&(t=(e=a.getDocument().$).getSelection(),(e=e.createRange()).setStart(o[0].node,o[0].offset),e.collapse(!0),t.removeAllRanges(),t.addRange(e),t.extend(o[1].node,o[1].offset))}}function q(a,b){return b?a.replace(O,(function(a,b){return b?" ":""})):a.replace(I,"")}var f,m,E,T="function"!=typeof window.getSelection,C=1,I=CKEDITOR.tools.repeat("​",7),O=new RegExp(I+"( )?","g"),D=CKEDITOR.dom.walker.invisible(1),R=function(){function a(b){return function(a){var e=a.editor.createRange();return e.moveToClosestEditablePosition(a.selected,b)&&a.editor.getSelection().selectRanges([e]),!1}}function b(a){return function(b){var e,t=b.editor,n=t.createRange();if(!t.readOnly)return(e=n.moveToClosestEditablePosition(b.selected,a))||(e=n.moveToClosestEditablePosition(b.selected,!a)),e&&t.getSelection().selectRanges([n]),t.fire("saveSnapshot"),b.selected.remove(),e||(n.moveToElementEditablePosition(t.editable()),t.getSelection().selectRanges([n])),t.fire("saveSnapshot"),!1}}var e=a(),t=a(1);return{37:e,38:e,39:t,40:t,8:b(),46:b(1)}}();CKEDITOR.on("instanceCreated",(function(a){function b(){var a=e.getSelection();a&&a.removeAllRanges()}var e=a.editor;e.on("contentDom",(function(){function a(){(n=new CKEDITOR.dom.selection(e.getSelection())).lock()}function b(){g.removeListener("mouseup",b),C.removeListener("mouseup",b);var a=CKEDITOR.document.$.selection,e=a.createRange();"None"!=a.type&&e.parentElement()&&e.parentElement().ownerDocument==f.$&&e.select()}var t,n,l,p,c,d,f=e.document,g=CKEDITOR.document,m=e.editable(),E=f.getBody(),C=f.getDocumentElement(),q=m.isInline();(CKEDITOR.env.gecko&&m.attachListener(m,"focus",(function(a){a.removeListener(),0!==t&&(a=e.getSelection().getNative())&&a.isCollapsed&&a.anchorNode==m.$&&((a=e.createRange()).moveToElementEditStart(m),a.select())}),null,null,-2),m.attachListener(m,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",(function(){if(t&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){t=e._.previousActive&&e._.previousActive.equals(f.getActive());var a=null!=e._.previousScrollTop&&e._.previousScrollTop!=m.$.scrollTop;CKEDITOR.env.webkit&&t&&a&&(m.$.scrollTop=e._.previousScrollTop)}e.unlockSelection(t),t=0}),null,null,-1),m.attachListener(m,"mousedown",(function(){t=0})),(CKEDITOR.env.ie||q)&&(T?m.attachListener(m,"beforedeactivate",a,null,null,-1):m.attachListener(e,"selectionCheck",a,null,null,-1),m.attachListener(m,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusout":"blur",(function(){e.lockSelection(n),t=1}),null,null,-1),m.attachListener(m,"mousedown",(function(){t=0}))),CKEDITOR.env.ie&&!q&&(m.attachListener(m,"mousedown",(function(a){2==a.data.$.button&&((a=e.document.getSelection())&&a.getType()!=CKEDITOR.SELECTION_NONE||(l=e.window.getScrollPosition()))})),m.attachListener(m,"mouseup",(function(a){2==a.data.$.button&&l&&(e.document.$.documentElement.scrollLeft=l.x,e.document.$.documentElement.scrollTop=l.y),l=null})),"BackCompat"!=f.$.compatMode))&&((CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&C.on("mousedown",(function(a){function b(a){if(a=a.data.$,c){var e=E.$.createTextRange();try{e.moveToPoint(a.clientX,a.clientY)}catch(e){}c.setEndPoint(0>d.compareEndPoints("StartToStart",e)?"EndToEnd":"StartToStart",e),c.select()}}function e(){C.removeListener("mousemove",b),g.removeListener("mouseup",e),C.removeListener("mouseup",e),c.select()}if((a=a.data).getTarget().is("html")&&a.$.y<C.$.clientHeight&&a.$.x<C.$.clientWidth){c=E.$.createTextRange();try{c.moveToPoint(a.$.clientX,a.$.clientY)}catch(e){}d=c.duplicate(),C.on("mousemove",b),g.on("mouseup",e),C.on("mouseup",e)}})),7<CKEDITOR.env.version&&11>CKEDITOR.env.version&&C.on("mousedown",(function(a){a.data.getTarget().is("html")&&(g.on("mouseup",b),C.on("mouseup",b))})));m.attachListener(m,"selectionchange",o,e),m.attachListener(m,"keyup",r,e),m.attachListener(m,"touchstart",r,e),m.attachListener(m,"touchend",r,e),CKEDITOR.env.ie&&m.attachListener(m,"keydown",(function(a){var b=this.getSelection(1),e=function(a){return(a=a.getRanges()[0])&&(a=a.startContainer.getAscendant((function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("contenteditable")}),!0))&&"false"===a.getAttribute("contenteditable")?a:null}(b);e&&!e.equals(m)&&(b.selectElement(e),a.data.preventDefault())}),e),m.attachListener(m,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",(function(){e.forceNextSelectionCheck(),e.selectionChange(1)})),q&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)?(m.attachListener(m,"mousedown",(function(){p=1})),m.attachListener(f.getDocumentElement(),"mouseup",(function(){p&&r.call(e),p=0}))):m.attachListener(CKEDITOR.env.ie?m:f.getDocumentElement(),"mouseup",r,e),CKEDITOR.env.webkit&&m.attachListener(f,"keydown",(function(a){switch(a.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:m.hasFocus&&h(m)}}),null,null,-1),m.attachListener(m,"keydown",function(a){var b={37:1,39:1,8:1,46:1};return function(e){var t=e.data.getKeystroke();if(b[t]){var n=a.getSelection().getRanges(),g=n[0];1==n.length&&g.collapsed&&(t=g[38>t?"getPreviousEditableNode":"getNextEditableNode"]())&&t.type==CKEDITOR.NODE_ELEMENT&&"false"==t.getAttribute("contenteditable")&&(a.getSelection().fake(t),e.data.preventDefault(),e.cancel())}}}(e),null,null,-1)})),e.on("setData",(function(){e.unlockSelection(),CKEDITOR.env.webkit&&b()})),e.on("contentDomUnload",(function(){e.unlockSelection()})),CKEDITOR.env.ie9Compat&&e.on("beforeDestroy",b,null,null,9),e.on("dataReady",(function(){delete e._.fakeSelection,delete e._.hiddenSelectionContainer,e.selectionChange(1)})),e.on("loadSnapshot",(function(){var a=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),b=e.editable().getLast(a);b&&b.hasAttribute("data-cke-hidden-sel")&&(b.remove(),CKEDITOR.env.gecko&&(a=e.editable().getFirst(a))&&a.is("br")&&a.getAttribute("_moz_editor_bogus_node")&&a.remove())}),null,null,100),e.on("key",(function(a){if("wysiwyg"==e.mode){var b=e.getSelection();if(b.isFake){var t=R[a.data.keyCode];if(t)return t({editor:e,selected:b.getSelectedElement(),selection:b,keyEvent:a})}}}))})),CKEDITOR.env.webkit&&CKEDITOR.on("instanceReady",(function(a){var b=a.editor;b.on("selectionChange",(function(){var a=b.editable(),e=a.getCustomData("cke-fillingChar");e&&(e.getCustomData("ready")?(h(a),a.editor.fire("selectionCheck")):e.setCustomData("ready",1))}),null,null,-1),b.on("beforeSetMode",(function(){h(b.editable())}),null,null,-1),b.on("getSnapshot",(function(a){a.data&&(a.data=q(a.data))}),b,null,20),b.on("toDataFormat",(function(a){a.data.dataValue=q(a.data.dataValue)}),null,null,0)})),CKEDITOR.editor.prototype.selectionChange=function(a){(a?o:r).call(this)},CKEDITOR.editor.prototype.getSelection=function(a){return!this._.savedSelection&&!this._.fakeSelection||a?(a=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(a):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.lockSelection=function(a){return(a=a||this.getSelection(1)).getType()!=CKEDITOR.SELECTION_NONE&&(!a.isLocked&&a.lock(),this._.savedSelection=a,!0)},CKEDITOR.editor.prototype.unlockSelection=function(a){var b=this._.savedSelection;return!!b&&(b.unlock(a),delete this._.savedSelection,!0)},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var a=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return a.selectRanges([this]),a},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3,CKEDITOR.dom.selection=function(a){if(a instanceof CKEDITOR.dom.selection){var b=a;a=a.root}var e,t,n=a instanceof CKEDITOR.dom.element;if(this.rev=b?b.rev:C++,this.document=a instanceof CKEDITOR.dom.document?a:a.getDocument(),this.root=n?a:this.document.getBody(),this.isLocked=0,this._={cache:{}},b)return CKEDITOR.tools.extend(this._.cache,b._.cache),this.isFake=b.isFake,this.isLocked=b.isLocked,this;if(a=this.getNative())if(a.getRangeAt)e=(t=a.rangeCount&&a.getRangeAt(0))&&new CKEDITOR.dom.node(t.commonAncestorContainer);else{try{t=a.createRange()}catch(e){}e=t&&CKEDITOR.dom.element.get(t.item&&t.item(0)||t.parentElement())}return(!e||e.type!=CKEDITOR.NODE_ELEMENT&&e.type!=CKEDITOR.NODE_TEXT||!this.root.equals(e)&&!this.root.contains(e))&&(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var v={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:q,_createFillingCharSequenceNode:d,FILLING_CHAR_SEQUENCE:I}),CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=T?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:T?function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_NONE;try{var e=this.getNative(),t=e.type;"Text"==t&&(b=CKEDITOR.SELECTION_TEXT),"Control"==t&&(b=CKEDITOR.SELECTION_ELEMENT),e.createRange().parentElement()&&(b=CKEDITOR.SELECTION_TEXT)}catch(e){}return a.type=b}:function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_TEXT;if((e=this.getNative())&&e.rangeCount){if(1==e.rangeCount){var e,t=(e=e.getRangeAt(0)).startContainer;t==e.endContainer&&1==t.nodeType&&1==e.endOffset-e.startOffset&&v[t.childNodes[e.startOffset].nodeName.toLowerCase()]&&(b=CKEDITOR.SELECTION_ELEMENT)}}else b=CKEDITOR.SELECTION_NONE;return a.type=b},getRanges:function(){var a=T?function(){function a(b){return new CKEDITOR.dom.node(b).getIndex()}var b=function(b,e){(b=b.duplicate()).collapse(e);var t=b.parentElement();if(!t.hasChildNodes())return{container:t,offset:0};for(var g,n,o,q,r=t.children,l=b.duplicate(),c=0,d=r.length-1,h=-1;c<=d;)if(g=r[h=Math.floor((c+d)/2)],l.moveToElementText(g),0<(o=l.compareEndPoints("StartToStart",b)))d=h-1;else{if(!(0>o))return{container:t,offset:a(g)};c=h+1}if(-1==h||h==r.length-1&&0>o){if(l.moveToElementText(t),l.setEndPoint("StartToStart",b),l=l.text.replace(/(\r\n|\r)/g,"\n").length,r=t.childNodes,!l)return(g=r[r.length-1]).nodeType!=CKEDITOR.NODE_TEXT?{container:t,offset:r.length}:{container:g,offset:g.nodeValue.length};for(t=r.length;0<l&&0<t;)(n=r[--t]).nodeType==CKEDITOR.NODE_TEXT&&(q=n,l-=n.nodeValue.length);return{container:q,offset:-l}}if(l.collapse(0<o),l.setEndPoint(0<o?"StartToStart":"EndToStart",b),!(l=l.text.replace(/(\r\n|\r)/g,"\n").length))return{container:t,offset:a(g)+(0<o?0:1)};for(;0<l;)try{(n=g[0<o?"previousSibling":"nextSibling"]).nodeType==CKEDITOR.NODE_TEXT&&(l-=n.nodeValue.length,q=n),g=n}catch(e){return{container:t,offset:a(g)}}return{container:q,offset:0<o?-l:q.nodeValue.length+l}};return function(){var e=(a=this.getNative())&&a.createRange(),t=this.getType();if(!a)return[];if(t==CKEDITOR.SELECTION_TEXT)return a=new CKEDITOR.dom.range(this.root),t=b(e,!0),a.setStart(new CKEDITOR.dom.node(t.container),t.offset),t=b(e),a.setEnd(new CKEDITOR.dom.node(t.container),t.offset),a.endContainer.getPosition(a.startContainer)&CKEDITOR.POSITION_PRECEDING&&a.endOffset<=a.startContainer.getIndex()&&a.collapse(),[a];if(t==CKEDITOR.SELECTION_ELEMENT){t=[];for(var n=0;n<e.length;n++){for(var g=e.item(n),o=g.parentNode,r=0,a=new CKEDITOR.dom.range(this.root);r<o.childNodes.length&&o.childNodes[r]!=g;r++);a.setStart(new CKEDITOR.dom.node(o),r),a.setEnd(new CKEDITOR.dom.node(o),r+1),t.push(a)}return t}return[]}}():function(){var b,a=[],e=this.getNative();if(!e)return a;for(var t=0;t<e.rangeCount;t++){var n=e.getRangeAt(t);(b=new CKEDITOR.dom.range(this.root)).setStart(new CKEDITOR.dom.node(n.startContainer),n.startOffset),b.setEnd(new CKEDITOR.dom.node(n.endContainer),n.endOffset),a.push(b)}return a};return function(b){var e=this._.cache,t=e.ranges;return t||(e.ranges=t=new CKEDITOR.dom.rangeList(a.call(this))),b?function(a){for(var b=0;b<a.length;b++){var e=a[b];if(e.getCommonAncestor().isReadOnly()&&a.splice(b,1),!e.collapsed){if(e.startContainer.isReadOnly())for(var t,n=e.startContainer;n&&!((t=n.type==CKEDITOR.NODE_ELEMENT)&&n.is("body")||!n.isReadOnly());)t&&"false"==n.getAttribute("contentEditable")&&e.setStartAfter(n),n=n.getParent();n=e.startContainer,t=e.endContainer;var g=e.startOffset,o=e.endOffset,r=e.clone();n&&n.type==CKEDITOR.NODE_TEXT&&(g>=n.getLength()?r.setStartAfter(n):r.setStartBefore(n)),t&&t.type==CKEDITOR.NODE_TEXT&&(o?r.setEndAfter(t):r.setEndBefore(t)),(n=new CKEDITOR.dom.walker(r)).evaluator=function(t){if(t.type==CKEDITOR.NODE_ELEMENT&&t.isReadOnly()){var n=e.clone();return e.setEndBefore(t),e.collapsed&&a.splice(b--,1),t.getPosition(r.endContainer)&CKEDITOR.POSITION_CONTAINS||(n.setStartAfter(t),n.collapsed||a.splice(b+1,0,n)),!0}return!1},n.next()}}return a}(new CKEDITOR.dom.rangeList(t.slice())):t}}(),getStartElement:function(){var b,a=this._.cache;if(void 0!==a.startElement)return a.startElement;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var e=this.getRanges()[0];if(e){if(e.collapsed)(b=e.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent());else{for(e.optimize();b=e.startContainer,e.startOffset==(b.getChildCount?b.getChildCount():b.getLength())&&!b.isBlockBoundary();)e.setStartAfter(b);if((b=e.startContainer).type!=CKEDITOR.NODE_ELEMENT)return b.getParent();if((b=b.getChild(e.startOffset))&&b.type==CKEDITOR.NODE_ELEMENT)for(e=b.getFirst();e&&e.type==CKEDITOR.NODE_ELEMENT;)b=e,e=e.getFirst();else b=e.startContainer}b=b.$}}return a.startElement=b?new CKEDITOR.dom.element(b):null},getSelectedElement:function(){var a=this._.cache;if(void 0!==a.selectedElement)return a.selectedElement;var b=this,e=CKEDITOR.tools.tryThese((function(){return b.getNative().createRange().item(0)}),(function(){for(var e,t,a=b.getRanges()[0].clone(),n=2;n&&!((e=a.getEnclosedNode())&&e.type==CKEDITOR.NODE_ELEMENT&&v[e.getName()]&&(t=e));n--)a.shrink(CKEDITOR.SHRINK_ELEMENT);return t&&t.$}));return a.selectedElement=e?new CKEDITOR.dom.element(e):null},getSelectedText:function(){var a=this._.cache;if(void 0!==a.selectedText)return a.selectedText;var b=this.getNative();return b=T?"Control"==b.type?"":b.createRange().text:b.toString(),a.selectedText=b},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(a){if(this.isLocked){if(a)var b=this.getSelectedElement(),t=this.getRanges(),o=this.isFake;this.isLocked=0,this.reset(),a&&(a=b||t[0]&&t[0].getCommonAncestor())&&a.getAscendant("body",1)&&(e(t)?n.call(this,t):o?this.fake(b):b?this.selectElement(b):this.selectRanges(t))}},reset:function(){this._.cache={},this.isFake=0;var a=this.root.editor;if(a&&a._.fakeSelection)if(this.rev==a._.fakeSelection.rev){delete a._.fakeSelection;var b=a._.hiddenSelectionContainer;if(b){var e=a.checkDirty();a.fire("lockSnapshot"),b.remove(),a.fire("unlockSnapshot"),!e&&a.resetDirty()}delete a._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=C++},selectElement:function(a){var b=new CKEDITOR.dom.range(this.root);b.setStartBefore(a),b.setEndAfter(a),this.selectRanges([b])},selectRanges:function(a){var b=this.root.editor,t=b&&b._.hiddenSelectionContainer;if(this.reset(),t){t=this.root;for(var g,o=0;o<a.length;++o)(g=a[o]).endContainer.equals(t)&&(g.endOffset=Math.min(g.endOffset,t.getChildCount()))}if(a.length)if(this.isLocked){var r=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(a),this.lock(),r&&!r.equals(this.root)&&r.focus()}else{var l,q,m;if(1==a.length&&!(m=a[0]).collapsed&&(l=m.getEnclosedNode())&&l.type==CKEDITOR.NODE_ELEMENT&&((m=m.clone()).shrink(CKEDITOR.SHRINK_ELEMENT,!0),(q=m.getEnclosedNode())&&q.type==CKEDITOR.NODE_ELEMENT&&(l=q),"false"==l.getAttribute("contenteditable"))||(l=void 0),l)this.fake(l);else if(b&&b.plugins.tableselection&&b.plugins.tableselection.isSupportedEnvironment()&&e(a)&&!f&&!a[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored"))n.call(this,a);else{if(T){var E,C,u;if(q=CKEDITOR.dom.walker.whitespaces(!0),l=/\ufeff|\u00a0/,m={table:1,tbody:1,tr:1},1<a.length&&(b=a[a.length-1],a[0].setEnd(b.endContainer,b.endOffset)),a=(b=a[0]).collapsed,(t=b.getEnclosedNode())&&t.type==CKEDITOR.NODE_ELEMENT&&t.getName()in v&&(!t.is("a")||!t.getText()))try{return(u=t.$.createControlRange()).addElement(t.$),void u.select()}catch(e){}(b.startContainer.type==CKEDITOR.NODE_ELEMENT&&b.startContainer.getName()in m||b.endContainer.type==CKEDITOR.NODE_ELEMENT&&b.endContainer.getName()in m)&&(b.shrink(CKEDITOR.NODE_ELEMENT,!0),a=b.collapsed),m=(u=b.createBookmark()).startNode,a||(r=u.endNode),(u=b.document.$.body.createTextRange()).moveToElementText(m.$),u.moveStart("character",1),r?((l=b.document.$.body.createTextRange()).moveToElementText(r.$),u.setEndPoint("EndToEnd",l),u.moveEnd("character",-1)):(E=m.getNext(q),C=m.hasAscendant("pre"),E=!(E&&E.getText&&E.getText().match(l))&&(C||!m.hasPrevious()||m.getPrevious().is&&m.getPrevious().is("br")),(C=b.document.createElement("span")).setHtml("&#65279;"),C.insertBefore(m),E&&b.document.createText("\ufeff").insertBefore(m)),b.setStartBefore(m),m.remove(),a?(E?(u.moveStart("character",-1),u.select(),b.document.$.selection.clear()):u.select(),b.moveToPosition(C,CKEDITOR.POSITION_BEFORE_START),C.remove()):(b.setEndBefore(r),r.remove(),u.select())}else{if(!(r=this.getNative()))return;for(this.removeAllRanges(),u=0;u<a.length;u++)if(u<a.length-1&&(E=a[u],C=a[u+1],(l=E.clone()).setStart(E.endContainer,E.endOffset),l.setEnd(C.startContainer,C.startOffset),!l.collapsed&&(l.shrink(CKEDITOR.NODE_ELEMENT,!0),b=l.getCommonAncestor(),l=l.getEnclosedNode(),b.isReadOnly()||l&&l.isReadOnly())))C.setStart(E.startContainer,E.startOffset),a.splice(u--,1);else{b=a[u],C=this.document.$.createRange(),b.collapsed&&CKEDITOR.env.webkit&&c(b)&&(l=d(this.root),b.insertNode(l),(E=l.getNext())&&!l.getPrevious()&&E.type==CKEDITOR.NODE_ELEMENT&&"br"==E.getName()?(h(this.root),b.moveToPosition(E,CKEDITOR.POSITION_BEFORE_START)):b.moveToPosition(l,CKEDITOR.POSITION_AFTER_END)),C.setStart(b.startContainer.$,b.startOffset);try{C.setEnd(b.endContainer.$,b.endOffset)}catch(e){if(!(0<=e.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")))throw e;b.collapse(1),C.setEnd(b.endContainer.$,b.endOffset)}r.addRange(C)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(a,b){var e=this.root.editor;void 0===b&&a.hasAttribute("aria-label")&&(b=a.getAttribute("aria-label")),this.reset(),function(a,b){var e=b&&CKEDITOR.tools.htmlEncode(b)||"&nbsp;";e=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie&&14>CKEDITOR.env.version?"display:none":"position:fixed;top:0;left:-1000px;width:0;height:0;overflow:hidden;")+'">'+e+"</div>",a.document),a.fire("lockSnapshot"),a.editable().append(e);var t=a.getSelection(1),n=a.createRange(),g=t.root.on("selectionchange",(function(a){a.cancel()}),null,null,0);n.setStartAt(e,CKEDITOR.POSITION_AFTER_START),n.setEndAt(e,CKEDITOR.POSITION_BEFORE_END),t.selectRanges([n]),g.removeListener(),a.fire("unlockSnapshot"),a._.hiddenSelectionContainer=e}(e,b);var t=this._.cache,n=new CKEDITOR.dom.range(this.root);n.setStartBefore(a),n.setEndAfter(a),t.ranges=new CKEDITOR.dom.rangeList(n),t.selectedElement=t.startElement=a,t.type=CKEDITOR.SELECTION_ELEMENT,t.selectedText=t.nativeSel=null,this.isFake=1,this.rev=C++,e._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var a=this.getCommonAncestor();return a&&a.type==CKEDITOR.NODE_TEXT&&(a=a.getParent()),!(!a||!a.data("cke-hidden-sel"))},isInTable:function(a){return e(this.getRanges(),a)},isCollapsed:function(){var a=this.getRanges();return 1===a.length&&a[0].collapsed},createBookmarks:function(a){return a=this.getRanges().createBookmarks(a),this.isFake&&(a.isFake=1),a},createBookmarks2:function(a){return a=this.getRanges().createBookmarks2(a),this.isFake&&(a.isFake=1),a},selectBookmarks:function(a){for(var t,b=[],n=0;n<a.length;n++){var o=new CKEDITOR.dom.range(this.root);o.moveToBookmark(a[n]),b.push(o)}return a.isFake&&((t=e(b)?b[0]._getTableElement():b[0].getEnclosedNode())&&t.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),a.isFake=0)),a.isFake&&!e(b)?this.fake(t):this.selectRanges(b),this},getCommonAncestor:function(){var a=this.getRanges();return a.length?a[0].startContainer.getCommonAncestor(a[a.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var a=this.getNative();try{a&&a[T?"empty":"removeAllRanges"]()}catch(e){}this.reset()}}}}(),CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function a(a,b){for(var e,t;(a=a.getParent())&&!a.equals(b);)if(a.getAttribute("data-nostyle"))e=a;else if(!t){var n=a.getAttribute("contentEditable");"false"==n?e=a:"true"==n&&(t=1)}return e}function e(a,b,e,t){return(a.getPosition(b)|t)==t&&(!e.childRule||e.childRule(a))}function b(t){var o=t.document;if(t.collapsed)o=m(this,o),t.insertNode(o),t.moveToPosition(o,CKEDITOR.POSITION_BEFORE_END);else{var r,g=this.element,l=this._.definition,c=(C=l.ignoreReadonly)||l.includeReadonly;null==c&&(c=t.root.getCustomData("cke_includeReadonly"));var d=CKEDITOR.dtd[g];d||(r=!0,d=CKEDITOR.dtd.span),t.enlarge(CKEDITOR.ENLARGE_INLINE,1),t.trim();var h,q=t.createBookmark(),f=q.startNode,E=q.endNode,T=f;if(!C){var C=a(f,I=t.getCommonAncestor()),I=a(E,I);C&&(T=C.getNextSourceNode(!0)),I&&(E=I)}for(T.getPosition(E)==CKEDITOR.POSITION_FOLLOWING&&(T=0);T;){if(C=!1,T.equals(E))T=null,C=!0;else{I=(p=T.type==CKEDITOR.NODE_ELEMENT?T.getName():null)&&"false"==T.getAttribute("contentEditable");var O=p&&T.getAttribute("data-nostyle");if(p&&T.data("cke-bookmark")||T.type===CKEDITOR.NODE_COMMENT){T=T.getNextSourceNode(!0);continue}if(I&&c&&CKEDITOR.dtd.$block[p])for(var D=void 0,R=0,v=(L=(A=n(v=T)).length)&&new CKEDITOR.dom.range(v.getDocument());R<L;++R){D=A[R];var y=CKEDITOR.filter.instances[D.data("cke-filter")];y&&!y.check(this)||(v.selectNodeContents(D),b.call(this,v))}if(A=p?!d[p]||O||I&&!c?0:e(T,E,l,w):1){if(A=l,L=g,R=r,!(D=T.getParent())||!(D.getDtd()||CKEDITOR.dtd.span)[L]&&!R||A.parentRule&&!A.parentRule(D))C=!0;else if(h||p&&CKEDITOR.dtd.$removeEmpty[p]&&(T.getPosition(E)|w)!=w||(h=t.clone()).setStartBefore(T),(p=T.type)==CKEDITOR.NODE_TEXT||I||p==CKEDITOR.NODE_ELEMENT&&!T.getChildCount()){for(var K,p=T;(C=!p.getNext(_))&&d[(K=p.getParent()).getName()]&&e(K,f,l,S);)p=K;h.setEndAfter(p)}}else C=!0;T=T.getNextSourceNode(O||I)}if(C&&h&&!h.collapsed){I=(C=m(this,o)).hasAttributes(),O=h.getCommonAncestor(),p={};for(var k,N,x,A={},L=(D={},{});C&&O;){if(O.getName()==g){for(k in l.attributes)!L[k]&&(x=O.getAttribute(N))&&(C.getAttribute(k)==x?A[k]=1:L[k]=1);for(N in l.styles)!D[N]&&(x=O.getStyle(N))&&(C.getStyle(N)==x?p[N]=1:D[N]=1)}O=O.getParent()}for(k in A)C.removeAttribute(k);for(N in p)C.removeStyle(N);I&&!C.hasAttributes()&&(C=null),C?(h.extractContents().appendTo(C),h.insertNode(C),u.call(this,C),C.mergeSiblings(),CKEDITOR.env.ie||C.$.normalize()):(C=new CKEDITOR.dom.element("span"),h.extractContents().appendTo(C),h.insertNode(C),u.call(this,C),C.remove(!0)),h=null}}t.moveToBookmark(q),t.shrink(CKEDITOR.SHRINK_TEXT),t.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function t(a){function b(){for(var a=new CKEDITOR.dom.elementPath(t.getParent()),e=new CKEDITOR.dom.elementPath(d.getParent()),n=null,g=null,o=0;o<a.elements.length;o++){var r=a.elements[o];if(r==a.block||r==a.blockLimit)break;f.checkElementRemovable(r,!0)&&(n=r)}for(o=0;o<e.elements.length&&(r=e.elements[o])!=e.block&&r!=e.blockLimit;o++)f.checkElementRemovable(r,!0)&&(g=r);g&&d.breakParent(g),n&&t.breakParent(n)}a.enlarge(CKEDITOR.ENLARGE_INLINE,1);var e=a.createBookmark(),t=e.startNode,n=this._.definition.alwaysRemoveElement;if(a.collapsed){for(var o,r,g=new CKEDITOR.dom.elementPath(t.getParent(),a.root),l=0;l<g.elements.length&&(r=g.elements[l])&&r!=g.block&&r!=g.blockLimit;l++)if(this.checkElementRemovable(r)){var c;!n&&a.collapsed&&(a.checkBoundaryOfElement(r,CKEDITOR.END)||(c=a.checkBoundaryOfElement(r,CKEDITOR.START)))?(o=r).match=c?"start":"end":(r.mergeSiblings(),r.is(this.element)?h.call(this,r):p(r,C(this)[r.getName()]))}if(o){for(n=t,l=0;!(r=g.elements[l]).equals(o);l++)r.match||((r=r.clone()).append(n),n=r);n["start"==o.match?"insertBefore":"insertAfter"](o)}}else{var d=e.endNode,f=this;for(b(),g=t;!g.equals(d);)o=g.getNextSourceNode(),g.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(g)&&(g.getName()==this.element?h.call(this,g):p(g,C(this)[g.getName()]),o.type==CKEDITOR.NODE_ELEMENT&&o.contains(t)&&(b(),o=t.getNext())),g=o}a.moveToBookmark(e),a.shrink(CKEDITOR.NODE_ELEMENT,!0)}function n(a){var b=[];return a.forEach((function(a){if("true"==a.getAttribute("contenteditable"))return b.push(a),!1}),CKEDITOR.NODE_ELEMENT,!0),b}function o(a){var b=a.getEnclosedNode()||a.getCommonAncestor(!1,!0);(a=new CKEDITOR.dom.elementPath(b,a.root).contains(this.element,1))&&!a.isReadOnly()&&E(a,this)}function r(a){var b=a.getCommonAncestor(!0,!0);if(a=new CKEDITOR.dom.elementPath(b,a.root).contains(this.element,1)){var e=(b=this._.definition).attributes;if(e)for(var t in e)a.removeAttribute(t,e[t]);if(b.styles)for(var n in b.styles)b.styles.hasOwnProperty(n)&&a.removeStyle(n)}}function g(a){var b=a.createBookmark(!0),e=a.createIterator();e.enforceRealBlocks=!0,this._.enterMode&&(e.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var t,n=a.document;t=e.getNextParagraph();)!t.isReadOnly()&&(!e.activeFilter||e.activeFilter.check(this))&&c(t,m(this,n,t));a.moveToBookmark(b)}function l(a){var e,t,b=a.createBookmark(1),n=a.createIterator();for(n.enforceRealBlocks=!0,n.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;e=n.getNextParagraph();)this.checkElementRemovable(e)&&(e.is("pre")?((t=this._.enterMode==CKEDITOR.ENTER_BR?null:a.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&e.copyAttributes(t),c(e,t)):h.call(this,e));a.moveToBookmark(b)}function c(a,b){(e=!b)&&(b=a.getDocument().createElement("div"),a.copyAttributes(b));var e,t,n=b&&b.is("pre"),g=a.is("pre"),o=!n&&g;if(n&&!g){if(g=b,(o=a.getBogus())&&o.remove(),o=(o=(o=(o=d(o=a.getHtml(),/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"")).replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1")).replace(/([ \t\n\r]+|&nbsp;)/g," ")).replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var r=a.getDocument().createElement("div");r.append(g),g.$.outerHTML="<pre>"+o+"</pre>",g.copyAttributes(r.getFirst()),g=r.getFirst().remove()}else g.setHtml(o);b=g}else o?b=function(a,b){var e;1<a.length&&(e=new CKEDITOR.dom.documentFragment(b.getDocument()));for(var t=0;t<a.length;t++){var n=d(n=(n=a[t]).replace(/(\r\n|\r)/g,"\n"),/^[ \t]*\n/,"");if(n=d(n,/\n$/,""),n=(n=(n=d(n,/^[ \t]+|[ \t]+$/g,(function(a,b){return 1==a.length?"&nbsp;":b?" "+CKEDITOR.tools.repeat("&nbsp;",a.length-1):CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" "}))).replace(/\n/g,"<br>")).replace(/[ \t]{2,}/g,(function(a){return CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" "})),e){var g=b.clone();g.setHtml(n),e.append(g)}else b.setHtml(n)}return e||b}(e?[a.getHtml()]:function(a){var b=[];return d(a.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,(function(a,b,e){return b+"</pre>"+e+"<pre>"})).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,(function(a,e){b.push(e)})),b}(a),b):a.moveChildren(b);b.replace(a),n?(t=(e=b).getPrevious(k))&&t.type==CKEDITOR.NODE_ELEMENT&&t.is("pre")&&(n=d(t.getHtml(),/\n$/,"")+"\n\n"+d(e.getHtml(),/^\n/,""),CKEDITOR.env.ie?e.$.outerHTML="<pre>"+n+"</pre>":e.setHtml(n),t.remove()):e&&f(b)}function d(a,b,e){var t="",n="";return a=a.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,(function(a,b,e){return b&&(t=b),e&&(n=e),""})),t+a.replace(b,e)+n}function h(a,b){var e,t=(n=this._.definition).attributes,n=n.styles,o=C(this)[a.getName()],g=CKEDITOR.tools.isEmpty(t)&&CKEDITOR.tools.isEmpty(n);for(e in t)("class"!=e&&!this._.definition.fullMatch||a.getAttribute(e)==I(e,t[e]))&&(b&&"data-"==e.slice(0,5)||(g=a.hasAttribute(e),a.removeAttribute(e)));for(var r in n)this._.definition.fullMatch&&a.getStyle(r)!=I(r,n[r],!0)||(g=g||!!a.getStyle(r),a.removeStyle(r));p(a,o,R[a.getName()]),g&&(this._.definition.alwaysRemoveElement?f(a,1):!CKEDITOR.dtd.$block[a.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!a.hasAttributes()?f(a):a.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function u(a){for(var e,b=C(this),t=a.getElementsByTag(this.element),n=t.count();0<=--n;)(e=t.getItem(n)).isReadOnly()||h.call(this,e,!0);for(var g in b)if(g!=this.element)for(n=(t=a.getElementsByTag(g)).count()-1;0<=n;n--)(e=t.getItem(n)).isReadOnly()||p(e,b[g])}function p(a,b,e){if(b=b&&b.attributes)for(var t=0;t<b.length;t++){var g,n=b[t][0];if(g=a.getAttribute(n)){var o=b[t][1];(null===o||o.test&&o.test(g)||"string"==typeof o&&g==o)&&a.removeAttribute(n)}}e||f(a)}function f(a,b){if(!a.hasAttributes()||b)if(CKEDITOR.dtd.$block[a.getName()]){var e=a.getPrevious(k),t=a.getNext(k);!e||e.type!=CKEDITOR.NODE_TEXT&&e.isBlockBoundary({br:1})||a.append("br",1),!t||t.type!=CKEDITOR.NODE_TEXT&&t.isBlockBoundary({br:1})||a.append("br"),a.remove(!0)}else e=a.getFirst(),t=a.getLast(),a.remove(!0),e&&(e.type==CKEDITOR.NODE_ELEMENT&&e.mergeSiblings(),t&&!e.equals(t)&&t.type==CKEDITOR.NODE_ELEMENT&&t.mergeSiblings())}function m(a,b,e){var t;return"*"==(t=a.element)&&(t="span"),t=new CKEDITOR.dom.element(t,b),e&&e.copyAttributes(t),t=E(t,a),b.getCustomData("doc_processing_style")&&t.hasAttribute("id")?t.removeAttribute("id"):b.setCustomData("doc_processing_style",1),t}function E(a,b){var e=(t=b._.definition).attributes,t=CKEDITOR.style.getStyleText(t);if(e)for(var n in e)a.setAttribute(n,e[n]);return t&&a.setAttribute("style",t),a.getDocument().removeCustomData("doc_processing_style"),a}function T(a,b){for(var e in a)a[e]=a[e].replace(K,(function(a,e){return b[e]}))}function C(a){if(a._.overrides)return a._.overrides;var b=a._.overrides={},e=a._.definition.overrides;if(e){CKEDITOR.tools.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var g,n;if("string"==typeof(r=e[t])?g=r.toLowerCase():(g=r.element?r.element.toLowerCase():a.element,n=r.attributes),r=b[g]||(b[g]={}),n){var o,r=r.attributes=r.attributes||[];for(o in n)r.push([o.toLowerCase(),n[o]])}}}return b}function I(a,b,e){var t=new CKEDITOR.dom.element("span");return t[e?"setStyle":"setAttribute"](a,b),t[e?"getStyle":"getAttribute"](a)}function O(a,b){function e(a,b){return"font-family"==b.toLowerCase()?a.replace(/["']/g,""):a}for(var t in"string"==typeof a&&(a=CKEDITOR.tools.parseCssText(a)),"string"==typeof b&&(b=CKEDITOR.tools.parseCssText(b,!0)),a)if(!(t in b)||e(b[t],t)!=e(a[t],t)&&"inherit"!=a[t]&&"inherit"!=b[t])return!1;return!0}function D(a,b,e){var t,g,n=a.getRanges();if(b=b?this.removeFromRange:this.applyToRange,a.isFake&&a.isInTable())for(t=[],g=0;g<n.length;g++)t.push(n[g].clone());for(var o=n.createIterator();g=o.getNextRange();)b.call(this,g,e);a.selectRanges(t||n)}var R={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},v={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},y=/\s*(?:;\s*|$)/,K=/#\((.+?)\)/g,_=CKEDITOR.dom.walker.bookmark(0,1),k=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(a,b){if("string"==typeof a.type)return new CKEDITOR.style.customHandlers[a.type](a);var e=a.attributes;e&&e.style&&(a.styles=CKEDITOR.tools.extend({},a.styles,CKEDITOR.tools.parseCssText(e.style)),delete e.style),b&&(T((a=CKEDITOR.tools.clone(a)).attributes,b),T(a.styles,b)),e=this.element=a.element?"string"==typeof a.element?a.element.toLowerCase():a.element:"*",this.type=a.type||(R[e]?CKEDITOR.STYLE_BLOCK:v[e]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:a}},CKEDITOR.style.prototype={apply:function(a){if(a instanceof CKEDITOR.dom.document)return D.call(this,a.getSelection());if(this.checkApplicable(a.elementPath(),a)){var b=this._.enterMode;b||(this._.enterMode=a.activeEnterMode),D.call(this,a.getSelection(),0,a),this._.enterMode=b}},remove:function(a){if(a instanceof CKEDITOR.dom.document)return D.call(this,a.getSelection(),1);if(this.checkApplicable(a.elementPath(),a)){var b=this._.enterMode;b||(this._.enterMode=a.activeEnterMode),D.call(this,a.getSelection(),1,a),this._.enterMode=b}},applyToRange:function(a){return this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?b:this.type==CKEDITOR.STYLE_BLOCK?g:this.type==CKEDITOR.STYLE_OBJECT?o:null,this.applyToRange(a)},removeFromRange:function(a){return this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?t:this.type==CKEDITOR.STYLE_BLOCK?l:this.type==CKEDITOR.STYLE_OBJECT?r:null,this.removeFromRange(a)},applyToObject:function(a){E(a,this)},checkActive:function(a,b){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(a.block||a.blockLimit,!0,b);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var e,t=a.elements,n=0;n<t.length;n++)if(e=t[n],this.type!=CKEDITOR.STYLE_INLINE||e!=a.block&&e!=a.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var g=e.getName();if(!("string"==typeof this.element?g==this.element:g in this.element))continue}if(this.checkElementRemovable(e,!0,b))return!0}}return!1},checkApplicable:function(a,b,e){if(b&&b instanceof CKEDITOR.filter&&(e=b),e&&!e.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!a.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!a.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(a,b){var e=this._.definition;if(!a||!e.ignoreReadonly&&a.isReadOnly())return!1;var t=a.getName();if("string"==typeof this.element?t==this.element:t in this.element){if(!b&&!a.hasAttributes())return!0;if(t=e._AC)e=t;else{t={};var n=0,g=e.attributes;if(g)for(var o in g)n++,t[o]=g[o];(o=CKEDITOR.style.getStyleText(e))&&(t.style||n++,t.style=o),t._length=n,e=e._AC=t}if(!e._length)return!0;for(var r in e)if("_length"!=r)if(t=a.getAttribute(r)||"","style"==r?O(e[r],t):e[r]==t){if(!b)return!0}else if(b)return!1;if(b)return!0}return!1},checkElementRemovable:function(a,b,e){if(this.checkElementMatch(a,b,e))return!0;if(b=C(this)[a.getName()]){var t;if(!(b=b.attributes))return!0;for(e=0;e<b.length;e++)if(t=b[e][0],t=a.getAttribute(t)){var n=b[e][1];if(null===n)return!0;if("string"==typeof n){if(t==n)return!0}else if(n.test(t))return!0}}return!1},buildPreview:function(a){var b=this._.definition,e=[],t=b.element;"bdo"==t&&(t="span"),e=["<",t];var n=b.attributes;if(n)for(var g in n)e.push(" ",g,'="',n[g],'"');return(n=CKEDITOR.style.getStyleText(b))&&e.push(' style="',n,'"'),e.push(">",a||b.name,"</",t,">"),e.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(a){if(b=a._ST)return b;var b=a.styles,e=a.attributes&&a.attributes.style||"",t="";for(var n in e.length&&(e=e.replace(y,";")),b){var g=b[n],o=(n+":"+g).replace(y,";");"inherit"==g?t+=o:e+=o}return e.length&&(e=CKEDITOR.tools.normalizeCssText(e,!0)),a._ST=e+t},CKEDITOR.style.customHandlers={},CKEDITOR.style.addCustomHandler=function(a){var b=function(a){this._={definition:a},this.setup&&this.setup(a)};return b.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},a,!0),this.customHandlers[a.type]=b};var w=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,S=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(a,e){this.requiredContent=this.allowedContent=this.style=a,CKEDITOR.tools.extend(this,e,!0)},CKEDITOR.styleCommand.prototype.exec=function(a){a.focus(),this.state==CKEDITOR.TRISTATE_OFF?a.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&a.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(a,e,b){CKEDITOR.stylesSet.addExternal(a,e,""),CKEDITOR.stylesSet.load(a,b)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(a,e){var b=this._.styleStateChangeCallbacks;b||(b=this._.styleStateChangeCallbacks=[],this.on("selectionChange",(function(a){for(var e=0;e<b.length;e++){var t=b[e],n=t.style.checkActive(a.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;t.fn.call(this,n)}}))),b.push({style:a,fn:e})},applyStyle:function(a){a.apply(this)},removeStyle:function(a){a.remove(this)},getStylesSet:function(a){if(this._.stylesDefinitions)a(this._.stylesDefinitions);else{var e=this;if(!1===(b=e.config.stylesCombo_stylesSet||e.config.stylesSet))a(null);else if(b instanceof Array)e._.stylesDefinitions=b,a(b);else{b||(b="default");var b,t=(b=b.split(":"))[0];CKEDITOR.stylesSet.addExternal(t,b[1]?b.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(t,(function(b){e._.stylesDefinitions=b[t],a(e._.stylesDefinitions)}))}}}}),function(){if(window.Promise)CKEDITOR.tools.promise=Promise;else{var a=CKEDITOR.getUrl("vendor/promise.js");CKEDITOR.scriptLoader.load(a,(function(e){e?CKEDITOR.tools.promise=ES6Promise:CKEDITOR.error("no-vendor-lib",{path:a})}))}}(),CKEDITOR.dom.comment=function(a,e){"string"==typeof a&&(a=(e?e.$:document).createComment(a)),CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}}),function(){var b,a={},e={};for(b in CKEDITOR.dtd.$blockLimit)b in CKEDITOR.dtd.$list||(a[b]=1);for(b in CKEDITOR.dtd.$block)b in CKEDITOR.dtd.$blockLimit||b in CKEDITOR.dtd.$empty||(e[b]=1);CKEDITOR.dom.elementPath=function(b,t){var n,o=null,r=null,g=[],l=b;t=t||b.getDocument().getBody(),l||(l=t);do{if(l.type==CKEDITOR.NODE_ELEMENT){if(g.push(l),!this.lastElement&&(this.lastElement=l,l.is(CKEDITOR.dtd.$object)||"false"==l.getAttribute("contenteditable")))continue;if(l.equals(t))break;if(!r&&(n=l.getName(),"true"==l.getAttribute("contenteditable")?r=l:!o&&e[n]&&(o=l),a[n])){if(n=!o&&"div"==n){e:{for(var c=0,d=(n=l.getChildren()).count();c<d;c++){var q=n.getItem(c);if(q.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[q.getName()]){n=!0;break e}}n=!1}n=!n}n?o=l:r=l}}}while(l=l.getParent());r||(r=t),this.block=o,this.blockLimit=r,this.root=t,this.elements=g}}(),CKEDITOR.dom.elementPath.prototype={compare:function(a){var e=this.elements;if(!(a=a&&a.elements)||e.length!=a.length)return!1;for(var b=0;b<e.length;b++)if(!e[b].equals(a[b]))return!1;return!0},contains:function(a,e,b){var t,n=0;"string"==typeof a&&(t=function(b){return b.getName()==a}),a instanceof CKEDITOR.dom.element?t=function(b){return b.equals(a)}:CKEDITOR.tools.isArray(a)?t=function(b){return-1<CKEDITOR.tools.indexOf(a,b.getName())}:"function"==typeof a?t=a:"object"==typeof a&&(t=function(b){return b.getName()in a});var o=this.elements,r=o.length;for(e&&(b?n+=1:--r),b&&(o=Array.prototype.slice.call(o,0)).reverse();n<r;n++)if(t(o[n]))return o[n];return null},isContextFor:function(a){return!(a in CKEDITOR.dtd.$block)||!!(this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit).getDtd()[a]},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(a,e){"string"==typeof a&&(a=(e?e.$:document).createTextNode(a)),this.$=a},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(a){this.$.nodeValue=a},split:function(a){var e=this.$.parentNode,b=e.childNodes.length,t=this.getLength(),n=this.getDocument(),o=new CKEDITOR.dom.text(this.$.splitText(a),n);return e.childNodes.length==b&&(a>=t?(o=n.createText("")).insertAfter(this):((a=n.createText("")).insertAfter(o),a.remove())),o},substring:function(a,e){return"number"!=typeof e?this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,e)}}),function(){function a(a,e,t){var n=a.serializable,o=e[t?"endContainer":"startContainer"],g=t?"endOffset":"startOffset",r=n?e.document.getById(a.startNode):a.startNode;return a=n?e.document.getById(a.endNode):a.endNode,o.equals(r.getPrevious())?(e.startOffset=e.startOffset-o.getLength()-a.getPrevious().getLength(),o=a.getNext()):o.equals(a.getPrevious())&&(e.startOffset-=o.getLength(),o=a.getNext()),o.equals(r.getParent())&&e[g]++,o.equals(a.getParent())&&e[g]++,e[t?"endContainer":"startContainer"]=o,e}CKEDITOR.dom.rangeList=function(a){return a instanceof CKEDITOR.dom.rangeList?a:(a?a instanceof CKEDITOR.dom.range&&(a=[a]):a=[],CKEDITOR.tools.extend(a,e))};var e={createIterator:function(){var e,a=this,t=CKEDITOR.dom.walker.bookmark(),n=[];return{getNextRange:function(o){var g=a[e=void 0===e?0:e+1];if(g&&1<a.length){if(!e)for(var r=a.length-1;0<=r;r--)n.unshift(a[r].createBookmark(!0));if(o)for(var l=0;a[e+l+1];){var c=g.document;for(o=0,r=c.getById(n[l].endNode),c=c.getById(n[l+1].startNode);;){if(r=r.getNextSourceNode(!1),c.equals(r))o=1;else if(t(r)||r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary())continue;break}if(!o)break;l++}for(g.moveToBookmark(n.shift());l--;)(r=a[++e]).moveToBookmark(n.shift()),g.setEnd(r.endContainer,r.endOffset)}return g}}},createBookmarks:function(b){for(var e,t=[],n=0;n<this.length;n++){t.push(e=this[n].createBookmark(b,!0));for(var o=n+1;o<this.length;o++)this[o]=a(e,this[o]),this[o]=a(e,this[o],!0)}return t},createBookmarks2:function(a){for(var e=[],t=0;t<this.length;t++)e.push(this[t].createBookmark2(a));return e},moveToBookmarks:function(a){for(var e=0;e<this.length;e++)this[e].moveToBookmark(a[e])}}}(),function(){function a(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function e(b){var e=CKEDITOR.skin["ua_"+b],t=CKEDITOR.env;if(e){e=e.split(",").sort((function(a,b){return a>b?-1:1}));for(var n,g=0;g<e.length;g++)if(n=e[g],t.ie&&(n.replace(/^ie/,"")==t.version||t.quirks&&"iequirks"==n)&&(n="ie"),t[n]){b+="_"+e[g];break}}return CKEDITOR.getUrl(a()+b+".css")}function b(a,b){o[a]||(CKEDITOR.document.appendStyleSheet(e(a)),o[a]=1),b&&b()}function t(a){var b=a.getById(r);return b||((b=a.getHead().append("style")).setAttribute("id",r),b.setAttribute("type","text/css")),b}function n(a,b,e){var t,g,n;if(CKEDITOR.env.webkit)for(b=b.split("}").slice(0,-1),g=0;g<b.length;g++)b[g]=b[g].split("{");for(var o=0;o<a.length;o++)if(CKEDITOR.env.webkit)for(g=0;g<b.length;g++){for(n=b[g][1],t=0;t<e.length;t++)n=n.replace(e[t][0],e[t][1]);a[o].$.sheet.addRule(b[g][0],n)}else{for(n=b,t=0;t<e.length;t++)n=n.replace(e[t][0],e[t][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?a[o].$.styleSheet.cssText+=n:a[o].$.innerHTML+=n}}var o={};CKEDITOR.skin={path:a,loadPart:function(e,t){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(a()+"skin.js"),(function(){b(e,t)})):b(e,t)},getPath:function(a){return CKEDITOR.getUrl(e(a))},icons:{},addIcon:function(a,b,e,t){a=a.toLowerCase(),this.icons[a]||(this.icons[a]={path:b,offset:e||0,bgsize:t||"16px"})},getIconStyle:function(a,b,e,t,g){var n;return a&&(a=a.toLowerCase(),b&&(n=this.icons[a+"-rtl"]),n||(n=this.icons[a])),a=e||n&&n.path||"",t=t||n&&n.offset,g=g||n&&n.bgsize||"16px",a&&(a=a.replace(/'/g,"\\'")),a&&"background-image:url('"+CKEDITOR.getUrl(a)+"');background-position:0 "+t+"px;background-size:"+g+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(a){var b=t(CKEDITOR.document);return(this.setUiColor=function(a){this.uiColor=a;var e=CKEDITOR.skin.chameleon,t="",o="";"function"==typeof e&&(t=e(this,"editor"),o=e(this,"panel")),n([b],t,a=[[l,a]]),n(g,o,a)}).call(this,a)}});var r="cke_ui_color",g=[],l=/\$color/g;CKEDITOR.on("instanceLoaded",(function(a){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var b=a.editor;a=function(a){if(!(a=(a.data[0]||a.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument()).getById("cke_ui_color")){var e=t(a);g.push(e),b.on("destroy",(function(){g=CKEDITOR.tools.array.filter(g,(function(a){return e!==a}))})),(a=b.getUiColor())&&n([e],CKEDITOR.skin.chameleon(b,"panel"),[[l,a]])}},b.on("panelShow",a),b.on("menuShow",a),b.config.uiColor&&b.setUiColor(b.config.uiColor)}}))}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var a=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);a.appendTo(CKEDITOR.document.getHead());try{var e=a.getComputedStyle("border-top-color"),b=a.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!e||e!=b)}catch(e){CKEDITOR.env.hc=!1}a.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),a=CKEDITOR._.pending)for(delete CKEDITOR._.pending,e=0;e<a.length;e++)CKEDITOR.editor.prototype.constructor.apply(a[e][0],a[e][1]),CKEDITOR.add(a[e][0])}(),CKEDITOR.skin.name="moono-lisa",CKEDITOR.skin.ua_editor="ie,iequirks,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie8",CKEDITOR.skin.chameleon=function(){var a=function(a,e){for(var t=a.match(/[^#]./g),n=0;3>n;n++){var g,o=n;g=parseInt(t[n],16),g=("0"+(0>e?0|g*(1+e):0|g+(255-g)*e).toString(16)).slice(-2),t[o]=g}return"#"+t.join("")},e={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_bottom [background-color:{defaultBackground};border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [background-color:{defaultBackground};outline-color:{defaultBorder};] {id} .cke_dialog_tab [background-color:{dialogTab};border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [background-color:{lightBackground};] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} a.cke_button_off:hover,{id} a.cke_button_off:focus,{id} a.cke_button_off:active [background-color:{darkBackground};border-color:{toolbarElementsBorder};] {id} .cke_button_on [background-color:{ckeButtonOn};border-color:{toolbarElementsBorder};] {id} .cke_toolbar_separator,{id} .cke_toolgroup a.cke_button:last-child:after,{id} .cke_toolgroup a.cke_button.cke_button_disabled:hover:last-child:after [background-color: {toolbarElementsBorder};border-color: {toolbarElementsBorder};] {id} a.cke_combo_button:hover,{id} a.cke_combo_button:focus,{id} .cke_combo_on a.cke_combo_button [border-color:{toolbarElementsBorder};background-color:{darkBackground};] {id} .cke_combo:after [border-color:{toolbarElementsBorder};] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover,{id} a.cke_path_item:focus,{id} a.cke_path_item:active [background-color:{darkBackground};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [background-color:{lightBackground};border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover,.cke_menubutton:focus,.cke_menubutton:active [background-color:{menubuttonHover};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menubutton_disabled:hover .cke_menubutton_icon,.cke_menubutton_disabled:focus .cke_menubutton_icon,.cke_menubutton_disabled:active .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(b,t){var n=a(b.uiColor,.4);return n={id:"."+b.id,defaultBorder:a(n,-.2),toolbarElementsBorder:a(n,-.25),defaultBackground:n,lightBackground:a(n,.8),darkBackground:a(n,-.15),ckeButtonOn:a(n,.4),ckeResizer:a(n,-.4),ckeColorauto:a(n,.8),dialogBody:a(n,.7),dialogTab:a(n,.65),dialogTabSelected:"#FFF",dialogTabSelectedBorder:"#FFF",elementsPathColor:a(n,-.6),menubuttonHover:a(n,.1),menubuttonIcon:a(n,.5),menubuttonIconHover:a(n,.3)},e[t].output(n).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var a=function(a){this._||(this._={}),this._.default=this._.initValue=a.default||"",this._.required=a.required||!1;for(var b=[this._],e=1;e<arguments.length;e++)b.push(arguments[e]);return b.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,b),this._},e={build:function(a,b,e){return new CKEDITOR.ui.dialog.textInput(a,b,e)}},b={build:function(a,b,e){return new CKEDITOR.ui.dialog[b.type](a,b,e)}},t={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(a){this.setValue(this.getInitValue(),a)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._.default},getInitValue:function(){return this._.initValue}},n=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(a,b){this._.domOnChangeRegistered||(a.on("load",(function(){this.getInputElement().on("change",(function(){a.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})}),this)}),this),this._.domOnChangeRegistered=!0),this.on("change",b)}},!0),o=/^on([A-Z]\w+)/,r=function(a){for(var b in a)(o.test(b)||"title"==b||"type"==b)&&delete a[b];return a},g=function(a){(a=a.data.getKeystroke())==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):a==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(b,e,t,n){if(!(4>arguments.length)){var g=a.call(this,e);g.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[];var o={role:e.role||"presentation"};e.includeLabel&&(o["aria-labelledby"]=g.labelId),CKEDITOR.ui.dialog.uiElement.call(this,b,e,t,"div",null,o,(function(){var a=[],t=e.required?" cke_required":"";return"horizontal"!=e.labelLayout?a.push('<label class="cke_dialog_ui_labeled_label'+t+'" ',' id="'+g.labelId+'"',g.inputId?' for="'+g.inputId+'"':"",(e.labelStyle?' style="'+e.labelStyle+'"':"")+">",e.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',e.controlStyle?' style="'+e.controlStyle+'"':"",' role="presentation">',n.call(this,b,e),"</div>"):(t={type:"hbox",widths:e.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+t+'" id="'+g.labelId+'" for="'+g.inputId+'"'+(e.labelStyle?' style="'+e.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(e.label)+"</label>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(e.controlStyle?' style="'+e.controlStyle+'"':"")+">"+n.call(this,b,e)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(b,t,a)),a.join("")}))}},textInput:function(b,e,t){if(!(3>arguments.length)){a.call(this,e);var n=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",o={class:"cke_dialog_ui_input_"+e.type,id:n,type:e.type};e.validate&&(this.validate=e.validate),e.maxLength&&(o.maxlength=e.maxLength),e.size&&(o.size=e.size),e.inputStyle&&(o.style=e.inputStyle);var r=this,l=!1;b.on("load",(function(){r.getInputElement().on("keydown",(function(a){13==a.data.getKeystroke()&&(l=!0)})),r.getInputElement().on("keyup",(function(a){13==a.data.getKeystroke()&&l&&(b.getButton("ok")&&setTimeout((function(){b.getButton("ok").click()}),0),l=!1),r.bidi&&g.call(r,a)}),null,null,1e3)})),CKEDITOR.ui.dialog.labeledElement.call(this,b,e,t,(function(){var a=['<div class="cke_dialog_ui_input_',e.type,'" role="presentation"'];for(var b in e.width&&a.push('style="width:'+e.width+'" '),a.push("><input "),o["aria-labelledby"]=this._.labelId,this._.required&&(o["aria-required"]=this._.required),o)a.push(b+'="'+o[b]+'" ');return a.push(" /></div>"),a.join("")}))}},textarea:function(b,e,t){if(!(3>arguments.length)){a.call(this,e);var n=this,o=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",r={};e.validate&&(this.validate=e.validate),r.rows=e.rows||5,r.cols=e.cols||20,r.class="cke_dialog_ui_input_textarea "+(e.class||""),void 0!==e.inputStyle&&(r.style=e.inputStyle),e.dir&&(r.dir=e.dir),n.bidi&&b.on("load",(function(){n.getInputElement().on("keyup",g)}),n),CKEDITOR.ui.dialog.labeledElement.call(this,b,e,t,(function(){r["aria-labelledby"]=this._.labelId,this._.required&&(r["aria-required"]=this._.required);var b,a=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',o,'" '];for(b in r)a.push(b+'="'+CKEDITOR.tools.htmlEncode(r[b])+'" ');return a.push(">",CKEDITOR.tools.htmlEncode(n._.default),"</textarea></div>"),a.join("")}))}},checkbox:function(b,e,t){if(!(3>arguments.length)){var n=a.call(this,e,{default:!!e.default});e.validate&&(this.validate=e.validate),CKEDITOR.ui.dialog.uiElement.call(this,b,e,t,"span",null,null,(function(){var a=CKEDITOR.tools.extend({},e,{id:e.id?e.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),t=[],g=CKEDITOR.tools.getNextId()+"_label",o={class:"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":g};return r(a),e.default&&(o.checked="checked"),void 0!==a.inputStyle&&(a.style=a.inputStyle),n.checkbox=new CKEDITOR.ui.dialog.uiElement(b,a,t,"input",null,o),t.push(' <label id="',g,'" for="',o.id,'"'+(e.labelStyle?' style="'+e.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(e.label),"</label>"),t.join("")}))}},radio:function(b,e,t){if(!(3>arguments.length)){a.call(this,e),this._.default||(this._.default=this._.initValue=e.items[0][1]),e.validate&&(this.validate=e.validate);var n=[],g=this;e.role="radiogroup",e.includeLabel=!0,CKEDITOR.ui.dialog.labeledElement.call(this,b,e,t,(function(){for(var a=[],t=[],o=(e.id?e.id:CKEDITOR.tools.getNextId())+"_radio",l=0;l<e.items.length;l++){var c=e.items[l],d=void 0!==c[2]?c[2]:c[0],h=void 0!==c[1]?c[1]:c[0],f=(m=CKEDITOR.tools.getNextId()+"_radio_input")+"_label",m=CKEDITOR.tools.extend({},e,{id:m,title:null,type:null},!0),E=(d=CKEDITOR.tools.extend({},m,{title:d},!0),{type:"radio",class:"cke_dialog_ui_radio_input",name:o,value:h,"aria-labelledby":f}),T=[];g._.default==h&&(E.checked="checked"),r(m),r(d),void 0!==m.inputStyle&&(m.style=m.inputStyle),m.keyboardFocusable=!0,n.push(new CKEDITOR.ui.dialog.uiElement(b,m,T,"input",null,E)),T.push(" "),new CKEDITOR.ui.dialog.uiElement(b,d,T,"label",null,{id:f,for:E.id},c[0]),a.push(T.join(""))}return new CKEDITOR.ui.dialog.hbox(b,n,a,t),t.join("")})),this._.children=n}},button:function(b,e,t){if(arguments.length){"function"==typeof e&&(e=e(b.getParentEditor())),a.call(this,e,{disabled:e.disabled||!1}),CKEDITOR.event.implementOn(this);var n=this;b.on("load",(function(){var a=this.getElement();a.on("click",(function(a){n.click(),a.data.preventDefault()})),a.on("keydown",(function(a){a.data.getKeystroke()in{32:1}&&(n.click(),a.data.preventDefault())})),a.unselectable()}),this);var g=CKEDITOR.tools.extend({},e);delete g.style;var o=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,b,g,t,"a",null,{style:e.style,href:"javascript:void(0)",title:e.label,hidefocus:"true",class:e.class,role:"button","aria-labelledby":o},'<span id="'+o+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(e.label)+"</span>")}},select:function(b,e,t){if(!(3>arguments.length)){var n=a.call(this,e);e.validate&&(this.validate=e.validate),n.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,b,e,t,(function(){var a=CKEDITOR.tools.extend({},e,{id:e.id?e.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),t=[],g=[],o={id:n.inputId,class:"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};t.push('<div class="cke_dialog_ui_input_',e.type,'" role="presentation"'),e.width&&t.push('style="width:'+e.width+'" '),t.push(">"),void 0!==e.size&&(o.size=e.size),void 0!==e.multiple&&(o.multiple=e.multiple),r(a);for(var l,c=0;c<e.items.length&&(l=e.items[c]);c++)g.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==l[1]?l[1]:l[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(l[0]));return void 0!==a.inputStyle&&(a.style=a.inputStyle),n.select=new CKEDITOR.ui.dialog.uiElement(b,a,t,"select",null,o,g.join("")),t.push("</div>"),t.join("")}))}},file:function(b,e,t){if(!(3>arguments.length)){void 0===e.default&&(e.default="");var n=CKEDITOR.tools.extend(a.call(this,e),{definition:e,buttons:[]});e.validate&&(this.validate=e.validate),b.on("load",(function(){CKEDITOR.document.getById(n.frameId).getParent().addClass("cke_dialog_ui_input_file")})),CKEDITOR.ui.dialog.labeledElement.call(this,b,e,t,(function(){n.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var a=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',n.frameId,'" title="',e.label,'" src="javascript:void('];return a.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),a.push(')"></iframe>'),a.join("")}))}},fileButton:function(b,e,t){var n=this;if(!(3>arguments.length)){a.call(this,e),e.validate&&(this.validate=e.validate);var g=CKEDITOR.tools.extend({},e),o=g.onClick;g.className=(g.className?g.className+" ":"")+"cke_dialog_ui_button",g.onClick=function(a){var t=e.for;!1!==(a=!!o&&o.call(this,a))&&("xhr"!==a&&b.getContentElement(t[0],t[1]).submit(),this.disable())},b.on("load",(function(){b.getContentElement(e.for[0],e.for[1])._.buttons.push(n)})),CKEDITOR.ui.dialog.button.call(this,b,g,t)}},html:function(){var a=/^\s*<[\w:]+\s+([^>]*)?>/,b=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,e=/\/$/;return function(t,g,n){if(!(3>arguments.length)){var o=[],r=g.html;"<"!=r.charAt(0)&&(r="<span>"+r+"</span>");var l=g.focus;if(l){var c=this.focus;this.focus=function(){("function"==typeof l?l:c).call(this),this.fire("focus")},g.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,t,g,o,"span",null,null,""),o=o.join("").match(a),r=r.match(b)||["","",""],e.test(r[1])&&(r[1]=r[1].slice(0,-1),r[2]="/"+r[2]),n.push([r[1]," ",o[1]||"",r[2]].join(""))}}}(),fieldset:function(a,b,e,t,g){var n=g.label;this._={children:b},CKEDITOR.ui.dialog.uiElement.call(this,a,g,t,"fieldset",null,null,(function(){var a=[];n&&a.push("<legend"+(g.labelStyle?' style="'+g.labelStyle+'"':"")+">"+n+"</legend>");for(var b=0;b<e.length;b++)a.push(e[b]);return a.join("")}))}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(a){var b=CKEDITOR.document.getById(this._.labelId);return 1>b.getChildCount()?new CKEDITOR.dom.text(a,CKEDITOR.document).appendTo(b):b.getChild(0).$.nodeValue=a,this},getLabel:function(){var a=CKEDITOR.document.getById(this._.labelId);return!a||1>a.getChildCount()?"":a.getChild(0).getText()},eventProcessors:n},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return!this._.disabled&&this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var a=this.getElement();a&&a.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(a,b){this.on("click",(function(){b.apply(this,arguments)}))}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var a=this.selectParentTab();setTimeout((function(){var b=a.getInputElement();b&&b.$.focus()}),0)},select:function(){var a=this.selectParentTab();setTimeout((function(){var b=a.getInputElement();b&&(b.$.focus(),b.$.select())}),0)},accessKeyUp:function(){this.select()},setValue:function(a){if(this.bidi){var b=a&&a.charAt(0);(b="‪"==b?"ltr":"‫"==b?"rtl":null)&&(a=a.slice(1)),this.setDirectionMarker(b)}return a||(a=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var a=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&a){var b=this.getDirectionMarker();b&&(a=("ltr"==b?"‪":"‫")+a)}return a},setDirectionMarker:function(a){var b=this.getInputElement();a?b.setAttributes({dir:a,"data-cke-dir-marker":a}):this.getDirectionMarker()&&b.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},t,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(a,b,e){var t=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),g=this.getInputElement().$;return t.$.text=a,t.$.value=null==b?a:b,null==e?CKEDITOR.env.ie?g.add(t.$):g.add(t.$,null):g.add(t.$,e),this},remove:function(a){return this.getInputElement().$.remove(a),this},clear:function(){for(var a=this.getInputElement().$;0<a.length;)a.remove(0);return this},keyboardFocusable:!0},t,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(a,b){this.getInputElement().$.checked=a,!b&&this.fire("change",{value:a})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(a,b){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?n.onChange.apply(this,arguments):(a.on("load",(function(){var a=this._.checkbox.getElement();a.on("propertychange",(function(b){"checked"==(b=b.data.$).propertyName&&this.fire("change",{value:a.$.checked})}),this)}),this),this.on("change",b),null)}},keyboardFocusable:!0},t,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(a,b){for(var e,t=this._.children,g=0;g<t.length&&(e=t[g]);g++)e.getElement().$.checked=e.getValue()==a;!b&&this.fire("change",{value:a})},getValue:function(){for(var a=this._.children,b=0;b<a.length;b++)if(a[b].getElement().$.checked)return a[b].getValue();return null},accessKeyUp:function(){var b,a=this._.children;for(b=0;b<a.length;b++)if(a[b].getElement().$.checked)return void a[b].getElement().focus();a[0].getElement().focus()},eventProcessors:{onChange:function(a,b){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?n.onChange.apply(this,arguments):(a.on("load",(function(){for(var a=this._.children,b=this,e=0;e<a.length;e++)a[e].getElement().on("propertychange",(function(a){"checked"==(a=a.data.$).propertyName&&this.$.checked&&b.fire("change",{value:this.getAttribute("value")})}))}),this),this.on("change",b),null)}}},t,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,t,{getInputElement:function(){var a=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<a.$.forms.length?new CKEDITOR.dom.element(a.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(a){var e,g,b=/^on([A-Z]\w+)/,t=function(a,b,e,t){a.on("formLoaded",(function(){a.getInputElement().on(e,t,a)}))};for(g in a)(e=g.match(b))&&(this.eventProcessors[g]?this.eventProcessors[g].call(this,this._.dialog,a[g]):t(this,this._.dialog,e[1].toLowerCase(),a[g]));return this},reset:function(){function a(){e.$.open();var c="";t.size&&(c=t.size-(CKEDITOR.env.ie?7:0));var d=b.frameId+"_input";for(e.$.write(['<html dir="'+r+'" lang="'+l+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+r+'" lang="'+l+'" action="',CKEDITOR.tools.htmlEncode(t.action),'"><label id="',b.labelId,'" for="',d,'" style="display:none">',CKEDITOR.tools.htmlEncode(t.label),'</label><input style="width:100%" id="',d,'" aria-labelledby="',b.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(t.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<c?c:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+n+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+o+")}","<\/script>"].join("")),e.$.close(),c=0;c<g.length;c++)g[c].enable()}var b=this._,e=CKEDITOR.document.getById(b.frameId).getFrameDocument(),t=b.definition,g=b.buttons,n=this.formLoadedNumber,o=this.formUnloadNumber,r=b.dialog._.editor.lang.dir,l=b.dialog._.editor.langCode;n||(n=this.formLoadedNumber=CKEDITOR.tools.addFunction((function(){this.fire("formLoaded")}),this),o=this.formUnloadNumber=CKEDITOR.tools.addFunction((function(){this.getInputElement().clearCustomData()}),this),this.getDialog()._.editor.on("destroy",(function(){CKEDITOR.tools.removeFunction(n),CKEDITOR.tools.removeFunction(o)}))),CKEDITOR.env.gecko?setTimeout(a,500):a()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(a,b){this._.domOnChangeRegistered||(this.on("formLoaded",(function(){this.getInputElement().on("change",(function(){this.fire("change",{value:this.getValue()})}),this)}),this),this._.domOnChangeRegistered=!0),this.on("change",b)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",e),CKEDITOR.dialog.addUIElement("password",e),CKEDITOR.dialog.addUIElement("tel",e),CKEDITOR.dialog.addUIElement("textarea",b),CKEDITOR.dialog.addUIElement("checkbox",b),CKEDITOR.dialog.addUIElement("radio",b),CKEDITOR.dialog.addUIElement("button",b),CKEDITOR.dialog.addUIElement("select",b),CKEDITOR.dialog.addUIElement("file",b),CKEDITOR.dialog.addUIElement("fileButton",b),CKEDITOR.dialog.addUIElement("html",b),CKEDITOR.dialog.addUIElement("fieldset",{build:function(a,b,e){for(var g,t=b.children,n=[],o=[],r=0;r<t.length&&(g=t[r]);r++){var l=[];n.push(l),o.push(CKEDITOR.dialog._.uiElementBuilders[g.type].build(a,g,l))}return new CKEDITOR.ui.dialog[b.type](a,o,n,e,b)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,CKEDITOR.DIALOG_STATE_IDLE=1,CKEDITOR.DIALOG_STATE_BUSY=2,function(){function a(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+a,e=b-1;e>b-a;e--)if(this._.tabs[this._.tabIdList[e%a]][0].$.offsetHeight)return this._.tabIdList[e%a];return null}function e(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),e=b+1;e<b+a;e++)if(this._.tabs[this._.tabIdList[e%a]][0].$.offsetHeight)return this._.tabIdList[e%a];return null}function b(a,b){for(var e=a.$.getElementsByTagName("input"),t=0,n=e.length;t<n;t++){var g=new CKEDITOR.dom.element(e[t]);"text"==g.getAttribute("type").toLowerCase()&&(b?(g.setAttribute("value",g.getCustomData("fake_value")||""),g.removeCustomData("fake_value")):(g.setCustomData("fake_value",g.getAttribute("value")),g.setAttribute("value","")))}}function t(a,b){var e=this.getInputElement();e&&(a?e.removeAttribute("aria-invalid"):e.setAttribute("aria-invalid",!0)),a||(this.select?this.select():this.focus()),b&&alert(b),this.fire("validated",{valid:a,msg:b})}function n(){var a=this.getInputElement();a&&a.removeAttribute("aria-invalid")}function o(a){var b=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",p).output({id:CKEDITOR.tools.getNextNumber(),editorId:a.id,langDir:a.lang.dir,langCode:a.langCode,editorDialogClass:"cke_editor_"+a.name.replace(/\./g,"\\.")+"_dialog",closeTitle:a.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),e=b.getChild([0,0,0,0,0]),t=e.getChild(0),n=e.getChild(1);return a.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(e),!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(a="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+a+'" tabIndex="-1"></iframe>').appendTo(e.getParent())),t.unselectable(),n.unselectable(),{element:b,parts:{dialog:b.getChild(0),title:t,close:n,tabs:e.getChild(2),contents:e.getChild([3,0,0,0]),footer:e.getChild([3,0,1,0])}}}function r(a,b,e){this.element=b,this.focusIndex=e,this.tabIndex=0,this.isFocusable=function(){return!b.getAttribute("disabled")&&b.isVisible()},this.focus=function(){a._.currentFocusIndex=this.focusIndex,this.element.focus()},b.on("keydown",(function(a){a.data.getKeystroke()in{32:1,13:1}&&this.fire("click")})),b.on("focus",(function(){this.fire("mouseover")})),b.on("blur",(function(){this.fire("mouseout")}))}function l(a,b){this._={dialog:a},CKEDITOR.tools.extend(this,b)}function c(a){function b(e){var l=a.getSize(),c=CKEDITOR.document.getWindow().getViewPaneSize(),d=e.data.$.screenX,h=e.data.$.screenY,f=d-t.x,m=h-t.y;t={x:d,y:h},n.x+=f,n.y+=m,a.move(n.x+r[3]<o?-r[3]:n.x-r[1]>c.width-l.width-o?c.width-l.width+("rtl"==g.lang.dir?0:r[1]):n.x,n.y+r[0]<o?-r[0]:n.y-r[2]>c.height-l.height-o?c.height-l.height+r[2]:n.y,1),e.data.preventDefault()}function e(){if(CKEDITOR.document.removeListener("mousemove",b),CKEDITOR.document.removeListener("mouseup",e),CKEDITOR.env.ie6Compat){var a=D.getChild(0).getFrameDocument();a.removeListener("mousemove",b),a.removeListener("mouseup",e)}}var t=null,n=null,g=a.getParentEditor(),o=g.config.dialog_magnetDistance,r=CKEDITOR.skin.margins||[0,0,0,0];void 0===o&&(o=20),a.parts.title.on("mousedown",(function(g){if(t={x:g.data.$.screenX,y:g.data.$.screenY},CKEDITOR.document.on("mousemove",b),CKEDITOR.document.on("mouseup",e),n=a.getPosition(),CKEDITOR.env.ie6Compat){var o=D.getChild(0).getFrameDocument();o.on("mousemove",b),o.on("mouseup",e)}g.data.preventDefault()}),a)}function d(a){function b(e){var h="rtl"==g.lang.dir,f=d.width,m=d.height,E=f+(e.data.$.screenX-c.x)*(h?-1:1)*(a._.moved?1:2),q=m+(e.data.$.screenY-c.y)*(a._.moved?1:2),T=a._.element.getFirst(),C=(T=h&&T.getComputedStyle("right"),a.getPosition());C.y+q>l.height&&(q=l.height-C.y),(h?T:C.x)+E>l.width&&(E=l.width-(h?T:C.x)),n!=CKEDITOR.DIALOG_RESIZE_WIDTH&&n!=CKEDITOR.DIALOG_RESIZE_BOTH||(f=Math.max(t.minWidth||0,E-o)),n!=CKEDITOR.DIALOG_RESIZE_HEIGHT&&n!=CKEDITOR.DIALOG_RESIZE_BOTH||(m=Math.max(t.minHeight||0,q-r)),a.resize(f,m),a._.moved||a.layout(),e.data.preventDefault()}function e(){if(CKEDITOR.document.removeListener("mouseup",e),CKEDITOR.document.removeListener("mousemove",b),h&&(h.remove(),h=null),CKEDITOR.env.ie6Compat){var a=D.getChild(0).getFrameDocument();a.removeListener("mouseup",e),a.removeListener("mousemove",b)}}var t=a.definition,n=t.resizable;if(n!=CKEDITOR.DIALOG_RESIZE_NONE){var o,r,l,c,d,h,g=a.getParentEditor(),f=CKEDITOR.tools.addFunction((function(t){d=a.getSize();var n=a.parts.contents;n.$.getElementsByTagName("iframe").length&&(h=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),n.append(h)),r=d.height-a.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),o=d.width-a.parts.contents.getSize("width",1),c={x:t.screenX,y:t.screenY},l=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",b),CKEDITOR.document.on("mouseup",e),CKEDITOR.env.ie6Compat&&((n=D.getChild(0).getFrameDocument()).on("mousemove",b),n.on("mouseup",e)),t.preventDefault&&t.preventDefault()}));a.on("load",(function(){var b="";n==CKEDITOR.DIALOG_RESIZE_WIDTH?b=" cke_resizer_horizontal":n==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(b=" cke_resizer_vertical"),b=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+b+" cke_resizer_"+g.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(g.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+f+', event )">'+("ltr"==g.lang.dir?"◢":"◣")+"</div>"),a.parts.footer.append(b,1)})),g.on("destroy",(function(){CKEDITOR.tools.removeFunction(f)}))}}function h(a){a.data.preventDefault(1)}function q(a){var b=CKEDITOR.document.getWindow(),e=a.config,t=CKEDITOR.skinName||a.config.skin,n=e.dialog_backgroundCoverColor||("moono-lisa"==t?"black":"white"),g=(t=e.dialog_backgroundCoverOpacity,e.baseFloatZIndex),o=(e=CKEDITOR.tools.genKey(n,t,g),R[e]);o?o.show():(g=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",g,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+n,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(n="<html><body style=\\'background-color:"+n+";\\'></body></html>",g.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),g.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+n+"' );document.close();")+"})())"),g.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),g.push("</div>"),(o=CKEDITOR.dom.element.createFromHtml(g.join(""))).setOpacity(void 0!==t?t:.5),o.on("keydown",h),o.on("keypress",h),o.on("keyup",h),o.appendTo(CKEDITOR.document.getBody()),R[e]=o),a.focusManager.add(o),D=o;var r=function(){var a=b.getScrollPosition(),e=CKEDITOR.dialog._.currentTop;if(o.setStyles({left:a.x+"px",top:a.y+"px"}),e)do{a=e.getPosition(),e.move(a.x,a.y)}while(e=e._.parentDialog)};if(O=a=function(){var a=b.getViewPaneSize();o.setStyles({width:a.width+"px",height:a.height+"px"})},b.on("resize",a),a(),CKEDITOR.env.mac&&CKEDITOR.env.webkit||o.focus(),CKEDITOR.env.ie6Compat){var l=function(){r(),l.prevScrollHandler.apply(this,arguments)};b.$.setTimeout((function(){l.prevScrollHandler=window.onscroll||function(){},window.onscroll=l}),0),r()}}function f(a){D&&(a.focusManager.remove(D),a=CKEDITOR.document.getWindow(),D.hide(),D=null,a.removeListener("resize",O),CKEDITOR.env.ie6Compat&&a.$.setTimeout((function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null}),0),O=null)}var u=CKEDITOR.tools.cssLength,p='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(b,g){function r(a){var b=D._.focusList;if(a=a||0,!(1>b.length)){var e=D._.currentFocusIndex;D._.tabBarMode&&0>a&&(e=0);try{b[e].getInputElement().$.blur()}catch(e){}var t=e,g=1<D._.pageCount;do{if(t+=a,g&&!D._.tabBarMode&&(t==b.length||-1==t))return D._.tabBarMode=!0,D._.tabs[D._.currentTabId][0].focus(),void(D._.currentFocusIndex=-1);if((t=(t+b.length)%b.length)==e)break}while(a&&!b[t].isFocusable());b[t].focus(),"text"==b[t].type&&b[t].select()}}function l(t){if(D==CKEDITOR.dialog._.currentTop){var n=t.data.getKeystroke(),o="rtl"==b.lang.dir;if(u=p=0,9==n||n==CKEDITOR.SHIFT+9)r(n==CKEDITOR.SHIFT+9?-1:1),u=1;else if(n==CKEDITOR.ALT+121&&!D._.tabBarMode&&1<D.getPageCount())D._.tabBarMode=!0,D._.tabs[D._.currentTabId][0].focus(),D._.currentFocusIndex=-1,u=1;else if(-1!=CKEDITOR.tools.indexOf([37,38,39,40],n)&&D._.tabBarMode)n=-1!=CKEDITOR.tools.indexOf([o?39:37,38],n)?a.call(D):e.call(D),D.selectPage(n),D._.tabs[n][0].focus(),u=1;else if(13!=n&&32!=n||!D._.tabBarMode)if(13==n)(n=t.data.getTarget()).is("a","button","select","textarea")||n.is("input")&&"button"==n.$.type||((n=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(n.click,0,n),u=1),p=1;else{if(27!=n)return;(n=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(n.click,0,n):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),p=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,r(1),u=1;h(t)}}function h(a){u?a.data.preventDefault(1):p&&a.data.stopPropagation()}var u,p,q=CKEDITOR.dialog._.dialogDefinitions[g],f=CKEDITOR.tools.clone(m),E=b.config.dialog_buttonsOrder||"OS",T=b.lang.dir,C={};if(("OS"==E&&CKEDITOR.env.mac||"rtl"==E&&"ltr"==T||"ltr"==E&&"rtl"==T)&&f.buttons.reverse(),q=CKEDITOR.tools.extend(q(b),f),q=CKEDITOR.tools.clone(q),q=new I(this,q),f=o(b),this._={editor:b,element:f.element,name:g,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=f.parts,CKEDITOR.tools.setTimeout((function(){b.fire("ariaWidget",this.parts.contents)}),0,this),(f={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"})["rtl"==T?"right":"left"]=0,this.parts.dialog.setStyles(f),CKEDITOR.event.call(this),this.definition=q=CKEDITOR.fire("dialogDefinition",{name:g,definition:q},b).definition,!("removeDialogTabs"in b._)&&b.config.removeDialogTabs){for(f=b.config.removeDialogTabs.split(";"),T=0;T<f.length;T++)if(2==(E=f[T].split(":")).length){var O=E[0];C[O]||(C[O]=[]),C[O].push(E[1])}b._.removeDialogTabs=C}if(b._.removeDialogTabs&&(C=b._.removeDialogTabs[g]))for(T=0;T<C.length;T++)q.removeContents(C[T]);q.onLoad&&this.on("load",q.onLoad),q.onShow&&this.on("show",q.onShow),q.onHide&&this.on("hide",q.onHide),q.onOk&&this.on("ok",(function(a){b.fire("saveSnapshot"),setTimeout((function(){b.fire("saveSnapshot")}),0),!1===q.onOk.call(this,a)&&(a.data.hide=!1)})),this.state=CKEDITOR.DIALOG_STATE_IDLE,q.onCancel&&this.on("cancel",(function(a){!1===q.onCancel.call(this,a)&&(a.data.hide=!1)}));var D=this,R=function(a){var e,b=D._.contents;for(e in b)for(var t in b[e])if(a.call(this,b[e][t]))return};this.on("ok",(function(a){R((function(b){if(b.validate){var e=b.validate(this),n="string"==typeof e||!1===e;return n&&(a.data.hide=!1,a.stop()),t.call(b,!n,"string"==typeof e?e:void 0),n}}))}),this,null,0),this.on("cancel",(function(a){R((function(e){if(e.isChanged())return b.config.dialog_noConfirmCancel||confirm(b.lang.common.confirmCancel)||(a.data.hide=!1),!0}))}),this,null,0),this.parts.close.on("click",(function(a){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),a.data.preventDefault()}),this),this.changeFocus=r;var v=this._.element;for(b.focusManager.add(v,1),this.on("show",(function(){v.on("keydown",l,this),CKEDITOR.env.gecko&&v.on("keypress",h,this)})),this.on("hide",(function(){v.removeListener("keydown",l),CKEDITOR.env.gecko&&v.removeListener("keypress",h),R((function(a){n.apply(a)}))})),this.on("iframeAdded",(function(a){new CKEDITOR.dom.document(a.data.iframe.$.contentWindow.document).on("keydown",l,this,null,0)})),this.on("show",(function(){!function(){var a=D._.focusList;a.sort((function(a,b){return a.tabIndex!=b.tabIndex?b.tabIndex-a.tabIndex:a.focusIndex-b.focusIndex}));for(var b=a.length,e=0;e<b;e++)a[e].focusIndex=e}();var a=1<D._.pageCount;b.config.dialog_startupFocusTab&&a?(D._.tabBarMode=!0,D._.tabs[D._.currentTabId][0].focus(),D._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=a?-1:this._.focusList.length-1,q.onFocus?(a=q.onFocus.call(this))&&a.focus():r(1))}),this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",(function(){var a=this.getElement(),b=a.getFirst();b.remove(),b.appendTo(a)}),this),c(this),d(this),new CKEDITOR.dom.text(q.title,CKEDITOR.document).appendTo(this.parts.title),T=0;T<q.contents.length;T++)(C=q.contents[T])&&this.addPage(C);for(this.parts.tabs.on("click",(function(a){var b=a.data.getTarget();b.hasClass("cke_dialog_tab")&&(b=b.$.id,this.selectPage(b.substring(4,b.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,r(1)),a.data.preventDefault())}),this),T=[],C=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:q.buttons},T).getChild(),this.parts.footer.setHtml(T.join("")),T=0;T<C.length;T++)this._.buttons[C[T].id]=C[T]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(a,b){this._.contentSize&&this._.contentSize.width==a&&this._.contentSize.height==b||(CKEDITOR.dialog.fire("resize",{dialog:this,width:a,height:b},this._.editor),this.fire("resize",{width:a,height:b},this._.editor),this.parts.contents.setStyles({width:a+"px",height:b+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:a,height:b})},getSize:function(){var a=this._.element.getFirst();return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0}},move:function(a,b,e){var t=this._.element.getFirst(),n="rtl"==this._.editor.lang.dir,g="fixed"==t.getComputedStyle("position");CKEDITOR.env.ie&&t.setStyle("zoom","100%"),g&&this._.position&&this._.position.x==a&&this._.position.y==b||(this._.position={x:a,y:b},g||(a+=(g=CKEDITOR.document.getWindow().getScrollPosition()).x,b+=g.y),n&&(g=this.getSize(),a=CKEDITOR.document.getWindow().getViewPaneSize().width-g.width-a),(b={top:(0<b?b:0)+"px"})[n?"right":"left"]=(0<a?a:0)+"px",t.setStyles(b),e&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var a=this._.element,b=this.definition;for(var e in a.getParent()&&a.getParent().equals(CKEDITOR.document.getBody())?a.setStyle("display","block"):a.appendTo(CKEDITOR.document.getBody()),this.resize(this._.contentSize&&this._.contentSize.width||b.width||b.minWidth,this._.contentSize&&this._.contentSize.height||b.height||b.minHeight),this.reset(),null===this._.currentTabId&&this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10),null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,q(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),a.on("keydown",y),a.on("keyup",K),this._.hasFocus=!1,b.contents)if(b.contents[e]){a=b.contents[e];var t=this._.tabs[a.id],n=a.requiredContent,o=0;if(t){for(var r in this._.contents[a.id]){var l=this._.contents[a.id][r];"hbox"!=l.type&&"vbox"!=l.type&&l.getInputElement()&&(l.requiredContent&&!this._.editor.activeFilter.check(l.requiredContent)?l.disable():(l.enable(),o++))}!o||n&&!this._.editor.activeFilter.check(n)?t[0].addClass("cke_dialog_tab_disabled"):t[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout((function(){this.layout(),function(a){function b(){a.layout()}var e=CKEDITOR.document.getWindow();e.on("resize",b),a.on("hide",(function(){e.removeListener("resize",b)}))}(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach((function(a){a.setInitValue&&a.setInitValue()}))}),100,this)},layout:function(){var a=this.parts.dialog,b=this.getSize(),e=CKEDITOR.document.getWindow().getViewPaneSize(),t=(e.width-b.width)/2,n=(e.height-b.height)/2;CKEDITOR.env.ie6Compat||(b.height+(0<n?n:0)>e.height||b.width+(0<t?t:0)>e.width?a.setStyle("position","absolute"):a.setStyle("position","fixed")),this.move(this._.moved?this._.position.x:t,this._.moved?this._.position.y:n)},foreach:function(a){for(var b in this._.contents)for(var e in this._.contents[b])a.call(this,this._.contents[b][e]);return this},reset:function(){var a=function(a){a.reset&&a.reset(1)};return function(){return this.foreach(a),this}}(),setupContent:function(){var a=arguments;this.foreach((function(b){b.setup&&b.setup.apply(b,a)}))},commitContent:function(){var a=arguments;this.foreach((function(b){CKEDITOR.env.ie&&this._.currentFocusIndex==b.focusIndex&&b.getInputElement().$.blur(),b.commit&&b.commit.apply(b,a)}))},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var a=this._.element;for(a.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),k(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var b=this._.parentDialog.getElement().getFirst();b.setStyle("z-index",parseInt(b.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else f(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null,a.removeListener("keydown",y),a.removeListener("keyup",K);var e=this._.editor;e.focus(),setTimeout((function(){e.focusManager.unlock(),CKEDITOR.env.iOS&&e.window.focus()}),0)}delete this._.parentDialog,this.foreach((function(a){a.resetInitValue&&a.resetInitValue()})),this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(a){if(!a.requiredContent||this._.editor.filter.check(a.requiredContent)){for(var b=[],e=a.label?' title="'+CKEDITOR.tools.htmlEncode(a.label)+'"':"",t=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:a.elements,expand:!!a.expand,padding:a.padding,style:a.style||"width: 100%;"},b),n=this._.contents[a.id]={},g=t.getChild(),o=0;t=g.shift();)t.notAllowed||"hbox"==t.type||"vbox"==t.type||o++,n[t.id]=t,"function"==typeof t.getChild&&g.push.apply(g,t.getChild());o||(a.hidden=!0),(b=CKEDITOR.dom.element.createFromHtml(b.join(""))).setAttribute("role","tabpanel"),t=CKEDITOR.env,n="cke_"+a.id+"_"+CKEDITOR.tools.getNextNumber(),e=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",e,a.hidden?' style="display:none"':"",' id="',n,'"',t.gecko&&!t.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',a.label,"</a>"].join("")),b.setAttribute("aria-labelledby",n),this._.tabs[a.id]=[e,b],this._.tabIdList.push(a.id),!a.hidden&&this._.pageCount++,this._.lastTab=e,this.updateStyle(),b.setAttribute("name",a.id),b.appendTo(this.parts.contents),e.unselectable(),this.parts.tabs.append(e),a.accessKey&&(_(this,this,"CTRL+"+a.accessKey,S,w),this._.accessKeyMap["CTRL+"+a.accessKey]=a.id)}},selectPage:function(a){if(this._.currentTabId!=a&&!this._.tabs[a][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:a,currentPage:this._.currentTabId})){for(var e in this._.tabs){var t=this._.tabs[e][0],n=this._.tabs[e][1];e!=a&&(t.removeClass("cke_dialog_tab_selected"),n.hide()),n.setAttribute("aria-hidden",e!=a)}var g=this._.tabs[a];g[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(b(g[1]),g[1].show(),setTimeout((function(){b(g[1],1)}),0)):g[1].show(),this._.currentTabId=a,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,a)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(b){var e=this._.tabs[b]&&this._.tabs[b][0];e&&1!=this._.pageCount&&e.isVisible()&&(b==this._.currentTabId&&this.selectPage(a.call(this)),e.hide(),this._.pageCount--,this.updateStyle())},showPage:function(a){(a=this._.tabs[a]&&this._.tabs[a][0])&&(a.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(a,b){var e=this._.contents[a];return e&&e[b]},getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(a,b,e){return this.getContentElement(a,b).setValue(e)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(a,b){if(void 0===b)b=this._.focusList.length,this._.focusList.push(new r(this,a,b));else{this._.focusList.splice(b,0,new r(this,a,b));for(var e=b+1;e<this._.focusList.length;e++)this._.focusList[e].focusIndex++}},setState:function(a){if(this.state!=a){if(this.state=a,a==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var b=this.getParentEditor().lang.dir,e={attributes:{class:"cke_dialog_spinner"},styles:{float:"rtl"==b?"right":"left"}};e.styles["margin-"+("rtl"==b?"left":"right")]="8px",this.parts.spinner=CKEDITOR.document.createElement("div",e),this.parts.spinner.setHtml("&#8987;"),this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show(),this.getButton("ok").disable()}else a==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",a)}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(a,b){this._.dialogDefinitions[a]&&"function"!=typeof b||(this._.dialogDefinitions[a]=b)},exists:function(a){return!!this._.dialogDefinitions[a]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(a,b,e){return!((a=a.config.removeDialogTabs)&&a.match(new RegExp("(?:^|;)"+b+":"+e+"(?:$|;)","i")))},okButton:function(){var a=function(a,b){return b=b||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:a.lang.common.ok,class:"cke_dialog_ui_button_ok",onClick:function(a){!1!==(a=a.data.dialog).fire("ok",{hide:!0}).hide&&a.hide()}},b,!0)};return a.type="button",a.override=function(b){return CKEDITOR.tools.extend((function(e){return a(e,b)}),{type:"button"},!0)},a}(),cancelButton:function(){var a=function(a,b){return b=b||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:a.lang.common.cancel,class:"cke_dialog_ui_button_cancel",onClick:function(a){!1!==(a=a.data.dialog).fire("cancel",{hide:!0}).hide&&a.hide()}},b,!0)};return a.type="button",a.override=function(b){return CKEDITOR.tools.extend((function(e){return a(e,b)}),{type:"button"},!0)},a}(),addUIElement:function(a,b){this._.uiElementBuilders[a]=b}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var m={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},E=function(a,b,e){for(var t,n=0;t=a[n];n++)if(t.id==b||e&&t[e]&&(t=E(t[e],b,e)))return t;return null},T=function(a,b,e,t,n){if(e){for(var o,g=0;o=a[g];g++){if(o.id==e)return a.splice(g,0,b),b;if(t&&o[t]&&(o=T(o[t],b,e,t,!0)))return o}if(n)return null}return a.push(b),b},C=function(a,b,e){for(var t,n=0;t=a[n];n++){if(t.id==b)return a.splice(n,1);if(e&&t[e]&&(t=C(t[e],b,e)))return t}return null},I=function(a,b){this.dialog=a;for(var e,t=b.contents,n=0;e=t[n];n++)t[n]=e&&new l(a,e);CKEDITOR.tools.extend(this,b)};I.prototype={getContents:function(a){return E(this.contents,a)},getButton:function(a){return E(this.buttons,a)},addContents:function(a,b){return T(this.contents,a,b)},addButton:function(a,b){return T(this.buttons,a,b)},removeContents:function(a){C(this.contents,a)},removeButton:function(a){C(this.buttons,a)}},l.prototype={get:function(a){return E(this.elements,a,"children")},add:function(a,b){return T(this.elements,a,b,"children")},remove:function(a){C(this.elements,a,"children")}};var O,D,R={},v={},y=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,e=a.data.$.altKey,t=a.data.$.shiftKey,n=String.fromCharCode(a.data.$.keyCode);(b=v[(b?"CTRL+":"")+(e?"ALT+":"")+(t?"SHIFT+":"")+n])&&b.length&&((b=b[b.length-1]).keydown&&b.keydown.call(b.uiElement,b.dialog,b.key),a.data.preventDefault())},K=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,e=a.data.$.altKey,t=a.data.$.shiftKey,n=String.fromCharCode(a.data.$.keyCode);(b=v[(b?"CTRL+":"")+(e?"ALT+":"")+(t?"SHIFT+":"")+n])&&b.length&&(b=b[b.length-1]).keyup&&(b.keyup.call(b.uiElement,b.dialog,b.key),a.data.preventDefault())},_=function(a,b,e,t,n){(v[e]||(v[e]=[])).push({uiElement:a,dialog:b,key:e,keyup:n||a.accessKeyUp,keydown:t||a.accessKeyDown})},k=function(a){for(var b in v){for(var e=v[b],t=e.length-1;0<=t;t--)e[t].dialog!=a&&e[t].uiElement!=a||e.splice(t,1);0===e.length&&delete v[b]}},w=function(a,b){a._.accessKeyMap[b]&&a.selectPage(a._.accessKeyMap[b])},S=function(){};CKEDITOR.ui.dialog={uiElement:function(a,b,e,t,n,g,o){if(!(4>arguments.length)){var r=(t.call?t(b):t)||"div",l=["<",r," "],c=(n&&n.call?n(b):n)||{},d=(g&&g.call?g(b):g)||{},h=(o&&o.call?o.call(this,a,b):o)||"",f=this.domId=d.id||CKEDITOR.tools.getNextId()+"_uiElement";b.requiredContent&&!a.getParentEditor().filter.check(b.requiredContent)&&(c.display="none",this.notAllowed=!0),d.id=f;var q={};b.type&&(q["cke_dialog_ui_"+b.type]=1),b.className&&(q[b.className]=1),b.disabled&&(q.cke_disabled=1);var m=d.class&&d.class.split?d.class.split(" "):[];for(f=0;f<m.length;f++)m[f]&&(q[m[f]]=1);for(f in m=[],q)m.push(f);for(f in d.class=m.join(" "),b.title&&(d.title=b.title),q=(b.style||"").split(";"),b.align&&(m=b.align,c["margin-left"]="left"==m?0:"auto",c["margin-right"]="right"==m?0:"auto"),c)q.push(f+":"+c[f]);for(b.hidden&&q.push("display:none"),f=q.length-1;0<=f;f--)""===q[f]&&q.splice(f,1);for(f in 0<q.length&&(d.style=(d.style?d.style+"; ":"")+q.join("; ")),d)l.push(f+'="'+CKEDITOR.tools.htmlEncode(d[f])+'" ');l.push(">",h,"</",r,">"),e.push(l.join("")),(this._||(this._={})).dialog=a,"boolean"==typeof b.isChanged&&(this.isChanged=function(){return b.isChanged}),"function"==typeof b.isChanged&&(this.isChanged=b.isChanged),"function"==typeof b.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,(function(a){return function(e){a.call(this,b.setValue.call(this,e))}}))),"function"==typeof b.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,(function(a){return function(){return b.getValue.call(this,a.call(this))}}))),CKEDITOR.event.implementOn(this),this.registerEvents(b),this.accessKeyUp&&this.accessKeyDown&&b.accessKey&&_(this,a,"CTRL+"+b.accessKey);var E=this;a.on("load",(function(){var b=E.getInputElement();if(b){var e=E.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";b.on("focus",(function(){a._.tabBarMode=!1,a._.hasFocus=!0,E.fire("focus"),e&&this.addClass(e)})),b.on("blur",(function(){E.fire("blur"),e&&this.removeClass(e)}))}})),CKEDITOR.tools.extend(this,b),this.keyboardFocusable&&(this.tabIndex=b.tabIndex||0,this.focusIndex=a._.focusList.push(this)-1,this.on("focus",(function(){a._.currentFocusIndex=E.focusIndex})))}},hbox:function(a,b,e,t,n){if(!(4>arguments.length)){this._||(this._={});var o,g=this._.children=b,r=n&&n.widths||null,l=n&&n.height||null,c={role:"presentation"};n&&n.align&&(c.align=n.align),CKEDITOR.ui.dialog.uiElement.call(this,a,n||{type:"hbox"},t,"table",{},c,(function(){var a=['<tbody><tr class="cke_dialog_ui_hbox">'];for(o=0;o<e.length;o++){var b="cke_dialog_ui_hbox_child",t=[];0===o&&(b="cke_dialog_ui_hbox_first"),o==e.length-1&&(b="cke_dialog_ui_hbox_last"),a.push('<td class="',b,'" role="presentation" '),r?r[o]&&t.push("width:"+u(r[o])):t.push("width:"+Math.floor(100/e.length)+"%"),l&&t.push("height:"+u(l)),n&&void 0!==n.padding&&t.push("padding:"+u(n.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&g[o].align&&t.push("text-align:"+g[o].align),0<t.length&&a.push('style="'+t.join("; ")+'" '),a.push(">",e[o],"</td>")}return a.push("</tr></tbody>"),a.join("")}))}},vbox:function(a,b,e,t,n){if(!(3>arguments.length)){this._||(this._={});var g=this._.children=b,o=n&&n.width||null,r=n&&n.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,a,n||{type:"vbox"},t,"div",null,{role:"presentation"},(function(){var b=['<table role="presentation" cellspacing="0" border="0" '];b.push('style="'),n&&n.expand&&b.push("height:100%;"),b.push("width:"+u(o||"100%"),";"),CKEDITOR.env.webkit&&b.push("float:none;"),b.push('"'),b.push('align="',CKEDITOR.tools.htmlEncode(n&&n.align||("ltr"==a.getParentEditor().lang.dir?"left":"right")),'" '),b.push("><tbody>");for(var t=0;t<e.length;t++){var l=[];b.push('<tr><td role="presentation" '),o&&l.push("width:"+u(o||"100%")),r?l.push("height:"+u(r[t])):n&&n.expand&&l.push("height:"+Math.floor(100/e.length)+"%"),n&&void 0!==n.padding&&l.push("padding:"+u(n.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&g[t].align&&l.push("text-align:"+g[t].align),0<l.length&&b.push('style="',l.join("; "),'" '),b.push(' class="cke_dialog_ui_vbox_child">',e[t],"</td></tr>")}return b.push("</tbody></table>"),b.join("")}))}}},CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a,b){return this.getInputElement().setValue(a),!b&&this.fire("change",{value:a}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var a=this.getInputElement();(a=a.getParent())&&-1==a.$.className.search("cke_dialog_page_contents"););return a?(a=a.getAttribute("name"),this._.dialog._.currentTabId!=a&&this._.dialog.selectPage(a),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(a){var e,t,b=/^on([A-Z]\w+)/,n=function(a,b,e,t){b.on("load",(function(){a.getInputElement().on(e,t,a)}))};for(t in a)(e=t.match(b))&&(this.eventProcessors[t]?this.eventProcessors[t].call(this,this._.dialog,a[t]):n(this,this._.dialog,e[1].toLowerCase(),a[t]));return this},eventProcessors:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var a=this.getElement();this.getInputElement().setAttribute("disabled","true"),a.addClass("cke_disabled")},enable:function(){var a=this.getElement();this.getInputElement().removeAttribute("disabled"),a.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!(!this.isEnabled()||!this.isVisible())}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(a){return 1>arguments.length?this._.children.concat():(a.splice||(a=[a]),2>a.length?this._.children[a[0]]:this._.children[a[0]]&&this._.children[a[0]].getChild?this._.children[a[0]].getChild(a.slice(1,a.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var a={build:function(a,b,e){for(var t,n=b.children,g=[],o=[],r=0;r<n.length&&(t=n[r]);r++){var l=[];g.push(l),o.push(CKEDITOR.dialog._.uiElementBuilders[t.type].build(a,t,l))}return new CKEDITOR.ui.dialog[b.type](a,o,g,e,b)}};CKEDITOR.dialog.addUIElement("hbox",a),CKEDITOR.dialog.addUIElement("vbox",a)}(),CKEDITOR.dialogCommand=function(a,b){this.dialogName=a,CKEDITOR.tools.extend(this,b,!0)},CKEDITOR.dialogCommand.prototype={exec:function(a){var b=this.tabId;a.openDialog(this.dialogName,(function(a){b&&a.selectPage(b)}))},canUndo:!1,editorFocus:1},function(){var a=/^([a]|[^a])+$/,b=/^\d*$/,e=/^\d*(?:\.\d+)?$/,t=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,n=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,g=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var a=arguments;return function(){var e,g,b=this&&this.getValue?this.getValue():a[0],t=CKEDITOR.VALIDATE_AND,n=[];for(g=0;g<a.length&&"function"==typeof a[g];g++)n.push(a[g]);g<a.length&&"string"==typeof a[g]&&(e=a[g],g++),g<a.length&&"number"==typeof a[g]&&(t=a[g]);var o=t==CKEDITOR.VALIDATE_AND;for(g=0;g<n.length;g++)o=t==CKEDITOR.VALIDATE_AND?o&&n[g](b):o||n[g](b);return!!o||e}},regex:function(a,b){return function(e){return e=this&&this.getValue?this.getValue():e,!!a.test(e)||b}},notEmpty:function(b){return this.regex(a,b)},integer:function(a){return this.regex(b,a)},number:function(a){return this.regex(e,a)},cssLength:function(a){return this.functions((function(a){return n.test(CKEDITOR.tools.trim(a))}),a)},htmlLength:function(a){return this.functions((function(a){return t.test(CKEDITOR.tools.trim(a))}),a)},inlineStyle:function(a){return this.functions((function(a){return g.test(CKEDITOR.tools.trim(a))}),a)},equals:function(a,b){return this.functions((function(b){return b==a}),b)},notEqual:function(a,b){return this.functions((function(b){return b!=a}),b)}},CKEDITOR.on("instanceDestroyed",(function(a){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var b;b=CKEDITOR.dialog._.currentTop;)b.hide();for(var e in R)R[e].remove();R={}}for(var t in a=a.editor._.storedDialogs)a[t].destroy()}))}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(a,b){var e=null,t=CKEDITOR.dialog._.dialogDefinitions[a];if(null===CKEDITOR.dialog._.currentTop&&q(this),"function"==typeof t)e=(e=this._.storedDialogs||(this._.storedDialogs={}))[a]||(e[a]=new CKEDITOR.dialog(this,a)),b&&b.call(e,e),e.show();else{if("failed"==t)throw f(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+a+'" failed when loading definition.');"string"==typeof t&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t),(function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[a]&&(CKEDITOR.dialog._.dialogDefinitions[a]="failed"),this.openDialog(a,b)}),this,0,1)}return CKEDITOR.skin.loadPart("dialog"),e}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(a){a.on("doubleclick",(function(e){e.data.dialog&&a.openDialog(e.data.dialog)}),null,null,999)}}),CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(a){var e=this;a.addCommand("a11yHelp",{exec:function(){var b=a.langCode;b=e.availableLangs[b]?b:e.availableLangs[b.replace(/-.*/,"")]?b.replace(/-.*/,""):"en",CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e.path+"dialogs/lang/"+b+".js"),(function(){a.lang.a11yhelp=e.langEntries[b],a.openDialog("a11yHelp")}))},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),a.setKeystroke(CKEDITOR.ALT+48,"a11yHelp"),CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js"),a.on("ariaEditorHelpLabel",(function(b){b.data.label=a.lang.common.editorHelp}))}}),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(a){var e=a.addCommand("about",new CKEDITOR.dialogCommand("about"));e.modes={wysiwyg:1,source:1},e.canUndo=!1,e.readOnly=1,a.ui.addButton&&a.ui.addButton("About",{label:a.lang.about.dlgTitle,command:"about",toolbar:"about"}),CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),CKEDITOR.plugins.add("basicstyles",{init:function(a){var e=0,b=function(b,n,o,r){if(r){r=new CKEDITOR.style(r);var l=t[o];l.unshift(r),a.attachStyleStateChange(r,(function(b){!a.readOnly&&a.getCommand(o).setState(b)})),a.addCommand(o,new CKEDITOR.styleCommand(r,{contentForms:l})),a.ui.addButton&&a.ui.addButton(b,{label:n,command:o,toolbar:"basicstyles,"+(e+=10)})}},t={bold:["strong","b",["span",function(a){return"bold"==(a=a.styles["font-weight"])||700<=+a}]],italic:["em","i",["span",function(a){return"italic"==a.styles["font-style"]}]],underline:["u",["span",function(a){return"underline"==a.styles["text-decoration"]}]],strike:["s","strike",["span",function(a){return"line-through"==a.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},n=a.config,o=a.lang.basicstyles;b("Bold",o.bold,"bold",n.coreStyles_bold),b("Italic",o.italic,"italic",n.coreStyles_italic),b("Underline",o.underline,"underline",n.coreStyles_underline),b("Strike",o.strike,"strike",n.coreStyles_strike),b("Subscript",o.subscript,"subscript",n.coreStyles_subscript),b("Superscript",o.superscript,"superscript",n.coreStyles_superscript),a.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){var a={exec:function(a){var b=a.getCommand("blockquote").state,e=a.getSelection(),t=e&&e.getRanges()[0];if(t){var n=e.createBookmarks();if(CKEDITOR.env.ie){var o,r=n[0].startNode,g=n[0].endNode;if(r&&"blockquote"==r.getParent().getName())for(o=r;o=o.getNext();)if(o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary()){r.move(o,!0);break}if(g&&"blockquote"==g.getParent().getName())for(o=g;o=o.getPrevious();)if(o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary()){g.move(o);break}}if((l=t.createIterator()).enlargeBr=a.config.enterMode!=CKEDITOR.ENTER_BR,b==CKEDITOR.TRISTATE_OFF){for(r=[];b=l.getNextParagraph();)r.push(b);for(1>r.length&&(b=a.document.createElement(a.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),g=n.shift(),t.insertNode(b),b.append(new CKEDITOR.dom.text("\ufeff",a.document)),t.moveToBookmark(g),t.selectNodeContents(b),t.collapse(!0),g=t.createBookmark(),r.push(b),n.unshift(g)),o=r[0].getParent(),t=[],g=0;g<r.length;g++)b=r[g],o=o.getCommonAncestor(b.getParent());for(b={table:1,tbody:1,tr:1,ol:1,ul:1};b[o.getName()];)o=o.getParent();for(g=null;0<r.length;){for(b=r.shift();!b.getParent().equals(o);)b=b.getParent();b.equals(g)||t.push(b),g=b}for(;0<t.length;)if("blockquote"==(b=t.shift()).getName()){for(g=new CKEDITOR.dom.documentFragment(a.document);b.getFirst();)g.append(b.getFirst().remove()),r.push(g.getLast());g.replace(b)}else r.push(b);for((t=a.document.createElement("blockquote")).insertBefore(r[0]);0<r.length;)b=r.shift(),t.append(b)}else if(b==CKEDITOR.TRISTATE_ON){for(g=[],o={};b=l.getNextParagraph();){for(r=t=null;b.getParent();){if("blockquote"==b.getParent().getName()){t=b.getParent(),r=b;break}b=b.getParent()}t&&r&&!r.getCustomData("blockquote_moveout")&&(g.push(r),CKEDITOR.dom.element.setMarker(o,r,"blockquote_moveout",!0))}for(CKEDITOR.dom.element.clearAllMarkers(o),b=[],r=[],o={};0<g.length;)t=(l=g.shift()).getParent(),l.getPrevious()?l.getNext()?(l.breakParent(l.getParent()),r.push(l.getNext())):l.remove().insertAfter(t):l.remove().insertBefore(t),t.getCustomData("blockquote_processed")||(r.push(t),CKEDITOR.dom.element.setMarker(o,t,"blockquote_processed",!0)),b.push(l);for(CKEDITOR.dom.element.clearAllMarkers(o),g=r.length-1;0<=g;g--){e:{for(var l=0,c=(o=t=r[g]).getChildCount(),d=void 0;l<c&&(d=o.getChild(l));l++)if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){o=!1;break e}o=!0}o&&t.remove()}if(a.config.enterMode==CKEDITOR.ENTER_BR)for(t=!0;b.length;)if("div"==(l=b.shift()).getName()){for(g=new CKEDITOR.dom.documentFragment(a.document),!t||!l.getPrevious()||l.getPrevious().type==CKEDITOR.NODE_ELEMENT&&l.getPrevious().isBlockBoundary()||g.append(a.document.createElement("br")),t=l.getNext()&&!(l.getNext().type==CKEDITOR.NODE_ELEMENT&&l.getNext().isBlockBoundary());l.getFirst();)l.getFirst().remove().appendTo(g);t&&g.append(a.document.createElement("br")),g.replace(l),t=!1}}e.selectBookmarks(n),a.focus()}},refresh:function(a,b){this.setState(a.elementPath(b.block||b.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(e){e.blockless||(e.addCommand("blockquote",a),e.ui.addButton&&e.ui.addButton("Blockquote",{label:e.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),function(){function a(a,e){CKEDITOR.tools.extend(this,e,{editor:a,id:"cke-"+CKEDITOR.tools.getUniqueId(),area:a._.notificationArea}),e.type||(this.type="info"),this.element=this._createElement(),a.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(this.element)}function e(a){var e=this;this.editor=a,this.notifications=[],this.element=this._createElement(),this._uiBuffer=CKEDITOR.tools.eventsBuffer(10,this._layout,this),this._changeBuffer=CKEDITOR.tools.eventsBuffer(500,this._layout,this),a.on("destroy",(function(){e._removeListeners(),e.element.remove()}))}CKEDITOR.plugins.add("notification",{init:function(a){a._.notificationArea=new e(a),a.showNotification=function(e,t,n){var g,o;return"progress"==t?g=n:o=n,(e=new CKEDITOR.plugins.notification(a,{message:e,type:t,progress:g,duration:o})).show(),e},a.on("key",(function(e){if(27==e.data.keyCode){var t=a._.notificationArea.notifications;t.length&&(function(a){var b=new CKEDITOR.dom.element("div");b.setStyles({position:"fixed","margin-left":"-9999px"}),b.setAttributes({"aria-live":"assertive","aria-atomic":"true"}),b.setText(a),CKEDITOR.document.getBody().append(b),setTimeout((function(){b.remove()}),100)}(a.lang.notification.closed),t[t.length-1].hide(),e.cancel())}}))}}),a.prototype={show:function(){!1!==this.editor.fire("notificationShow",{notification:this})&&(this.area.add(this),this._hideAfterTimeout())},update:function(a){var e=!0;!1===this.editor.fire("notificationUpdate",{notification:this,options:a})&&(e=!1);var t=this.element,n=t.findOne(".cke_notification_message"),o=t.findOne(".cke_notification_progress"),g=a.type;t.removeAttribute("role"),a.progress&&"progress"!=this.type&&(g="progress"),g&&(t.removeClass(this._getClass()),t.removeAttribute("aria-label"),this.type=g,t.addClass(this._getClass()),t.setAttribute("aria-label",this.type),"progress"!=this.type||o?"progress"!=this.type&&o&&o.remove():(o=this._createProgressElement()).insertBefore(n)),void 0!==a.message&&(this.message=a.message,n.setHtml(this.message)),void 0!==a.progress&&(this.progress=a.progress,o&&o.setStyle("width",this._getPercentageProgress())),e&&a.important&&(t.setAttribute("role","alert"),this.isVisible()||this.area.add(this)),this.duration=a.duration,this._hideAfterTimeout()},hide:function(){!1!==this.editor.fire("notificationHide",{notification:this})&&this.area.remove(this)},isVisible:function(){return 0<=CKEDITOR.tools.indexOf(this.area.notifications,this)},_createElement:function(){var e,t,a=this,n=this.editor.lang.common.close;return(e=new CKEDITOR.dom.element("div")).addClass("cke_notification"),e.addClass(this._getClass()),e.setAttributes({id:this.id,role:"alert","aria-label":this.type}),"progress"==this.type&&e.append(this._createProgressElement()),(t=new CKEDITOR.dom.element("p")).addClass("cke_notification_message"),t.setHtml(this.message),e.append(t),t=CKEDITOR.dom.element.createFromHtml('<a class="cke_notification_close" href="javascript:void(0)" title="'+n+'" role="button" tabindex="-1"><span class="cke_label">X</span></a>'),e.append(t),t.on("click",(function(){a.editor.focus(),a.hide()})),e},_getClass:function(){return"progress"==this.type?"cke_notification_info":"cke_notification_"+this.type},_createProgressElement:function(){var a=new CKEDITOR.dom.element("span");return a.addClass("cke_notification_progress"),a.setStyle("width",this._getPercentageProgress()),a},_getPercentageProgress:function(){return Math.round(100*(this.progress||0))+"%"},_hideAfterTimeout:function(){var e,a=this;this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),"number"==typeof this.duration?e=this.duration:"info"!=this.type&&"success"!=this.type||(e="number"==typeof this.editor.config.notification_duration?this.editor.config.notification_duration:5e3),e&&(a._hideTimeoutId=setTimeout((function(){a.hide()}),e))}},e.prototype={add:function(a){this.notifications.push(a),this.element.append(a.element),1==this.element.getChildCount()&&(CKEDITOR.document.getBody().append(this.element),this._attachListeners()),this._layout()},remove:function(a){var e=CKEDITOR.tools.indexOf(this.notifications,a);0>e||(this.notifications.splice(e,1),a.element.remove(),this.element.getChildCount()||(this._removeListeners(),this.element.remove()))},_createElement:function(){var a=this.editor,e=a.config,t=new CKEDITOR.dom.element("div");return t.addClass("cke_notifications_area"),t.setAttribute("id","cke_notifications_area_"+a.name),t.setStyle("z-index",e.baseFloatZIndex-2),t},_attachListeners:function(){var a=CKEDITOR.document.getWindow(),e=this.editor;a.on("scroll",this._uiBuffer.input),a.on("resize",this._uiBuffer.input),e.on("change",this._changeBuffer.input),e.on("floatingSpaceLayout",this._layout,this,null,20),e.on("blur",this._layout,this,null,20)},_removeListeners:function(){var a=CKEDITOR.document.getWindow(),e=this.editor;a.removeListener("scroll",this._uiBuffer.input),a.removeListener("resize",this._uiBuffer.input),e.removeListener("change",this._changeBuffer.input),e.removeListener("floatingSpaceLayout",this._layout),e.removeListener("blur",this._layout)},_layout:function(){function a(){n.setStyle("left",m(E+r.width-d-q))}var g,e,t,n=this.element,o=this.editor,r=o.ui.contentsElement.getClientRect(),l=o.ui.contentsElement.getDocumentPosition(),c=n.getClientRect(),d=this._notificationWidth,q=this._notificationMargin,h=(t=CKEDITOR.document.getWindow()).getScrollPosition(),u=t.getViewPaneSize(),p=CKEDITOR.document.getBody(),f=p.getDocumentPosition(),m=CKEDITOR.tools.cssLength;d&&q||(t=this.element.getChild(0),d=this._notificationWidth=t.getClientRect().width,q=this._notificationMargin=parseInt(t.getComputedStyle("margin-left"),10)+parseInt(t.getComputedStyle("margin-right"),10)),o.toolbar&&(e=(g=o.ui.space("top")).getClientRect()),g&&g.isVisible()&&e.bottom>r.top&&e.bottom<r.bottom-c.height?n.setStyles({position:"fixed",top:m(e.bottom)}):0<r.top?n.setStyles({position:"absolute",top:m(l.y)}):l.y+r.height-c.height>h.y?n.setStyles({position:"fixed",top:0}):n.setStyles({position:"absolute",top:m(l.y+r.height-c.height)});var E="fixed"==n.getStyle("position")?r.left:"static"!=p.getComputedStyle("position")?l.x-f.x:l.x;r.width<d+q?l.x+d+q>h.x+u.width?a():n.setStyle("left",m(E)):l.x+d+q>h.x+u.width?n.setStyle("left",m(E)):l.x+r.width/2+d/2+q>h.x+u.width?n.setStyle("left",m(E-l.x+h.x+u.width-d-q)):0>r.left+r.width-d-q?a():0>r.left+r.width/2-d/2?n.setStyle("left",m(E-l.x+h.x)):n.setStyle("left",m(E+r.width/2-d/2-q/2))}},CKEDITOR.plugins.notification=a}(),function(){var a='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-describedby="{id}_description" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(a+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(a+=' onblur="this.style.cssText = this.style.cssText;"');var e="";CKEDITOR.env.ie&&(e='return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)==CKEDITOR.MOUSE_BUTTON_LEFT&&'),a=a+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" onclick="'+e+'CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}">&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span><span id="{id}_description" class="cke_button_label" aria-hidden="false">{ariaShortcut}</span>{arrowHtml}</a>';var b=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),t=CKEDITOR.addTemplate("button",a);CKEDITOR.plugins.add("button",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(a){CKEDITOR.tools.extend(this,a,{title:a.label,click:a.click||function(b){b.execCommand(a.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(a){return new CKEDITOR.ui.button(a)}},CKEDITOR.ui.button.prototype={render:function(a,e){function n(){var b=a.mode;b&&(b=this.modes[b]?void 0!==g[b]?g[b]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,b=a.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:b,this.setState(b),this.refresh&&this.refresh())}var q,o,u,g=null,r=CKEDITOR.env,l=this._.id=CKEDITOR.tools.getNextId(),c="",d=this.command;this._.editor=a;var h,p={id:l,button:this,editor:a,focus:function(){CKEDITOR.document.getById(l).focus()},execute:function(){this.button.click(a)},attach:function(a){this.button.attach(a)}},f=CKEDITOR.tools.addFunction((function(a){if(p.onkey)return a=new CKEDITOR.dom.event(a),!1!==p.onkey(p,a.getKeystroke())})),m=CKEDITOR.tools.addFunction((function(a){var b;return p.onfocus&&(b=!1!==p.onfocus(p,new CKEDITOR.dom.event(a))),b})),E=0;p.clickFn=q=CKEDITOR.tools.addFunction((function(){E&&(a.unlockSelection(1),E=0),p.execute(),r.iOS&&a.focus()})),this.modes?(g={},a.on("beforeModeUnload",(function(){a.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(g[a.mode]=this._.state)}),this),a.on("activeFilterChange",n,this),a.on("mode",n,this),!this.readOnly&&a.on("readOnly",n,this)):d&&(d=a.getCommand(d))&&(d.on("state",(function(){this.setState(d.state)}),this),c+=d.state==CKEDITOR.TRISTATE_ON?"on":d.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off"),this.directional&&a.on("contentDirChanged",(function(b){var e=CKEDITOR.document.getById(this._.id),t=e.getFirst();(b=b.data)!=a.lang.dir?e.addClass("cke_"+b):e.removeClass("cke_ltr").removeClass("cke_rtl"),t.setAttribute("style",CKEDITOR.skin.getIconStyle(h,"rtl"==b,this.icon,this.iconOffset))}),this),d?(o=a.getCommandKeystroke(d))&&(u=CKEDITOR.tools.keystrokeToString(a.lang.common.keyboard,o)):c+="off",o=this.name||this.command;var T=null,C=this.icon;return h=o,this.icon&&!/\./.test(this.icon)?(h=this.icon,C=null):(this.icon&&(T=this.icon),CKEDITOR.env.hidpi&&this.iconHiDpi&&(T=this.iconHiDpi)),T?(CKEDITOR.skin.addIcon(T,T),C=null):T=h,c={id:l,name:o,iconName:h,label:this.label,cls:(this.hasArrow?"cke_button_expandable ":"")+(this.className||""),state:c,ariaDisabled:"disabled"==c?"true":"false",title:this.title+(u?" ("+u.display+")":""),ariaShortcut:u?a.lang.common.keyboardShortcut+" "+u.aria:"",titleJs:r.gecko&&!r.hc?"":(this.title||"").replace("'",""),hasArrow:"string"==typeof this.hasArrow&&this.hasArrow||(this.hasArrow?"true":"false"),keydownFn:f,focusFn:m,clickFn:q,style:CKEDITOR.skin.getIconStyle(T,"rtl"==a.lang.dir,C,this.iconOffset),arrowHtml:this.hasArrow?b.output():""},t.output(c,e),this.onRender&&this.onRender(),p},setState:function(a){if(this._.state==a)return!1;this._.state=a;var b=CKEDITOR.document.getById(this._.id);return!!b&&(b.setState(a,"cke_button"),b.setAttribute("aria-disabled",a==CKEDITOR.TRISTATE_DISABLED),this.hasArrow?b.setAttribute("aria-expanded",a==CKEDITOR.TRISTATE_ON):a===CKEDITOR.TRISTATE_ON?b.setAttribute("aria-pressed",!0):b.removeAttribute("aria-pressed"),!0)},getState:function(){return this._.state},toFeature:function(a){if(this._.feature)return this._.feature;var b=this;return this.allowedContent||this.requiredContent||!this.command||(b=a.getCommand(this.command)||b),this._.feature=b}},CKEDITOR.ui.prototype.addButton=function(a,b){this.add(a,CKEDITOR.UI_BUTTON,b)}}(),function(){function a(a){function g(b,e){if(e.length){b.items?b.items.push(a.ui.create("-")):b.items=[];for(var n;n=e.shift();)n="string"==typeof n?n:n.name,t&&-1!=CKEDITOR.tools.indexOf(t,n)||(n=a.ui.create(n))&&a.addFeature(n)&&b.items.push(n)}}var t=(t=a.config.removeButtons)&&t.split(","),n=a.config.toolbar;return"string"==typeof n&&(n=a.config["toolbar_"+n]),a.toolbar=n?function(a){var e,t,n,b=[];for(e=0;e<a.length;++e)n={},"/"==(t=a[e])?b.push(t):CKEDITOR.tools.isArray(t)?(g(n,CKEDITOR.tools.clone(t)),b.push(n)):t.items&&(g(n,CKEDITOR.tools.clone(t.items)),n.name=t.name,b.push(n));return b}(n):function(){for(var t=function(){var e,g,t,b={};for(e in a.ui.items)g=a.ui.items[e],t=(t=g.toolbar||"others").split(","),g=t[0],t=parseInt(t[1]||-1,10),b[g]||(b[g]=[]),b[g].push({name:e,order:t});for(g in b)b[g]=b[g].sort((function(a,b){return a.order==b.order?0:0>b.order?-1:0>a.order?1:a.order<b.order?-1:1}));return b}(),n=CKEDITOR.tools.clone(a.config.toolbarGroups)||e(a),o=0;o<n.length;o++){var r=n[o];if("/"!=r){"string"==typeof r&&(r=n[o]={name:r});var p,l=r.groups;if(l)for(var c=0;c<l.length;c++)(p=t[p=l[c]])&&g(r,p);(p=t[r.name])&&g(r,p)}}return n}()}function e(a){return a._.toolbarGroups||(a._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var b=function(){this.toolbars=[],this.focusCommandExecuted=!1};b.prototype.focus=function(){for(var b,a=0;b=this.toolbars[a++];)for(var g,e=0;g=b.items[e++];)if(g.focus)return void g.focus()};var t={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(a){a.toolbox&&(a.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout((function(){a.toolbox.focus()}),100):a.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(e){var n,o=function(a,b){var t,q=(r="rtl"==e.lang.dir)?37:39,r=r?39:37,l=void 0===(l=e.config.toolbarGroupCycling)||l;switch(b){case 9:case CKEDITOR.SHIFT+9:for(;!t||!t.items.length;)if((t=9==b?(t?t.next:a.toolbar.next)||e.toolbox.toolbars[0]:(t?t.previous:a.toolbar.previous)||e.toolbox.toolbars[e.toolbox.toolbars.length-1]).items.length)for(a=t.items[n?t.items.length-1:0];a&&!a.focus;)(a=n?a.previous:a.next)||(t=0);return a&&a.focus(),!1;case q:t=a;do{!(t=t.next)&&l&&(t=a.toolbar.items[0])}while(t&&!t.focus);return t?t.focus():o(a,9),!1;case 40:return a.button&&a.button.hasArrow?a.execute():o(a,40==b?q:r),!1;case r:case 38:t=a;do{!(t=t.previous)&&l&&(t=a.toolbar.items[a.toolbar.items.length-1])}while(t&&!t.focus);return t?t.focus():(n=1,o(a,CKEDITOR.SHIFT+9),n=0),!1;case 27:return e.focus(),!1;case 13:case 32:return a.execute(),!1}return!0};e.on("uiSpace",(function(t){if(t.data.space==e.config.toolbarLocation){t.removeListener(),e.toolbox=new b;var n,r,l=['<span id="',c=CKEDITOR.tools.getNextId(),'" class="cke_voice_label">',e.lang.toolbar.toolbars,"</span>",'<span id="'+e.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',c,'" onmousedown="return false;">'],c=!1!==e.config.toolbarStartupExpanded;e.config.toolbarCanCollapse&&e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&l.push('<span class="cke_toolbox_main"'+(c?">":' style="display:none">'));for(var q=e.toolbox.toolbars,d=a(e),u=d.length,p=0;p<u;p++){var h,f,m,E=0,T=d[p],C="/"!==T&&("/"===d[p+1]||p==u-1);if(T)if(n&&(l.push("</span>"),r=n=0),"/"===T)l.push('<span class="cke_toolbar_break"></span>');else{m=T.items||T;for(var I=0;I<m.length;I++){var O,D=m[I];if(D){var R=function(a){a=a.render(e,l),0<(v=E.items.push(a)-1)&&(a.previous=E.items[v-1],a.previous.next=a),a.toolbar=E,a.onkey=o,a.onfocus=function(){e.toolbox.focusCommandExecuted||e.focus()}};if(D.type==CKEDITOR.UI_SEPARATOR)r=n&&D;else{if(O=!1!==D.canGroup,!E){h=CKEDITOR.tools.getNextId(),E={id:h,items:[]},f=T.name&&(e.lang.toolbar.toolbarGroups[T.name]||T.name),l.push('<span id="',h,'" class="cke_toolbar'+(C?' cke_toolbar_last"':'"'),f?' aria-labelledby="'+h+'_label"':"",' role="toolbar">'),f&&l.push('<span id="',h,'_label" class="cke_voice_label">',f,"</span>"),l.push('<span class="cke_toolbar_start"></span>');var v=q.push(E)-1;0<v&&(E.previous=q[v-1],E.previous.next=E)}O?n||(l.push('<span class="cke_toolgroup" role="presentation">'),n=1):n&&(l.push("</span>"),n=0),r&&(R(r),r=0),R(D)}}}n&&(l.push("</span>"),r=n=0),E&&l.push('<span class="cke_toolbar_end"></span></span>')}}if(e.config.toolbarCanCollapse&&l.push("</span>"),e.config.toolbarCanCollapse&&e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var y=CKEDITOR.tools.addFunction((function(){e.execCommand("toolbarCollapse")}));e.on("destroy",(function(){CKEDITOR.tools.removeFunction(y)})),e.addCommand("toolbarCollapse",{readOnly:1,exec:function(a){var b=a.ui.space("toolbar_collapser"),e=b.getPrevious(),t=a.ui.space("contents"),n=e.getParent(),g=parseInt(t.$.style.height,10),o=n.$.offsetHeight,r=b.hasClass("cke_toolbox_collapser_min");r?(e.show(),b.removeClass("cke_toolbox_collapser_min"),b.setAttribute("title",a.lang.toolbar.toolbarCollapse)):(e.hide(),b.addClass("cke_toolbox_collapser_min"),b.setAttribute("title",a.lang.toolbar.toolbarExpand)),b.getFirst().setText(r?"▲":"◀"),t.setStyle("height",g-(n.$.offsetHeight-o)+"px"),a.fire("resize",{outerHeight:a.container.$.offsetHeight,contentsHeight:t.$.offsetHeight,outerWidth:a.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}}),e.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),l.push('<a title="'+(c?e.lang.toolbar.toolbarCollapse:e.lang.toolbar.toolbarExpand)+'" id="'+e.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),c||l.push(" cke_toolbox_collapser_min"),l.push('" onclick="CKEDITOR.tools.callFunction('+y+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}l.push("</span>"),t.data.html+=l.join("")}})),e.on("destroy",(function(){if(this.toolbox){var a,e,t,n,b=0;for(a=this.toolbox.toolbars;b<a.length;b++)for(t=a[b].items,e=0;e<t.length;e++)(n=t[e]).clickFn&&CKEDITOR.tools.removeFunction(n.clickFn),n.keyDownFn&&CKEDITOR.tools.removeFunction(n.keyDownFn)}})),e.on("uiReady",(function(){var a=e.ui.space("toolbox");a&&e.focusManager.add(a,1)})),e.addCommand("toolbarFocus",t),e.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),e.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),e.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(a,b){return b.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(a,b,t){var g=e(this.editor),n=0===b,o={name:a};if(t){if(t=CKEDITOR.tools.search(g,(function(a){return a.name==t})))return!t.groups&&(t.groups=[]),b&&0<=(b=CKEDITOR.tools.indexOf(t.groups,b))?void t.groups.splice(b+1,0,a):void(n?t.groups.splice(0,0,a):t.groups.push(a));b=null}b&&(b=CKEDITOR.tools.indexOf(g,(function(a){return a.name==b}))),n?g.splice(0,0,a):"number"==typeof b?g.splice(b+1,0,o):g.push(a)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){function a(a,b,e){return b.type||(b.type="auto"),!(e&&!1===a.fire("beforePaste",b)||!b.dataValue&&b.dataTransfer.isEmpty())&&(b.dataValue||(b.dataValue=""),CKEDITOR.env.gecko&&"drop"==b.method&&a.toolbox&&a.once("afterPaste",(function(){a.toolbox.focus()})),a.fire("paste",b))}function e(b){function e(){var g,a=b.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var e=function(a){b.getSelection().isCollapsed()||(b.readOnly&&"cut"==a.name||E.initPasteDataTransfer(a,b),a.data.preventDefault())};a.on("copy",e),a.on("cut",e),a.on("cut",(function(){b.readOnly||b.extractSelectedHtml()}),null,null,999)}a.on(E.mainPasteEvent,(function(a){"beforepaste"==E.mainPasteEvent&&T||h(a)})),"beforepaste"==E.mainPasteEvent&&(a.on("paste",(function(a){C||(n(),a.data.preventDefault(),h(a),r("paste"))})),a.on("contextmenu",o,null,null,0),a.on("beforepaste",(function(a){!a.data||a.data.$.ctrlKey||a.data.$.shiftKey||o()}),null,null,0)),a.on("beforecut",(function(){!T&&l()})),a.attachListener(CKEDITOR.env.ie?a:b.document.getDocumentElement(),"mouseup",(function(){g=setTimeout(f,0)})),b.on("destroy",(function(){clearTimeout(g)})),a.on("keyup",f)}function t(a){return{type:a,canUndo:"cut"==a,startDisabled:!0,fakeKeystroke:"cut"==a?CKEDITOR.CTRL+88:CKEDITOR.CTRL+67,exec:function(){var a;"cut"==this.type&&l();var e=this.type;if(CKEDITOR.env.ie)a=r(e);else try{a=b.document.$.execCommand(e,!1,null)}catch(e){a=!1}return a||b.showNotification(b.lang.clipboard[this.type+"Error"]),a}}}function g(){return{canUndo:!1,async:!0,fakeKeystroke:CKEDITOR.CTRL+86,exec:function(b,e){function t(e,t){t=void 0===t||t,e?(e.method="paste",e.dataTransfer||(e.dataTransfer=E.initPasteDataTransfer()),a(b,e,t)):g&&!b._.forcePasteDialog&&b.showNotification(l,"info",b.config.clipboard_notificationDuration),b._.forcePasteDialog=!1,b.fire("afterCommandExec",{name:"paste",command:n,returnValue:!!e})}var n=this,g=void 0===(e=null!=e?e:{}).notification||e.notification,o=e.type,r=CKEDITOR.tools.keystrokeToString(b.lang.common.keyboard,b.getCommandKeystroke(this)),l="string"==typeof g?g:b.lang.clipboard.pasteNotification.replace(/%1/,'<kbd aria-label="'+r.aria+'">'+r.display+"</kbd>");r="string"==typeof e?e:e.dataValue,o&&!0!==b.config.forcePasteAsPlainText&&"allow-word"!==b.config.forcePasteAsPlainText?b._.nextPasteType=o:delete b._.nextPasteType,"string"==typeof r?t({dataValue:r}):b.getClipboardData(t)}}}function n(){C=1,setTimeout((function(){C=0}),100)}function o(){T=1,setTimeout((function(){T=0}),10)}function r(a){var e=b.document,t=e.getBody(),g=!1,n=function(){g=!0};return t.on(a,n),7<CKEDITOR.env.version?e.$.execCommand(a):e.$.selection.createRange().execCommand(a),t.removeListener(a,n),g}function l(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var e,t,g,a=b.getSelection();a.getType()==CKEDITOR.SELECTION_ELEMENT&&(e=a.getSelectedElement())&&(t=a.getRanges()[0],(g=b.document.createText("")).insertBefore(e),t.setStartBefore(g),t.setEndAfter(e),a.selectRanges([t]),setTimeout((function(){e.getParent()&&(g.remove(),a.selectElement(e))}),0))}}function c(){if("paste"==E.mainPasteEvent)return b.fire("beforePaste",{type:"auto",method:"paste"}),!1;b.focus(),n();var a=b.focusManager;return a.lock(),b.editable().fire(E.mainPasteEvent)&&!r("paste")?(a.unlock(),!1):(a.unlock(),!0)}function d(a){if("wysiwyg"==b.mode)switch(a.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:a=b.editable(),n(),"paste"==E.mainPasteEvent&&a.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:b.fire("saveSnapshot"),setTimeout((function(){b.fire("saveSnapshot")}),50)}}function h(e){var t={type:"auto",method:"paste",dataTransfer:E.initPasteDataTransfer(e)};t.dataTransfer.cacheData();var g=!1!==b.fire("beforePaste",t);g&&E.canClipboardApiBeTrusted(t.dataTransfer,b)?(e.data.preventDefault(),setTimeout((function(){a(b,t)}),0)):function(a,e){var t,n=b.document,g=b.editable(),o=function(a){a.cancel()};if(!n.getById("cke_pastebin")){var r=b.getSelection(),l=r.createBookmarks();CKEDITOR.env.ie&&r.root.fire("selectionchange");var c=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!g.is("body")||CKEDITOR.env.ie?"div":"body",n);c.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var d=0;n=n.getWindow(),CKEDITOR.env.webkit?(g.append(c),c.addClass("cke_editable"),g.is("body")||(d=(d="static"!=g.getComputedStyle("position")?g:CKEDITOR.dom.element.get(g.$.offsetParent)).getDocumentPosition().y)):g.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(c),c.setStyles({position:"absolute",top:n.getScrollPosition().y-d+10+"px",width:"1px",height:Math.max(1,n.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),CKEDITOR.env.safari&&c.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text")),(d=c.getParent().isReadOnly())?(c.setOpacity(0),c.setAttribute("contenteditable",!0)):c.setStyle("ltr"==b.config.contentsLangDirection?"left":"right","-10000px"),b.on("selectionChange",o,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(t=g.once("blur",o,null,null,-100)),d&&c.focus(),(d=new CKEDITOR.dom.range(c)).selectNodeContents(c);var h=d.select();CKEDITOR.env.ie&&(t=g.once("blur",(function(){b.lockSelection(h)})));var q=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout((function(){var a;CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=q),t&&t.removeListener(),CKEDITOR.env.ie&&g.focus(),r.selectBookmarks(l),c.remove(),CKEDITOR.env.webkit&&(a=c.getFirst())&&a.is&&a.hasClass("Apple-style-span")&&(c=a),b.removeListener("selectionChange",o),e(c.getHtml())}),0)}}(0,(function(e){t.dataValue=e.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),g&&a(b,t)}))}function f(){if("wysiwyg"==b.mode){var a=m("paste");b.getCommand("cut").setState(m("cut")),b.getCommand("copy").setState(m("copy")),b.getCommand("paste").setState(a),b.fire("pasteState",a)}}function m(a){var e=(e=b.getSelection())&&e.getRanges()[0];return(b.readOnly||e&&e.checkReadOnly())&&a in{paste:1,cut:1}?CKEDITOR.TRISTATE_DISABLED:"paste"==a?CKEDITOR.TRISTATE_OFF:(e=(a=b.getSelection()).getRanges(),a.getType()==CKEDITOR.SELECTION_NONE||1==e.length&&e[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF)}var E=CKEDITOR.plugins.clipboard,T=0,C=0;!function(){if(b.on("key",d),b.on("contentDom",e),b.on("selectionChange",f),b.contextMenu){b.contextMenu.addListener((function(){return{cut:m("cut"),copy:m("copy"),paste:m("paste")}}));var a=null;b.on("menuShow",(function(){a&&(a.removeListener(),a=null);var e=b.contextMenu.findItemByCommandName("paste");e&&e.element&&(a=e.element.on("touchend",(function(){b._.forcePasteDialog=!0})))}))}b.ui.addButton&&b.once("instanceReady",(function(){b._.pasteButtons&&CKEDITOR.tools.array.forEach(b._.pasteButtons,(function(a){(a=b.ui.get(a))&&(a=CKEDITOR.document.getById(a._.id))&&a.on("touchend",(function(){b._.forcePasteDialog=!0}))}))}))}(),function(){function a(e,t,g,n,o){var r=b.lang.clipboard[t];b.addCommand(t,g),b.ui.addButton&&b.ui.addButton(e,{label:r,command:t,toolbar:"clipboard,"+n}),b.addMenuItems&&b.addMenuItem(t,{label:r,command:t,group:"clipboard",order:o})}a("Cut","cut",t("cut"),10,1),a("Copy","copy",t("copy"),20,4),a("Paste","paste",g(),30,8),b._.pasteButtons||(b._.pasteButtons=[]),b._.pasteButtons.push("Paste")}(),b.getClipboardData=function(a,e){function t(a){a.removeListener(),a.cancel(),e(a.data)}function g(a){a.removeListener(),a.cancel(),e({type:o,dataValue:a.data.dataValue,dataTransfer:a.data.dataTransfer,method:"paste"})}var n=!1,o="auto";e||(e=a,a=null),b.on("beforePaste",(function(a){a.removeListener(),n=!0,o=a.data.type}),null,null,1e3),b.on("paste",t,null,null,0),!1===c()&&(b.removeListener("paste",t),b._.forcePasteDialog&&n&&b.fire("pasteDialog")?(b.on("pasteDialogCommit",g),b.on("dialogHide",(function(a){a.removeListener(),a.data.removeListener("pasteDialogCommit",g),a.data._.committed||e(null)}))):e(null))}}function t(a,b){function e(a){return CKEDITOR.tools.repeat("</p><p>",~~(a/2))+(1==a%2?"<br>":"")}return(b=(b=b.replace(/(?!\u3000)\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>")).replace(/<\/?[A-Z]+>/g,(function(a){return a.toLowerCase()}))).match(/^[^<]$/)?b:(CKEDITOR.env.webkit&&-1<b.indexOf("<div>")&&((b=b.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>")).match(/<div>(<br>|)<\/div>/)&&(b="<p>"+b.replace(/(<div>(<br>|)<\/div>)+/g,(function(a){return e(a.split("</div><div>").length+1)}))+"</p>"),b=(b=b.replace(/<\/div><div>/g,"<br>")).replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&a.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(b=b.replace(/^<br><br>$/,"<br>")),-1<b.indexOf("<br><br>")&&(b="<p>"+b.replace(/(<br>){2,}/g,(function(a){return e(a.length/4)}))+"</p>")),function(a,b){return a.enterMode==CKEDITOR.ENTER_BR?b=b.replace(/(<\/p><p>)+/g,(function(a){return CKEDITOR.tools.repeat("<br>",a.length/7*2)})).replace(/<\/?p>/g,""):a.enterMode==CKEDITOR.ENTER_DIV&&(b=b.replace(/<(\/)?p>/g,"<$1div>")),b}(a,b))}function n(a,b,e){b=CKEDITOR.htmlParser.fragment.fromHtml(b);var t=new CKEDITOR.htmlParser.basicWriter;return e.applyTo(b,!0,!1,a.activeEnterMode),b.writeHtml(t),t.getHtml()}function g(a){a.data.preventDefault(),a.data.$.dataTransfer.dropEffect="none"}function o(b){var e=CKEDITOR.plugins.clipboard;b.on("contentDom",(function(){function t(e,g,t){g.select(),a(b,{dataTransfer:t,method:"drop"},1),t.sourceEditor.fire("saveSnapshot"),t.sourceEditor.editable().extractHtmlFromRange(e),t.sourceEditor.getSelection().selectRanges([e]),t.sourceEditor.fire("saveSnapshot")}function g(t,n){t.select(),a(b,{dataTransfer:n,method:"drop"},1),e.resetDragDataTransfer()}function n(a,e,t){var g={$:a.data.$,target:a.data.getTarget()};e&&(g.dragRange=e),t&&(g.dropRange=t),!1===b.fire(a.name,g)&&a.data.preventDefault()}function o(a){return a.type!=CKEDITOR.NODE_ELEMENT&&(a=a.getParent()),a.getChildCount()}var r=b.editable(),l=CKEDITOR.plugins.clipboard.getDropTarget(b),c=b.ui.space("top"),d=b.ui.space("bottom");e.preventDefaultDropOnElement(c),e.preventDefaultDropOnElement(d),r.attachListener(l,"dragstart",n),r.attachListener(b,"dragstart",e.resetDragDataTransfer,e,null,1),r.attachListener(b,"dragstart",(function(a){e.initDragDataTransfer(a,b)}),null,null,2),r.attachListener(b,"dragstart",(function(){var a=e.dragRange=b.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(e.dragStartContainerChildCount=a?o(a.startContainer):null,e.dragEndContainerChildCount=a?o(a.endContainer):null)}),null,null,100),r.attachListener(l,"dragend",n),r.attachListener(b,"dragend",e.initDragDataTransfer,e,null,1),r.attachListener(b,"dragend",e.resetDragDataTransfer,e,null,100),r.attachListener(l,"dragover",(function(a){if(CKEDITOR.env.edge)a.data.preventDefault();else{var b=a.data.getTarget();(b&&b.is&&b.is("html")||CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&a.data.$.dataTransfer.types.contains("Files"))&&a.data.preventDefault()}})),r.attachListener(l,"drop",(function(a){if(!a.data.$.defaultPrevented&&(a.data.preventDefault(),!(t=a.data.getTarget()).isReadOnly()||t.type==CKEDITOR.NODE_ELEMENT&&t.is("html"))){var t=e.getRangeAtDropPosition(a,b),g=e.dragRange;t&&n(a,g,t)}}),null,null,9999),r.attachListener(b,"drop",e.initDragDataTransfer,e,null,1),r.attachListener(b,"drop",(function(a){if(a=a.data){var n=a.dropRange,o=a.dragRange,r=a.dataTransfer;r.getTransferType(b)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout((function(){e.internalDrop(o,n,r,b)}),0):r.getTransferType(b)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?t(o,n,r):g(n,r)}}),null,null,9999)}))}var r;CKEDITOR.plugins.add("clipboard",{requires:"dialog,notification,toolbar",init:function(a){var g,r=function(a){function b(){var e,a={};for(e in CKEDITOR.dtd)"$"!=e.charAt(0)&&"div"!=e&&"span"!=e&&(a[e]=1);return a}var e={};return{get:function(t){return"plain-text"==t?e.plainText||(e.plainText=new CKEDITOR.filter(a,"br")):"semantic-content"==t?((t=e.semanticContent)||((t=new CKEDITOR.filter(a,{})).allow({$1:{elements:b(),attributes:!0,styles:!1,classes:!1}}),t=e.semanticContent=t),t):t?new CKEDITOR.filter(a,t):null}}}(a);if(a.config.forcePasteAsPlainText?g="plain-text":a.config.pasteFilter?g=a.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in a.config||(g="semantic-content"),a.pasteFilter=r.get(g),e(a),o(a),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),CKEDITOR.env.gecko){var u,l=["image/png","image/jpeg","image/gif"];a.on("paste",(function(b){var e=b.data,t=e.dataTransfer;if(!e.dataValue&&"paste"==e.method&&t&&1==t.getFilesCount()&&u!=t.id&&(t=t.getFile(0),-1!=CKEDITOR.tools.indexOf(l,t.type))){var g=new FileReader;g.addEventListener("load",(function(){b.data.dataValue='<img src="'+g.result+'" />',a.fire("paste",b.data)}),!1),g.addEventListener("abort",(function(){a.fire("paste",b.data)}),!1),g.addEventListener("error",(function(){a.fire("paste",b.data)}),!1),g.readAsDataURL(t),u=e.dataTransfer.id,b.stop()}}),null,null,1)}a.on("paste",(function(b){if(b.data.dataTransfer||(b.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer),!b.data.dataValue){var e=b.data.dataTransfer,t=e.getData("text/html");t?(b.data.dataValue=t,b.data.type="html"):(t=e.getData("text/plain"))&&(b.data.dataValue=a.editable().transformPlainTextToHtml(t),b.data.type="text")}}),null,null,1),a.on("paste",(function(a){var b=a.data.dataValue,e=CKEDITOR.dtd.$block;if(-1<b.indexOf("Apple-")&&(b=b.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=a.data.type&&(b=b.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,(function(a,b){return b.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")}))),-1<b.indexOf('<br class="Apple-interchange-newline">')&&(a.data.startsWithEOL=1,a.data.preSniffing="html",b=b.replace(/<br class="Apple-interchange-newline">/,"")),b=b.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),b.match(/^<[^<]+cke_(editable|contents)/i)){var t,n,g=new CKEDITOR.dom.element("div");for(g.setHtml(b);1==g.getChildCount()&&(t=g.getFirst())&&t.type==CKEDITOR.NODE_ELEMENT&&(t.hasClass("cke_editable")||t.hasClass("cke_contents"));)g=n=t;n&&(b=n.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?b=b.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,(function(b,t){return t.toLowerCase()in e?(a.data.preSniffing="html","<"+t):b})):CKEDITOR.env.webkit?b=b.replace(/<\/(\w+)><div><br><\/div>$/,(function(b,t){return t in e?(a.data.endsWithEOL=1,"</"+t+">"):b})):CKEDITOR.env.gecko&&(b=b.replace(/(\s)<br>$/,"$1")),a.data.dataValue=b}),null,null,3),a.on("paste",(function(e){e=e.data;var o,g=a._.nextPasteType||e.type,l=e.dataValue,c=a.config.clipboard_defaultContentType||"html",d=e.dataTransfer.getTransferType(a)==CKEDITOR.DATA_TRANSFER_EXTERNAL,u=!0===a.config.forcePasteAsPlainText;o="html"==g||"html"==e.preSniffing?"html":function(a){if(CKEDITOR.env.webkit){if(!a.match(/^[^<]*$/g)&&!a.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!a.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!a.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko)return"html";if(!a.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}(l),delete a._.nextPasteType,"htmlifiedtext"==o&&(l=t(a.config,l)),"text"==g&&"html"==o?l=n(a,l,r.get("plain-text")):(d&&a.pasteFilter&&!e.dontFilter||u)&&(l=n(a,l,a.pasteFilter)),e.startsWithEOL&&(l='<br data-cke-eol="1">'+l),e.endsWithEOL&&(l+='<br data-cke-eol="1">'),"auto"==g&&(g="html"==o||"html"==c?"html":"text"),e.type=g,e.dataValue=l,delete e.preSniffing,delete e.startsWithEOL,delete e.endsWithEOL}),null,null,6),a.on("paste",(function(b){(b=b.data).dataValue&&(a.insertHtml(b.dataValue,b.type,b.range),setTimeout((function(){a.fire("afterPaste")}),0))}),null,null,1e3),a.on("pasteDialog",(function(b){setTimeout((function(){a.openDialog("paste",b.data)}),0)}))}}),CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:(!CKEDITOR.env.ie||16<=CKEDITOR.env.version)&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie||16<=CKEDITOR.env.version,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",addPasteButton:function(a,b,e){a.ui.addButton&&(a.ui.addButton(b,e),a._.pasteButtons||(a._.pasteButtons=[]),a._.pasteButtons.push(b))},canClipboardApiBeTrusted:function(a,b){return!!(a.getTransferType(b)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!a.isEmpty()||CKEDITOR.env.gecko&&(a.getData("text/html")||a.getFilesCount())||CKEDITOR.env.safari&&603<=CKEDITOR.env.version&&!CKEDITOR.env.iOS||CKEDITOR.env.edge&&16<=CKEDITOR.env.version)},getDropTarget:function(a){var b=a.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||b.isInline()?b:a.document},fixSplitNodesAfterDrop:function(a,b,e,t){function g(a,e,t){var n=a;if(n.type==CKEDITOR.NODE_TEXT&&(n=a.getParent()),n.equals(e)&&t!=e.getChildCount())return a=b.startContainer.getChild(b.startOffset-1),e=b.startContainer.getChild(b.startOffset),a&&a.type==CKEDITOR.NODE_TEXT&&e&&e.type==CKEDITOR.NODE_TEXT&&(t=a.getLength(),a.setText(a.getText()+e.getText()),e.remove(),b.setStart(a,t),b.collapse(!0)),!0}var n=b.startContainer;"number"==typeof t&&"number"==typeof e&&n.type==CKEDITOR.NODE_ELEMENT&&(g(a.startContainer,n,e)||g(a.endContainer,n,t))},isDropRangeAffectedByDragRange:function(a,b){var e=b.startContainer,t=b.endOffset;return!!(a.endContainer.equals(e)&&a.endOffset<=t||a.startContainer.getParent().equals(e)&&a.startContainer.getIndex()<t||a.endContainer.getParent().equals(e)&&a.endContainer.getIndex()<t)},internalDrop:function(b,e,t,g){var n,o,r=CKEDITOR.plugins.clipboard,l=g.editable();g.fire("saveSnapshot"),g.fire("lockSnapshot",{dontUpdate:1}),CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(b,e,r.dragStartContainerChildCount,r.dragEndContainerChildCount),(o=this.isDropRangeAffectedByDragRange(b,e))||(n=b.createBookmark(!1)),r=e.clone().createBookmark(!1),o&&(n=b.createBookmark(!1)),b=n.startNode,e=n.endNode,o=r.startNode,e&&b.getPosition(o)&CKEDITOR.POSITION_PRECEDING&&e.getPosition(o)&CKEDITOR.POSITION_FOLLOWING&&o.insertBefore(b),(b=g.createRange()).moveToBookmark(n),l.extractHtmlFromRange(b,1),e=g.createRange(),r.startNode.getCommonAncestor(l)||(r=g.getSelection().createBookmarks()[0]),e.moveToBookmark(r),a(g,{dataTransfer:t,method:"drop",range:e},1),g.fire("unlockSnapshot")},getRangeAtDropPosition:function(a,b){var e=a.data.$,t=e.clientX,g=e.clientY,n=b.getSelection(!0).getRanges()[0],o=b.createRange();if(a.data.testRange)return a.data.testRange;if(document.caretRangeFromPoint&&b.document.$.caretRangeFromPoint(t,g))e=b.document.$.caretRangeFromPoint(t,g),o.setStart(CKEDITOR.dom.node(e.startContainer),e.startOffset),o.collapse(!0);else if(e.rangeParent)o.setStart(CKEDITOR.dom.node(e.rangeParent),e.rangeOffset),o.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&n&&b.editable().hasFocus)return n;if(!document.body.createTextRange)return null;b.focus(),e=b.document.getBody().$.createTextRange();try{for(var r=!1,l=0;20>l&&!r;l++){if(!r)try{e.moveToPoint(t,g-l),r=!0}catch(e){}if(!r)try{e.moveToPoint(t,g+l),r=!0}catch(e){}}if(r){var c="cke-temp-"+(new Date).getTime();e.pasteHTML('<span id="'+c+'">​</span>');var d=b.document.getById(c);o.moveToPosition(d,CKEDITOR.POSITION_BEFORE_START),d.remove()}else{var h=b.document.$.elementFromPoint(t,g),f=new CKEDITOR.dom.element(h);if(f.equals(b.editable())||"html"==f.getName())return n&&n.startContainer&&!n.startContainer.equals(b.editable())?n:null;t<f.getClientRect().left?o.setStartAt(f,CKEDITOR.POSITION_AFTER_START):o.setStartAt(f,CKEDITOR.POSITION_BEFORE_END),o.collapse(!0)}}catch(e){return null}}return o},initDragDataTransfer:function(a,b){var e=a.data.$?a.data.$.dataTransfer:null,t=new this.dataTransfer(e,b);"dragstart"===a.name&&t.storeId(),e?this.dragData&&t.id==this.dragData.id?t=this.dragData:this.dragData=t:this.dragData?t=this.dragData:this.dragData=t,a.data.dataTransfer=t},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(a,b){if(this.isCustomCopyCutSupported){if(a&&a.data&&a.data.$){var e=a.data.$.clipboardData,t=new this.dataTransfer(e,b);return"copy"!==a.name&&"cut"!==a.name||t.storeId(),this.copyCutData&&t.id==this.copyCutData.id?(t=this.copyCutData).$=e:this.copyCutData=t,t}return new this.dataTransfer(null,b)}return new this.dataTransfer(CKEDITOR.env.edge&&a&&a.data.$&&a.data.$.clipboardData||null,b)},preventDefaultDropOnElement:function(a){a&&a.on("dragover",g)}},r=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text",CKEDITOR.plugins.clipboard.dataTransfer=function(a,b){a&&(this.$=a),this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],nativeHtmlCache:"",normalizeType:function(a){return"text"==(a=a.toLowerCase())||"text/plain"==a?"Text":"url"==a?"URL":a}},this._.fallbackDataTransfer=new CKEDITOR.plugins.clipboard.fallbackDataTransfer(this),this.id=this.getData(r),this.id||(this.id="Text"==r?"":"cke-"+CKEDITOR.tools.getUniqueId()),b&&(this.sourceEditor=b,this.setData("text/html",b.getSelectedHtml(1)),"Text"==r||this.getData("text/plain")||this.setData("text/plain",b.getSelection().getSelectedText()))},CKEDITOR.DATA_TRANSFER_INTERNAL=1,CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2,CKEDITOR.DATA_TRANSFER_EXTERNAL=3,CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(a,b){if(null==(e="text/html"==(a=this._.normalizeType(a))&&b?this._.nativeHtmlCache:this._.data[a])||""===e){if(this._.fallbackDataTransfer.isRequired())e=this._.fallbackDataTransfer.getData(a,b);else try{e=this.$.getData(a)||""}catch(t){e=""}"text/html"!=a||b||(e=this._stripHtml(e))}if("Text"==a&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==e.substring(0,7)&&(e=""),"string"==typeof e)var g=e.indexOf("</html>"),e=-1!==g?e.substring(0,g+7):e;return e},setData:function(a,b){if("text/html"==(a=this._.normalizeType(a))?(this._.data[a]=this._stripHtml(b),this._.nativeHtmlCache=b):this._.data[a]=b,CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==a||"Text"==a)if("Text"==r&&"Text"==a&&(this.id=b),this._.fallbackDataTransfer.isRequired())this._.fallbackDataTransfer.setData(a,b);else try{this.$.setData(a,b)}catch(e){}},storeId:function(){"Text"!==r&&this.setData(r,this.id)},getTransferType:function(a){return this.sourceEditor?this.sourceEditor==a?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function a(e){e=b._.normalizeType(e);var t=b.getData(e);"text/html"==e&&(b._.nativeHtmlCache=b.getData(e,!0),t=b._stripHtml(t)),t&&(b._.data[e]=t)}if(this.$){var e,t,b=this;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(e=0;e<this.$.types.length;e++)a(this.$.types[e])}else a("Text"),a("URL");if(t=this._getImageFromClipboard(),this.$&&this.$.files||t){if(this._.files=[],this.$.files&&this.$.files.length)for(e=0;e<this.$.files.length;e++)this._.files.push(this.$.files[e]);0===this._.files.length&&t&&this._.files.push(t)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(a){return this._.files.length?this._.files[a]:this.$&&this.$.files&&this.$.files.length?this.$.files[a]:0===a?this._getImageFromClipboard():void 0},isEmpty:function(){var b,a={};if(this.getFilesCount())return!1;if(CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(this._.data),(function(b){a[b]=1})),this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var e=0;e<this.$.types.length;e++)a[this.$.types[e]]=1}else a.Text=1,a.URL=1;for(b in"Text"!=r&&(a[r]=0),a)if(a[b]&&""!==this.getData(b))return!1;return!0},_getImageFromClipboard:function(){var a;try{if(this.$&&this.$.items&&this.$.items[0]&&(a=this.$.items[0].getAsFile())&&a.type)return a}catch(e){}},_stripHtml:function(a){if(a&&a.length){a=a.replace(this._.metaRegExp,"");var b=this._.bodyRegExp.exec(a);b&&b.length&&(a=(a=b[1]).replace(this._.fragmentRegExp,""))}return a}},CKEDITOR.plugins.clipboard.fallbackDataTransfer=function(a){this._dataTransfer=a,this._customDataFallbackType="text/html"},CKEDITOR.plugins.clipboard.fallbackDataTransfer._isCustomMimeTypeSupported=null,CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes=[],CKEDITOR.plugins.clipboard.fallbackDataTransfer.prototype={isRequired:function(){var a=CKEDITOR.plugins.clipboard.fallbackDataTransfer,b=this._dataTransfer.$;if(null===a._isCustomMimeTypeSupported){if(!b)return!1;if(a._isCustomMimeTypeSupported=!1,CKEDITOR.env.edge&&17<=CKEDITOR.env.version)return!0;try{b.setData("cke/mimetypetest","cke test value"),a._isCustomMimeTypeSupported="cke test value"===b.getData("cke/mimetypetest"),b.clearData("cke/mimetypetest")}catch(e){}}return!a._isCustomMimeTypeSupported},getData:function(a,b){var e=this._getData(this._customDataFallbackType,!0);if(b)return e;e=this._extractDataComment(e);var t=null;return null!==(t=a===this._customDataFallbackType?e.content:e.data&&e.data[a]?e.data[a]:this._getData(a,!0))?t:""},setData:function(a,b){(t=a===this._customDataFallbackType)&&(b=this._applyDataComment(b,this._getFallbackTypeData()));var e=b,g=this._dataTransfer.$;try{g.setData(a,e),t&&(this._dataTransfer._.nativeHtmlCache=e)}catch(o){if(this._isUnsupportedMimeTypeError(o)){t=CKEDITOR.plugins.clipboard.fallbackDataTransfer,-1===CKEDITOR.tools.indexOf(t._customTypes,a)&&t._customTypes.push(a);var t=this._getFallbackTypeContent(),n=this._getFallbackTypeData();n[a]=e;try{e=this._applyDataComment(t,n),g.setData(this._customDataFallbackType,e),this._dataTransfer._.nativeHtmlCache=e}catch(t){e=""}}}return e},_getData:function(a,b){var e=this._dataTransfer._.data;if(!b&&e[a])return e[a];try{return this._dataTransfer.$.getData(a)}catch(e){return null}},_getFallbackTypeContent:function(){var a=this._dataTransfer._.data[this._customDataFallbackType];return a||(a=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).content),a},_getFallbackTypeData:function(){var a=CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes,b=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).data||{},e=this._dataTransfer._.data;return CKEDITOR.tools.array.forEach(a,(function(a){void 0!==e[a]?b[a]=e[a]:void 0!==b[a]&&(b[a]=b[a])}),this),b},_isUnsupportedMimeTypeError:function(a){return a.message&&-1!==a.message.search(/element not found/gi)},_extractDataComment:function(a){var e,b={data:null,content:a||""};return a&&16<a.length&&(e=/\x3c!--cke-data:(.*?)--\x3e/g.exec(a))&&e[1]&&(b.data=JSON.parse(decodeURIComponent(e[1])),b.content=a.replace(e[0],"")),b},_applyDataComment:function(a,b){var e="";return b&&CKEDITOR.tools.object.keys(b).length&&(e="\x3c!--cke-data:"+encodeURIComponent(JSON.stringify(b))+"--\x3e"),e+(a&&a.length?a:"")}}}(),CKEDITOR.config.clipboard_notificationDuration=1e4,function(){CKEDITOR.plugins.add("panel",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(a,b){b&&CKEDITOR.tools.extend(this,b),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=a,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(a){return new CKEDITOR.ui.panel(a)}};var a=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),e=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),b=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(t,n){var o={editorId:t.id,id:this.id,langCode:t.langCode,dir:t.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":t.config.baseFloatZIndex+1};if(this.getHolderElement=function(){if(!(a=this._.holder)){if(this.isFramed){var e=(a=this.document.getById(this.id+"_frame")).getParent(),a=a.getFrameDocument();CKEDITOR.env.iOS&&e.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),e=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind((function(){this.isLoaded=!0,this.onLoad&&this.onLoad()}),this)),a.write(b.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+e+");"},o))),a.getWindow().$.CKEDITOR=CKEDITOR,a.on("keydown",(function(a){var b=a.data.getKeystroke(),e=this.document.getById(this.id).getAttribute("dir");("input"!==a.data.getTarget().getName()||37!==b&&39!==b)&&(this._.onKeyDown&&!1===this._.onKeyDown(b)?"input"===a.data.getTarget().getName()&&32===b||a.data.preventDefault():(27==b||b==("rtl"==e?39:37))&&this.onEscape&&!1===this.onEscape(b)&&a.data.preventDefault())}),this),(a=a.getBody()).unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(e)}else a=this.document.getById(this.id);this._.holder=a}return a},this.isFramed){var r=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";o.frame=e.output({id:this.id+"_frame",src:r})}return r=a.output(o),n&&n.push(r),r},addBlock:function(a,b){return b=this._.blocks[a]=b instanceof CKEDITOR.ui.panel.block?b:new CKEDITOR.ui.panel.block(this.getHolderElement(),b),this._.currentBlock||this.showBlock(a),b},getBlock:function(a){return this._.blocks[a]},showBlock:function(a){a=this._.blocks[a];var b=this._.currentBlock,e=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return b&&b.hide(),this._.currentBlock=a,CKEDITOR.fire("ariaWidget",e),a._.focusIndex=-1,this._.onKeyDown=a.onKeyDown&&CKEDITOR.tools.bind(a.onKeyDown,a),a.show(),a},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(a,b){this.element=a.append(a.getDocument().createElement("div",{attributes:{tabindex:-1,class:"cke_panel_block"},styles:{display:"none"}})),b&&CKEDITOR.tools.extend(this,b),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(a){-1!=a&&(a=this._.getItems().getItem(this._.focusIndex=a),CKEDITOR.env.webkit&&a.getDocument().getWindow().focus(),a.focus(),this.onMark&&this.onMark(a))},markFirstDisplayed:function(a){for(var e,g,b=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&"none"==a.getStyle("display")},t=this._.getItems(),n=t.count()-1;0<=n;n--)if((e=t.getItem(n)).getAscendant(b)||(g=e,this._.focusIndex=n),"true"==e.getAttribute("aria-selected")){g=e,this._.focusIndex=n;break}g&&(a&&a(),CKEDITOR.env.webkit&&g.getDocument().getWindow().focus(),g.focus(),this.onMark&&this.onMark(g))},getItems:function(){return this.element.find("a,input")}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(a,b){switch(t=this.keys[a]){case"next":for(var g,e=this._.focusIndex,t=this._.getItems();g=t.getItem(++e);)if(g.getAttribute("_cke_focus")&&g.$.offsetWidth){this._.focusIndex=e,g.focus(!0);break}return!g&&!b&&(this._.focusIndex=-1,this.onKeyDown(a,1));case"prev":for(e=this._.focusIndex,t=this._.getItems();0<e&&(g=t.getItem(--e));){if(g.getAttribute("_cke_focus")&&g.$.offsetWidth){this._.focusIndex=e,g.focus(!0);break}g=null}return!g&&!b&&(this._.focusIndex=t.count(),this.onKeyDown(a,1));case"click":case"mouseup":return(g=0<=(e=this._.focusIndex)&&this._.getItems().getItem(e))&&(g.$[t]?g.$[t]():g.$["on"+t]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){function a(a,t,n,o,r){r=CKEDITOR.tools.genKey(t.getUniqueId(),n.getUniqueId(),a.lang.dir,a.uiColor||"",o.css||"",r||"");var g=e[r];return g||((g=e[r]=new CKEDITOR.ui.panel(t,o)).element=n.append(CKEDITOR.dom.element.createFromHtml(g.render(a),t)),g.element.setStyles({display:"none",position:"absolute"})),g}var e={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(b,e,t,n){function o(){c.hide()}t.forceIFrame=1,t.toolbarRelated&&b.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(e=CKEDITOR.document.getById("cke_"+b.name));var g=e.getDocument(),r=(n=a(b,g,e,t,n||0)).element,l=r.getFirst(),c=this;r.disableContextMenu(),this.element=r,this._={editor:b,panel:n,parentElement:e,definition:t,document:g,iframe:l,children:[],dir:b.lang.dir,showBlockParams:null,markFirst:void 0===t.markFirst||t.markFirst},b.on("mode",o),b.on("resize",o),g.getWindow().on("resize",(function(){this.reposition()}),this)},proto:{addBlock:function(a,e){return this._.panel.addBlock(a,e)},addListBlock:function(a,e){return this._.panel.addListBlock(a,e)},getBlock:function(a){return this._.panel.getBlock(a)},showBlock:function(a,e,t,n,o,g){var r=this._.panel,l=r.showBlock(a);this._.showBlockParams=[].slice.call(arguments),this.allowBlur(!1);var c=this._.editor.editable();this._.returnFocus=c.hasFocus?c:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement),this._.hideTimeout=0;var d=this.element,q=(c=this._.iframe,c=CKEDITOR.env.ie&&!CKEDITOR.env.edge?c:new CKEDITOR.dom.window(c.$.contentWindow),d.getDocument()),h=this._.parentElement.getPositionedAncestor(),u=e.getDocumentPosition(q),p=(q=h?h.getDocumentPosition(q):{x:0,y:0},"rtl"==this._.dir),f=u.x+(n||0)-q.x,m=u.y+(o||0)-q.y;!p||1!=t&&4!=t?p||2!=t&&3!=t||(f+=e.$.offsetWidth-1):f+=e.$.offsetWidth,3!=t&&4!=t||(m+=e.$.offsetHeight-1),this._.panel._.offsetParentId=e.getId(),d.setStyles({top:m+"px",left:0,display:""}),d.setOpacity(0),d.getFirst().removeStyle("width"),this._.editor.focusManager.add(c),this._.blurSet||(CKEDITOR.event.useCapture=!0,c.on("blur",(function(a){function b(){delete this._.returnFocus,this.hide()}this.allowBlur()&&a.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(b,0,this)):b.call(this))}),this),c.on("focus",(function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)}),this),CKEDITOR.env.iOS&&(c.on("touchstart",(function(){clearTimeout(this._.hideTimeout)}),this),c.on("touchend",(function(){this._.hideTimeout=0,this.focus()}),this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1),r.onEscape=CKEDITOR.tools.bind((function(a){if(this.onEscape&&!1===this.onEscape(a))return!1}),this),CKEDITOR.tools.setTimeout((function(){var a=CKEDITOR.tools.bind((function(){if((a=d).removeStyle("width"),l.autoSize){var b=l.element.getDocument();b=(CKEDITOR.env.webkit||CKEDITOR.env.edge?l.element:b.getBody()).$.scrollWidth,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<b&&(b+=(a.$.offsetWidth||0)-(a.$.clientWidth||0)+3),a.setStyle("width",b+10+"px"),b=l.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<b&&(b+=(a.$.offsetHeight||0)-(a.$.clientHeight||0)+3),a.setStyle("height",b+"px"),r._.currentBlock.element.setStyle("display","none").removeStyle("display")}else a.removeStyle("height");p&&(f-=d.$.offsetWidth),d.setStyle("left",f+"px"),b=r.element.getWindow();var e,a=d.$.getBoundingClientRect(),t=(b=b.getViewPaneSize(),a.width||a.right-a.left),n=a.height||a.bottom-a.top,o=p?a.right:b.width-a.left,c=p?b.width-a.right:a.left;p?o<t&&(f=c>t?f+t:b.width>t?f-a.left:f-a.right+b.width):o<t&&(f=c>t?f-t:b.width>t?f-a.right+b.width:f-a.left),t=a.top,b.height-a.top<n&&(m=t>n?m-n:b.height>n?m-a.bottom+b.height:m-a.top),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&("html"==(b=a=new CKEDITOR.dom.element(d.$.offsetParent)).getName()&&(b=b.getDocument().getBody()),"rtl"==b.getComputedStyle("direction")&&(f=CKEDITOR.env.ie8Compat?f-2*d.getDocument().getDocumentElement().$.scrollLeft:f-(a.$.scrollWidth-a.$.clientWidth))),(e=(a=d.getFirst()).getCustomData("activePanel"))&&e.onHide&&e.onHide.call(this,1),a.setCustomData("activePanel",this),d.setStyles({top:m+"px",left:f+"px"}),d.setOpacity(1),g&&g()}),this);r.isLoaded?a():r.onLoad=a,CKEDITOR.tools.setTimeout((function(){var a=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),l.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=a),this.allowBlur(!0),this._.markFirst&&(CKEDITOR.env.ie?CKEDITOR.tools.setTimeout((function(){l.markFirstDisplayed?l.markFirstDisplayed():l._.markFirstDisplayed()}),0):l.markFirstDisplayed?l.markFirstDisplayed():l._.markFirstDisplayed()),this._.editor.fire("panelShow",this)}),0,this)}),CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},reposition:function(){var a=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,a))},focus:function(){if(CKEDITOR.env.webkit){var a=CKEDITOR.document.getActive();a&&!a.equals(this._.iframe)&&a.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var a=this._.iframe.getFrameDocument().getActive();a&&a.is("a")&&(this._.lastFocused=a)},hide:function(a){!this.visible||this.onHide&&!0===this.onHide.call(this)||(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(a=a&&this._.returnFocus)&&(CKEDITOR.env.webkit&&a.type&&a.getWindow().$.focus(),a.focus()),delete this._.lastFocused,this._.showBlockParams=null,this._.editor.fire("panelHide",this))},allowBlur:function(a){var e=this._.panel;return void 0!==a&&(e.allowBlur=a),e.allowBlur},showAsChild:function(a,e,t,n,o,g){this._.activeChild==a&&a._.panel._.offsetParentId==t.getId()||(this.hideChild(),a.onHide=CKEDITOR.tools.bind((function(){CKEDITOR.tools.setTimeout((function(){this._.focused||this.hide()}),0,this)}),this),this._.activeChild=a,this._.focused=!1,a.showBlock(e,t,n,o,g),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout((function(){a.element.getChild(0).$.style.cssText+=""}),100))},hideChild:function(a){var e=this._.activeChild;e&&(delete e.onHide,delete this._.activeChild,e.hide(),a&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",(function(){var t,a=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(t in e){var n=e[t];a?n.destroy():n.element.hide()}a&&(e={})}))}(),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(a){for(var e=a.config.menu_groups.split(","),b=a._.menuGroups={},t=a._.menuItems={},n=0;n<e.length;n++)b[e[n]]=n+1;a.addMenuGroup=function(a,e){b[a]=e||100},a.addMenuItem=function(a,e){b[e.group]&&(t[a]=new CKEDITOR.menuItem(this,a,e))},a.addMenuItems=function(a){for(var b in a)this.addMenuItem(b,a[b])},a.getMenuItem=function(a){return t[a]},a.removeMenuItem=function(a){delete t[a]}}}),function(){var e='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1" _cke_focus=1 hidefocus="true" role="{role}" aria-label="{label}" aria-describedby="{id}_description" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked} draggable="false"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;" ondragstart="return false;"'),e=e+' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">';var b=CKEDITOR.addTemplate("menuItem",e+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{shortcutHtml}{arrowHtml}</span></a><span id="{id}_description" class="cke_voice_label" aria-hidden="false">{ariaShortcut}</span></span>'),t=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>'),n=CKEDITOR.addTemplate("menuShortcut",'<span class="cke_menubutton_label cke_menubutton_shortcut">{shortcut}</span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(a,b){b=this._.definition=b||{},this.id=CKEDITOR.tools.getNextId(),this.editor=a,this.items=[],this._.listeners=[],this._.level=b.level||1;var e=CKEDITOR.tools.extend({},b.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),t=e.block.attributes=e.attributes||{};!t.role&&(t.role="menu"),this._.panelDefinition=e},_:{onShow:function(){var a=this.editor.getSelection(),b=a&&a.getStartElement(),e=this.editor.elementPath(),t=this._.listeners;this.removeAll();for(var n=0;n<t.length;n++){var o=t[n](b,a,e);if(o)for(var r in o){var q=this.editor.getMenuItem(r);!q||q.command&&!this.editor.getCommand(q.command).state||(q.state=o[r],this.add(q))}}},onClick:function(a){this.hide(),a.onClick?a.onClick():a.command&&this.editor.execCommand(a.command)},onEscape:function(a){var b=this.parent;return b?b._.panel.hideChild(1):27==a&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(a){var b=this._.subMenu,e=this.items[a];if(e=e.getItems&&e.getItems()){for(var t in b?b.removeAll():((b=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0))).parent=this,b._.onClick=CKEDITOR.tools.bind(this._.onClick,this)),e){var n=this.editor.getMenuItem(t);n&&(n.state=e[t],b.add(n))}var o=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(a));setTimeout((function(){b.show(o,2)}),0)}else this._.panel.hideChild(1)}},proto:{add:function(a){a.order||(a.order=this.items.length),this.items.push(a)},removeAll:function(){this.items=[]},show:function(b,e,t,n){if(this.parent||(this._.onShow(),this.items.length)){e=e||("rtl"==this.editor.lang.dir?2:1);var o=this.items,r=this.editor,l=this._.panel,q=this._.element;l||((l=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level)).onEscape=CKEDITOR.tools.bind((function(a){if(!1===this._.onEscape(a))return!1}),this),l.onShow=function(){l._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")},l.onHide=CKEDITOR.tools.bind((function(){this._.onHide&&this._.onHide()}),this),(q=l.addBlock(this.id,this._.panelDefinition.block)).autoSize=!0,(c=q.keys)[40]="next",c[9]="next",c[38]="prev",c[CKEDITOR.SHIFT+9]="prev",c["rtl"==r.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",c[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(c[13]="mouseup"),(c=(q=this._.element=q.element).getDocument()).getBody().setStyle("overflow","hidden"),c.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction((function(a){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,r.config.menu_subMenuDelay||400,this,[a])}),this),this._.itemOutFn=CKEDITOR.tools.addFunction((function(){clearTimeout(this._.showSubTimeout)}),this),this._.itemClickFn=CKEDITOR.tools.addFunction((function(a){var b=this.items[a];b.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):b.getItems?this._.showSubMenu(a):this._.onClick(b)}),this)),function(a){a.sort((function(a,b){return a.group<b.group?-1:a.group>b.group?1:a.order<b.order?-1:a.order>b.order?1:0}))}(o);for(var c=['<div class="cke_menu'+((c=r.elementPath())&&c.direction()!=r.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],u=o.length,p=u&&o[0].group,d=0;d<u;d++){var h=o[d];p!=h.group&&(c.push('<div class="cke_menuseparator" role="separator"></div>'),p=h.group),h.render(this,d,c)}c.push("</div>"),q.setHtml(c.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(l,this.id,b,e,t,n):l.showBlock(this.id,b,e,t,n),r.fire("menuShow",[l])}},addListener:function(a){this._.listeners.push(a)},hide:function(a){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(a)},findItemByCommandName:function(a){var b=CKEDITOR.tools.array.filter(this.items,(function(b){return a===b.command}));return b.length?{item:b=b[0],element:this._.element.findOne("."+b.className)}:null}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(a,b,e){CKEDITOR.tools.extend(this,e,{order:0,className:"cke_menubutton__"+b}),this.group=a._.menuGroups[this.group],this.editor=a,this.name=b},proto:{render:function(a,e,g){var q,o,r=a.id+String(e),l=void 0===this.state?CKEDITOR.TRISTATE_OFF:this.state,c="",d=this.editor,u=l==CKEDITOR.TRISTATE_ON?"on":l==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(c=' aria-checked="'+(l==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var p=this.getItems,h="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",f=this.name;this.icon&&!/\./.test(this.icon)&&(f=this.icon),this.command&&(q=d.getCommand(this.command),(q=d.getCommandKeystroke(q))&&(o=CKEDITOR.tools.keystrokeToString(d.lang.common.keyboard,q))),a={id:r,name:this.name,iconName:f,label:this.label,cls:this.className||"",state:u,hasPopup:p?"true":"false",disabled:l==CKEDITOR.TRISTATE_DISABLED,title:this.label+(o?" ("+o.display+")":""),ariaShortcut:o?d.lang.common.keyboardShortcut+" "+o.aria:"",href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:a._.itemOverFn,moveOutFn:a._.itemOutFn,clickFn:a._.itemClickFn,index:e,iconStyle:CKEDITOR.skin.getIconStyle(f,"rtl"==this.editor.lang.dir,f==this.icon?null:this.icon,this.iconOffset),shortcutHtml:o?n.output({shortcut:o.display}):"",arrowHtml:p?t.output({label:h}):"",role:this.role?this.role:"menuitem",ariaChecked:c},b.output(a,g)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(a){this.base.call(this,a,{panel:{css:a.config.contextmenu_contentsCss,className:"cke_menu_panel",attributes:{"aria-label":a.lang.contextmenu.options}}})},proto:{addTarget:function(a,e){function b(){n=!1}var t,n;if(a.on("contextmenu",(function(a){a=a.data;var b=CKEDITOR.env.webkit?t:CKEDITOR.env.mac?a.$.metaKey:a.$.ctrlKey;if(!(e&&b||(a.preventDefault(),n))){CKEDITOR.env.mac&&CKEDITOR.env.webkit&&(b=this.editor,(o=new CKEDITOR.dom.elementPath(a.getTarget(),b.editable()).contains((function(a){return a.hasAttribute("contenteditable")}),!0))&&"false"==o.getAttribute("contenteditable")&&b.getSelection().fake(o));var o=a.getTarget().getDocument(),r=a.getTarget().getDocument().getDocumentElement(),l=(b=!o.equals(CKEDITOR.document),o=o.getWindow().getScrollPosition(),b?a.$.clientX:a.$.pageX||o.x+a.$.clientX),c=b?a.$.clientY:a.$.pageY||o.y+a.$.clientY;CKEDITOR.tools.setTimeout((function(){this.open(r,null,l,c)}),CKEDITOR.env.ie?200:0,this)}}),this),CKEDITOR.env.webkit){var o=function(){t=0};a.on("keydown",(function(a){t=CKEDITOR.env.mac?a.data.$.metaKey:a.data.$.ctrlKey})),a.on("keyup",o),a.on("contextmenu",o)}CKEDITOR.env.gecko&&!CKEDITOR.env.mac&&(a.on("keydown",(function(a){a.data.$.shiftKey&&121===a.data.$.keyCode&&(n=!0)}),null,null,0),a.on("keyup",b),a.on("contextmenu",b))},open:function(a,e,b,t){!1!==this.editor.config.enableContextMenu&&this.editor.getSelection().getType()!==CKEDITOR.SELECTION_NONE&&(this.editor.focus(),a=a||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(a,e,b,t))}}})},beforeInit:function(a){var e=a.contextMenu=new CKEDITOR.plugins.contextMenu(a);a.on("contentDom",(function(){e.addTarget(a.editable(),!1!==a.config.browserContextMenuOnCtrl)})),a.addCommand("contextMenu",{exec:function(a){var e,t=0,n=0;(e=(e=(e=a.getSelection().getRanges())[e.length-1].getClientRects(a.editable().isInline()))[e.length-1])&&(t=e["rtl"===a.lang.dir?"left":"right"],n=e.bottom),a.contextMenu.open(a.document.getBody().getParent(),null,t,n)}}),a.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),a.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),function(){function a(a,b){function n(b){var e;(b=l.list[b]).equals(a.editable())||"true"==b.getAttribute("contenteditable")?((e=a.createRange()).selectNodeContents(b),e=e.select()):(e=a.getSelection()).selectElement(b),CKEDITOR.env.ie&&a.fire("selectionChange",{selection:e,path:new CKEDITOR.dom.elementPath(b)}),a.focus()}function g(){o&&o.setHtml('<span class="cke_path_empty">&nbsp;</span>'),delete l.list}var o,r=a.ui.spaceId("path"),l=a._.elementsPath,c=l.idBase;b.html+='<span id="'+r+'_label" class="cke_voice_label">'+a.lang.elementspath.eleLabel+'</span><span id="'+r+'" class="cke_path" role="group" aria-labelledby="'+r+'_label"><span class="cke_path_empty">&nbsp;</span></span>',a.on("uiReady",(function(){var b=a.ui.space("path");b&&a.focusManager.add(b,1)})),l.onClick=n;var q=CKEDITOR.tools.addFunction(n),d=CKEDITOR.tools.addFunction((function(b,e){var t,g=l.idBase;switch(e=new CKEDITOR.dom.event(e),t="rtl"==a.lang.dir,e.getKeystroke()){case t?39:37:case 9:return(t=CKEDITOR.document.getById(g+(b+1)))||(t=CKEDITOR.document.getById(g+"0")),t.focus(),!1;case t?37:39:case CKEDITOR.SHIFT+9:return(t=CKEDITOR.document.getById(g+(b-1)))||(t=CKEDITOR.document.getById(g+(l.list.length-1))),t.focus(),!1;case 27:return a.focus(),!1;case 13:case 32:return n(b),!1}return!0}));a.on("selectionChange",(function(b){for(var g=[],e=l.list=[],n=[],h=l.filters,f=!0,m=b.data.path.elements,E=m.length;E--;){var T=m[E],C=0;b=T.data("cke-display-name")?T.data("cke-display-name"):T.data("cke-real-element-type")?T.data("cke-real-element-type"):T.getName(),(f=T.hasAttribute("contenteditable")?"true"==T.getAttribute("contenteditable"):f)||T.hasAttribute("contenteditable")||(C=1);for(var I=0;I<h.length;I++){var O=h[I](T,b);if(!1===O){C=1;break}b=O||b}C||(e.unshift(T),n.unshift(b))}for(e=e.length,h=0;h<e;h++)b=n[h],f=a.lang.elementspath.eleTitle.replace(/%1/,b),b=t.output({id:c+h,label:f,text:b,jsTitle:"javascript:void('"+b+"')",index:h,keyDownFn:d,clickFn:q}),g.unshift(b);o||(o=CKEDITOR.document.getById(r)),(n=o).setHtml(g.join("")+'<span class="cke_path_empty">&nbsp;</span>'),a.fire("elementsPathUpdate",{space:n})})),a.on("readOnly",g),a.on("contentDomUnload",g),a.addCommand("elementsPathFocus",e.toolbarFocus),a.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var e={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(a){(a=CKEDITOR.document.getById(a._.elementsPath.idBase+"0"))&&a.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},b="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(b+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(b+=' onblur="this.style.cssText = this.style.cssText;"');var t=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+b+' hidefocus="true"  draggable="false"  ondragstart="return false;" onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(b){b._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]},b.on("uiSpace",(function(e){"bottom"==e.data.space&&a(b,e.data)}))}})}(),function(){function a(a,t){var n,o;t.on("refresh",(function(a){var t,n=[e];for(t in a.data.states)n.push(a.data.states[t]);this.setState(CKEDITOR.tools.search(n,b)?b:e)}),t,null,100),t.on("exec",(function(b){n=a.getSelection(),o=n.createBookmarks(1),b.data||(b.data={}),b.data.done=!1}),t,null,0),t.on("exec",(function(){a.forceNextSelectionCheck(),n.selectBookmarks(o)}),t,null,100)}var e=CKEDITOR.TRISTATE_DISABLED,b=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(b){var e=CKEDITOR.plugins.indent.genericDefinition;a(b,b.addCommand("indent",new e(!0))),a(b,b.addCommand("outdent",new e)),b.ui.addButton&&(b.ui.addButton("Indent",{label:b.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),b.ui.addButton("Outdent",{label:b.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),b.on("dirChanged",(function(a){var e=b.createRange(),g=a.data.node;e.setStartBefore(g),e.setEndAfter(g);for(var t,n=new CKEDITOR.dom.walker(e);t=n.next();)if(t.type==CKEDITOR.NODE_ELEMENT)if(!t.equals(g)&&t.getDirection())e.setStartAfter(t),n=new CKEDITOR.dom.walker(e);else{var o=b.config.indentClasses;if(o)for(var r="ltr"==a.data.dir?["_rtl",""]:["","_rtl"],q=0;q<o.length;q++)t.hasClass(o[q]+r[0])&&(t.removeClass(o[q]+r[0]),t.addClass(o[q]+r[1]));o=t.getStyle("margin-right"),r=t.getStyle("margin-left"),o?t.setStyle("margin-left",o):t.removeStyle("margin-left"),r?t.setStyle("margin-right",r):t.removeStyle("margin-right")}}))}}),CKEDITOR.plugins.indent={genericDefinition:function(a){this.isIndent=!!a,this.startDisabled=!this.isIndent},specificDefinition:function(a,b,e){this.name=b,this.editor=a,this.jobs={},this.enterBr=a.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!e,this.relatedGlobal=e?"indent":"outdent",this.indentKey=e?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(a,b){a.on("pluginsLoaded",(function(){for(var a in b)!function(a,b){var e,t=a.getCommand(b.relatedGlobal);for(e in b.jobs)t.on("exec",(function(t){t.data.done||(a.fire("lockSnapshot"),b.execJob(a,e)&&(t.data.done=!0),a.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(b.database))}),this,null,e),t.on("refresh",(function(t){t.data.states||(t.data.states={}),t.data.states[b.name+"@"+e]=b.refreshJob(a,e,t.data.path)}),this,null,e);a.addFeature(b)}(this,b[a])}))}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(a,b){var t=this.jobs[b];if(t.state!=e)return t.exec.call(this,a)},refreshJob:function(a,b,t){return b=this.jobs[b],a.activeFilter.checkFeature(this)?b.state=b.refresh.call(this,a,t):b.state=e,b.state},getContext:function(a){return a.contains(this.context)}}}(),function(){function a(a){function t(e){for(var t=n.startContainer,c=n.endContainer;t&&!t.getParent().equals(e);)t=t.getParent();for(;c&&!c.getParent().equals(e);)c=c.getParent();if(!t||!c)return!1;for(var d=[],h=!1;!h;)t.equals(c)&&(h=!0),d.push(t),t=t.getNext();if(1>d.length)return!1;for(t=e.getParents(!0),c=0;c<t.length;c++)if(t[c].getName&&l[t[c].getName()]){e=t[c];break}t=o.isIndent?1:-1,c=d[0],d=d[d.length-1];var f,m=(h=CKEDITOR.plugins.list.listToArray(e,r))[d.getCustomData("listarray_index")].indent;for(c=c.getCustomData("listarray_index");c<=d.getCustomData("listarray_index");c++)if(h[c].indent+=t,0<t){for(var E=h[c].parent,T=c-1;0<=T;T--)if(h[T].indent===t){E=h[T].parent;break}h[c].parent=new CKEDITOR.dom.element(E.getName(),E.getDocument())}for(c=d.getCustomData("listarray_index")+1;c<h.length&&h[c].indent>m;c++)h[c].indent+=t;if(t=CKEDITOR.plugins.list.arrayToList(h,r,null,a.config.enterMode,e.getDirection()),!o.isIndent&&(f=e.getParent())&&f.is("li")){var p,u=[];for(c=(d=t.listNode.getChildren()).count()-1;0<=c;c--)(p=d.getItem(c))&&p.is&&p.is("li")&&u.push(p)}if(t&&t.listNode.replace(e),u&&u.length)for(c=0;c<u.length;c++){for(p=e=u[c];(p=p.getNext())&&p.is&&p.getName()in l;)CKEDITOR.env.needsNbspFiller&&!e.getFirst(b)&&e.append(n.document.createText(" ")),e.append(p);e.insertAfter(f)}return t&&a.fire("contentDomInvalidated"),!0}for(var n,o=this,r=this.database,l=this.context,c=((c=a.getSelection())&&c.getRanges()).createIterator();n=c.getNextRange();){for(var u=n.getCommonAncestor();u&&(u.type!=CKEDITOR.NODE_ELEMENT||!l[u.getName()]);){if(a.editable().equals(u)){u=!1;break}u=u.getParent()}if(u||(u=n.startPath().contains(l))&&n.setEndAt(u,CKEDITOR.POSITION_BEFORE_END),!u){var p=n.getEnclosedNode();p&&p.type==CKEDITOR.NODE_ELEMENT&&p.getName()in l&&(n.setStartAt(p,CKEDITOR.POSITION_AFTER_START),n.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),u=p)}if(u&&n.startContainer.type==CKEDITOR.NODE_ELEMENT&&n.startContainer.getName()in l&&((p=new CKEDITOR.dom.walker(n)).evaluator=e,n.startContainer=p.next()),u&&n.endContainer.type==CKEDITOR.NODE_ELEMENT&&n.endContainer.getName()in l&&((p=new CKEDITOR.dom.walker(n)).evaluator=e,n.endContainer=p.previous()),u)return t(u)}return 0}function e(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.is("li")}function b(a){return t(a)&&n(a)}var t=CKEDITOR.dom.walker.whitespaces(!0),n=CKEDITOR.dom.walker.bookmark(!1,!0),o=CKEDITOR.TRISTATE_DISABLED,r=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(b){function e(b){t.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],b.on("key",(function(a){var e=b.elementPath();if("wysiwyg"==b.mode&&a.data.keyCode==this.indentKey&&e){var t=this.getContext(e);!t||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,e,t)||(b.execCommand(this.relatedGlobal),a.cancel())}}),this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(a,b){var e=this.getContext(b),t=CKEDITOR.plugins.indentList.firstItemInPath(this.context,b,e);return e&&this.isIndent&&!t?r:o}:function(a,b){return!this.getContext(b)||this.isIndent?o:r},exec:CKEDITOR.tools.bind(a,this)}}var t=CKEDITOR.plugins.indent;t.registerCommands(b,{indentlist:new e(b,"indentlist",!0),outdentlist:new e(b,"outdentlist")}),CKEDITOR.tools.extend(e.prototype,t.specificDefinition.prototype,{context:{ol:1,ul:1}})}}),CKEDITOR.plugins.indentList={},CKEDITOR.plugins.indentList.firstItemInPath=function(a,b,t){var n=b.contains(e);return t||(t=b.contains(a)),t&&n&&n.equals(t.getFirst(e))}}(),function(){function a(a,b,e,t){for(var n=CKEDITOR.plugins.list.listToArray(b.root,e),g=[],o=0;o<b.contents.length;o++)(d=(d=b.contents[o]).getAscendant("li",!0))&&!d.getCustomData("list_item_processed")&&(g.push(d),CKEDITOR.dom.element.setMarker(e,d,"list_item_processed",!0));var r,l,c,d=b.root.getDocument();for(o=0;o<g.length;o++){var h=g[o].getCustomData("listarray_index");(r=n[h].parent).is(this.type)||(l=d.createElement(this.type),r.copyAttributes(l,{start:1,type:1}),l.removeStyle("list-style-type"),n[h].parent=l)}for(n=(e=CKEDITOR.plugins.list.arrayToList(n,e,null,a.config.enterMode)).listNode.getChildCount(),o=0;o<n&&(c=e.listNode.getChild(o));o++)c.getName()==this.type&&t.push(c);e.listNode.replace(b.root),a.fire("contentDomInvalidated")}function e(a,b,e){var t,n,o=b.contents,r=b.root.getDocument(),g=[];if(1==o.length&&o[0].equals(b.root)){var l=r.createElement("div");o[0].moveChildren&&o[0].moveChildren(l),o[0].append(l),o[0]=l}for(b=b.contents[0].getParent(),l=0;l<o.length;l++)b=b.getCommonAncestor(o[l].getParent());for(a=void 0===(a=a.config.useComputedState)||a,l=0;l<o.length;l++)for(var c,d=o[l];c=d.getParent();){if(c.equals(b)){g.push(d),!n&&d.getDirection()&&(n=1),d=d.getDirection(a),null!==t&&(t=t&&t!=d?null:d);break}d=c}if(!(1>g.length)){for(o=g[g.length-1].getNext(),l=r.createElement(this.type),e.push(l);g.length;)e=g.shift(),a=r.createElement("li"),(d=e).is("pre")||u.test(d.getName())||"false"==d.getAttribute("contenteditable")?e.appendTo(a):(e.copyAttributes(a),t&&e.getDirection()&&(a.removeStyle("direction"),a.removeAttribute("dir")),e.moveChildren(a),e.remove()),a.appendTo(l);t&&n&&l.setAttribute("dir",t),o?l.insertBefore(o):l.appendTo(b)}}function b(a,b,e){function t(e){!(l=d[e?"getFirst":"getLast"]())||l.is&&l.isBlockBoundary()||!(c=b.root[e?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||c.is&&c.isBlockBoundary({br:1})||a.document.createElement("br")[e?"insertBefore":"insertAfter"](l)}for(var n=CKEDITOR.plugins.list.listToArray(b.root,e),g=[],o=0;o<b.contents.length;o++){var r=b.contents[o];(r=r.getAscendant("li",!0))&&!r.getCustomData("list_item_processed")&&(g.push(r),CKEDITOR.dom.element.setMarker(e,r,"list_item_processed",!0))}for(r=null,o=0;o<g.length;o++)n[r=g[o].getCustomData("listarray_index")].indent=-1;for(o=r+1;o<n.length;o++)if(n[o].indent>n[o-1].indent+1){for(g=n[o-1].indent+1-n[o].indent,r=n[o].indent;n[o]&&n[o].indent>=r;)n[o].indent+=g,o++;o--}var l,c,d=CKEDITOR.plugins.list.arrayToList(n,e,null,a.config.enterMode,b.root.getAttribute("dir")).listNode;t(!0),t(),d.replace(b.root),a.fire("contentDomInvalidated")}function t(a,b){this.name=a,this.context=this.type=b,this.allowedContent=b+" li",this.requiredContent=b}function n(a,b,e,t){for(var n,g;n=a[t?"getLast":"getFirst"](p);)(g=n.getDirection(1))!==b.getDirection(1)&&n.setAttribute("dir",g),n.remove(),e?n[t?"insertBefore":"insertAfter"](e):b.append(n,t),e=n}function o(a){function b(e){var t=a[e?"getPrevious":"getNext"](q);t&&t.type==CKEDITOR.NODE_ELEMENT&&t.is(a.getName())&&(n(a,t,null,!e),a.remove(),a=t)}b(),b(1)}function r(a){return a.type==CKEDITOR.NODE_ELEMENT&&(a.getName()in CKEDITOR.dtd.$block||a.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[a.getName()]["#"]}function g(a,b,e){a.fire("saveSnapshot"),e.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var t=e.extractContents();b.trim(!1,!0);var g=b.createBookmark(),r=(c=new CKEDITOR.dom.elementPath(b.startContainer)).block,c=c.lastElement.getAscendant("li",1)||r,d=(h=new CKEDITOR.dom.elementPath(e.startContainer)).contains(CKEDITOR.dtd.$listItem),h=h.contains(CKEDITOR.dtd.$list);for(r?(r=r.getBogus())&&r.remove():h&&(r=h.getPrevious(q))&&f(r)&&r.remove(),(r=t.getLast())&&r.type==CKEDITOR.NODE_ELEMENT&&r.is("br")&&r.remove(),(r=b.startContainer.getChild(b.startOffset))?t.insertBefore(r):b.startContainer.append(t),d&&(t=l(d))&&(c.contains(d)?(n(t,d.getParent(),d),t.remove()):c.append(t));e.checkStartOfBlock()&&e.checkEndOfBlock()&&(t=(h=e.startPath()).block);)t.is("li")&&(c=t.getParent(),t.equals(c.getLast(q))&&t.equals(c.getFirst(q))&&(t=c)),e.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START),t.remove();e=e.clone(),t=a.editable(),e.setEndAt(t,CKEDITOR.POSITION_BEFORE_END),(e=new CKEDITOR.dom.walker(e)).evaluator=function(a){return q(a)&&!f(a)},(e=e.next())&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$list&&o(e),b.moveToBookmark(g),b.select(),a.fire("saveSnapshot")}function l(a){return(a=a.getLast(q))&&a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in c?a:null}var c={ol:1,ul:1},d=CKEDITOR.dom.walker.whitespaces(),h=CKEDITOR.dom.walker.bookmark(),q=function(a){return!(d(a)||h(a))},f=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(a,b,e,t,n){if(!c[a.getName()])return[];t||(t=0),e||(e=[]);for(var g=0,o=a.getChildCount();g<o;g++){var r=a.getChild(g);if(r.type==CKEDITOR.NODE_ELEMENT&&r.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(r,b,e,t+1),"li"==r.$.nodeName.toLowerCase()){var l={parent:a,indent:t,element:r,contents:[]};n?l.grandparent=n:(l.grandparent=a.getParent(),l.grandparent&&"li"==l.grandparent.$.nodeName.toLowerCase()&&(l.grandparent=l.grandparent.getParent())),b&&CKEDITOR.dom.element.setMarker(b,r,"listarray_index",e.length),e.push(l);for(var q,d=0,h=r.getChildCount();d<h;d++)(q=r.getChild(d)).type==CKEDITOR.NODE_ELEMENT&&c[q.getName()]?CKEDITOR.plugins.list.listToArray(q,b,e,t+1,l.grandparent):l.contents.push(q)}}return e},arrayToList:function(a,b,e,t,n){if(e||(e=0),!a||a.length<e+1)return null;for(var g,o,r,l=a[e].parent.getDocument(),d=new CKEDITOR.dom.documentFragment(l),f=null,m=e,u=Math.max(a[e].indent,0),p=null,E=t==CKEDITOR.ENTER_P?"p":"div";;){var T=a[m];if(g=T.grandparent,o=T.element.getDirection(1),T.indent==u){for(f&&a[m].parent.getName()==f.getName()||(f=a[m].parent.clone(!1,1),n&&f.setAttribute("dir",n),d.append(f)),p=f.append(T.element.clone(0,1)),o!=f.getDirection(1)&&p.setAttribute("dir",o),g=0;g<T.contents.length;g++)p.append(T.contents[g].clone(1,1));m++}else if(T.indent==Math.max(u,0)+1)T=a[m-1].element.getDirection(1),m=CKEDITOR.plugins.list.arrayToList(a,null,m,t,T!=o?o:null),!p.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=l.$.documentMode&&p.append(l.createText(" ")),p.append(m.listNode),m=m.nextIndex;else{if(-1!=T.indent||e||!g)return null;c[g.getName()]?(p=T.element.clone(!1,!0),o!=g.getDirection(1)&&p.setAttribute("dir",o)):p=new CKEDITOR.dom.documentFragment(l),f=g.getDirection(1)!=o;var C,I,O=T.element,D=O.getAttribute("class"),R=O.getAttribute("style"),v=p.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(t!=CKEDITOR.ENTER_BR||f||R||D),y=T.contents.length;for(g=0;g<y;g++)if(C=T.contents[g],h(C)&&1<y)v?I=C.clone(1,1):p.append(C.clone(1,1));else if(C.type==CKEDITOR.NODE_ELEMENT&&C.isBlockBoundary()){f&&!C.getDirection()&&C.setAttribute("dir",o),r=C;var K=O.getAttribute("style");K&&r.setAttribute("style",K.replace(/([^;])$/,"$1;")+(r.getAttribute("style")||"")),D&&C.addClass(D),r=null,I&&(p.append(I),I=null),p.append(C.clone(1,1))}else v?(r||(r=l.createElement(E),p.append(r),f&&r.setAttribute("dir",o)),R&&r.setAttribute("style",R),D&&r.setAttribute("class",D),I&&(r.append(I),I=null),r.append(C.clone(1,1))):p.append(C.clone(1,1));I&&((r||p).append(I),I=null),p.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&m!=a.length-1&&(CKEDITOR.env.needsBrFiller&&(o=p.getLast())&&o.type==CKEDITOR.NODE_ELEMENT&&o.is("br")&&o.remove(),(o=p.getLast(q))&&o.type==CKEDITOR.NODE_ELEMENT&&o.is(CKEDITOR.dtd.$block)||p.append(l.createElement("br"))),"div"!=(o=p.$.nodeName.toLowerCase())&&"p"!=o||p.appendBogus(),d.append(p),f=null,m++}if(r=null,a.length<=m||Math.max(a[m].indent,0)<u)break}if(b)for(a=d.getFirst();a;){if(a.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(b,a),a.getName()in CKEDITOR.dtd.$listItem&&(l=n=t=void 0,t=(e=a).getDirection()))){for(n=e.getParent();n&&!(l=n.getDirection());)n=n.getParent();t==l&&e.removeAttribute("dir")}a=a.getNextSourceNode()}return{listNode:d,nextIndex:m}}};var u=/^h[1-6]$/,p=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);t.prototype={exec:function(t){function n(a){return c[a.root.getName()]&&!function(a,b){return CKEDITOR.tools.array.filter(a.getChildren().toArray(),(function(a){return-1===CKEDITOR.tools.array.indexOf(b,a.type)})).length}(a.root,[CKEDITOR.NODE_COMMENT])}function g(a){var b=!0;return 0!==a.getChildCount()&&(a.forEach((function(a){if(a.type!==CKEDITOR.NODE_COMMENT)return b=!1}),null,!0),b)}this.refresh(t,t.elementPath());var r=t.config,l=t.getSelection(),d=l&&l.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF)if((h=t.editable()).getFirst(q)){var p=1==d.length&&d[0];(r=p&&p.getEnclosedNode())&&r.is&&this.type==r.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else r.enterMode==CKEDITOR.ENTER_BR?h.appendBogus():d[0].fixBlock(1,r.enterMode==CKEDITOR.ENTER_P?"p":"div"),l.selectRanges(d);r=l.createBookmarks(!0);for(var h=[],u={},f=(d=d.createIterator(),0);(p=d.getNextRange())&&++f;){var m=p.getBoundaryNodes(),E=m.startNode,T=m.endNode;for(E.type==CKEDITOR.NODE_ELEMENT&&"td"==E.getName()&&p.setStartAt(m.startNode,CKEDITOR.POSITION_AFTER_START),T.type==CKEDITOR.NODE_ELEMENT&&"td"==T.getName()&&p.setEndAt(m.endNode,CKEDITOR.POSITION_BEFORE_END),(p=p.createIterator()).forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;m=p.getNextParagraph();)if(!m.getCustomData("list_block")&&!g(m)){CKEDITOR.dom.element.setMarker(u,m,"list_block",1),E=(I=t.elementPath(m)).elements,T=0;for(var C,I=I.blockLimit,O=E.length-1;0<=O&&(C=E[O]);O--)if(c[C.getName()]&&I.contains(C)){I.removeCustomData("list_group_object_"+f),(E=C.getCustomData("list_group_object"))?E.contents.push(m):(E={root:C,contents:[m]},h.push(E),CKEDITOR.dom.element.setMarker(u,C,"list_group_object",E)),T=1;break}T||((T=I).getCustomData("list_group_object_"+f)?T.getCustomData("list_group_object_"+f).contents.push(m):(E={root:T,contents:[m]},CKEDITOR.dom.element.setMarker(u,T,"list_group_object_"+f,E),h.push(E)))}}for(C=[];0<h.length;)E=h.shift(),this.state==CKEDITOR.TRISTATE_OFF?n(E)||(c[E.root.getName()]?a.call(this,t,E,u,C):e.call(this,t,E,C)):this.state==CKEDITOR.TRISTATE_ON&&c[E.root.getName()]&&!n(E)&&b.call(this,t,E,u);for(O=0;O<C.length;O++)o(C[O]);CKEDITOR.dom.element.clearAllMarkers(u),l.selectBookmarks(r),t.focus()},refresh:function(a,b){var e=b.contains(c,1),t=b.blockLimit||b.root;e&&t.contains(e)?this.setState(e.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(a){a.blockless||(a.addCommand("numberedlist",new t("numberedlist","ol")),a.addCommand("bulletedlist",new t("bulletedlist","ul")),a.ui.addButton&&(a.ui.addButton("NumberedList",{label:a.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),a.ui.addButton("BulletedList",{label:a.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),a.on("key",(function(b){var e,t=b.data.domEvent.getKey();if("wysiwyg"==a.mode&&t in{8:1,46:1}){var n=a.getSelection().getRanges()[0],o=n&&n.startPath();if(n&&n.collapsed){var u,d=8==t,h=a.editable(),p=new CKEDITOR.dom.walker(n.clone());if(p.evaluator=function(a){return q(a)&&!f(a)},p.guard=function(a,b){return!(b&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("table"))},t=n.clone(),d)if((u=o.contains(c))&&n.checkBoundaryOfElement(u,CKEDITOR.START)&&(u=u.getParent())&&u.is("li")&&(u=l(u))?(e=u,u=u.getPrevious(q),t.moveToPosition(u&&f(u)?u:e,CKEDITOR.POSITION_BEFORE_START)):(p.range.setStartAt(h,CKEDITOR.POSITION_AFTER_START),p.range.setEnd(n.startContainer,n.startOffset),(u=p.previous())&&u.type==CKEDITOR.NODE_ELEMENT&&(u.getName()in c||u.is("li"))&&(u.is("li")||(p.range.selectNodeContents(u),p.reset(),p.evaluator=r,u=p.previous()),e=u,t.moveToElementEditEnd(e),t.moveToPosition(t.endPath().block,CKEDITOR.POSITION_BEFORE_END))),e)g(a,t,n),b.cancel();else{var m=o.contains(c);m&&n.checkBoundaryOfElement(m,CKEDITOR.START)&&(e=m.getFirst(q),n.checkBoundaryOfElement(e,CKEDITOR.START)&&(u=m.getPrevious(q),l(e)?u&&(n.moveToElementEditEnd(u),n.select()):a.execCommand("outdent"),b.cancel()))}else if(e=o.contains("li")){if(p.range.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),d=(h=e.getLast(q))&&r(h)?h:e,o=0,(u=p.next())&&u.type==CKEDITOR.NODE_ELEMENT&&u.getName()in c&&u.equals(h)?(o=1,u=p.next()):n.checkBoundaryOfElement(d,CKEDITOR.END)&&(o=2),o&&u){if((n=n.clone()).moveToElementEditStart(u),1==o&&(t.optimize(),!t.startContainer.equals(e))){for(e=t.startContainer;e.is(CKEDITOR.dtd.$inline);)m=e,e=e.getParent();m&&t.moveToPosition(m,CKEDITOR.POSITION_AFTER_END)}2==o&&(t.moveToPosition(t.endPath().block,CKEDITOR.POSITION_BEFORE_END),n.endPath().block&&n.moveToPosition(n.endPath().block,CKEDITOR.POSITION_AFTER_START)),g(a,t,n),b.cancel()}}else p.range.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),(u=p.next())&&u.type==CKEDITOR.NODE_ELEMENT&&u.is(c)&&(u=u.getFirst(q),o.block&&n.checkStartOfBlock()&&n.checkEndOfBlock()?(o.block.remove(),n.moveToElementEditStart(u),n.select()):l(u)?(n.moveToElementEditStart(u),n.select()):((n=n.clone()).moveToElementEditStart(u),g(a,t,n)),b.cancel());setTimeout((function(){a.selectionChange(1)}))}}})))}})}(),function(){function a(a,b,e){if(e=a.config.forceEnterMode||e,"wysiwyg"==a.mode){b||(b=a.activeEnterMode);var t=a.elementPath();t&&!t.isContextFor("p")&&(b=CKEDITOR.ENTER_BR,e=1),a.fire("saveSnapshot"),b==CKEDITOR.ENTER_BR?n(a,b,null,e):g(a,b,null,e),a.fire("saveSnapshot")}}function e(a){for(var b=(a=a.getSelection().getRanges(!0)).length-1;0<b;b--)a[b].deleteContents();return a[0]}CKEDITOR.plugins.add("enterkey",{init:function(b){b.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(b){a(b)}}),b.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(b){a(b,b.activeShiftEnterMode,1)}}),b.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var t,n,g,o,r=CKEDITOR.dom.walker.whitespaces(),l=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(a,t,g,c){if(g=g||e(a)){var d,u=(g=function(a){var b=a.startContainer.getAscendant((function(a){return a.type==CKEDITOR.NODE_ELEMENT&&"true"==a.getAttribute("contenteditable")}),!0);return a.root.equals(b)?a:((b=new CKEDITOR.dom.range(b)).moveToRange(a),b)}(g)).document,p=g.checkStartOfBlock(),h=g.checkEndOfBlock(),f=a.elementPath(g.startContainer),m=f.block,E=t==CKEDITOR.ENTER_DIV?"div":"p";if(m&&p&&h){if((p=m.getParent()).is("li")&&1<p.getChildCount())return u=new CKEDITOR.dom.element("li"),d=a.createRange(),u.insertAfter(p),m.remove(),d.setStart(u,0),void a.getSelection().selectRanges([d]);if(m.is("li")||m.getParent().is("li")){m.is("li")||(p=(m=m.getParent()).getParent()),d=p.getParent(),g=!m.hasPrevious();var T=!m.hasNext(),C=(E=(c=a.getSelection()).createBookmarks(),m.getDirection(1)),I=(h=m.getAttribute("class"),m.getAttribute("style")),O=d.getDirection(1)!=C;if(a=a.enterMode!=CKEDITOR.ENTER_BR||O||I||h,d.is("li"))g||T?(g&&T&&p.remove(),m[T?"insertAfter":"insertBefore"](d)):m.breakParent(d);else{if(a)f.block.is("li")?(d=u.createElement(t==CKEDITOR.ENTER_P?"p":"div"),O&&d.setAttribute("dir",C),I&&d.setAttribute("style",I),h&&d.setAttribute("class",h),m.moveChildren(d)):d=f.block,g||T?d[g?"insertBefore":"insertAfter"](p):(m.breakParent(p),d.insertAfter(p));else if(m.appendBogus(!0),g||T)for(;u=m[g?"getFirst":"getLast"]();)u[g?"insertBefore":"insertAfter"](p);else for(m.breakParent(p);u=m.getLast();)u.insertAfter(p);m.remove()}return void c.selectBookmarks(E)}if(m&&m.getParent().is("blockquote"))return m.breakParent(m.getParent()),m.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||m.getPrevious().remove(),m.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||m.getNext().remove(),g.moveToElementEditStart(m),void g.select()}else if(m&&m.is("pre")&&!h)return void n(a,t,g,c);if(I=g.splitBlock(E)){if(a=I.previousBlock,m=I.nextBlock,p=I.wasStartOfBlock,h=I.wasEndOfBlock,m?(T=m.getParent()).is("li")&&(m.breakParent(T),m.move(m.getNext(),1)):a&&(T=a.getParent())&&T.is("li")&&(a.breakParent(T),T=a.getNext(),g.moveToElementEditStart(T),a.move(a.getPrevious())),p||h)if(function(a){var b;return a!==CKEDITOR.ENTER_BR&&-1!==CKEDITOR.tools.indexOf(["td","th"],f.lastElement.getName())&&1===f.lastElement.getChildCount()&&((b=(a=f.lastElement.getChild(0).clone(!0)).getBogus())&&b.remove(),!a.getText().length)}(t))g.moveToElementEditStart(g.getTouchedStartNode());else{if(a?(a.is("li")||!o.test(a.getName())&&!a.is("pre"))&&(d=a.clone()):m&&(d=m.clone()),d?c&&!d.is("li")&&d.renameNode(E):T&&T.is("li")?d=T:(d=u.createElement(E),a&&(C=a.getDirection())&&d.setAttribute("dir",C)),u=I.elementPath)for(t=0,c=u.elements.length;t<c&&!(E=u.elements[t]).equals(u.block)&&!E.equals(u.blockLimit);t++)CKEDITOR.dtd.$removeEmpty[E.getName()]&&(E=E.clone(),d.moveChildren(E),d.append(E));d.appendBogus(),d.getParent()||g.insertNode(d),d.is("li")&&d.removeAttribute("value"),!CKEDITOR.env.ie||!p||h&&a.getChildCount()||(g.moveToElementEditStart(h?a:d),g.select()),g.moveToElementEditStart(p&&!h?m:d)}else m.is("li")&&((d=g.clone()).selectNodeContents(m),(d=new CKEDITOR.dom.walker(d)).evaluator=function(a){return!(l(a)||r(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in CKEDITOR.dtd.$inline&&!(a.getName()in CKEDITOR.dtd.$empty))},(T=d.next())&&T.type==CKEDITOR.NODE_ELEMENT&&T.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?u.createElement("br"):u.createText(" ")).insertBefore(T)),m&&g.moveToElementEditStart(m);g.select(),g.scrollIntoView()}}},enterBr:function(a,b,t,n){if(t=t||e(a)){var r=t.document,l=t.checkEndOfBlock(),p=new CKEDITOR.dom.elementPath(a.getSelection().getStartElement()),c=p.block,d=c&&p.block.getName();n||"li"!=d?(!n&&l&&o.test(d)?(l=c.getDirection())?((r=r.createElement("div")).setAttribute("dir",l),r.insertAfter(c),t.setStart(r,0)):(r.createElement("br").insertAfter(c),CKEDITOR.env.gecko&&r.createText("").insertAfter(c),t.setStartAt(c.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(a="pre"==d&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?r.createText("\r"):r.createElement("br"),t.deleteContents(),t.insertNode(a),CKEDITOR.env.needsBrFiller?(r.createText("\ufeff").insertAfter(a),l&&(c||p.blockLimit).appendBogus(),a.getNext().$.nodeValue="",t.setStartAt(a.getNext(),CKEDITOR.POSITION_AFTER_START)):t.setStartAt(a,CKEDITOR.POSITION_AFTER_END)),t.collapse(!0),t.select(),t.scrollIntoView()):g(a,b,t,n)}}},t=CKEDITOR.plugins.enterkey,n=t.enterBr,g=t.enterBlock,o=/^h[1-6]$/}(),function(){function a(a,b){var e={},t=[],n={nbsp:" ",shy:"­",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'};if(a=(a=a.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,(function(a,o){var g=b?"&"+o+";":n[o];return e[g]=b?n[o]:"&"+o+";",t.push(g),""}))).replace(/,$/,""),!b&&a){a=a.split(",");var g,o=document.createElement("div");for(o.innerHTML="&"+a.join(";&")+";",g=o.innerHTML,o=null,o=0;o<g.length;o++){var r=g.charAt(o);e[r]="&"+a[o]+";",t.push(r)}}return e.regex=t.join(b?"|":""),e}CKEDITOR.plugins.add("entities",{afterInit:function(e){function b(a){return l[a]}function t(a){return"force"!=n.entities_processNumerical&&r[a]?r[a]:"&#"+a.charCodeAt(0)+";"}var n=e.config;if(e=(e=e.dataProcessor)&&e.htmlFilter){var o=[];!1!==n.basicEntities&&o.push("nbsp,gt,lt,amp"),n.entities&&(o.length&&o.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),n.entities_latin&&o.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),n.entities_greek&&o.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),n.entities_additional&&o.push(n.entities_additional));var r=a(o.join(",")),g=r.regex?"["+r.regex+"]":"a^";delete r.regex,n.entities&&n.entities_processNumerical&&(g="[^ -~]|"+g),g=new RegExp(g,"g");var l=a("nbsp,gt,lt,amp,shy",!0),c=new RegExp(l.regex,"g");e.addRules({text:function(a){return a.replace(c,b).replace(g,t)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(a,e,b,t){b=b||"70%","string"==typeof(e=e||"80%")&&1<e.length&&"%"==e.substr(e.length-1,1)&&(e=parseInt(window.screen.width*parseInt(e,10)/100,10)),"string"==typeof b&&1<b.length&&"%"==b.substr(b.length-1,1)&&(b=parseInt(window.screen.height*parseInt(b,10)/100,10)),640>e&&(e=640),420>b&&(b=420);var n=parseInt((window.screen.height-b)/2,10),o=parseInt((window.screen.width-e)/2,10);t=(t||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+e+",height="+b+",top="+n+",left="+o;var r=window.open("",null,t,!0);if(!r)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(r.moveTo(o,n),r.resizeTo(e,b)),r.focus(),r.location.href=a}catch(e){window.open(a,null,t,!0)}return!0}}),function(){function a(a){this.editor=a,this.loaders=[]}function e(a,e,t){var g=a.config.fileTools_defaultFileName;this.editor=a,this.lang=a.lang,"string"==typeof e?(this.data=e,this.file=b(this.data),this.loaded=this.total=this.file.size):(this.data=null,this.file=e,this.total=this.file.size,this.loaded=0),t?this.fileName=t:this.file.name?this.fileName=this.file.name:(a=this.file.type.split("/"),g&&(a[0]=g),this.fileName=a.join(".")),this.uploaded=0,this.responseData=this.uploadTotal=null,this.status="created",this.abort=function(){this.changeStatus("abort")}}function b(a){var b=a.match(t)[1];a=a.replace(t,""),a=atob(a);var g,e,n,o,r=[];for(g=0;g<a.length;g+=512){for(e=a.slice(g,g+512),n=Array(e.length),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);e=new Uint8Array(n),r.push(e)}return new Blob(r,{type:b})}CKEDITOR.plugins.add("filetools",{beforeInit:function(b){b.uploadRepository=new a(b),b.on("fileUploadRequest",(function(a){var b=a.data.fileLoader;b.xhr.open("POST",b.uploadUrl,!0),a.data.requestData.upload={file:b.file,name:b.fileName}}),null,null,5),b.on("fileUploadRequest",(function(a){var e=a.data.fileLoader,g=new FormData;a=a.data.requestData;var t,n,o=b.config.fileTools_requestHeaders;for(n in a){var r=a[n];"object"==typeof r&&r.file?g.append(n,r.file,r.name):g.append(n,r)}if(g.append("ckCsrfToken",CKEDITOR.tools.getCsrfToken()),o)for(t in o)e.xhr.setRequestHeader(t,o[t]);e.xhr.send(g)}),null,null,999),b.on("fileUploadResponse",(function(a){var b=a.data.fileLoader,e=b.xhr,t=a.data;try{var n=JSON.parse(e.responseText);if(n.error&&n.error.message&&(t.message=n.error.message),n.uploaded)for(var o in n)t[o]=n[o];else a.cancel()}catch(n){t.message=b.lang.filetools.responseError,CKEDITOR.warn("filetools-response-error",{responseText:e.responseText}),a.cancel()}}),null,null,999)}}),a.prototype={create:function(a,b,t){t=t||e;var g=this.loaders.length;return(a=new t(this.editor,a,b)).id=g,this.loaders[g]=a,this.fire("instanceCreated",a),a},isFinished:function(){for(var a=0;a<this.loaders.length;++a)if(!this.loaders[a].isFinished())return!1;return!0}},e.prototype={loadAndUpload:function(a,b){var e=this;this.once("loaded",(function(g){g.cancel(),e.once("update",(function(a){a.cancel()}),null,null,0),e.upload(a,b)}),null,null,0),this.load()},load:function(){var a=this,b=this.reader=new FileReader;a.changeStatus("loading"),this.abort=function(){a.reader.abort()},b.onabort=function(){a.changeStatus("abort")},b.onerror=function(){a.message=a.lang.filetools.loadError,a.changeStatus("error")},b.onprogress=function(b){a.loaded=b.loaded,a.update()},b.onload=function(){a.loaded=a.total,a.data=b.result,a.changeStatus("loaded")},b.readAsDataURL(this.file)},upload:function(a,b){var e=b||{};a?(this.uploadUrl=a,this.xhr=new XMLHttpRequest,this.attachRequestListeners(),this.editor.fire("fileUploadRequest",{fileLoader:this,requestData:e})&&this.changeStatus("uploading")):(this.message=this.lang.filetools.noUrlError,this.changeStatus("error"))},attachRequestListeners:function(){function a(){"error"!=e.status&&(e.message=e.lang.filetools.networkError,e.changeStatus("error"))}function b(){"abort"!=e.status&&e.changeStatus("abort")}var e=this,g=this.xhr;e.abort=function(){g.abort(),b()},g.onerror=a,g.onabort=b,g.upload?(g.upload.onprogress=function(a){a.lengthComputable&&(e.uploadTotal||(e.uploadTotal=a.total),e.uploaded=a.loaded,e.update())},g.upload.onerror=a,g.upload.onabort=b):(e.uploadTotal=e.total,e.update()),g.onload=function(){if(e.update(),"abort"!=e.status)if(e.uploaded=e.uploadTotal,200>g.status||299<g.status)e.message=e.lang.filetools["httpError"+g.status],e.message||(e.message=e.lang.filetools.httpError.replace("%1",g.status)),e.changeStatus("error");else{for(var a={fileLoader:e},b=["message","fileName","url"],t=e.editor.fire("fileUploadResponse",a),n=0;n<b.length;n++){var o=b[n];"string"==typeof a[o]&&(e[o]=a[o])}e.responseData=a,delete e.responseData.fileLoader,!1===t?e.changeStatus("error"):e.changeStatus("uploaded")}}},changeStatus:function(a){this.status=a,"error"!=a&&"abort"!=a&&"loaded"!=a&&"uploaded"!=a||(this.abort=function(){}),this.fire(a),this.update()},update:function(){this.fire("update")},isFinished:function(){return!!this.status.match(/^(?:loaded|uploaded|error|abort)$/)}},CKEDITOR.event.implementOn(a.prototype),CKEDITOR.event.implementOn(e.prototype);var t=/^data:(\S*?);base64,/;CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{uploadRepository:a,fileLoader:e,getUploadUrl:function(a,b){var e=CKEDITOR.tools.capitalize;return b&&a[b+"UploadUrl"]?a[b+"UploadUrl"]:a.uploadUrl?a.uploadUrl:b&&a["filebrowser"+e(b,1)+"UploadUrl"]?a["filebrowser"+e(b,1)+"UploadUrl"]+"&responseType=json":a.filebrowserUploadUrl?a.filebrowserUploadUrl+"&responseType=json":null},isTypeSupported:function(a,b){return!!a.type.match(b)},isFileUploadSupported:"function"==typeof FileReader&&"function"==typeof(new FileReader).readAsDataURL&&"function"==typeof FormData&&"function"==typeof(new FormData).append&&"function"==typeof XMLHttpRequest&&"function"==typeof Blob})}(),function(){function a(a,b){var e=[];if(!b)return a;for(var t in b)e.push(t+"="+encodeURIComponent(b[t]));return a+(-1!=a.indexOf("?")?"&":"?")+e.join("&")}function e(b){return!b.match(/command=QuickUpload/)||b.match(/(\?|&)responseType=json/)?b:a(b,{responseType:"json"})}function b(a){return(a+="").charAt(0).toUpperCase()+a.substr(1)}function t(){var e=(n=this.getDialog()).getParentEditor();e._.filebrowserSe=this;var t=e.config["filebrowser"+b(n.getName())+"WindowWidth"]||e.config.filebrowserWindowWidth||"80%",n=e.config["filebrowser"+b(n.getName())+"WindowHeight"]||e.config.filebrowserWindowHeight||"70%",g=this.filebrowser.params||{};g.CKEditor=e.name,g.CKEditorFuncNum=e._.filebrowserFn,g.langCode||(g.langCode=e.langCode),g=a(this.filebrowser.url,g),e.popup(g,t,n,e.config.filebrowserWindowFeatures||e.config.fileBrowserWindowFeatures)}function n(a){var b=new CKEDITOR.dom.element(a.$.form);b&&((a=b.$.elements.ckCsrfToken)?a=new CKEDITOR.dom.element(a):((a=new CKEDITOR.dom.element("input")).setAttributes({name:"ckCsrfToken",type:"hidden"}),b.append(a)),a.setAttribute("value",CKEDITOR.tools.getCsrfToken()))}function o(){var a=this.getDialog();return a.getParentEditor()._.filebrowserSe=this,!(!a.getContentElement(this.for[0],this.for[1]).getInputElement().$.value||!a.getContentElement(this.for[0],this.for[1]).getAction())}function r(b,e,t){var n=t.params||{};n.CKEditor=b.name,n.CKEditorFuncNum=b._.filebrowserFn,n.langCode||(n.langCode=b.langCode),e.action=a(t.url,n),e.filebrowser=t}function g(a,c,h,u){if(u&&u.length)for(var p,f=u.length;f--;)if("hbox"!=(p=u[f]).type&&"vbox"!=p.type&&"fieldset"!=p.type||g(a,c,h,p.children),p.filebrowser)if("string"==typeof p.filebrowser&&(p.filebrowser={action:"fileButton"==p.type?"QuickUpload":"Browse",target:p.filebrowser}),"Browse"==p.filebrowser.action){var m=p.filebrowser.url;void 0===m&&void 0===(m=a.config["filebrowser"+b(c)+"BrowseUrl"])&&(m=a.config.filebrowserBrowseUrl),m&&(p.onClick=t,p.filebrowser.url=m,p.hidden=!1)}else if("QuickUpload"==p.filebrowser.action&&p.for&&(void 0===(m=p.filebrowser.url)&&void 0===(m=a.config["filebrowser"+b(c)+"UploadUrl"])&&(m=a.config.filebrowserUploadUrl),m)){var E=p.onClick;p.onClick=function(b){var t=b.sender,g=t.getDialog().getContentElement(this.for[0],this.for[1]).getInputElement(),r=CKEDITOR.fileTools&&CKEDITOR.fileTools.isFileUploadSupported;return(!E||!1!==E.call(t,b))&&!!o.call(t,b)&&("form"!==a.config.filebrowserUploadMethod&&r?((b=a.uploadRepository.create(g.$.files[0])).on("uploaded",(function(a){var b=a.sender.responseData;d.call(a.sender.editor,b.url,b.message)})),b.on("error",l.bind(this)),b.on("abort",l.bind(this)),b.loadAndUpload(e(m)),"xhr"):(n(g),!0))},p.filebrowser.url=m,p.hidden=!1,r(a,h.getContents(p.for[0]).get(p.for[1]),p.filebrowser)}}function l(a){var b={};try{b=JSON.parse(a.sender.xhr.response)||{}}catch(e){}this.enable(),alert(b.error?b.error.message:a.sender.message)}function c(a,b,e){if(-1!==e.indexOf(";")){e=e.split(";");for(var t=0;t<e.length;t++)if(c(a,b,e[t]))return!0;return!1}return(a=a.getContents(b).get(e).filebrowser)&&a.url}function d(a,b){var e=this._.filebrowserSe.getDialog(),t=this._.filebrowserSe.for,n=this._.filebrowserSe.filebrowser.onSelect;t&&e.getContentElement(t[0],t[1]).reset(),"function"==typeof b&&!1===b.call(this._.filebrowserSe)||n&&!1===n.call(this._.filebrowserSe,a,b)||("string"==typeof b&&b&&alert(b),a&&(e=(t=this._.filebrowserSe).getDialog(),t=t.filebrowser.target||null)&&(t=t.split(":"),(n=e.getContentElement(t[0],t[1]))&&(n.setValue(a),e.selectPage(t[0]))))}CKEDITOR.plugins.add("filebrowser",{requires:"popup,filetools",init:function(a){a._.filebrowserFn=CKEDITOR.tools.addFunction(d,a),a.on("destroy",(function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)}))}}),CKEDITOR.on("dialogDefinition",(function(a){if(a.editor.plugins.filebrowser)for(var e,b=a.data.definition,t=0;t<b.contents.length;++t)(e=b.contents[t])&&(g(a.editor,a.data.name,b,e.elements),e.hidden&&e.filebrowser&&(e.hidden=!c(b,e.id,e.filebrowser)))}))}(),function(){function a(a){var t=a.config,n=a.fire("uiSpace",{space:"top",html:""}).html,o=function(){function n(a,e,t){r.setStyle(e,b(t)),r.setStyle("position",a)}function g(a){var b=c.getDocumentPosition();switch(a){case"top":n("absolute","top",b.y-f-T);break;case"pin":n("fixed","top",I);break;case"bottom":n("absolute","top",b.y+(d.height||d.bottom-d.top)+T)}l=a}var l,c,p,d,h,f,m,E=t.floatSpaceDockedOffsetX||0,T=t.floatSpaceDockedOffsetY||0,C=t.floatSpacePinnedOffsetX||0,I=t.floatSpacePinnedOffsetY||0;return function(n){if(c=a.editable()){var I=n&&"focus"==n.name;I&&r.show(),a.fire("floatingSpaceLayout",{show:I}),r.removeStyle("left"),r.removeStyle("right"),p=r.getClientRect(),d=c.getClientRect(),h=e.getViewPaneSize(),f=p.height,m="pageXOffset"in e.$?e.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,l?(f+T<=d.top?g("top"):f+T>h.height-d.bottom?g("pin"):g("bottom"),n=h.width/2,n=t.floatSpacePreferRight?"right":0<d.left&&d.right<h.width&&d.width>p.width?"rtl"==t.contentsLangDirection?"right":"left":n-d.left>d.right-n?"left":"right",p.width>h.width?(n="left",I=0):(I="left"==n?0<d.left?d.left:0:d.right<h.width?h.width-d.right:0)+p.width>h.width&&(n="left"==n?"right":"left",I=0),r.setStyle(n,b(("pin"==l?C:E)+I+("pin"==l?0:"left"==n?m:-m)))):(l="pin",g("pin"),o(n))}}}();if(n){var g=new CKEDITOR.template('<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(a.title?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(a.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),r=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(g.output({content:n,id:a.id,langDir:a.lang.dir,langCode:a.langCode,name:a.name,style:"display:none;z-index:"+(t.baseFloatZIndex-1),topId:a.ui.spaceId("top"),voiceLabel:a.title}))),l=CKEDITOR.tools.eventsBuffer(500,o),c=CKEDITOR.tools.eventsBuffer(100,o);r.unselectable(),r.on("mousedown",(function(a){(a=a.data).getTarget().hasAscendant("a",1)||a.preventDefault()})),a.on("focus",(function(b){o(b),a.on("change",l.input),e.on("scroll",c.input),e.on("resize",c.input)})),a.on("blur",(function(){r.hide(),a.removeListener("change",l.input),e.removeListener("scroll",c.input),e.removeListener("resize",c.input)})),a.on("destroy",(function(){e.removeListener("scroll",c.input),e.removeListener("resize",c.input),r.clearCustomData(),r.remove()})),a.focusManager.hasFocus&&r.show(),a.focusManager.add(r,1)}}var e=CKEDITOR.document.getWindow(),b=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(b){b.on("loaded",(function(){a(this)}),null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var a=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),e=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" draggable="false" ondragstart="return false;" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),b=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" draggable="false" ondragstart="return false;" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),t=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(a,b){return this.addBlock(a,new CKEDITOR.ui.listBlock(this.getHolderElement(),b))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(a,b){var e=(b=b||{}).attributes||(b.attributes={});(this.multiSelect=!!b.multiSelect)&&(e["aria-multiselectable"]=!0),!e.role&&(e.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",e.role),(e=this.keys)[40]="next",e[9]="next",e[38]="prev",e[CKEDITOR.SHIFT+9]="prev",e[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(e[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var b=a.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(b),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction((function(a){var b=this.toggle(a);this.onClick&&this.onClick(a,b)}),this)),this._.click}},proto:{add:function(a,b,n){var g=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[a]=g,a={id:g,val:CKEDITOR.tools.htmlEncodeAttr(a).replace(t,"\\'"),onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(n||a),text:b||a},this._.pendingList.push(e.output(a))},startGroup:function(a){this._.close();var e=CKEDITOR.tools.getNextId();this._.groups[a]=e,this._.pendingHtml.push(b.output({id:e,label:a}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(a){var b=this.isMarked(a);return b?this.unmark(a):this.mark(a),!b},hideGroup:function(a){var b=(a=this.element.getDocument().getById(this._.groups[a]))&&a.getNext();a&&(a.setStyle("display","none"),b&&"ul"==b.getName()&&b.setStyle("display","none"))},hideItem:function(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none")},showAll:function(){var g,a=this._.items,b=this._.groups,e=this.element.getDocument();for(g in a)e.getById(a[g]).setStyle("display","");for(var t in b)g=(a=e.getById(b[t])).getNext(),a.setStyle("display",""),g&&"ul"==g.getName()&&g.setStyle("display","")},mark:function(a){this.multiSelect||this.unmarkAll(),a=this._.items[a];var b=this.element.getDocument().getById(a);b.addClass("cke_selected"),this.element.getDocument().getById(a+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(b)},markFirstDisplayed:function(){var a=this;this._.markFirstDisplayed((function(){a.multiSelect||a.unmarkAll()}))},unmark:function(a){var b=this.element.getDocument();a=this._.items[a];var e=b.getById(a);e.removeClass("cke_selected"),b.getById(a+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(e)},unmarkAll:function(){var e,a=this._.items,b=this.element.getDocument();for(e in a){var g=a[e];b.getById(g).removeClass("cke_selected"),b.getById(g+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected")},focus:function(a){this._.focusIndex=-1;var e,b=this.element.getElementsByTag("a"),g=-1;if(a){for(e=this.element.getDocument().getById(this._.items[a]).getFirst();a=b.getItem(++g);)if(a.equals(e)){this._.focusIndex=g;break}}else this.element.focus();e&&setTimeout((function(){e.focus()}),0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var a='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="listbox"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(a+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(a+=' onblur="this.style.cssText = this.style.cssText;"'),a=a+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>";var e=CKEDITOR.addTemplate("combo",a);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(a){CKEDITOR.tools.extend(this,a,{canGroup:!1,title:a.label,modes:{wysiwyg:1},editorFocus:1}),a=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=a.parent&&a.parent.getDocument()||CKEDITOR.document,a.className="cke_combopanel",a.block={multiSelect:a.multiSelect,attributes:a.attributes},a.toolbarRelated=!0,this._={panelDefinition:a,items:{},listeners:[]}},proto:{renderHtml:function(a){var e=[];return this.render(a,e),e.join("")},render:function(a,t){function n(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var e=this.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;a.readOnly&&!this.readOnly&&(e=CKEDITOR.TRISTATE_DISABLED),this.setState(e),this.setValue(""),e!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var o=CKEDITOR.env,r="cke_"+this.id,g=CKEDITOR.tools.addFunction((function(e){q&&(a.unlockSelection(1),q=0),c.execute(e)}),this),l=this,c={id:r,combo:this,focus:function(){CKEDITOR.document.getById(r).getChild(1).focus()},execute:function(e){var t=l._;if(t.state!=CKEDITOR.TRISTATE_DISABLED)if(l.createPanel(a),t.on)t.panel.hide();else{l.commit();var n=l.getValue();n?t.list.mark(n):t.list.unmarkAll(),t.panel.showBlock(l.id,new CKEDITOR.dom.element(e),4)}},clickFn:g};this._.listeners.push(a.on("activeFilterChange",n,this)),this._.listeners.push(a.on("mode",n,this)),this._.listeners.push(a.on("selectionChange",n,this)),!this.readOnly&&this._.listeners.push(a.on("readOnly",n,this));var d=CKEDITOR.tools.addFunction((function(a,b){var e=(a=new CKEDITOR.dom.event(a)).getKeystroke();switch(e){case 13:case 32:case 40:CKEDITOR.tools.callFunction(g,b);break;default:c.onkey(c,e)}a.preventDefault()})),h=CKEDITOR.tools.addFunction((function(){c.onfocus&&c.onfocus()})),q=0;return c.keyDownFn=d,o={id:r,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:o.gecko&&!o.hc?"":(this.title||"").replace("'",""),keydownFn:d,focusFn:h,clickFn:g},e.output(o,t),this.onRender&&this.onRender(),c},createPanel:function(a){if(!this._.panel){var e=this._.panelDefinition,t=this._.panelDefinition.block,n=e.parent||CKEDITOR.document.getBody(),o="cke_combopanel__"+this.name,g=new CKEDITOR.ui.floatPanel(a,n,e),r=(e=g.addListBlock(this.id,t),this);g.onShow=function(){this.element.addClass(o),r.setState(CKEDITOR.TRISTATE_ON),r._.on=1,r.editorFocus&&!a.focusManager.hasFocus&&a.focus(),r.onOpen&&r.onOpen()},g.onHide=function(e){this.element.removeClass(o),r.setState(r.modes&&r.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),r._.on=0,!e&&r.onClose&&r.onClose()},g.onEscape=function(){g.hide(1)},e.onClick=function(a,b){r.onClick&&r.onClick.call(r,a,b),g.hide()},this._.panel=g,this._.list=e,g.getBlock(this.id).onHide=function(){r._.on=0,r.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(a,e){this._.value=a;var t=this.document.getById("cke_"+this.id+"_text");t&&(a||e?t.removeClass("cke_combo_inlinelabel"):(e=this.label,t.addClass("cke_combo_inlinelabel")),t.setText(void 0!==e?e:a))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(a){this._.list.mark(a)},hideItem:function(a){this._.list.hideItem(a)},hideGroup:function(a){this._.list.hideGroup(a)},showAll:function(){this._.list.showAll()},add:function(a,e,t){this._.items[a]=t||a,this._.list.add(a,e,t)},startGroup:function(a){this._.list.startGroup(a)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(a){if(this._.state!=a){var e=this.document.getById("cke_"+this.id);e.setState(a,"cke_combo"),a==CKEDITOR.TRISTATE_DISABLED?e.setAttribute("aria-disabled",!0):e.removeAttribute("aria-disabled"),this._.state=a}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))},destroy:function(){CKEDITOR.tools.array.forEach(this._.listeners,(function(a){a.removeListener()})),this._.listeners=[]}},statics:{handler:{create:function(a){return new CKEDITOR.ui.richCombo(a)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(a,e){this.add(a,CKEDITOR.UI_RICHCOMBO,e)}}(),CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(a){if(!a.blockless){for(var e=a.config,b=a.lang.format,t=e.format_tags.split(";"),n={},o=0,r=[],g=0;g<t.length;g++){var l=t[g],c=new CKEDITOR.style(e["format_"+l]);a.filter.customConfig&&!a.filter.check(c)||(o++,n[l]=c,n[l]._.enterMode=a.config.enterMode,r.push(c))}0!==o&&a.ui.addRichCombo("Format",{label:b.label,title:b.panelTitle,toolbar:"styles,20",allowedContent:r,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(e.contentsCss),multiSelect:!1,attributes:{"aria-label":b.panelTitle}},init:function(){for(var a in this.startGroup(b.panelTitle),n){var e=b["tag_"+a];this.add(a,n[a].buildPreview(e),e)}},onClick:function(b){a.focus(),a.fire("saveSnapshot"),b=n[b];var e=a.elementPath();b.checkActive(e,a)||a.applyStyle(b),setTimeout((function(){a.fire("saveSnapshot")}),0)},onRender:function(){a.on("selectionChange",(function(b){var e=this.getValue();for(var g in b=b.data.path,this.refresh(),n)if(n[g].checkActive(b,a))return void(g!=e&&this.setValue(g,a.lang.format["tag_"+g]));this.setValue("")}),this)},onOpen:function(){for(var b in this.showAll(),n)a.activeFilter.check(n[b])||this.hideItem(b)},refresh:function(){var b=a.elementPath();if(b){if(b.isContextFor("p"))for(var e in n)if(a.activeFilter.check(n[e]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){var a={canUndo:!1,exec:function(a){var b=a.document.createElement("hr");a.insertElement(b)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(e){e.blockless||(e.addCommand("horizontalrule",a),e.ui.addButton&&e.ui.addButton("HorizontalRule",{label:e.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(a){var e=new CKEDITOR.htmlWriter;e.forceSimpleAmpersand=a.config.forceSimpleAmpersand,e.indentationChars=a.config.dataIndentationChars||"\t",a.dataProcessor.writer=e}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="\t",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var e,a=CKEDITOR.dtd;for(e in CKEDITOR.tools.extend({},a.$nonBodyContent,a.$block,a.$listItem,a.$tableContent))this.setRules(e,{indent:!a[e]["#"],breakBeforeOpen:1,breakBeforeClose:!a[e]["#"],breakAfterClose:1,needsSpace:e in a.$block&&!(e in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(a){var e=this._.rules[a];this._.afterCloser&&e&&e.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():e&&e.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",a),this._.afterCloser=0},openTagClose:function(a,e){var b=this._.rules[a];e?(this._.output.push(this.selfClosingEnd),b&&b.breakAfterClose&&(this._.needsSpace=b.needsSpace)):(this._.output.push(">"),b&&b.indent&&(this._.indentation+=this.indentationChars)),b&&b.breakAfterOpen&&this.lineBreak(),"pre"==a&&(this._.inPre=1)},attribute:function(a,e){"string"==typeof e&&(e=CKEDITOR.tools.htmlEncodeAttr(e),this.forceSimpleAmpersand&&(e=e.replace(/&amp;/g,"&"))),this._.output.push(" ",a,'="',e,'"')},closeTag:function(a){var e=this._.rules[a];e&&e.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():e&&e.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",a,">"),"pre"==a&&(this._.inPre=0),e&&e.breakAfterClose&&(this.lineBreak(),this._.needsSpace=e.needsSpace),this._.afterCloser=1},text:function(a){this._.indent&&(this.indentation(),!this._.inPre&&(a=CKEDITOR.tools.ltrim(a))),this._.output.push(a)},comment:function(a){this._.indent&&this.indentation(),this._.output.push("\x3c!--",a,"--\x3e")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0,this._.needsSpace=0},setRules:function(a,e){var b=this._.rules[a];b?CKEDITOR.tools.extend(b,e,!0):this._.rules[a]=e}}}),function(){function a(a,e){if(e||(e=a.getSelection().getSelectedElement()),e&&e.is("img")&&!e.data("cke-realelement")&&!e.isReadOnly())return e}function e(a){var e=a.getStyle("float");return"inherit"!=e&&"none"!=e||(e=0),e||(e=a.getAttribute("align")),e}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(b){if(!b.plugins.detectConflict("image",["easyimage","image2"])){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var e="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(b,"image","advanced")&&(e="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"),b.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:e,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]})),b.ui.addButton&&b.ui.addButton("Image",{label:b.lang.common.image,command:"image",toolbar:"insert,10"}),b.on("doubleclick",(function(a){var b=a.data.element;!b.is("img")||b.data("cke-realelement")||b.isReadOnly()||(a.data.dialog="image")})),b.addMenuItems&&b.addMenuItems({image:{label:b.lang.image.menu,command:"image",group:"image"}}),b.contextMenu&&b.contextMenu.addListener((function(e){if(a(b,e))return{image:CKEDITOR.TRISTATE_OFF}}))}},afterInit:function(b){function t(t){var n=b.getCommand("justify"+t);n&&("left"!=t&&"right"!=t||n.on("exec",(function(n){var g=a(b);g&&(e(g)==t?(g.removeStyle("float"),t==e(g)&&g.removeAttribute("align")):g.setStyle("float",t),n.cancel())})),n.on("refresh",(function(n){var g=a(b);g&&(g=e(g),this.setState(g==t?CKEDITOR.TRISTATE_ON:"right"==t||"left"==t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),n.cancel())})))}b.plugins.image2||(t("left"),t("right"),t("center"),t("block"))}})}(),CKEDITOR.config.image_removeLinkByEmptyURL=!0,function(){function a(a,b){var e=t.exec(a),n=t.exec(b);if(e){if(!e[2]&&"px"==n[2])return n[1];if("px"==e[2]&&!n[2])return n[1]+"px"}return b}var e=CKEDITOR.htmlParser.cssStyle,b=CKEDITOR.tools.cssLength,t=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,n={elements:{$:function(b){var t=b.attributes;if((t=(t=(t=t&&t["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(t)))&&t.children[0])&&b.attributes["data-cke-resizable"]){var n=new e(b).rules;b=t.attributes;var o=n.width;n=n.height,o&&(b.width=a(b.width,o)),n&&(b.height=a(b.height,n))}return t}}};CKEDITOR.plugins.add("fakeobjects",{init:function(a){a.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(a){(a=(a=a.dataProcessor)&&a.htmlFilter)&&a.addRules(n,{applyToAll:!0})}}),CKEDITOR.editor.prototype.createFakeElement=function(a,t,n,o){var r=(r=this.lang.fakeobjects)[n]||r.unknown;return t={class:t,"data-cke-realelement":encodeURIComponent(a.getOuterHtml()),"data-cke-real-node-type":a.type,alt:r,title:r,align:a.getAttribute("align")||""},CKEDITOR.env.hc||(t.src=CKEDITOR.tools.transparentImageData),n&&(t["data-cke-real-element-type"]=n),o&&(t["data-cke-resizable"]=o,n=new e,o=a.getAttribute("width"),a=a.getAttribute("height"),o&&(n.rules.width=b(o)),a&&(n.rules.height=b(a)),n.populate(t)),this.document.createElement("img",{attributes:t})},CKEDITOR.editor.prototype.createFakeParserElement=function(a,t,n,o){var r,l=(l=this.lang.fakeobjects)[n]||l.unknown;return r=new CKEDITOR.htmlParser.basicWriter,a.writeHtml(r),r=r.getHtml(),t={class:t,"data-cke-realelement":encodeURIComponent(r),"data-cke-real-node-type":a.type,alt:l,title:l,align:a.attributes.align||""},CKEDITOR.env.hc||(t.src=CKEDITOR.tools.transparentImageData),n&&(t["data-cke-real-element-type"]=n),o&&(t["data-cke-resizable"]=o,o=a.attributes,a=new e,n=o.width,o=o.height,void 0!==n&&(a.rules.width=b(n)),void 0!==o&&(a.rules.height=b(o)),a.populate(t)),new CKEDITOR.htmlParser.element("img",t)},CKEDITOR.editor.prototype.restoreRealElement=function(b){if(b.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var e=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(b.data("cke-realelement")),this.document);if(b.data("cke-resizable")){var t=b.getStyle("width");b=b.getStyle("height"),t&&e.setAttribute("width",a(e.getAttribute("width"),t)),b&&e.setAttribute("height",a(e.getAttribute("height"),b))}return e}}(),function(){function a(a){return a.replace(/'/g,"\\$&")}function e(a){for(var b,e=a.length,t=[],n=0;n<e;n++)b=a.charCodeAt(n),t.push(b);return"String.fromCharCode("+t.join(",")+")"}function b(b,e){var g,t,n=b.plugins.link,o=n.compiledProtectionFunction.params;t=[n.compiledProtectionFunction.name,"("];for(var r=0;r<o.length;r++)g=e[n=o[r].toLowerCase()],0<r&&t.push(","),t.push("'",g?a(encodeURIComponent(e[n])):"","'");return t.push(")"),t.join("")}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function a(b){return e.replace(/%1/g,"rtl"==b?"right":"left").replace(/%2/g,"cke_contents_"+b)}var b="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",e=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+b+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+b+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(a("ltr")+a("rtl"))},init:function(a){var b="a[!href]";CKEDITOR.dialog.isTabEnabled(a,"link","advanced")&&(b=b.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type,download]{*}(*)")),CKEDITOR.dialog.isTabEnabled(a,"link","target")&&(b=b.replace("]",",target,onclick]")),a.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:b,requiredContent:"a[href]"})),a.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),a.addCommand("unlink",new CKEDITOR.unlinkCommand),a.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),a.setKeystroke(CKEDITOR.CTRL+76,"link"),a.setKeystroke(CKEDITOR.CTRL+75,"link"),a.ui.addButton&&(a.ui.addButton("Link",{label:a.lang.link.toolbar,command:"link",toolbar:"links,10"}),a.ui.addButton("Unlink",{label:a.lang.link.unlink,command:"unlink",toolbar:"links,20"}),a.ui.addButton("Anchor",{label:a.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),a.on("doubleclick",(function(b){var e=b.data.element.getAscendant({a:1,img:1},!0);e&&!e.isReadOnly()&&(e.is("a")?(b.data.dialog=!e.getAttribute("name")||e.getAttribute("href")&&e.getChildCount()?"link":"anchor",b.data.link=e):CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,e)&&(b.data.dialog="anchor"))}),null,null,0),a.on("doubleclick",(function(b){b.data.dialog in{link:1,anchor:1}&&b.data.link&&a.getSelection().selectElement(b.data.link)}),null,null,20),a.addMenuItems&&a.addMenuItems({anchor:{label:a.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:a.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:a.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:a.lang.link.unlink,command:"unlink",group:"link",order:5}}),a.contextMenu&&a.contextMenu.addListener((function(b){if(!b||b.isReadOnly())return null;if(!(b=CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,b))&&!(b=CKEDITOR.plugins.link.getSelectedLink(a)))return null;var e={};return b.getAttribute("href")&&b.getChildCount()&&(e={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),b&&b.hasAttribute("name")&&(e.anchor=e.removeAnchor=CKEDITOR.TRISTATE_OFF),e})),this.compiledProtectionFunction=function(a){var b;return(a=a.config.emailProtection||"")&&"encode"!=a&&(b={},a.replace(/^([^(]+)\(([^)]+)\)$/,(function(a,e,t){b.name=e,b.params=[],t.replace(/[^,\s]+/g,(function(a){b.params.push(a)}))}))),b}(a)},afterInit:function(a){a.dataProcessor.dataFilter.addRules({elements:{a:function(b){return b.attributes.name?b.children.length?null:a.createFakeParserElement(b,"cke_anchor","anchor"):null}}});var b=a._.elementsPath&&a._.elementsPath.filters;b&&b.push((function(b,e){if("a"==e&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,b)||b.getAttribute("name")&&(!b.getAttribute("href")||!b.getChildCount())))return"anchor"}))}});var t=/^javascript:/,n=/^mailto:([^?]+)(?:\?(.+))?$/,o=/subject=([^;?:@&=$,\/]*)/i,g=/body=([^;?:@&=$,\/]*)/i,r=/^#(.*)$/,l=/^((?:http|https|ftp|news):\/\/)?(.*)$/,c=/^(_(?:self|top|parent|blank))$/,d=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,q=/^javascript:([^(]+)\(([^)]+)\)$/,h=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,u=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,p=/^tel:(.*)$/,f={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType",class:"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(a,b){var e,t=a.getSelection(),n=t.getSelectedElement(),o=t.getRanges(),g=[];if(!b&&n&&n.is("a"))return n;for(n=0;n<o.length;n++)if((e=t.getRanges()[n]).shrink(CKEDITOR.SHRINK_ELEMENT,!0,{skipBogus:!0}),(e=a.elementPath(e.getCommonAncestor()).contains("a",1))&&b)g.push(e);else if(e)return e;return b?g:null},getEditorAnchors:function(a){for(var g,b=(e=(b=a.editable()).isInline()&&!a.plugins.divarea?a.document:b).getElementsByTag("a"),e=e.getElementsByTag("img"),t=[],n=0;g=b.getItem(n++);)(g.data("cke-saved-name")||g.hasAttribute("name"))&&t.push({name:g.data("cke-saved-name")||g.getAttribute("name"),id:g.getAttribute("id")});for(n=0;g=e.getItem(n++);)(g=this.tryRestoreFakeAnchor(a,g))&&t.push({name:g.getAttribute("name"),id:g.getAttribute("id")});return t},fakeAnchor:!0,tryRestoreFakeAnchor:function(a,b){if(b&&b.data("cke-real-element-type")&&"anchor"==b.data("cke-real-element-type")){var e=a.restoreRealElement(b);if(e.data("cke-saved-name"))return e}},parseLinkAttributes:function(a,b){var e,m=b&&(b.data("cke-saved-href")||b.getAttribute("href"))||"",E=a.plugins.link.compiledProtectionFunction,T=a.config.emailProtection,C={};if(m.match(t)&&("encode"==T?m=m.replace(d,(function(a,b,e){return e=e||"","mailto:"+String.fromCharCode.apply(String,b.split(","))+e.replace(/\\'/g,"'")})):T&&m.replace(q,(function(a,b,e){if(b==E.name){C.type="email",a=C.email={},b=/(^')|('$)/g;for(var g,t=(e=e.match(/[^,\s]+/g)).length,n=0;n<t;n++)g=decodeURIComponent(g=e[n].replace(b,"").replace(/\\'/g,"'")),a[E.params[n].toLowerCase()]=g;a.address=[a.name,a.domain].join("@")}}))),!C.type)if(T=m.match(r))C.type="anchor",C.anchor={},C.anchor.name=C.anchor.id=T[1];else if(T=m.match(p))C.type="tel",C.tel=T[1];else if(T=m.match(n)){e=m.match(o),m=m.match(g),C.type="email";var I=C.email={};I.address=T[1],e&&(I.subject=decodeURIComponent(e[1])),m&&(I.body=decodeURIComponent(m[1]))}else m&&(e=m.match(l))&&(C.type="url",C.url={},C.url.protocol=e[1],C.url.url=e[2]);if(b){if(m=b.getAttribute("target"))C.target={type:m.match(c)?m:"frame",name:m};else if(m=(m=b.data("cke-pa-onclick")||b.getAttribute("onclick"))&&m.match(h))for(C.target={type:"popup",name:m[1]};T=u.exec(m[2]);)"yes"!=T[2]&&"1"!=T[2]||T[1]in{height:1,width:1,top:1,left:1}?isFinite(T[2])&&(C.target[T[1]]=T[2]):C.target[T[1]]=!0;var O;for(O in null!==b.getAttribute("download")&&(C.download=!0),m={},f)(T=b.getAttribute(O))&&(m[f[O]]=T);(O=b.data("cke-saved-name")||m.advName)&&(m.advName=O),CKEDITOR.tools.isEmpty(m)||(C.advanced=m)}return C},getLinkAttributes:function(t,n){var o=t.config.emailProtection||"",g={};switch(n.type){case"url":o=n.url&&void 0!==n.url.protocol?n.url.protocol:"http://";var r=n.url&&CKEDITOR.tools.trim(n.url.url)||"";g["data-cke-saved-href"]=0===r.indexOf("/")?r:o+r;break;case"anchor":o=n.anchor&&n.anchor.id,g["data-cke-saved-href"]="#"+(n.anchor&&n.anchor.name||o||"");break;case"email":switch(r=(d=n.email).address,o){case"":case"encode":var l=encodeURIComponent(d.subject||""),c=encodeURIComponent(d.body||""),d=[];l&&d.push("subject="+l),c&&d.push("body="+c),d=d.length?"?"+d.join("&"):"","encode"==o?(o=["javascript:void(location.href='mailto:'+",e(r)],d&&o.push("+'",a(d),"'"),o.push(")")):o=["mailto:",r,d];break;default:o=r.split("@",2),d.name=o[0],d.domain=o[1],o=["javascript:",b(t,d)]}g["data-cke-saved-href"]=o.join("");break;case"tel":g["data-cke-saved-href"]="tel:"+n.tel}if(n.target)if("popup"==n.target.type){o=["window.open(this.href, '",n.target.name||"","', '"];var h="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" ");for(r=h.length,l=function(a){n.target[a]&&h.push(a+"="+n.target[a])},d=0;d<r;d++)h[d]+=n.target[h[d]]?"=yes":"=no";l("width"),l("left"),l("height"),l("top"),o.push(h.join(","),"'); return false;"),g["data-cke-pa-onclick"]=o.join("")}else"notSet"!=n.target.type&&n.target.name&&(g.target=n.target.name);if(n.download&&(g.download=""),n.advanced){for(var q in f)(o=n.advanced[f[q]])&&(g[q]=o);g.name&&(g["data-cke-saved-name"]=g.name)}for(var p in g["data-cke-saved-href"]&&(g.href=g["data-cke-saved-href"]),q={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1,download:1},n.advanced&&CKEDITOR.tools.extend(q,f),g)delete q[p];return{set:g,removed:CKEDITOR.tools.object.keys(q)}},showDisplayTextForElement:function(a,b){var e=b.getSelection();return!(b.widgets&&b.widgets.focused||e&&1<e.getRanges().length||a&&a.getName&&a.is({img:1,table:1,tbody:1,thead:1,tfoot:1,input:1,select:1,textarea:1}))}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(a){if(CKEDITOR.env.ie){var e,b=a.getSelection().getRanges()[0],t=b.getPreviousEditableNode()&&b.getPreviousEditableNode().getAscendant("a",!0)||b.getNextEditableNode()&&b.getNextEditableNode().getAscendant("a",!0);b.collapsed&&t&&(e=b.createBookmark(),b.selectNodeContents(t),b.select())}t=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1}),a.removeStyle(t),e&&(b.moveToBookmark(e),b.select())},refresh:function(a,b){var e=b.lastElement&&b.lastElement.getAscendant("a",!0);e&&"a"==e.getName()&&e.getAttribute("href")&&e.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]",editorFocus:1},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(a){var e,b=a.getSelection(),t=b.createBookmarks();b&&(e=b.getSelectedElement())&&(e.getChildCount()?e.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,e))?e.remove(1):(e=CKEDITOR.plugins.link.getSelectedLink(a))&&(e.hasAttribute("href")?(e.removeAttributes({name:1,"data-cke-saved-name":1}),e.removeClass("cke_anchor")):e.remove(1)),b.selectBookmarks(t)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})}(),function(){function a(a,b,e){return h(b)&&h(e)&&e.equals(b.getNext((function(a){return!(X(a)||Y(a)||q(a))})))}function e(a){this.upper=a[0],this.lower=a[1],this.set.apply(this,a.slice(2))}function b(a){var b=a.element;if(b&&h(b)&&(b=b.getAscendant(a.triggers,!0))&&a.editable.contains(b)){var e=r(b);if("true"==e.getAttribute("contenteditable"))return b;if(e.is(a.triggers))return e}return null}function t(a,b,e){return C(a,b),C(a,e),a=b.size.bottom,e=e.size.top,a&&e?0|(a+e)/2:a||e}function n(a,b,e){return b[e?"getPrevious":"getNext"]((function(b){return b&&b.type==CKEDITOR.NODE_TEXT&&!X(b)||h(b)&&!q(b)&&!d(a,b)}))}function o(a,b,e){return a>b&&a<e}function r(a,b){if(a.data("cke-editable"))return null;for(b||(a=a.getParent());a&&!a.data("cke-editable");){if(a.hasAttribute("contenteditable"))return a;a=a.getParent()}return null}function g(a){var b=a.doc,e=y('<span contenteditable="false" data-cke-magic-line="1" style="'+W+"position:absolute;border-top:1px dashed "+a.boxColor+'"></span>',b),t=CKEDITOR.getUrl(this.path+"images/"+(K.hidpi?"hidpi/":"")+"icon"+(a.rtl?"-rtl":"")+".png");for(R(e,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(a.editable,!0),this},lineChildren:[R(y('<span title="'+a.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',b),{base:W+"height:17px;width:17px;"+(a.rtl?"left":"right")+":17px;background:url("+t+") center no-repeat "+a.boxColor+";cursor:pointer;"+(K.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(K.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),R(y(j,b),{base:V+"left:0px;border-left-color:"+a.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),R(y(j,b),{base:V+"right:0px;border-right-color:"+a.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){C(a,this);var b=a.holdDistance,e=this.size;return!!(e&&o(a.mouse.y,e.top-b,e.bottom+b)&&o(a.mouse.x,e.left-b,e.right+b))},place:function(){var b=a.view,e=a.editable,t=a.trigger,n=t.upper,g=t.lower,r=n||g,l=r.getParent(),c={};for(var d in this.trigger=t,n&&C(a,n,!0),g&&C(a,g,!0),C(a,l,!0),a.inInlineMode&&I(a,!0),l.equals(e)?(c.left=b.scroll.x,c.right=-b.scroll.x,c.width=""):(c.left=r.size.left-r.size.margin.left+b.scroll.x-(a.inInlineMode?b.editable.left+b.editable.border.left:0),c.width=r.size.outerWidth+r.size.margin.left+r.size.margin.right+b.scroll.x,c.right=""),n&&g?c.top=n.size.margin.bottom===g.size.margin.top?0|n.size.bottom+n.size.margin.bottom/2:n.size.margin.bottom<g.size.margin.top?n.size.bottom+n.size.margin.bottom:n.size.bottom+n.size.margin.bottom-g.size.margin.top:n?g||(c.top=n.size.bottom+n.size.margin.bottom):c.top=g.size.top-g.size.margin.top,t.is(L)||o(c.top,b.scroll.y-15,b.scroll.y+5)?(c.top=a.inInlineMode?0:b.scroll.y,this.look(L)):t.is(F)||o(c.top,b.pane.bottom-5,b.pane.bottom+15)?(c.top=a.inInlineMode?b.editable.height+b.editable.padding.top+b.editable.padding.bottom:b.pane.bottom-1,this.look(F)):(a.inInlineMode&&(c.top-=b.editable.top+b.editable.border.top),this.look(P)),a.inInlineMode&&(c.top--,c.top+=b.editable.scroll.top,c.left+=b.editable.scroll.left),c)c[d]=CKEDITOR.tools.cssLength(c[d]);this.setStyles(c)},look:function(a){if(this.oldLook!=a){for(var e,b=this.lineChildren.length;b--;)(e=this.lineChildren[b]).setAttribute("style",e.base+e.looks[0|a/2]);this.oldLook=a}},wrap:new v("span",a.doc)}),b=e.lineChildren.length;b--;)e.lineChildren[b].appendTo(e);e.look(P),e.appendTo(e.wrap),e.unselectable(),e.lineChildren[0].on("mouseup",(function(b){e.detach(),l(a,(function(b){var e=a.line.trigger;b[e.is(S)?"insertBefore":"insertAfter"](e.is(S)?e.lower:e.upper)}),!0),a.editor.focus(),K.ie||a.enterMode==CKEDITOR.ENTER_BR||a.hotNode.scrollIntoView(),b.data.preventDefault(!0)})),e.on("mousedown",(function(a){a.data.preventDefault(!0)})),a.line=e}function l(a,b,e){var g,t=new CKEDITOR.dom.range(a.doc),n=a.editor;K.ie&&a.enterMode==CKEDITOR.ENTER_BR?g=a.doc.createText(B):(g=(g=r(a.element,!0))&&g.data("cke-enter-mode")||a.enterMode,(g=new v(w[g],a.doc)).is("br")||a.doc.createText(B).appendTo(g)),e&&n.fire("saveSnapshot"),b(g),t.moveToPosition(g,CKEDITOR.POSITION_AFTER_START),n.getSelection().selectRanges([t]),a.hotNode=g,e&&n.fire("saveSnapshot")}function c(a,e){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function t(b){var t=K.ie&&9>K.version?" ":B,g=a.hotNode&&a.hotNode.getText()==t&&a.element.equals(a.hotNode)&&a.lastCmdDirection===!!e;l(a,(function(t){g&&a.hotNode&&a.hotNode.remove(),t[e?"insertAfter":"insertBefore"](b),t.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!e}),a.lastCmdDirection=!!e})),K.ie||a.enterMode==CKEDITOR.ENTER_BR||a.hotNode.scrollIntoView(),a.line.detach()}return function(g){var o,l;g=(g=g.getSelection().getStartElement()).getAscendant(U,1),p(a,g)||!g||g.equals(a.editable)||g.contains(a.editable)||((o=r(g))&&"false"==o.getAttribute("contenteditable")&&(g=o),a.element=g,h(o=n(a,g,!e))&&o.is(a.triggers)&&o.is(H)&&(!n(a,o,!e)||(l=n(a,o,!e))&&h(l)&&l.is(a.triggers))?t(o):h(l=b(a))&&(n(a,l,!e)?(g=n(a,l,!e))&&h(g)&&g.is(a.triggers)&&t(l):t(l)))}}()}}function d(a,b){if(!b||b.type!=CKEDITOR.NODE_ELEMENT||!b.$)return!1;var e=a.line;return e.wrap.equals(b)||e.wrap.contains(b)}function h(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.$}function q(a){return!!h(a)&&((b=f(a))||(b=!!h(a)&&!(!(b={left:1,right:1,center:1})[a.getComputedStyle("float")]&&!b[a.getAttribute("align")])),b);var b}function f(a){return!!{absolute:1,fixed:1}[a.getComputedStyle("position")]}function u(a,b){return h(b)?b.is(a.triggers):null}function p(a,b){if(!b)return!1;for(var e=b.getParents(1),t=e.length;t--;)for(var n=a.tabuList.length;n--;)if(e[t].hasAttribute(a.tabuList[n]))return!0;return!1}function m(a){var b=a.editable,t=a.mouse,n=a.view,g=a.triggerOffset;I(a);var r=t.y>(a.inInlineMode?n.editable.top+n.editable.height/2:Math.min(n.editable.height,n.pane.height)/2);return(b=b[r?"getLast":"getFirst"]((function(a){return!(X(a)||Y(a))})))?(d(a,b)&&(b=a.line.wrap[r?"getPrevious":"getNext"]((function(a){return!(X(a)||Y(a))}))),h(b)&&!q(b)&&u(a,b)?(C(a,b),!r&&0<=b.size.top&&o(t.y,0,b.size.top+g)?(a=a.inInlineMode||0===n.scroll.y?L:P,new e([null,b,S,A,a])):r&&b.size.bottom<=n.pane.height&&o(t.y,b.size.bottom-g,n.pane.height)?(a=a.inInlineMode||o(b.size.bottom,n.pane.height-g,n.pane.height)?F:P,new e([b,null,N,A,a])):null):null):null}function E(a){var t=a.mouse,r=a.view,g=a.triggerOffset,l=b(a);if(!l)return null;C(a,l),g=Math.min(g,0|l.size.outerHeight/2);var c,d,f=[];if(o(t.y,l.size.top-1,l.size.top+g))d=!1;else{if(!o(t.y,l.size.bottom-g,l.size.bottom+1))return null;d=!0}if(q(l)||function(a,b,e){return!!(b=b[e?"getLast":"getFirst"]((function(b){return a.isRelevant(b)&&!b.is($)})))&&(C(a,b),e?b.size.top>a.mouse.y:b.size.bottom<a.mouse.y)}(a,l,d)||l.getParent().is(M))return null;var m=n(a,l,!d);if(m){if(m&&m.type==CKEDITOR.NODE_TEXT)return null;if(h(m)){if(q(m)||!u(a,m)||m.getParent().is(M))return null;f=[m,l][d?"reverse":"concat"]().concat([x,A])}}else l.equals(a.editable[d?"getLast":"getFirst"](a.isRelevant))?(I(a),d&&o(t.y,l.size.bottom-g,r.pane.height)&&o(l.size.bottom,r.pane.height-g,r.pane.height)?c=F:o(t.y,0,l.size.top+g)&&(c=L)):c=P,f=[null,l][d?"reverse":"concat"]().concat([d?N:S,A,c,l.equals(a.editable[d?"getLast":"getFirst"](a.isRelevant))?d?F:L:P]);return 0 in f?new e(f):null}function T(a,b,e,t){for(var n=b.getDocumentPosition(),g={},o={},r={},l={},c=J.length;c--;)g[J[c]]=parseInt(b.getComputedStyle.call(b,"border-"+J[c]+"-width"),10)||0,r[J[c]]=parseInt(b.getComputedStyle.call(b,"padding-"+J[c]),10)||0,o[J[c]]=parseInt(b.getComputedStyle.call(b,"margin-"+J[c]),10)||0;return e&&!t||O(a,t),l.top=n.y-(e?0:a.view.scroll.y),l.left=n.x-(e?0:a.view.scroll.x),l.outerWidth=b.$.offsetWidth,l.outerHeight=b.$.offsetHeight,l.height=l.outerHeight-(r.top+r.bottom+g.top+g.bottom),l.width=l.outerWidth-(r.left+r.right+g.left+g.right),l.bottom=l.top+l.outerHeight,l.right=l.left+l.outerWidth,a.inInlineMode&&(l.scroll={top:b.$.scrollTop,left:b.$.scrollLeft}),R({border:g,padding:r,margin:o,ignoreScroll:e},l,!0)}function C(a,b,e){if(!h(b))return b.size=null;if(b.size){if(b.size.ignoreScroll==e&&b.size.date>new Date-z)return null}else b.size={};return R(b.size,T(a,b,e),{date:+new Date},!0)}function I(a,b){a.view.editable=T(a,a.editable,b,!0)}function O(a,b){a.view||(a.view={});var e=a.view;if(!(!b&&e&&e.date>new Date-z)){e=(t=a.win).getScrollPosition();var t=t.getViewPaneSize();R(a.view,{scroll:{x:e.x,y:e.y,width:a.doc.$.documentElement.scrollWidth-t.width,height:a.doc.$.documentElement.scrollHeight-t.height},pane:{width:t.width,height:t.height,bottom:t.height+e.y},date:+new Date},!0)}}function D(a,b,t,n){for(var o=n,g=n,r=0,l=!1,c=!1,d=a.view.pane.height,h=a.mouse;h.y+r<d&&0<h.y-r&&(l||(l=b(o,n)),c||(c=b(g,n)),!l&&0<h.y-r&&(o=t(a,{x:h.x,y:h.y-r})),!c&&h.y+r<d&&(g=t(a,{x:h.x,y:h.y+r})),!l||!c);)r+=2;return new e([o,g,null,null])}CKEDITOR.plugins.add("magicline",{init:function(a){var t,o,r,C=a.config,D=C.magicline_triggerOffset||30,v={editor:a,enterMode:C.enterMode,triggerOffset:D,holdDistance:0|D*(C.magicline_holdDistance||.5),boxColor:C.magicline_color||"#ff0000",rtl:"rtl"==C.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(C.magicline_tabuList||[]),triggers:C.magicline_everywhere?U:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1},isRelevant:function(a){return h(a)&&!d(v,a)&&!q(a)}};a.on("contentDom",(function(){var h=a.editable(),D=a.document,q=a.window;R(v,{editable:h,inInlineMode:h.isInline(),doc:D,win:q,hotNode:null},!0),v.boundary=v.inInlineMode?v.editable:v.doc.getDocumentElement(),h.is(k.$inline)||(v.inInlineMode&&!f(h)&&h.setStyles({position:"relative",top:null,left:null}),g.call(this,v),O(v),h.attachListener(a,"beforeUndoImage",(function(){v.line.detach()})),h.attachListener(a,"beforeGetData",(function(){v.line.wrap.getParent()&&(v.line.detach(),a.once("getData",(function(){v.line.attach()}),null,null,1e3))}),null,null,0),h.attachListener(v.inInlineMode?D:D.getWindow().getFrame(),"mouseout",(function(b){if("wysiwyg"==a.mode)if(v.inInlineMode){var e=b.data.$.clientX;b=b.data.$.clientY,O(v),I(v,!0);var t=v.view.editable,n=v.view.scroll;e>t.left-n.x&&e<t.right-n.x&&b>t.top-n.y&&b<t.bottom-n.y||(clearTimeout(r),r=null,v.line.detach())}else clearTimeout(r),r=null,v.line.detach()})),h.attachListener(h,"keyup",(function(){v.hiddenMode=0})),h.attachListener(h,"keydown",(function(b){if("wysiwyg"==a.mode)switch(b.data.getKeystroke()){case 2228240:case 16:v.hiddenMode=1,v.line.detach()}})),h.attachListener(v.inInlineMode?h:D,"mousemove",(function(b){if(o=!0,"wysiwyg"==a.mode&&!a.readOnly&&!r){var e={x:b.data.$.clientX,y:b.data.$.clientY};r=setTimeout((function(){v.mouse=e,r=v.trigger=null,O(v),o&&!v.hiddenMode&&a.focusManager.hasFocus&&!v.line.mouseNear()&&(v.element=G(v,!0))&&((v.trigger=m(v)||E(v)||Z(v))&&!p(v,v.trigger.upper||v.trigger.lower)?v.line.attach().place():(v.trigger=null,v.line.detach()),o=!1)}),30)}})),h.attachListener(q,"scroll",(function(){"wysiwyg"==a.mode&&(v.line.detach(),K.webkit&&(v.hiddenMode=1,clearTimeout(t),t=setTimeout((function(){v.mouseDown||(v.hiddenMode=0)}),50)))})),h.attachListener(_?D:q,"mousedown",(function(){"wysiwyg"==a.mode&&(v.line.detach(),v.hiddenMode=1,v.mouseDown=1)})),h.attachListener(_?D:q,"mouseup",(function(){v.hiddenMode=0,v.mouseDown=0})),a.addCommand("accessPreviousSpace",c(v)),a.addCommand("accessNextSpace",c(v,!0)),a.setKeystroke([[C.magicline_keystrokePrevious,"accessPreviousSpace"],[C.magicline_keystrokeNext,"accessNextSpace"]]),a.on("loadSnapshot",(function(){var b,e,t,n;for(n in{p:1,br:1,div:1})for(t=(b=a.document.getElementsByTag(n)).count();t--;)if((e=b.getItem(t)).data("cke-magicline-hot"))return v.hotNode=e,void(v.lastCmdDirection="true"===e.data("cke-magicline-dir"))})),a._.magiclineBackdoor={accessFocusSpace:l,boxTrigger:e,isLine:d,getAscendantTrigger:b,getNonEmptyNeighbour:n,getSize:T,that:v,triggerEdge:E,triggerEditable:m,triggerExpand:Z})}),this)}});var R=CKEDITOR.tools.extend,v=CKEDITOR.dom.element,y=v.createFromHtml,K=CKEDITOR.env,_=CKEDITOR.env.ie&&9>CKEDITOR.env.version,k=CKEDITOR.dtd,w={},S=128,N=64,x=32,A=16,L=4,F=2,P=1,B=" ",M=k.$listItem,$=k.$tableContent,H=R({},k.$nonEditable,k.$empty),U=k.$block,z=100,W="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",V=W+"border-color:transparent;display:block;border-style:solid;",j="<span>"+B+"</span>";w[CKEDITOR.ENTER_BR]="br",w[CKEDITOR.ENTER_P]="p",w[CKEDITOR.ENTER_DIV]="div",e.prototype={set:function(a,b,e){return this.properties=a+b+(e||P),this},is:function(a){return(this.properties&a)==a}};var G=function(){function a(b,e){var t=b.$.elementFromPoint(e.x,e.y);return t&&t.nodeType?new CKEDITOR.dom.element(t):null}return function(b,e,t){if(!b.mouse)return null;var g=b.doc,n=b.line.wrap,o=a(g,t=t||b.mouse);return e&&d(b,o)&&(n.hide(),o=a(g,t),n.show()),!o||o.type!=CKEDITOR.NODE_ELEMENT||!o.$||K.ie&&9>K.version&&!b.boundary.equals(o)&&!b.boundary.contains(o)?null:o}}(),X=CKEDITOR.dom.walker.whitespaces(),Y=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),Z=function(){function b(n){var r,l,c;if(!h(g=n.element)||g.contains(n.editable)||g.isReadOnly())return null;if(a(0,r=(c=D(n,(function(a,b){return!b.equals(a)}),(function(a,b){return G(a,!0,b)}),g)).upper,l=c.lower))return c.set(x,8);if(r&&g.contains(r))for(;!r.getParent().equals(g);)r=r.getParent();else r=g.getFirst((function(a){return e(n,a)}));if(l&&g.contains(l))for(;!l.getParent().equals(g);)l=l.getParent();else l=g.getLast((function(a){return e(n,a)}));if(!r||!l)return null;if(C(n,r),C(n,l),!o(n.mouse.y,r.size.top,l.size.bottom))return null;for(var d,f,m,q,g=Number.MAX_VALUE;l&&!l.equals(r)&&(f=r.getNext(n.isRelevant));)(d=Math.abs(t(n,r,f)-n.mouse.y))<g&&(g=d,m=r,q=f),C(n,r=f);return m&&q&&o(n.mouse.y,m.size.top,q.size.bottom)?(c.upper=m,c.lower=q,c.set(x,8)):null}function e(a,b){return!(b&&b.type==CKEDITOR.NODE_TEXT||Y(b)||q(b)||d(a,b)||b.type==CKEDITOR.NODE_ELEMENT&&b.$&&b.is("br"))}return function(e){var t,n=b(e);if(t=n){t=n.upper;var g=n.lower;t=!(!t||!g||q(g)||q(t)||g.equals(t)||t.equals(g)||g.contains(t)||t.contains(g)||!(u(e,t)&&u(e,g)&&a(0,t,g)))}return t?n:null}}(),J=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function a(a){if(!a||a.type!=CKEDITOR.NODE_ELEMENT||"form"!=a.getName())return[];for(var b=[],e=["style","className"],t=0;t<e.length;t++){var n=a.$.elements.namedItem(e[t]);n&&(n=new CKEDITOR.dom.element(n),b.push([n,n.nextSibling]),n.remove())}return b}function e(a,b){if(a&&a.type==CKEDITOR.NODE_ELEMENT&&"form"==a.getName()&&0<b.length)for(var e=b.length-1;0<=e;e--){var t=b[e][0],n=b[e][1];n?t.insertBefore(n):t.appendTo(a)}}function b(b,t){var n=a(b),o={},r=b.$;return t||(o.class=r.className||"",r.className=""),o.inline=r.style.cssText||"",t||(r.style.cssText="position: static; overflow: visible"),e(n),o}function t(b,t){var n=a(b),o=b.$;"class"in t&&(o.className=t.class),"inline"in t&&(o.style.cssText=t.inline),e(n)}function n(a){if(!a.editable().isInline()){var e,b=CKEDITOR.instances;for(e in b){var t=b[e];"wysiwyg"!=t.mode||t.readOnly||((t=t.document.getBody()).setAttribute("contentEditable",!1),t.setAttribute("contentEditable",!0))}a.editable().hasFocus&&(a.toolbox.focus(),a.focus())}}CKEDITOR.plugins.add("maximize",{init:function(a){function e(){var b=c.getViewPaneSize();a.resize(b.width,b.height,null,!0)}if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var o,r,q,g=a.lang,l=CKEDITOR.document,c=l.getWindow(),d=CKEDITOR.TRISTATE_OFF;a.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var u=a.container.getFirst((function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_inner")})),p=a.ui.space("contents");if("wysiwyg"==a.mode){var h=a.getSelection();o=h&&h.getRanges(),r=c.getScrollPosition()}else{var f=a.editable().$;o=!CKEDITOR.env.ie&&[f.selectionStart,f.selectionEnd],r=[f.scrollLeft,f.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){for(c.on("resize",e),q=c.getScrollPosition(),h=a.container;h=h.getParent();)h.setCustomData("maximize_saved_styles",b(h)),h.setStyle("z-index",a.config.baseFloatZIndex-5);p.setCustomData("maximize_saved_styles",b(p,!0)),u.setCustomData("maximize_saved_styles",b(u,!0)),p={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0},l.getDocumentElement().setStyles(p),!CKEDITOR.env.gecko&&l.getDocumentElement().setStyle("position","fixed"),CKEDITOR.env.gecko&&CKEDITOR.env.quirks||l.getBody().setStyles(p),CKEDITOR.env.ie?setTimeout((function(){c.$.scrollTo(0,0)}),0):c.$.scrollTo(0,0),u.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),u.$.offsetLeft,u.setStyles({"z-index":a.config.baseFloatZIndex-5,left:"0px",top:"0px"}),u.addClass("cke_maximized"),e(),p=u.getDocumentPosition(),u.setStyles({left:-1*p.x+"px",top:-1*p.y+"px"}),CKEDITOR.env.gecko&&n(a)}else if(this.state==CKEDITOR.TRISTATE_ON){c.removeListener("resize",e),h=[p,u];for(var m=0;m<h.length;m++)t(h[m],h[m].getCustomData("maximize_saved_styles")),h[m].removeCustomData("maximize_saved_styles");for(h=a.container;h=h.getParent();)t(h,h.getCustomData("maximize_saved_styles")),h.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout((function(){c.$.scrollTo(q.x,q.y)}),0):c.$.scrollTo(q.x,q.y),u.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(u.setStyle("display","inline"),setTimeout((function(){u.setStyle("display","block")}),0)),a.fire("resize",{outerHeight:a.container.$.offsetHeight,contentsHeight:p.$.offsetHeight,outerWidth:a.container.$.offsetWidth})}this.toggleState(),(h=this.uiItems[0])&&(p=this.state==CKEDITOR.TRISTATE_OFF?g.maximize.maximize:g.maximize.minimize,(h=CKEDITOR.document.getById(h._.id)).getChild(1).setHtml(p),h.setAttribute("title",p),h.setAttribute("href",'javascript:void("'+p+'");')),"wysiwyg"==a.mode?o?(CKEDITOR.env.gecko&&n(a),a.getSelection().selectRanges(o),(f=a.getSelection().getStartElement())&&f.scrollIntoView(!0)):c.$.scrollTo(r.x,r.y):(o&&(f.selectionStart=o[0],f.selectionEnd=o[1]),f.scrollLeft=r[0],f.scrollTop=r[1]),o=r=null,d=this.state,a.fire("maximize",this.state)},canUndo:!1}),a.ui.addButton&&a.ui.addButton("Maximize",{label:g.maximize.maximize,command:"maximize",toolbar:"tools,10"}),a.on("mode",(function(){var b=a.getCommand("maximize");b.setState(b.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:d)}),null,null,100)}}})}(),CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(e){var t=0,n=this.path,o=void 0===e.config.pasteFromWord_inlineImages||e.config.pasteFromWord_inlineImages;e.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(a,b){t=1,a.execCommand("paste",{type:"html",notification:!b||void 0===b.notification||b.notification})}}),CKEDITOR.plugins.clipboard.addPasteButton(e,"PasteFromWord",{label:e.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),e.on("paste",(function(b){var g=b.data,o=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?g.dataTransfer.getData("text/html",!0):null,r=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?g.dataTransfer.getData("text/rtf"):null,l={dataValue:o=o||g.dataValue,dataTransfer:{"text/rtf":r}};if(r=/(class=\"?Mso|style=(?:\"|\')[^\"]*?\bmso\-|w:WordDocument|<o:\w+>|<\/font>)/,r=/<meta\s*name=(?:\"|\')?generator(?:\"|\')?\s*content=(?:\"|\')?microsoft/gi.test(o)||r.test(o),o&&(t||r)&&(!1!==e.fire("pasteFromWord",l)||t)){g.dontFilter=!0;var c=function(a,b,e){var t=CKEDITOR.cleanWord;return t?e():(a=CKEDITOR.getUrl(a.config.pasteFromWordCleanupFile||b+"filter/default.js"),CKEDITOR.scriptLoader.load(a,e,null,!0)),!t}(e,n,(function(){c?e.fire("paste",g):(!e.config.pasteFromWordPromptCleanup||t||confirm(e.lang.pastefromword.confirmCleanup))&&(l.dataValue=CKEDITOR.cleanWord(l.dataValue,e),e.fire("afterPasteFromWord",l),g.dataValue=l.dataValue,!0===e.config.forcePasteAsPlainText?g.type="text":CKEDITOR.plugins.clipboard.isCustomCopyCutSupported||"allow-word"!==e.config.forcePasteAsPlainText||(g.type="html")),t=0}));c&&b.cancel()}}),null,null,3),CKEDITOR.plugins.clipboard.isCustomDataTypesSupported&&o&&e.on("afterPasteFromWord",(function(a){var e,b=CKEDITOR.plugins.pastefromword&&CKEDITOR.plugins.pastefromword.images,t=[];if(b&&a.editor.filter.check("img[src]")&&0!==(e=b.extractTagsFromHtml(a.data.dataValue)).length&&0!==(b=b.extractFromRtf(a.data.dataTransfer["text/rtf"])).length&&(CKEDITOR.tools.array.forEach(b,(function(a){t.push(a.type?"data:"+a.type+";base64,"+CKEDITOR.tools.convertBytesToBase64(CKEDITOR.tools.convertHexStringToBytes(a.hex)):null)}),this),e.length===t.length))for(b=0;b<e.length;b++)0===e[b].indexOf("file://")&&t[b]&&(a.data.dataValue=a.data.dataValue.replace(e[b],t[b]))}))}}),function(){var a={canUndo:!1,async:!0,exec:function(a,b){var e=a.lang,t=CKEDITOR.tools.keystrokeToString(e.common.keyboard,a.getCommandKeystroke(CKEDITOR.env.ie?a.commands.paste:this)),n=b&&void 0!==b.notification?b.notification:!b||!b.from||"keystrokeHandler"===b.from&&CKEDITOR.env.ie;e=n&&"string"==typeof n?n:e.pastetext.pasteNotification.replace(/%1/,'<kbd aria-label="'+t.aria+'">'+t.display+"</kbd>"),a.execCommand("paste",{type:"text",notification:!!n&&e})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(e){var b=CKEDITOR.env.safari?CKEDITOR.CTRL+CKEDITOR.ALT+CKEDITOR.SHIFT+86:CKEDITOR.CTRL+CKEDITOR.SHIFT+86;e.addCommand("pastetext",a),e.setKeystroke(b,"pastetext"),CKEDITOR.plugins.clipboard.addPasteButton(e,"PasteText",{label:e.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),e.config.forcePasteAsPlainText&&e.on("beforePaste",(function(a){"html"!=a.data.type&&(a.data.type="text")})),e.on("pasteState",(function(a){e.getCommand("pastetext").setState(a.data)}))}})}(),CKEDITOR.plugins.add("removeformat",{init:function(a){a.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),a.ui.addButton&&a.ui.addButton("RemoveFormat",{label:a.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(a){for(var g,e=a._.removeFormatRegex||(a._.removeFormatRegex=new RegExp("^(?:"+a.config.removeFormatTags.replace(/,/g,"|")+")$","i")),b=a._.removeAttributes||(a._.removeAttributes=a.config.removeFormatAttributes.split(",")),t=CKEDITOR.plugins.removeformat.filter,n=a.getSelection().getRanges().createIterator(),o=function(a){return a.type==CKEDITOR.NODE_ELEMENT},r=[];g=n.getNextRange();){var l=g.createBookmark();(g=a.createRange()).setStartBefore(l.startNode),l.endNode&&g.setEndAfter(l.endNode),g.collapsed||g.enlarge(CKEDITOR.ENLARGE_ELEMENT);var c=g.createBookmark(),d=c.startNode,h=c.endNode,q=function(b){for(var n,o=a.elementPath(b),r=o.elements,g=1;(n=r[g])&&!n.equals(o.block)&&!n.equals(o.blockLimit);g++)e.test(n.getName())&&t(a,n)&&b.breakParent(n)};if(q(d),h)for(q(h),d=d.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);d&&!d.equals(h);)if(d.isReadOnly()){if(d.getPosition(h)&CKEDITOR.POSITION_CONTAINS)break;d=d.getNext(o)}else q=d.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==d.getName()&&d.data("cke-realelement")||d.hasAttribute("data-cke-bookmark")||!t(a,d)||(e.test(d.getName())?d.remove(1):(d.removeAttributes(b),a.fire("removeFormatCleanup",d))),d=q;c.startNode.remove(),c.endNode&&c.endNode.remove(),g.moveToBookmark(l),r.push(g)}a.forceNextSelectionCheck(),a.getSelection().selectRanges(r)}}},filter:function(a,e){for(var b=a._.removeFormatFilters||[],t=0;t<b.length;t++)if(!1===b[t](e))return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(a){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(a)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",CKEDITOR.plugins.add("resize",{init:function(a){function e(b){var e=r.width,n=r.height,l=e+(b.data.$.screenX-g.x)*("rtl"==o?-1:1);b=n+(b.data.$.screenY-g.y),c&&(e=Math.max(t.resize_minWidth,Math.min(l,t.resize_maxWidth))),d&&(n=Math.max(t.resize_minHeight,Math.min(b,t.resize_maxHeight))),a.resize(c?e:null,n)}function b(){CKEDITOR.document.removeListener("mousemove",e),CKEDITOR.document.removeListener("mouseup",b),a.document&&(a.document.removeListener("mousemove",e),a.document.removeListener("mouseup",b))}var t=a.config,n=a.ui.spaceId("resizer"),o=a.element?a.element.getDirection(1):"ltr";if(!t.resize_dir&&(t.resize_dir="vertical"),void 0===t.resize_maxWidth&&(t.resize_maxWidth=3e3),void 0===t.resize_maxHeight&&(t.resize_maxHeight=3e3),void 0===t.resize_minWidth&&(t.resize_minWidth=750),void 0===t.resize_minHeight&&(t.resize_minHeight=250),!1!==t.resize_enabled){var g,r,l=null,c=("both"==t.resize_dir||"horizontal"==t.resize_dir)&&t.resize_minWidth!=t.resize_maxWidth,d=("both"==t.resize_dir||"vertical"==t.resize_dir)&&t.resize_minHeight!=t.resize_maxHeight,h=CKEDITOR.tools.addFunction((function(n){l||(l=a.getResizable()),r={width:l.$.offsetWidth||0,height:l.$.offsetHeight||0},g={x:n.screenX,y:n.screenY},t.resize_minWidth>r.width&&(t.resize_minWidth=r.width),t.resize_minHeight>r.height&&(t.resize_minHeight=r.height),CKEDITOR.document.on("mousemove",e),CKEDITOR.document.on("mouseup",b),a.document&&(a.document.on("mousemove",e),a.document.on("mouseup",b)),n.preventDefault&&n.preventDefault()}));a.on("destroy",(function(){CKEDITOR.tools.removeFunction(h)})),a.on("uiSpace",(function(b){if("bottom"==b.data.space){var e="";c&&!d&&(e=" cke_resizer_horizontal"),!c&&d&&(e=" cke_resizer_vertical");var g='<span id="'+n+'" class="cke_resizer'+e+" cke_resizer_"+o+'" title="'+CKEDITOR.tools.htmlEncode(a.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+h+', event)">'+("ltr"==o?"◢":"◣")+"</span>";"ltr"==o&&"ltr"==e?b.data.html+=g:b.data.html=g+b.data.html}}),a,null,100),a.on("maximize",(function(b){a.ui.space("resizer")[b.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()}))}}}),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var a=function(a){var b=this._,e=b.menu;b.state!==CKEDITOR.TRISTATE_DISABLED&&(b.on&&e?e.hide():(b.previousState=b.state,e||((e=b.menu=new CKEDITOR.menu(a,{panel:{className:"cke_menu_panel",attributes:{"aria-label":a.lang.common.options}}})).onHide=CKEDITOR.tools.bind((function(){var e=this.command?a.getCommand(this.command).modes:this.modes;this.setState(!e||e[a.mode]?b.previousState:CKEDITOR.TRISTATE_DISABLED),b.on=0}),this),this.onMenu&&e.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),b.on=1,setTimeout((function(){e.show(CKEDITOR.document.getById(b.id),4)}),0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(e){delete e.panel,this.base(e),this.hasArrow="menu",this.click=a},statics:{handler:{create:function(a){return new CKEDITOR.ui.menuButton(a)}}}})},beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton",CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",onLoad:function(a){"moono-lisa"==(CKEDITOR.skinName||a.config.skin)&&CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl(this.path+"skins/"+CKEDITOR.skin.name+"/scayt.css")),CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl(this.path+"dialogs/dialog.css"))},init:function(a){var e=this,b=CKEDITOR.plugins.scayt;this.bindEvents(a),this.parseConfig(a),this.addRule(a),CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js")),this.addMenuItems(a);var t=a.lang.scayt,n=CKEDITOR.env;a.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:t.text_title,title:a.plugins.wsc?a.lang.wsc.title:t.text_title,modes:{wysiwyg:!(n.ie&&(8>n.version||n.quirks))},toolbar:"spellchecker,20",refresh:function(){var e=a.ui.instances.Scayt.getState();a.scayt&&(e=b.state.scayt[a.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),a.fire("scaytButtonState",e)},onRender:function(){var b=this;a.on("scaytButtonState",(function(a){void 0!==typeof a.data&&b.setState(a.data)}))},onMenu:function(){var e=a.scayt;a.getMenuItem("scaytToggle").label=a.lang.scayt[e&&b.state.scayt[a.name]?"btn_disable":"btn_enable"];var t={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:e?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:e?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:e?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:e?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:a.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};return a.config.scayt_uiTabs[0]||delete t.scaytOptions,a.config.scayt_uiTabs[1]||delete t.scaytLangs,a.config.scayt_uiTabs[2]||delete t.scaytDict,e&&!CKEDITOR.plugins.scayt.isNewUdSupported(e)&&(delete t.scaytDict,a.config.scayt_uiTabs[2]=0,CKEDITOR.plugins.scayt.alarmCompatibilityMessage()),t}}),a.contextMenu&&a.addMenuItems&&(a.contextMenu.addListener((function(b,t){var n,o,r=a.scayt;return r&&(o=r.getSelectionNode())&&(n=e.menuGenerator(a,o),r.showBanner("."+a.contextMenu._.definition.panel.className.split(" ").join(" ."))),n})),a.contextMenu._.onHide=CKEDITOR.tools.override(a.contextMenu._.onHide,(function(b){return function(){var e=a.scayt;return e&&e.hideBanner(),b.apply(this)}})))},addMenuItems:function(a){var e=this,b=CKEDITOR.plugins.scayt;a.addMenuGroup("scaytButton");for(var t=a.config.scayt_contextMenuItemsOrder.split("|"),n=0;n<t.length;n++)t[n]="scayt_"+t[n];if((t=["grayt_description","grayt_suggest","grayt_control"].concat(t))&&t.length)for(n=0;n<t.length;n++)a.addMenuGroup(t[n],n-10);a.addCommand("scaytToggle",{exec:function(a){var e=a.scayt;b.state.scayt[a.name]=!b.state.scayt[a.name],!0===b.state.scayt[a.name]?e||b.createScayt(a):e&&b.destroy(a)}}),a.addCommand("scaytAbout",{exec:function(a){a.scayt.tabToOpen="about",b.openDialog(e.dialogName,a)}}),a.addCommand("scaytOptions",{exec:function(a){a.scayt.tabToOpen="options",b.openDialog(e.dialogName,a)}}),a.addCommand("scaytLangs",{exec:function(a){a.scayt.tabToOpen="langs",b.openDialog(e.dialogName,a)}}),a.addCommand("scaytDict",{exec:function(a){a.scayt.tabToOpen="dictionaries",b.openDialog(e.dialogName,a)}}),t={scaytToggle:{label:a.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:a.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:a.lang.scayt.btn_options,group:"scaytButton",command:"scaytOptions"},scaytLangs:{label:a.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:a.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}},a.plugins.wsc&&(t.WSC={label:a.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var b=CKEDITOR.plugins.scayt,e=a.scayt,t=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.container.getText():a.document.getBody().getText();(t=t.replace(/\s/g,""))?(e&&b.state.scayt[a.name]&&e.setMarkupPaused&&e.setMarkupPaused(!0),a.lockSelection(),a.execCommand("checkspell")):alert("Nothing to check!")}}),a.addMenuItems(t)},bindEvents:function(a){var e=CKEDITOR.plugins.scayt,b=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,t=function(){e.destroy(a)},n=function(){!e.state.scayt[a.name]||a.readOnly||a.scayt||e.createScayt(a)},o=function(){b?a.config.scayt_inlineModeImmediateMarkup?n():(a.on("blur",(function(){setTimeout(t,0)})),a.on("focus",n),a.focusManager.hasFocus&&n()):n(),function(){var e=a.editable();e.attachListener(e,"focus",(function(e){var g,t;if(CKEDITOR.plugins.scayt&&!a.scayt&&setTimeout(n,0),e=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[a.name]&&a.scayt,(b||e)&&a._.savedSelection){e=!(e=a._.savedSelection.getSelectedElement())&&a._.savedSelection.getRanges();for(var o=0;o<e.length;o++)"string"==typeof(t=e[o]).startContainer.$.nodeValue&&((g=t.startContainer.getText().length)<t.startOffset||g<t.endOffset)&&a.unlockSelection(!1)}}),this,null,-10)}();var g=a.editable();g.attachListener(g,"mousedown",(function(b){b=b.data.getTarget();var e=a.widgets&&a.widgets.getByElement(b);e&&(e.wrapper=b.getAscendant((function(a){return a.hasAttribute("data-cke-widget-wrapper")}),!0))}),this,null,-10)};a.on("contentDom",o),a.on("beforeCommandExec",(function(b){var t=a.scayt,n=!1,o=!1,r=!0;b.data.name in e.options.disablingCommandExec&&"wysiwyg"==a.mode?t&&(e.destroy(a),a.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):"bold"!==b.data.name&&"italic"!==b.data.name&&"underline"!==b.data.name&&"strike"!==b.data.name&&"subscript"!==b.data.name&&"superscript"!==b.data.name&&"enter"!==b.data.name&&"cut"!==b.data.name&&"language"!==b.data.name||!t||("cut"===b.data.name&&(r=!1,o=!0),"language"===b.data.name&&(o=n=!0),a.fire("reloadMarkupScayt",{removeOptions:{removeInside:r,forceBookmark:o,language:n},timeout:0}))})),a.on("beforeSetMode",(function(b){"source"==b.data&&((b=a.scayt)&&(e.destroy(a),a.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)),a.document&&a.document.getBody().removeAttribute("_jquid"))})),a.on("afterCommandExec",(function(b){"wysiwyg"!=a.mode||"undo"!=b.data.name&&"redo"!=b.data.name||setTimeout((function(){e.reloadMarkup(a.scayt)}),250)})),a.on("readOnly",(function(b){var t;b&&(t=a.scayt,!0===b.editor.readOnly?t&&t.fire("removeMarkupInDocument",{}):t?e.reloadMarkup(t):"wysiwyg"==b.editor.mode&&!0===e.state.scayt[b.editor.name]&&(e.createScayt(a),b.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))})),a.on("beforeDestroy",t),a.on("setData",(function(){t(),(a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||a.plugins.divarea)&&o()}),this,null,50),a.on("reloadMarkupScayt",(function(b){var t=b.data&&b.data.removeOptions,n=b.data&&b.data.timeout,o=b.data&&b.data.language,r=a.scayt;r&&setTimeout((function(){o&&(t.selectionNode=a.plugins.language.getCurrentLangElement(a),t.selectionNode=t.selectionNode&&t.selectionNode.$||null),r.removeMarkupInSelectionNode(t),e.reloadMarkup(r)}),n||0)})),a.on("insertElement",(function(){a.fire("reloadMarkupScayt",{removeOptions:{forceBookmark:!0}})}),this,null,50),a.on("insertHtml",(function(){a.scayt&&a.scayt.setFocused&&a.scayt.setFocused(!0),a.fire("reloadMarkupScayt")}),this,null,50),a.on("insertText",(function(){a.scayt&&a.scayt.setFocused&&a.scayt.setFocused(!0),a.fire("reloadMarkupScayt")}),this,null,50),a.on("scaytDialogShown",(function(b){b.data.selectPage(a.scayt.tabToOpen)}))},parseConfig:function(a){if((t=CKEDITOR.plugins.scayt).replaceOldOptionsNames(a.config),"boolean"!=typeof a.config.scayt_autoStartup&&(a.config.scayt_autoStartup=!1),t.state.scayt[a.name]=a.config.scayt_autoStartup,"boolean"!=typeof a.config.grayt_autoStartup&&(a.config.grayt_autoStartup=!1),"boolean"!=typeof a.config.scayt_inlineModeImmediateMarkup&&(a.config.scayt_inlineModeImmediateMarkup=!1),t.state.grayt[a.name]=a.config.grayt_autoStartup,a.config.scayt_contextCommands||(a.config.scayt_contextCommands="ignoreall|add"),a.config.scayt_contextMenuItemsOrder||(a.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control"),a.config.scayt_sLang||(a.config.scayt_sLang="en_US"),(void 0===a.config.scayt_maxSuggestions||"number"!=typeof a.config.scayt_maxSuggestions||0>a.config.scayt_maxSuggestions)&&(a.config.scayt_maxSuggestions=3),(void 0===a.config.scayt_minWordLength||"number"!=typeof a.config.scayt_minWordLength||1>a.config.scayt_minWordLength)&&(a.config.scayt_minWordLength=3),void 0!==a.config.scayt_customDictionaryIds&&"string"==typeof a.config.scayt_customDictionaryIds||(a.config.scayt_customDictionaryIds=""),void 0!==a.config.scayt_userDictionaryName&&"string"==typeof a.config.scayt_userDictionaryName||(a.config.scayt_userDictionaryName=null),"string"==typeof a.config.scayt_uiTabs&&3===a.config.scayt_uiTabs.split(",").length){var b=[],e=[];a.config.scayt_uiTabs=a.config.scayt_uiTabs.split(","),CKEDITOR.tools.search(a.config.scayt_uiTabs,(function(a){1===Number(a)||0===Number(a)?(e.push(!0),b.push(Number(a))):e.push(!1)})),null===CKEDITOR.tools.search(e,!1)?a.config.scayt_uiTabs=b:a.config.scayt_uiTabs=[1,1,1]}else a.config.scayt_uiTabs=[1,1,1];if("string"!=typeof a.config.scayt_serviceProtocol&&(a.config.scayt_serviceProtocol=null),"string"!=typeof a.config.scayt_serviceHost&&(a.config.scayt_serviceHost=null),"string"!=typeof a.config.scayt_servicePort&&(a.config.scayt_servicePort=null),"string"!=typeof a.config.scayt_servicePath&&(a.config.scayt_servicePath=null),a.config.scayt_moreSuggestions||(a.config.scayt_moreSuggestions="on"),"string"!=typeof a.config.scayt_customerId&&(a.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2"),"string"!=typeof a.config.scayt_customPunctuation&&(a.config.scayt_customPunctuation="-"),"string"!=typeof a.config.scayt_srcUrl&&(t=-1!=(t=document.location.protocol).search(/https?:/)?t:"http:",a.config.scayt_srcUrl=t+"//svc.webspellchecker.net/spellcheck31/wscbundle/wscbundle.js"),"boolean"!=typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0),"boolean"!=typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0),CKEDITOR.config.scayt_handleUndoRedo=!!CKEDITOR.plugins.undo&&CKEDITOR.config.scayt_handleUndoRedo,"boolean"!=typeof a.config.scayt_multiLanguageMode&&(a.config.scayt_multiLanguageMode=!1),"object"!=typeof a.config.scayt_multiLanguageStyles&&(a.config.scayt_multiLanguageStyles={}),a.config.scayt_ignoreAllCapsWords&&"boolean"!=typeof a.config.scayt_ignoreAllCapsWords&&(a.config.scayt_ignoreAllCapsWords=!1),a.config.scayt_ignoreDomainNames&&"boolean"!=typeof a.config.scayt_ignoreDomainNames&&(a.config.scayt_ignoreDomainNames=!1),a.config.scayt_ignoreWordsWithMixedCases&&"boolean"!=typeof a.config.scayt_ignoreWordsWithMixedCases&&(a.config.scayt_ignoreWordsWithMixedCases=!1),a.config.scayt_ignoreWordsWithNumbers&&"boolean"!=typeof a.config.scayt_ignoreWordsWithNumbers&&(a.config.scayt_ignoreWordsWithNumbers=!1),a.config.scayt_disableOptionsStorage){var t=CKEDITOR.tools.isArray(a.config.scayt_disableOptionsStorage)?a.config.scayt_disableOptionsStorage:"string"==typeof a.config.scayt_disableOptionsStorage?[a.config.scayt_disableOptionsStorage]:void 0,n="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),o=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],r=CKEDITOR.tools.search,g=CKEDITOR.tools.indexOf;a.config.scayt_disableOptionsStorage=function(a){for(var b=[],e=0;e<a.length;e++){var t=a[e],q=!!r(a,"options");if(!r(n,t)||q&&r(o,(function(a){if("lang"===a)return!1})))return;if(r(o,t)&&o.splice(g(o,t),1),"all"===t||q&&r(a,"lang"))return[];"options"===t&&(o=["lang"])}return b.concat(o)}(t)}a.config.scayt_disableCache&&"boolean"!=typeof a.config.scayt_disableCache&&(a.config.scayt_disableCache=!1),(void 0===a.config.scayt_cacheSize||"number"!=typeof a.config.scayt_cacheSize||1>a.config.scayt_cacheSize)&&(a.config.scayt_cacheSize=4e3)},addRule:function(a){var e=CKEDITOR.plugins.scayt,t=(b=a.dataProcessor)&&b.htmlFilter,n=a._.elementsPath&&a._.elementsPath.filters,b=b&&b.dataFilter,o=a.addRemoveFormatFilter;n&&n.push((function(b){if(a.scayt&&(b.hasAttribute(e.options.data_attribute_name)||b.hasAttribute(e.options.problem_grammar_data_attribute)))return!1})),b&&b.addRules({elements:{span:function(a){var b=a.hasClass(e.options.misspelled_word_class)&&a.attributes[e.options.data_attribute_name],t=a.hasClass(e.options.problem_grammar_class)&&a.attributes[e.options.problem_grammar_data_attribute];return e&&(b||t)&&delete a.name,a}}}),t&&t.addRules({elements:{span:function(a){var b=a.hasClass(e.options.misspelled_word_class)&&a.attributes[e.options.data_attribute_name],t=a.hasClass(e.options.problem_grammar_class)&&a.attributes[e.options.problem_grammar_data_attribute];return e&&(b||t)&&delete a.name,a}}}),o&&o.call(a,(function(b){var t=!0;return a.scayt&&(b.hasAttribute(e.options.data_attribute_name)||b.hasAttribute(e.options.problem_grammar_data_attribute))&&(t=!1),t}))},scaytMenuDefinition:function(a){var e=this,b=CKEDITOR.plugins.scayt;return{scayt:{scayt_ignore:{label:(a=a.scayt).getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(a){a.scayt.ignoreWord()}},scayt_ignoreall:{label:a.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(a){a.scayt.ignoreAllWords()}},scayt_add:{label:a.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(a){var b=a.scayt;setTimeout((function(){b.addWordToUserDictionary()}),10)}},scayt_option:{label:a.getLocal("btn_options"),group:"scayt_control",order:4,exec:function(a){a.scayt.tabToOpen="options",b.openDialog(e.dialogName,a)},verification:function(a){return 1==a.config.scayt_uiTabs[0]}},scayt_language:{label:a.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(a){a.scayt.tabToOpen="langs",b.openDialog(e.dialogName,a)},verification:function(a){return 1==a.config.scayt_uiTabs[1]}},scayt_dictionary:{label:a.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(a){a.scayt.tabToOpen="dictionaries",b.openDialog(e.dialogName,a)},verification:function(a){return 1==a.config.scayt_uiTabs[2]}},scayt_about:{label:a.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(a){a.scayt.tabToOpen="about",b.openDialog(e.dialogName,a)}}},grayt:{grayt_problemdescription:{label:"Grammar problem description",group:"grayt_description",order:1,state:CKEDITOR.TRISTATE_DISABLED,exec:function(a){}},grayt_ignore:{label:a.getLocal("btn_ignore"),group:"grayt_control",order:2,exec:function(a){a.scayt.ignorePhrase()}},grayt_ignoreall:{label:a.getLocal("btn_ignoreAll"),group:"grayt_control",order:3,exec:function(a){a.scayt.ignoreAllPhrases()}}}}},buildSuggestionMenuItems:function(a,e,b){var t={},n={},o=b?"word":"phrase",r=b?"startGrammarCheck":"startSpellCheck",g=a.scayt;if(0<e.length&&"no_any_suggestions"!==e[0])if(b)for(b=0;b<e.length;b++){var l="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[b].replace(" ","_");a.addCommand(l,this.createCommand(CKEDITOR.plugins.scayt.suggestions[b],o,r)),b<a.config.scayt_maxSuggestions?(a.addMenuItem(l,{label:e[b],command:l,group:"scayt_suggest",order:b+1}),t[l]=CKEDITOR.TRISTATE_OFF):(a.addMenuItem(l,{label:e[b],command:l,group:"scayt_moresuggest",order:b+1}),n[l]=CKEDITOR.TRISTATE_OFF,"on"===a.config.scayt_moreSuggestions&&(a.addMenuItem("scayt_moresuggest",{label:g.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return n}}),t.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else for(b=0;b<e.length;b++)l="grayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[b].replace(" ","_"),a.addCommand(l,this.createCommand(CKEDITOR.plugins.scayt.suggestions[b],o,r)),a.addMenuItem(l,{label:e[b],command:l,group:"grayt_suggest",order:b+1}),t[l]=CKEDITOR.TRISTATE_OFF;else t.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,a.addCommand("no_scayt_suggest",{exec:function(){}}),a.addMenuItem("no_scayt_suggest",{label:g.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return t},menuGenerator:function(a,e){var g,t,n,o,b=a.scayt,r=this.scaytMenuDefinition(a),l={},c=a.config.scayt_contextCommands.split("|"),d=e.getAttribute(b.getLangAttribute())||b.getLang();if(t=b.isScaytNode(e),n=b.isGraytNode(e),t?(r=r.scayt,g=e.getAttribute(b.getScaytNodeAttributeName()),b.fire("getSuggestionsList",{lang:d,word:g}),l=this.buildSuggestionMenuItems(a,CKEDITOR.plugins.scayt.suggestions,t)):n&&(r=r.grayt,l=e.getAttribute(b.getGraytNodeAttributeName()),b.getGraytNodeRuleAttributeName?(g=e.getAttribute(b.getGraytNodeRuleAttributeName()),b.getProblemDescriptionText(l,g,d)):b.getProblemDescriptionText(l,d),o=b.getProblemDescriptionText(l,g,d),r.grayt_problemdescription&&o&&(o=o.replace(/([.!?])\s/g,"$1<br>"),r.grayt_problemdescription.label=o),b.fire("getGrammarSuggestionsList",{lang:d,phrase:l,rule:g}),l=this.buildSuggestionMenuItems(a,CKEDITOR.plugins.scayt.suggestions,t)),t&&"off"==a.config.scayt_contextCommands)return l;for(var h in r)t&&-1==CKEDITOR.tools.indexOf(c,h.replace("scayt_",""))&&"all"!=a.config.scayt_contextCommands||n&&"grayt_problemdescription"!==h&&-1==CKEDITOR.tools.indexOf(c,h.replace("grayt_",""))&&"all"!=a.config.scayt_contextCommands||(l[h]=void 0!==r[h].state?r[h].state:CKEDITOR.TRISTATE_OFF,"function"!=typeof r[h].verification||r[h].verification(a)||delete l[h],a.addCommand(h,{exec:r[h].exec}),a.addMenuItem(h,{label:a.lang.scayt[r[h].label]||r[h].label,command:h,group:r[h].group,order:r[h].order}));return l},createCommand:function(a,e,b){return{exec:function(t){t=t.scayt;var n={};n[e]=a,t.replaceSelectionNode(n),"startGrammarCheck"===b&&t.removeMarkupInSelectionNode({grammarOnly:!0}),t.fire(b)}}}}),CKEDITOR.plugins.scayt={charsToObserve:[{charName:"cke-fillingChar",charCode:function(){var e;if(a=(a=CKEDITOR.version.match(/^\d(\.\d*)*/))&&a[0]){e="4.5.7";var b,a=a.replace(/\./g,"");e=e.replace(/\./g,""),b=0<=(b=a.length-e.length)?b:0,e=parseInt(a)>=parseInt(e)*Math.pow(10,b)}return e?Array(7).join(String.fromCharCode(8203)):String.fromCharCode(8203)}()}],state:{scayt:{},grayt:{}},warningCounter:0,suggestions:[],options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word",problem_grammar_data_attribute:"data-grayt-phrase",problem_grammar_class:"gramm-problem"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},openDialog:function(a,e){var b=e.scayt;b.isAllModulesReady&&!1===b.isAllModulesReady()||(e.lockSelection(),e.openDialog(a))},alarmCompatibilityMessage:function(){5>this.warningCounter&&(console.warn("You are using the latest version of SCAYT plugin for CKEditor with the old application version. In order to have access to the newest features, it is recommended to upgrade the application version to latest one as well. Contact us for more details at support@webspellchecker.net."),this.warningCounter+=1)},isNewUdSupported:function(a){return!!a.getUserDictionary},reloadMarkup:function(a){var e;a&&(e=a.getScaytLangList(),a.reloadMarkup?a.reloadMarkup():(this.alarmCompatibilityMessage(),e&&e.ltr&&e.rtl&&a.fire("startSpellCheck, startGrammarCheck")))},replaceOldOptionsNames:function(a){for(var e in a)e in this.backCompatibilityMap&&(a[this.backCompatibilityMap[e]]=a[e],delete a[e])},createScayt:function(a){var e=this,b=CKEDITOR.plugins.scayt;this.loadScaytLibrary(a,(function(a){function t(a){return new SCAYT.CKSCAYT(a,(function(){}),(function(){}))}var n;if(a.window&&(n="BODY"==a.editable().$.nodeName?a.window.getFrame():a.editable()),n){var o;n={lang:a.config.scayt_sLang,container:n.$,customDictionary:a.config.scayt_customDictionaryIds,userDictionaryName:a.config.scayt_userDictionaryName,localization:a.langCode,customer_id:a.config.scayt_customerId,customPunctuation:a.config.scayt_customPunctuation,debug:a.config.scayt_debug,data_attribute_name:e.options.data_attribute_name,misspelled_word_class:e.options.misspelled_word_class,problem_grammar_data_attribute:e.options.problem_grammar_data_attribute,problem_grammar_class:e.options.problem_grammar_class,"options-to-restore":a.config.scayt_disableOptionsStorage,focused:a.editable().hasFocus,ignoreElementsRegex:a.config.scayt_elementsToIgnore,ignoreGraytElementsRegex:a.config.grayt_elementsToIgnore,minWordLength:a.config.scayt_minWordLength,multiLanguageMode:a.config.scayt_multiLanguageMode,multiLanguageStyles:a.config.scayt_multiLanguageStyles,graytAutoStartup:a.config.grayt_autoStartup,disableCache:a.config.scayt_disableCache,cacheSize:a.config.scayt_cacheSize,charsToObserve:b.charsToObserve},a.config.scayt_serviceProtocol&&(n.service_protocol=a.config.scayt_serviceProtocol),a.config.scayt_serviceHost&&(n.service_host=a.config.scayt_serviceHost),a.config.scayt_servicePort&&(n.service_port=a.config.scayt_servicePort),a.config.scayt_servicePath&&(n.service_path=a.config.scayt_servicePath),"boolean"==typeof a.config.scayt_ignoreAllCapsWords&&(n["ignore-all-caps-words"]=a.config.scayt_ignoreAllCapsWords),"boolean"==typeof a.config.scayt_ignoreDomainNames&&(n["ignore-domain-names"]=a.config.scayt_ignoreDomainNames),"boolean"==typeof a.config.scayt_ignoreWordsWithMixedCases&&(n["ignore-words-with-mixed-cases"]=a.config.scayt_ignoreWordsWithMixedCases),"boolean"==typeof a.config.scayt_ignoreWordsWithNumbers&&(n["ignore-words-with-numbers"]=a.config.scayt_ignoreWordsWithNumbers);try{o=t(n)}catch(r){e.alarmCompatibilityMessage(),delete n.charsToObserve,o=t(n)}o.subscribe("suggestionListSend",(function(a){for(var b={},e=[],t=0;t<a.suggestionList.length;t++)b["word_"+a.suggestionList[t]]||(b["word_"+a.suggestionList[t]]=a.suggestionList[t],e.push(a.suggestionList[t]));CKEDITOR.plugins.scayt.suggestions=e})),o.subscribe("selectionIsChanged",(function(b){a.getSelection().isLocked&&"restoreSelection"!==b.action&&a.lockSelection(),"restoreSelection"===b.action&&a.selectionChange(!0)})),o.subscribe("graytStateChanged",(function(e){b.state.grayt[a.name]=e.state})),o.addMarkupHandler&&o.addMarkupHandler((function(b){var e=a.editable(),t=e.getCustomData(b.charName);t&&(t.$=b.node,e.setCustomData(b.charName,t))})),a.scayt=o,a.fire("scaytButtonState",a.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)}else b.state.scayt[a.name]=!1}))},destroy:function(a){a.scayt&&a.scayt.destroy(),delete a.scayt,a.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(a,e){var b,t=function(){CKEDITOR.fireOnce("scaytReady"),a.scayt||"function"==typeof e&&e(a)};void 0===window.SCAYT||"function"!=typeof window.SCAYT.CKSCAYT?(b=a.config.scayt_srcUrl,CKEDITOR.scriptLoader.load(b,(function(a){a&&t()}))):window.SCAYT&&"function"==typeof window.SCAYT.CKSCAYT&&t()}},CKEDITOR.on("dialogDefinition",(function(a){var e=a.data.name;a=a.data.definition.dialog,"scaytDialog"!==e&&"checkspell"!==e&&(a.on("show",(function(a){a=a.sender&&a.sender.getParentEditor();var e=CKEDITOR.plugins.scayt,t=a.scayt;t&&e.state.scayt[a.name]&&t.setMarkupPaused&&t.setMarkupPaused(!0)})),a.on("hide",(function(a){a=a.sender&&a.sender.getParentEditor();var e=CKEDITOR.plugins.scayt,t=a.scayt;t&&e.state.scayt[a.name]&&t.setMarkupPaused&&t.setMarkupPaused(!1)}))),"scaytDialog"===e&&a.on("cancel",(function(a){return!1}),this,null,-1),"checkspell"===e&&a.on("cancel",(function(a){a=a.sender&&a.sender.getParentEditor();var e=CKEDITOR.plugins.scayt,t=a.scayt;t&&e.state.scayt[a.name]&&t.setMarkupPaused&&t.setMarkupPaused(!1),a.unlockSelection()}),this,null,-2),"link"===e&&a.on("ok",(function(a){var e=a.sender&&a.sender.getParentEditor();e&&setTimeout((function(){e.fire("reloadMarkupScayt",{removeOptions:{removeInside:!0,forceBookmark:!0},timeout:0})}),0)})),"replace"===e&&a.on("hide",(function(a){a=a.sender&&a.sender.getParentEditor();var e=CKEDITOR.plugins.scayt,t=a.scayt;a&&setTimeout((function(){t&&(t.fire("removeMarkupInDocument",{}),e.reloadMarkup(t))}),0)}))})),CKEDITOR.on("scaytReady",(function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty&&((a=CKEDITOR.editor.prototype).checkDirty=CKEDITOR.tools.override(a.checkDirty,(function(a){return function(){var e=null,t=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt){if(e="ready"==this.status){var n=t.removeMarkupFromString(this.getSnapshot());t=t.removeMarkupFromString(this._.previousValue),e=e&&t!==n}}else e=a.call(this);return e}})),a.resetDirty=CKEDITOR.tools.override(a.resetDirty,(function(a){return function(){var e=this.scayt;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt?this._.previousValue=e.removeMarkupFromString(this.getSnapshot()):a.call(this)}}))),!0===CKEDITOR.config.scayt_handleUndoRedo){var a,e="function"==typeof(a=CKEDITOR.plugins.undo.Image.prototype).equalsContent?"equalsContent":"equals";a[e]=CKEDITOR.tools.override(a[e],(function(a){return function(e){var t=e.editor.scayt,n=this.contents,o=e.contents,g=null;return CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[e.editor.name]&&e.editor.scayt&&(this.contents=t.removeMarkupFromString(n)||"",e.contents=t.removeMarkupFromString(o)||""),g=a.apply(this,arguments),this.contents=n,e.contents=o,g}}))}})),function(){var a={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(a){this.toggleState(),this.refresh(a)},refresh:function(a){if(a.document){var b=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";a.editable()[b]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var a;a=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,;.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,;.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,;.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders "),CKEDITOR.addCss(a)},init:function(e){var b=e.addCommand("showborders",a);b.canUndo=!1,!1!==e.config.startupShowBorders&&b.setState(CKEDITOR.TRISTATE_ON),e.on("mode",(function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(e)}),null,null,100),e.on("contentDom",(function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(e)})),e.on("removeFormatCleanup",(function(a){a=a.data,e.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&a.is("table")&&(!a.hasAttribute("border")||0>=parseInt(a.getAttribute("border"),10))&&a.addClass("cke_show_border")}))},afterInit:function(a){var b=a.dataProcessor;a=b&&b.dataFilter,b=b&&b.htmlFilter,a&&a.addRules({elements:{table:function(a){var b=(a=a.attributes).class,e=parseInt(a.border,10);e&&!(0>=e)||b&&-1!=b.indexOf("cke_show_border")||(a.class=(b||"")+" cke_show_border")}}}),b&&b.addRules({elements:{table:function(a){var b=(a=a.attributes).class;b&&(a.class=b.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}}),CKEDITOR.on("dialogDefinition",(function(a){var b=a.data.name;"table"!=b&&"tableProperties"!=b||((b=(a=a.data.definition).getContents("info").get("txtBorder")).commit=CKEDITOR.tools.override(b.commit,(function(a){return function(b,e){a.apply(this,arguments);var t=parseInt(this.getValue(),10);e[!t||0>=t?"addClass":"removeClass"]("cke_show_border")}})),(a=(a=a.getContents("advanced"))&&a.get("advCSSClasses"))&&(a.setup=CKEDITOR.tools.override(a.setup,(function(a){return function(){a.apply(this,arguments),this.setValue(this.getValue().replace(/cke_show_border/,""))}})),a.commit=CKEDITOR.tools.override(a.commit,(function(a){return function(b,e){a.apply(this,arguments),parseInt(e.getAttribute("border"),10)||e.addClass("cke_show_border")}}))))}))}(),function(){CKEDITOR.plugins.add("sourcearea",{init:function(e){function b(){var a=n&&this.equals(CKEDITOR.document.getActive());this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show(),a&&this.focus()}if(e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var t=CKEDITOR.plugins.sourcearea;e.addMode("source",(function(t){var n=e.ui.space("contents").getDocument().createElement("textarea");n.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",e.config.sourceAreaTabSize||4))),n.setAttribute("dir","ltr"),n.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu"),e.ui.space("contents").append(n),(n=e.editable(new a(e,n))).setData(e.getData(1)),CKEDITOR.env.ie&&(n.attachListener(e,"resize",b,n),n.attachListener(CKEDITOR.document.getWindow(),"resize",b,n),CKEDITOR.tools.setTimeout(b,0,n)),e.fire("ariaWidget",this),t()})),e.addCommand("source",t.commands.source),e.ui.addButton&&e.ui.addButton("Source",{label:e.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),e.on("mode",(function(){e.getCommand("source").setState("source"==e.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}));var n=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var a=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(a){this.setValue(a),this.status="ready",this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(a){this[(a?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){a.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(a){"wysiwyg"==a.mode&&a.fire("saveSnapshot"),a.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),a.setMode("source"==a.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(a){var e=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),a.addCommand("specialchar",{exec:function(){var b=a.langCode;b=e.availableLangs[b]?b:e.availableLangs[b.replace(/-.*/,"")]?b.replace(/-.*/,""):"en",CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e.path+"dialogs/lang/"+b+".js"),(function(){CKEDITOR.tools.extend(a.lang.specialchar,e.langEntries[b]),a.openDialog("specialchar")}))},modes:{wysiwyg:1},canUndo:!1}),a.ui.addButton&&a.ui.addButton("SpecialChar",{label:a.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(a){var e=a.config,b=a.lang.stylescombo,t={},n=[],o=[];a.on("stylesSet",(function(b){if(b=b.data.styles){for(var g,r,l,c=0,d=b.length;c<d;c++)g=b[c],a.blockless&&g.element in CKEDITOR.dtd.$block||"string"==typeof g.type&&!CKEDITOR.style.customHandlers[g.type]||(r=g.name,g=new CKEDITOR.style(g),a.filter.customConfig&&!a.filter.check(g))||(g._name=r,g._.enterMode=e.enterMode,g._.type=l=g.assignedTo||g.type,g._.weight=c+1e3*(l==CKEDITOR.STYLE_OBJECT?1:l==CKEDITOR.STYLE_BLOCK?2:3),t[r]=g,n.push(g),o.push(g));n.sort((function(a,b){return a._.weight-b._.weight}))}})),a.ui.addRichCombo("Styles",{label:b.label,title:b.panelTitle,toolbar:"styles,10",allowedContent:o,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(e.contentsCss),multiSelect:!0,attributes:{"aria-label":b.panelTitle}},init:function(){var a,e,t,o,r,l;for(r=0,l=n.length;r<l;r++)e=(a=n[r])._name,(o=a._.type)!=t&&(this.startGroup(b["panelTitle"+String(o)]),t=o),this.add(e,a.type==CKEDITOR.STYLE_OBJECT?e:a.buildPreview(),e);this.commit()},onClick:function(b){a.focus(),a.fire("saveSnapshot"),b=t[b];var e=a.elementPath();b.group&&b.removeStylesFromSameGroup(a)?a.applyStyle(b):a[b.checkActive(e,a)?"removeStyle":"applyStyle"](b),a.fire("saveSnapshot")},onRender:function(){a.on("selectionChange",(function(b){for(var e,n=this.getValue(),o=0,r=(b=b.data.path.elements).length;o<r;o++)for(var l in e=b[o],t)if(t[l].checkElementRemovable(e,!0,a))return void(l!=n&&this.setValue(l));this.setValue("")}),this)},onOpen:function(){var e=(e=a.getSelection()).getSelectedElement()||e.getStartElement()||a.editable(),g=(e=a.elementPath(e),[0,0,0,0]);for(var n in this.showAll(),this.unmarkAll(),t){var o=t[n],r=o._.type;o.checkApplicable(e,a,a.activeFilter)?g[r]++:this.hideItem(n),o.checkActive(e,a)&&this.mark(n)}g[CKEDITOR.STYLE_BLOCK]||this.hideGroup(b["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]),g[CKEDITOR.STYLE_INLINE]||this.hideGroup(b["panelTitle"+String(CKEDITOR.STYLE_INLINE)]),g[CKEDITOR.STYLE_OBJECT]||this.hideGroup(b["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var b=a.elementPath();if(b){for(var e in t)if(t[e].checkApplicable(b,a,a.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){t={},n=[]}})}}),function(){function a(a){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(b){if(b.editable().hasFocus){var g,e=b.getSelection();if(g=new CKEDITOR.dom.elementPath(e.getCommonAncestor(),e.root).contains({td:1,th:1},1)){if(e=b.createRange(),(n=CKEDITOR.tools.tryThese((function(){var b=g.getParent().$.cells[g.$.cellIndex+(a?-1:1)];return b.parentNode.parentNode,b}),(function(){var b;return(b=(b=g.getParent()).getAscendant("table").$.rows[b.$.rowIndex+(a?-1:1)]).cells[a?b.cells.length-1:0]})))||a){if(!n)return!0;n=new CKEDITOR.dom.element(n),e.moveToElementEditStart(n),e.checkStartOfBlock()&&e.checkEndOfBlock()||e.selectNodeContents(n)}else{for(var t=g.getAscendant("table").$,n=g.getParent().$.cells,o=(t=new CKEDITOR.dom.element(t.insertRow(-1),b.document),0),r=n.length;o<r;o++)t.append(new CKEDITOR.dom.element(n[o],b.document).clone(!1,!1)).appendBogus();e.moveToElementEditStart(t)}return e.select(!0),!0}}return!1}}}var e={editorFocus:!1,modes:{wysiwyg:1,source:1}},b={exec:function(a){a.container.focusNext(!0,a.tabIndex)}},t={exec:function(a){a.container.focusPrevious(!0,a.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(n){for(var o=!1!==n.config.enableTabKeyTools,r=n.config.tabSpaces||0,g="";r--;)g+=" ";g&&n.on("key",(function(a){9==a.data.keyCode&&(n.insertText(g),a.cancel())})),o&&n.on("key",(function(a){(9==a.data.keyCode&&n.execCommand("selectNextCell")||a.data.keyCode==CKEDITOR.SHIFT+9&&n.execCommand("selectPreviousCell"))&&a.cancel()})),n.addCommand("blur",CKEDITOR.tools.extend(b,e)),n.addCommand("blurBack",CKEDITOR.tools.extend(t,e)),n.addCommand("selectNextCell",a()),n.addCommand("selectPreviousCell",a(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(a,e){var t,n,o,r,g,l,b=void 0===e?this.getTabIndex():e;if(0>=b)for(g=this.getNextSourceNode(a,CKEDITOR.NODE_ELEMENT);g;){if(g.isVisible()&&0===g.getTabIndex()){o=g;break}g=g.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(g=this.getDocument().getBody().getFirst();g=g.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!t)if(!n&&g.equals(this)){if(n=!0,a){if(!(g=g.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;t=1}}else n&&!this.contains(g)&&(t=1);if(g.isVisible()&&!(0>(l=g.getTabIndex()))){if(t&&l==b){o=g;break}l>b&&(!o||!r||l<r)?(o=g,r=l):o||0!==l||(o=g,r=l)}}o&&o.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(a,e){for(var t,n,o,g,b=void 0===e?this.getTabIndex():e,r=0,l=this.getDocument().getBody().getLast();l=l.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!t)if(!n&&l.equals(this)){if(n=!0,a){if(!(l=l.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;t=1}}else n&&!this.contains(l)&&(t=1);if(l.isVisible()&&!(0>(g=l.getTabIndex())))if(0>=b){if(t&&0===g){o=l;break}g>r&&(o=l,r=g)}else{if(t&&g==b){o=l;break}g<b&&(!o||g>r)&&(o=l,r=g)}}o&&o.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(a){function e(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,b){this.setState(b.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!a.blockless){var b=a.lang.table;a.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height,border-collapse}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];td{border*,background-color,vertical-align,width,height}[colspan,rowspan];"+(a.plugins.dialogadvtab?"table"+a.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"],["td: splitBorderShorthand"],[{element:"table",right:function(a){if(a.styles){var b;if(a.styles.border)b=CKEDITOR.tools.style.parse.border(a.styles.border);else if(CKEDITOR.env.ie&&8===CKEDITOR.env.version){var e=a.styles;e["border-left"]&&e["border-left"]===e["border-right"]&&e["border-right"]===e["border-top"]&&e["border-top"]===e["border-bottom"]&&(b=CKEDITOR.tools.style.parse.border(e["border-top"]))}b&&b.style&&"solid"===b.style&&b.width&&0!==parseFloat(b.width)&&(a.attributes.border=1),"collapse"==a.styles["border-collapse"]&&(a.attributes.cellspacing=0)}}}]]})),a.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",e())),a.addCommand("tableDelete",e({exec:function(a){var b=a.elementPath().contains("table",1);if(b){var e=b.getParent(),t=a.editable();1!=e.getChildCount()||e.is("td","th")||e.equals(t)||(b=e),(a=a.createRange()).moveToPosition(b,CKEDITOR.POSITION_BEFORE_START),b.remove(),a.select()}}})),a.ui.addButton&&a.ui.addButton("Table",{label:b.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),a.addMenuItems&&a.addMenuItems({table:{label:b.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:b.deleteTable,command:"tableDelete",group:"table",order:1}}),a.on("doubleclick",(function(a){a.data.element.is("table")&&(a.data.dialog="tableProperties")})),a.contextMenu&&a.contextMenu.addListener((function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}}))}}}),function(){function a(a,b){function e(a){return!b||b.contains(a)&&a.getAscendant("table",!0).equals(b)}function t(a){0<n.length||a.type!=CKEDITOR.NODE_ELEMENT||!u.test(a.getName())||a.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(g,a,"selected_cell",!0),n.push(a))}var n=[],g={};if(!a)return n;for(var o=a.getRanges(),r=0;r<o.length;r++){var l,c;if((l=o[r]).collapsed)(l=l.getCommonAncestor().getAscendant({td:1,th:1},!0))&&e(l)&&n.push(l);else for((l=new CKEDITOR.dom.walker(l)).guard=t;c=l.next();)c.type==CKEDITOR.NODE_ELEMENT&&c.is(CKEDITOR.dtd.table)||(c=c.getAscendant({td:1,th:1},!0))&&!c.getCustomData("selected_cell")&&e(c)&&(CKEDITOR.dom.element.setMarker(g,c,"selected_cell",!0),n.push(c))}return CKEDITOR.dom.element.clearAllMarkers(g),n}function e(b,e){var g=(t=(r=p(b)?b:a(b))[0]).getAscendant("table"),t=t.getDocument(),n=(l=r[0].getParent()).$.rowIndex,o=(r=r[r.length-1]).getParent().$.rowIndex+r.$.rowSpan-1,r=new CKEDITOR.dom.element(g.$.rows[o]),l=(n=e?n:o,e?l:r);for(g=(r=CKEDITOR.tools.buildTableMap(g))[n],n=e?r[n-1]:r[n+1],r=r[0].length,t=t.createElement("tr"),o=0;g[o]&&o<r;o++){var c;1<g[o].rowSpan&&n&&g[o]==n[o]?(c=g[o]).rowSpan+=1:((c=new CKEDITOR.dom.element(g[o]).clone()).removeAttribute("rowSpan"),c.appendBogus(),t.append(c),c=c.$),o+=c.colSpan-1}return e?t.insertBefore(l):t.insertAfter(l),t}function b(e){if(e instanceof CKEDITOR.dom.selection){var t=e.getRanges(),g=(l=a(e))[0].getAscendant("table"),n=CKEDITOR.tools.buildTableMap(g),o=l[0].getParent().$.rowIndex,r=(l=l[l.length-1]).getParent().$.rowIndex+l.$.rowSpan-1,l=[];for(e.reset(),e=o;e<=r;e++){for(var c=n[e],d=new CKEDITOR.dom.element(g.$.rows[e]),h=0;h<c.length;h++){var q=new CKEDITOR.dom.element(c[h]),p=q.getParent().$.rowIndex;1==q.$.rowSpan?q.remove():(--q.$.rowSpan,p==e&&((p=n[e+1])[h-1]?q.insertAfter(new CKEDITOR.dom.element(p[h-1])):new CKEDITOR.dom.element(g.$.rows[e+1]).append(q,1))),h+=q.$.colSpan-1}l.push(d)}for(n=g.$.rows,t[0].moveToPosition(g,CKEDITOR.POSITION_BEFORE_START),o=new CKEDITOR.dom.element(n[r+1]||(0<o?n[o-1]:null)||g.$.parentNode),e=l.length;0<=e;e--)b(l[e]);return g.$.parentNode?o:(t[0].select(),null)}return e instanceof CKEDITOR.dom.element&&(1==(g=e.getAscendant("table")).$.rows.length?g.remove():e.remove()),null}function t(a){for(var b=a.getParent().$.cells,e=0,t=0;t<b.length;t++){var n=b[t];if(e+=n.colSpan,n==a.$)break}return e-1}function n(a,b){for(var e=b?1/0:0,n=0;n<a.length;n++){var g=t(a[n]);(b?g<e:g>e)&&(e=g)}return e}function o(b,e){for(var g=(o=p(b)?b:a(b))[0].getAscendant("table"),t=n(o,1),o=n(o),r=e?t:o,l=CKEDITOR.tools.buildTableMap(g),c=(g=[],t=[],o=[],l.length),d=0;d<c;d++)g.push(l[d][r]),t.push(e?l[d][r-1]:l[d][r+1]);for(d=0;d<c;d++)g[d]&&(1<g[d].colSpan&&t[d]==g[d]?(l=g[d]).colSpan+=1:((l=(r=new CKEDITOR.dom.element(g[d])).clone()).removeAttribute("colSpan"),l.appendBogus(),l[e?"insertBefore":"insertAfter"].call(l,r),o.push(l),l=l.$),d+=l.rowSpan-1);return o}function r(b){CKEDITOR.env.webkit&&!b.isFake&&(b=function(a){var b,e,t;if(1!==(b=a.getRanges()).length)return a;if((b=b[0]).collapsed||0!==b.endOffset)return a;if("td"!==(t=(e=b.endContainer).getName().toLowerCase())&&"th"!==t)return a;for((t=e.getPrevious())||(t=e.getParent().getPrevious().getLast());t.type!==CKEDITOR.NODE_TEXT&&"br"!==t.getName().toLowerCase();)if(!(t=t.getLast()))return a;return b.setEndAt(t,CKEDITOR.POSITION_BEFORE_END),b.select()}(b));var e,t,n=b.getRanges(),g=(r=a(b))[0],o=r[r.length-1],r=g.getAscendant("table"),l=CKEDITOR.tools.buildTableMap(r),c=[];b.reset();var d=0;for(b=l.length;d<b;d++)for(var q=0,p=l[d].length;q<p;q++)void 0===e&&l[d][q]==g.$&&(e=q),l[d][q]==o.$&&(t=q);for(d=e;d<=t;d++)for(q=0;q<l.length;q++)o=l[q],g=new CKEDITOR.dom.element(r.$.rows[q]),(o=new CKEDITOR.dom.element(o[d])).$&&(1==o.$.colSpan?o.remove():--o.$.colSpan,q+=o.$.rowSpan-1,g.$.cells.length||c.push(g));return e=l[0].length-1>t?new CKEDITOR.dom.element(l[0][t+1]):e&&-1!==l[0][e-1].cellIndex?new CKEDITOR.dom.element(l[0][e-1]):new CKEDITOR.dom.element(r.$.parentNode),c.length==b&&(n[0].moveToPosition(r,CKEDITOR.POSITION_AFTER_END),n[0].select(),r.remove()),e}function g(a,b){var e=a.getStartElement().getAscendant({td:1,th:1},!0);if(e){var t=e.clone();t.appendBogus(),b?t.insertBefore(e):t.insertAfter(e)}}function l(b){if(b instanceof CKEDITOR.dom.selection){var g,e=b.getRanges(),t=a(b),n=t[0]&&t[0].getAscendant("table");e:{var o=0;g=t.length-1;for(var r,d,h={};r=t[o++];)CKEDITOR.dom.element.setMarker(h,r,"delete_cell",!0);for(o=0;r=t[o++];)if((d=r.getPrevious())&&!d.getCustomData("delete_cell")||(d=r.getNext())&&!d.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(h),g=d;break e}CKEDITOR.dom.element.clearAllMarkers(h),g=(o=(o=t[0].getParent()).getPrevious())?o.getLast():(o=(o=t[g].getParent()).getNext())?o.getChild(0):null}for(b.reset(),b=t.length-1;0<=b;b--)l(t[b]);g?c(g,!0):n&&(e[0].moveToPosition(n,CKEDITOR.POSITION_BEFORE_START),e[0].select(),n.remove())}else b instanceof CKEDITOR.dom.element&&(1==(e=b.getParent()).getChildCount()?e.remove():b.remove())}function c(a,b){var e=a.getDocument(),t=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(t.focus(),e.focus()),(e=new CKEDITOR.dom.range(e))["moveToElementEdit"+(b?"End":"Start")](a)||(e.selectNodeContents(a),e.collapse(!b)),e.select(!0)}function d(a,b,e){if(a=a[b],void 0===e)return a;for(b=0;a&&b<a.length;b++){if(e.is&&a[b]==e.$)return b;if(b==e)return new CKEDITOR.dom.element(a[b])}return e.is?-1:null}function h(b,e,t){var n,o,g=a(b);if((e?1!=g.length:2>g.length)||(n=b.getCommonAncestor())&&n.type==CKEDITOR.NODE_ELEMENT&&n.is("table"))return!1;n=(b=g[0]).getAscendant("table");var r=CKEDITOR.tools.buildTableMap(n),l=r.length,c=r[0].length,h=b.getParent().$.rowIndex,q=d(r,h,b);if(e){var p;try{var u=parseInt(b.getAttribute("rowspan"),10)||1;o=parseInt(b.getAttribute("colspan"),10)||1,p=r["up"==e?h-u:"down"==e?h+u:h]["left"==e?q-o:"right"==e?q+o:q]}catch(e){return!1}if(!p||b.$==p)return!1;g["up"==e||"left"==e?"unshift":"push"](new CKEDITOR.dom.element(p))}e=b.getDocument();var f=h,m=(u=p=0,!t&&new CKEDITOR.dom.documentFragment(e)),E=0;for(e=0;e<g.length;e++){var T=(o=g[e]).getParent(),C=o.getFirst(),I=o.$.colSpan,O=o.$.rowSpan,D=d(r,T=T.$.rowIndex,o);E+=I*O,u=Math.max(u,D-q+I),p=Math.max(p,T-h+O),t||((O=(I=o).getBogus())&&O.remove(),I.trim(),o.getChildren().count()&&(T==f||!C||C.isBlockBoundary&&C.isBlockBoundary({br:1})||!(f=m.getLast(CKEDITOR.dom.walker.whitespaces(!0)))||f.is&&f.is("br")||m.append("br"),o.moveChildren(m)),e?o.remove():o.setHtml("")),f=T}if(t)return p*u==E;for(m.moveChildren(b),b.appendBogus(),u>=c?b.removeAttribute("rowSpan"):b.$.rowSpan=p,p>=l?b.removeAttribute("colSpan"):b.$.colSpan=u,e=(g=(t=new CKEDITOR.dom.nodeList(n.$.rows)).count())-1;0<=e;e--)(n=t.getItem(e)).$.cells.length||(n.remove(),g++);return b}function q(b,e){if(1<(t=a(b)).length)return!1;if(e)return!0;var t,n,o=(g=(t=t[0]).getParent()).getAscendant("table"),r=d(c=CKEDITOR.tools.buildTableMap(o),h=g.$.rowIndex,t);if(1<(l=t.$.rowSpan)){n=Math.ceil(l/2);for(var q,l=Math.floor(l/2),g=h+n,c=(o=new CKEDITOR.dom.element(o.$.rows[g]),d(c,g)),h=(g=t.clone(),0);h<c.length;h++){if((q=c[h]).parentNode==o.$&&h>r){g.insertBefore(new CKEDITOR.dom.element(q));break}q=null}q||o.append(g)}else for(l=n=1,(o=g.clone()).insertAfter(g),o.append(g=t.clone()),q=d(c,h),r=0;r<q.length;r++)q[r].rowSpan++;return g.appendBogus(),t.$.rowSpan=n,g.$.rowSpan=l,1==n&&t.removeAttribute("rowSpan"),1==l&&g.removeAttribute("rowSpan"),g}function f(b,e){if(1<(t=a(b)).length)return!1;if(e)return!0;var t,g=(t=t[0]).getParent(),n=g.getAscendant("table"),o=d(n=CKEDITOR.tools.buildTableMap(n),g.$.rowIndex,t);if(1<(r=t.$.colSpan))g=Math.ceil(r/2),r=Math.floor(r/2);else{for(var r=g=1,l=[],c=0;c<n.length;c++){var h=n[c];l.push(h[o]),1<h[o].rowSpan&&(c+=h[o].rowSpan-1)}for(n=0;n<l.length;n++)l[n].colSpan++}return(n=t.clone()).insertAfter(t),n.appendBogus(),t.$.colSpan=g,n.$.colSpan=r,1==g&&t.removeAttribute("colSpan"),1==r&&n.removeAttribute("colSpan"),n}var u=/^(?:td|th)$/,p=CKEDITOR.tools.isArray;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(t){function n(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,b){this.setState(b.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function d(a,b){var e=t.addCommand(a,b);t.addFeature(e)}var p=t.lang.table,u=CKEDITOR.tools.style.parse,m="td{width} td{height} td{border-color} td{background-color} td{white-space} td{vertical-align} td{text-align} td[colspan] td[rowspan] th".split(" ");d("cellProperties",new CKEDITOR.dialogCommand("cellProperties",n({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:m,contentTransformations:[[{element:"td",left:function(a){return a.styles.background&&u.background(a.styles.background).color},right:function(a){a.styles["background-color"]=u.background(a.styles.background).color}},{element:"td",check:"td{vertical-align}",left:function(a){return a.attributes&&a.attributes.valign},right:function(a){a.styles["vertical-align"]=a.attributes.valign,delete a.attributes.valign}}],[{element:"tr",check:"td{height}",left:function(a){return a.styles&&a.styles.height},right:function(a){CKEDITOR.tools.array.forEach(a.children,(function(b){b.name in{td:1,th:1}&&(b.attributes["cke-row-height"]=a.styles.height)})),delete a.styles.height}}],[{element:"td",check:"td{height}",left:function(a){return(a=a.attributes)&&a["cke-row-height"]},right:function(a){a.styles.height=a.attributes["cke-row-height"],delete a.attributes["cke-row-height"]}}]]}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),d("rowDelete",n({requiredContent:"table",exec:function(a){(a=b(a=a.getSelection()))&&c(a)}})),d("rowInsertBefore",n({requiredContent:"table",exec:function(b){e(b=a(b=b.getSelection()),!0)}})),d("rowInsertAfter",n({requiredContent:"table",exec:function(b){e(b=a(b=b.getSelection()))}})),d("columnDelete",n({requiredContent:"table",exec:function(a){(a=r(a=a.getSelection()))&&c(a,!0)}})),d("columnInsertBefore",n({requiredContent:"table",exec:function(b){o(b=a(b=b.getSelection()),!0)}})),d("columnInsertAfter",n({requiredContent:"table",exec:function(b){o(b=a(b=b.getSelection()))}})),d("cellDelete",n({requiredContent:"table",exec:function(a){l(a=a.getSelection())}})),d("cellMerge",n({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(a,b){b.cell=h(a.getSelection()),c(b.cell,!0)}})),d("cellMergeRight",n({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a,b){b.cell=h(a.getSelection(),"right"),c(b.cell,!0)}})),d("cellMergeDown",n({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a,b){b.cell=h(a.getSelection(),"down"),c(b.cell,!0)}})),d("cellVerticalSplit",n({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a){c(f(a.getSelection()))}})),d("cellHorizontalSplit",n({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a){c(q(a.getSelection()))}})),d("cellInsertBefore",n({requiredContent:"table",exec:function(a){g(a=a.getSelection(),!0)}})),d("cellInsertAfter",n({requiredContent:"table",exec:function(a){g(a=a.getSelection())}})),t.addMenuItems&&t.addMenuItems({tablecell:{label:p.cell.menu,group:"tablecell",order:1,getItems:function(){var e=a(b=t.getSelection()),b={tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:h(b,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:h(b,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:h(b,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:f(b,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:q(b,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};return t.filter.check(m)&&(b.tablecell_properties=0<e.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),b}},tablecell_insertBefore:{label:p.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:p.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:p.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:p.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:p.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:p.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:p.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:p.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:p.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:p.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:p.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:p.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:p.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:p.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:p.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:p.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:p.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),t.contextMenu&&t.contextMenu.addListener((function(a,b,e){return(a=e.contains({td:1,th:1},1))&&!a.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null}))},getCellColIndex:t,insertRow:e,insertColumn:o,getSelectedCells:a},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(a,e,b,t,n){a=a.$.rows,b=b||0,t="number"==typeof t?t:a.length-1,n="number"==typeof n?n:-1;var o=-1,r=[];for(e=e||0;e<=t;e++){!r[++o]&&(r[o]=[]);for(var g=-1,l=b;l<=(-1===n?a[e].cells.length-1:n)&&(d=a[e].cells[l]);l++){for(g++;r[o][g];)g++;for(var c=isNaN(d.colSpan)?1:d.colSpan,d=isNaN(d.rowSpan)?1:d.rowSpan,h=0;h<d&&!(e+h>t);h++){r[o+h]||(r[o+h]=[]);for(var q=0;q<c;q++)r[o+h][g+q]=a[e].cells[l]}if(g+=c-1,-1!==n&&g>=n)break}}return r},function(){function a(a){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(a)}function e(a,b){var e,t,n=a.getAscendant("table"),o=b.getAscendant("table"),r=CKEDITOR.tools.buildTableMap(n),g=l(a),c=l(b),d=[],h={};for(n.contains(o)&&(c=l(b=b.getAscendant({td:1,th:1}))),g>c&&(n=g,g=c,c=n,n=a,a=b,b=n),n=0;n<r[g].length;n++)if(a.$===r[g][n]){e=n;break}for(n=0;n<r[c].length;n++)if(b.$===r[c][n]){t=n;break}for(e>t&&(n=e,e=t,t=n),n=g;n<=c;n++)for(g=e;g<=t;g++)(o=new CKEDITOR.dom.element(r[n][g])).$&&!o.getCustomData("selected_cell")&&(d.push(o),CKEDITOR.dom.element.setMarker(h,o,"selected_cell",!0));return CKEDITOR.dom.element.clearAllMarkers(h),d}function t(a,b){var e,t=a.editable().find(".cke_table-faked-selection"),n=a.editable().findOne("[data-cke-table-faked-selection-table]");for(a.fire("lockSnapshot"),a.editable().removeClass("cke_table-faked-selection-editor"),e=0;e<t.count();e++)t.getItem(e).removeClass("cke_table-faked-selection");n&&n.data("cke-table-faked-selection-table",!1),a.fire("unlockSnapshot"),b&&(I={active:!1},a.getSelection().isInTable()&&a.getSelection().reset())}function n(a,b){var e,t,n=[];for(t=0;t<b.length;t++)(e=a.createRange()).setStartBefore(b[t]),e.setEndAfter(b[t]),n.push(e);a.getSelection().selectRanges(n)}function o(a){var b=a.editable().find(".cke_table-faked-selection");1>b.count()||n(a,b=e(b.getItem(0),b.getItem(b.count()-1)))}function g(b,o,r){var l,g=m(b.getSelection(!0));if(o=o.is("table")?null:o,(l=I.active&&!I.first)&&!(l=o)&&(l=b.getSelection().getRanges(),l=!!(1<g.length||l[0]&&!l[0].collapsed)),l)I.first=o||g[0],I.dirty=!o&&1!==g.length;else if(I.active&&o&&I.first.getAscendant("table").equals(o.getAscendant("table"))){if(g=e(I.first,o),!I.dirty&&1===g.length&&!a(r.data.getTarget()))return t(b,"mouseup"===r.name);I.dirty=!0,I.last=o,n(b,g)}}function r(a){var g,b=(a=a.editor||a.sender.editor)&&a.getSelection(),e=b&&b.getRanges()||[],n=(n=e&&e[0].getEnclosedNode())&&n.type==CKEDITOR.NODE_ELEMENT&&n.is("img");if(b&&(t(a),b.isInTable()&&b.isFake))if(n)a.getSelection().reset();else if(!e[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored")){for(1===e.length&&e[0]._getTableElement()&&e[0]._getTableElement().is("table")&&(g=e[0]._getTableElement()),g=m(b,g),a.fire("lockSnapshot"),b=0;b<g.length;b++)g[b].addClass("cke_table-faked-selection");0<g.length&&(a.editable().addClass("cke_table-faked-selection-editor"),g[0].getAscendant("table").data("cke-table-faked-selection-table","")),a.fire("unlockSnapshot")}}function l(a){return a.getAscendant("tr",!0).$.rowIndex}function c(b){function e(a){return!a.getAscendant("table",!0)&&a.getDocument().equals(n.document)}if(b.data.getTarget().getName&&("mouseup"===b.name||!a(b.data.getTarget()))){var n=b.editor||b.listenerData.editor,r=n.getSelection(1),q=function(a){return(a=a.editable().findOne(".cke_table-faked-selection"))&&a.getAscendant("table")}(n),u=(p=b.data.getTarget())&&p.getAscendant({td:1,th:1},!0),p=p&&p.getAscendant("table",!0),l={table:1,thead:1,tbody:1,tfoot:1,tr:1,td:1,th:1};p&&p.hasAttribute("data-cke-tableselection-ignored")||(function(a,b,t,n){return!("mousedown"!==a.name||CKEDITOR.tools.getMouseButton(a)!==CKEDITOR.MOUSE_BUTTON_LEFT&&n)||((b=a.name===(CKEDITOR.env.gecko?"mousedown":"mouseup")&&!e(a.data.getTarget()))&&(b=!((a=a.data.getTarget().getAscendant({td:1,th:1},!0))&&a.hasClass("cke_table-faked-selection"))),b)}(b,r,0,p)&&t(n,!0),!I.active&&"mousedown"===b.name&&CKEDITOR.tools.getMouseButton(b)===CKEDITOR.MOUSE_BUTTON_LEFT&&p&&(I={active:!0},CKEDITOR.document.on("mouseup",c,null,{editor:n})),(u||p)&&g(n,u||p,b),"mouseup"===b.name&&(CKEDITOR.tools.getMouseButton(b)===CKEDITOR.MOUSE_BUTTON_LEFT&&(e(b.data.getTarget())||function(a,b){return!(!a||!b)&&(a.equals(b)||a.contains(b)||b.contains(a)||a.getCommonAncestor(b).is(l))}(q,p))&&o(n),I={active:!1},CKEDITOR.document.removeListener("mouseup",c)))}}function d(a){var b=a.data.getTarget().getAscendant("table",!0);b&&b.hasAttribute("data-cke-tableselection-ignored")||(b=a.data.getTarget().getAscendant({td:1,th:1},!0))&&!b.hasClass("cke_table-faked-selection")&&(a.cancel(),a.data.preventDefault())}function h(a){var b=a.editor||a.sender.editor,e=b.getSelection();e.isInTable()&&(e.getRanges()[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored")||function(a,b){var e,t,p,q,n=a.getSelection(),o=n.createBookmarks(),g=a.document,r=a.createRange(),l=g.getDocumentElement().$,c=CKEDITOR.env.ie&&9>CKEDITOR.env.version,d=a.blockless||CKEDITOR.env.ie?"span":"div";g.getById("cke_table_copybin")||(e=g.createElement(d),(t=g.createElement(d)).setAttributes({id:"cke_table_copybin","data-cke-temp":"1"}),e.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),e.setStyle("ltr"==a.config.contentsLangDirection?"left":"right","-5000px"),e.setHtml(a.getSelectedHtml(!0)),a.fire("lockSnapshot"),t.append(e),a.editable().append(t),q=a.on("selectionChange",(function(a){a.cancel()}),null,null,0),c&&(p=l.scrollTop),r.selectNodeContents(e),r.select(),c&&(l.scrollTop=p),setTimeout((function(){t.remove(),n.selectBookmarks(o),q.removeListener(),a.fire("unlockSnapshot"),b&&(a.extractSelectedHtml(),a.fire("saveSnapshot"))}),100))}(b,"cut"===a.name))}function u(a){this._reset(),a&&this.setSelectedCells(a)}function p(a,b,e){a.on("beforeCommandExec",(function(e){-1!==CKEDITOR.tools.array.indexOf(b,e.data.name)&&(e.data.selectedCells=m(a.getSelection()))})),a.on("afterCommandExec",(function(t){-1!==CKEDITOR.tools.array.indexOf(b,t.data.name)&&e(a,t.data)}))}var f,m,E,T,C,I={active:!1};u.prototype={},u.prototype._reset=function(){this.cells={first:null,last:null,all:[]},this.rows={first:null,last:null}},u.prototype.setSelectedCells=function(a){this._reset(),a=a.slice(0),this._arraySortByDOMOrder(a),this.cells.all=a,this.cells.first=a[0],this.cells.last=a[a.length-1],this.rows.first=a[0].getAscendant("tr"),this.rows.last=this.cells.last.getAscendant("tr")},u.prototype.getTableMap=function(){var b,a=E(this.cells.first);e:{var e,t=(b=this.cells.last).getAscendant("table"),n=l(b);for(t=CKEDITOR.tools.buildTableMap(t),e=0;e<t[n].length;e++)if(new CKEDITOR.dom.element(t[n][e]).equals(b)){b=e;break e}b=void 0}return CKEDITOR.tools.buildTableMap(this._getTable(),l(this.rows.first),a,l(this.rows.last),b)},u.prototype._getTable=function(){return this.rows.first.getAscendant("table")},u.prototype.insertRow=function(a,b,e){if(void 0===a)a=1;else if(0>=a)return;for(var t,n=this.cells.first.$.cellIndex,o=this.cells.last.$.cellIndex,g=e?[]:this.cells.all,r=0;r<a;r++)t=T(e?this.cells.all:g,b),t=CKEDITOR.tools.array.filter(t.find("td, th").toArray(),(function(a){return!!e||a.$.cellIndex>=n&&a.$.cellIndex<=o})),g=b?t.concat(g):g.concat(t);this.setSelectedCells(g)},u.prototype.insertColumn=function(a){function b(a){return(a=l(a))>=t&&a<=g}if(void 0===a)a=1;else if(0>=a)return;for(var e=(n=this.cells).all,t=l(n.first),g=l(n.last),n=0;n<a;n++)e=e.concat(CKEDITOR.tools.array.filter(C(e),b));this.setSelectedCells(e)},u.prototype.emptyCells=function(a){a=a||this.cells.all;for(var b=0;b<a.length;b++)a[b].setHtml("")},u.prototype._arraySortByDOMOrder=function(a){a.sort((function(a,b){return a.getPosition(b)&CKEDITOR.POSITION_PRECEDING?-1:1}))};var O={onPaste:function(a){function t(a){return Math.max.apply(null,CKEDITOR.tools.array.map(a,(function(a){return a.length}),0))}var o=a.editor,g=o.getSelection();if(!(c=(c=g.getRanges()).length&&c[0]._getTableElement({table:1}))||!c.hasAttribute("data-cke-tableselection-ignored")){var r,p,l=m(g),c=this.findTableInPastedContent(o,a.data.dataValue),d=g.isInTable(!0)&&this.isBoundarySelection(g);!l.length||1===l.length&&!function(a){if(a)return(a=a.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),(a=a.getEnclosedNode())&&a.is&&a.is(CKEDITOR.dtd.$tableContent)}(g.getRanges()[0])&&!d||d&&!c||(l=l[0].getAscendant("table"),r=new u(m(g,l)),o.once("afterPaste",(function(){var a;if(p){a=new CKEDITOR.dom.element(p[0][0]);var b=p[p.length-1];a=e(a,new CKEDITOR.dom.element(b[b.length-1]))}else a=r.cells.all;n(o,a)})),c?(a.stop(),d?(r.insertRow(1,1===d,!0),g.selectElement(r.rows.first)):(r.emptyCells(),n(o,r.cells.all)),a=r.getTableMap(),p=CKEDITOR.tools.buildTableMap(c),r.insertRow(p.length-a.length),r.insertColumn(t(p)-t(a)),a=r.getTableMap(),this.pasteTable(r,a,p),o.fire("saveSnapshot"),setTimeout((function(){o.fire("afterPaste")}),0)):(function(a){var b=o.createRange();b.selectNodeContents(a),b.select()}(r.cells.first),o.once("afterPaste",(function(){o.fire("lockSnapshot"),r.emptyCells(r.cells.all.slice(1)),n(o,r.cells.all),o.fire("unlockSnapshot")}))))}},isBoundarySelection:function(a){var b=(a=a.getRanges()[0]).endContainer.getAscendant("tr",!0);if(b&&a.collapsed){if(a.checkBoundaryOfElement(b,CKEDITOR.START))return 1;if(a.checkBoundaryOfElement(b,CKEDITOR.END))return 2}return 0},findTableInPastedContent:function(a,b){var e=a.dataProcessor,t=new CKEDITOR.dom.element("body");return e||(e=new CKEDITOR.htmlDataProcessor(a)),t.setHtml(e.toHtml(b),{fixForBody:!1}),1<t.getChildCount()?null:t.findOne("table")},pasteTable:function(a,b,e){var t,n,o,r,l,c=E(a.cells.first),g=a._getTable(),d={};for(r=0;r<e.length;r++)for(n=new CKEDITOR.dom.element(g.$.rows[a.rows.first.$.rowIndex+r]),l=0;l<e[r].length;l++)o=new CKEDITOR.dom.element(e[r][l]),t=b[r]&&b[r][l]?new CKEDITOR.dom.element(b[r][l]):null,o&&!o.getCustomData("processed")?(t&&t.getParent()?o.replace(t):(0===l||e[r][l-1])&&((t=0!==l?new CKEDITOR.dom.element(e[r][l-1]):null)&&n.equals(t.getParent())?o.insertAfter(t):0<c?n.$.cells[c]?o.insertAfter(new CKEDITOR.dom.element(n.$.cells[c])):n.append(o):n.append(o,!0)),CKEDITOR.dom.element.setMarker(d,o,"processed",!0)):o.getCustomData("processed")&&t&&t.remove();CKEDITOR.dom.element.clearAllMarkers(d)}};CKEDITOR.plugins.tableselection={getCellsBetween:e,keyboardIntegration:function(a){function b(a){var e=a.getEnclosedNode();e&&"function"==typeof e.is&&e.is({td:1,th:1})?e.setText(""):a.deleteContents(),CKEDITOR.tools.array.forEach(a._find("td"),(function(a){a.appendBogus()}))}var e=a.editable();e.attachListener(e,"keydown",function(a){function e(b,e){if(!e.length)return null;var g=a.createRange(),t=CKEDITOR.dom.range.mergeRanges(e);CKEDITOR.tools.array.forEach(t,(function(a){a.enlarge(CKEDITOR.ENLARGE_ELEMENT)}));var o=(r=t[0].getBoundaryNodes()).startNode,r=r.endNode;if(o&&o.is&&o.is(n)){for(var l=o.getAscendant("table",!0),c=o.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,l),d=!1,p=function(a){return!o.contains(a)&&a.is&&a.is("td","th")};c&&!p(c);)c=c.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,l);return!c&&r&&r.is&&!r.is("table")&&r.getNext()&&(c=r.getNext().findOne("td, th"),d=!0),c?g["moveToElementEdit"+(d?"Start":"End")](c):(g.setStartBefore(o.getAscendant("table",!0)),g.collapse(!0)),t[0].deleteContents(),[g]}return o?(g.moveToElementEditablePosition(o),[g]):void 0}var t={37:1,38:1,39:1,40:1,8:1,46:1,13:1},n=CKEDITOR.tools.extend({table:1},CKEDITOR.dtd.$tableContent);return delete n.td,delete n.th,function(n){var o,r,l,c,g=n.data.getKey(),d=n.data.getKeystroke(),h=37===g||38==g;if(t[g]&&!a.readOnly&&(o=a.getSelection())&&o.isInTable()&&o.isFake)if(l=(r=o.getRanges())[0]._getTableElement(),c=r[r.length-1]._getTableElement(),(13!==g||a.plugins.enterkey)&&(n.data.preventDefault(),n.cancel()),36<g&&41>g)r[0].moveToElementEditablePosition(h?l:c,!h),o.selectRanges([r[0]]);else if(13!==g||13===d||d===CKEDITOR.SHIFT+13){for(n=0;n<r.length;n++)b(r[n]);(n=e(0,r))?r=n:r[0].moveToElementEditablePosition(l),o.selectRanges(r),13===g&&a.plugins.enterkey?(a.fire("lockSnapshot"),13===d?a.execCommand("enter"):a.execCommand("shiftEnter"),a.fire("unlockSnapshot"),a.fire("saveSnapshot")):13!==g&&a.fire("saveSnapshot")}}}(a),null,null,-1),e.attachListener(e,"keypress",(function(e){var g,t=a.getSelection(),n=e.data.$.charCode||13===e.data.getKey();if(!a.readOnly&&t&&t.isInTable()&&t.isFake&&n&&!(e.data.getKeystroke()&CKEDITOR.CTRL)){for(n=(e=t.getRanges())[0].getEnclosedNode().getAscendant({td:1,th:1},!0),g=0;g<e.length;g++)b(e[g]);n&&(e[0].moveToElementEditablePosition(n),t.selectRanges([e[0]]))}}),null,null,-1)}},CKEDITOR.plugins.add("tableselection",{requires:"clipboard,tabletools",isSupportedEnvironment:function(){return!(CKEDITOR.env.ie&&11>CKEDITOR.env.version)},onLoad:function(){f=CKEDITOR.plugins.tabletools,m=f.getSelectedCells,E=f.getCellColIndex,T=f.insertRow,C=f.insertColumn,CKEDITOR.document.appendStyleSheet(this.path+"styles/tableselection.css")},init:function(a){this.isSupportedEnvironment()&&(a.addContentsCss&&a.addContentsCss(this.path+"styles/tableselection.css"),a.on("contentDom",(function(){var b=a.editable(),e=b.isInline()?b:a.document,t={editor:a};b.attachListener(e,"mousedown",c,null,t),b.attachListener(e,"mousemove",c,null,t),b.attachListener(e,"mouseup",c,null,t),b.attachListener(b,"dragstart",d),b.attachListener(a,"selectionCheck",r),CKEDITOR.plugins.tableselection.keyboardIntegration(a),CKEDITOR.plugins.clipboard&&!CKEDITOR.plugins.clipboard.isCustomCopyCutSupported&&(b.attachListener(b,"cut",h),b.attachListener(b,"copy",h))})),a.on("paste",O.onPaste,O),p(a,"rowInsertBefore rowInsertAfter columnInsertBefore columnInsertAfter cellInsertBefore cellInsertAfter".split(" "),(function(a,b){n(a,b.selectedCells)})),p(a,["cellMerge","cellMergeRight","cellMergeDown"],(function(a,b){n(a,[b.commandData.cell])})),p(a,["cellDelete"],(function(a){t(a,!0)})))}})}(),function(){var a=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],e={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(e){function t(a){r.enabled&&!1!==a.data.command.canUndo&&r.save()}function n(){r.enabled=!e.readOnly&&"wysiwyg"==e.mode,r.onChange()}var r=e.undoManager=new b(e),l=r.editingHandler=new o(r),q=e.addCommand("undo",{exec:function(){r.undo()&&(e.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),c=e.addCommand("redo",{exec:function(){r.redo()&&(e.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});e.setKeystroke([[a[0],"undo"],[a[1],"redo"],[a[2],"redo"]]),r.onChange=function(){q.setState(r.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),c.setState(r.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},e.on("beforeCommandExec",t),e.on("afterCommandExec",t),e.on("saveSnapshot",(function(a){r.save(a.data&&a.data.contentOnly)})),e.on("contentDom",l.attachListeners,l),e.on("instanceReady",(function(){e.fire("saveSnapshot")})),e.on("beforeModeUnload",(function(){"wysiwyg"==e.mode&&r.save(!0)})),e.on("mode",n),e.on("readOnly",n),e.ui.addButton&&(e.ui.addButton("Undo",{label:e.lang.undo.undo,command:"undo",toolbar:"undo,10"}),e.ui.addButton("Redo",{label:e.lang.undo.redo,command:"redo",toolbar:"undo,20"})),e.resetUndo=function(){r.reset(),e.fire("saveSnapshot")},e.on("updateSnapshot",(function(){r.currentImage&&r.update()})),e.on("lockSnapshot",(function(a){a=a.data,r.lock(a&&a.dontUpdate,a&&a.forceUpdate)})),e.on("unlockSnapshot",r.unlock,r)}}),CKEDITOR.plugins.undo={};var b=CKEDITOR.plugins.undo.UndoManager=function(a){this.strokesRecorded=[0,0],this.locked=null,this.previousKeyGroup=-1,this.limit=a.config.undoStackSize||20,this.strokesLimit=25,this.editor=a,this.reset()};b.prototype={type:function(a,e){var t=b.getKeyGroup(a),n=this.strokesRecorded[t]+1;e=e||n>=this.strokesLimit,this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange()),e?(n=0,this.editor.fire("saveSnapshot")):this.editor.fire("change"),this.strokesRecorded[t]=n,this.previousKeyGroup=t},keyGroupChanged:function(a){return b.getKeyGroup(a)!=this.previousKeyGroup},reset:function(){this.snapshots=[],this.index=-1,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.strokesRecorded=[0,0],this.typing=!1,this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(a,b,e){var n=this.editor;if(this.locked||"ready"!=n.status||"wysiwyg"!=n.mode)return!1;var o=n.editable();if(!o||"ready"!=o.status)return!1;if(o=this.snapshots,b||(b=new t(n)),!1===b.contents)return!1;if(this.currentImage)if(b.equalsContent(this.currentImage)){if(a||b.equalsSelection(this.currentImage))return!1}else!1!==e&&n.fire("change");return o.splice(this.index+1,o.length-this.index-1),o.length==this.limit&&o.shift(),this.index=o.push(b)-1,this.currentImage=b,!1!==e&&this.refreshState(),!0},restoreImage:function(a){var e,b=this.editor;a.bookmarks&&(b.focus(),e=b.getSelection()),this.locked={level:999},this.editor.loadSnapshot(a.contents),a.bookmarks?e.selectBookmarks(a.bookmarks):CKEDITOR.env.ie&&((e=this.editor.document.getBody().$.createTextRange()).collapse(!0),e.select()),this.locked=null,this.index=a.index,this.currentImage=this.snapshots[this.index],this.update(),this.refreshState(),b.fire("change")},getNextImage:function(a){var e,b=this.snapshots,t=this.currentImage;if(t)if(a){for(e=this.index-1;0<=e;e--)if(a=b[e],!t.equalsContent(a))return a.index=e,a}else for(e=this.index+1;e<b.length;e++)if(a=b[e],!t.equalsContent(a))return a.index=e,a;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var a=this.getNextImage(!0);if(a)return this.restoreImage(a),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var a=this.getNextImage(!1);if(a)return this.restoreImage(a),!0}return!1},update:function(a){if(!this.locked){a||(a=new t(this.editor));for(var b=this.index,e=this.snapshots;0<b&&this.currentImage.equalsContent(e[b-1]);)--b;e.splice(b,this.index-b+1,a),this.index=b,this.currentImage=a}},updateSelection:function(a){if(!this.snapshots.length)return!1;var b=this.snapshots,e=b[b.length-1];return!(!e.equalsContent(a)||e.equalsSelection(a)||(this.currentImage=b[b.length-1]=a,0))},lock:function(a,b){if(this.locked)this.locked.level++;else if(a)this.locked={level:1};else{var e=null;if(b)e=!0;else{var n=new t(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(n)&&(e=n)}this.locked={update:e,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var a=this.locked.update;if(this.locked=null,!0===a)this.update();else if(a){var b=new t(this.editor,!0);a.equalsContent(b)||this.update()}}}},b.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1},b.keyGroups={PRINTABLE:0,FUNCTIONAL:1},b.isNavigationKey=function(a){return!!b.navigationKeyCodes[a]},b.getKeyGroup=function(a){var t=b.keyGroups;return e[a]?t.FUNCTIONAL:t.PRINTABLE},b.getOppositeKeyGroup=function(a){var e=b.keyGroups;return a==e.FUNCTIONAL?e.PRINTABLE:e.FUNCTIONAL},b.ieFunctionalKeysBug=function(a){return CKEDITOR.env.ie&&b.getKeyGroup(a)==b.keyGroups.FUNCTIONAL};var t=CKEDITOR.plugins.undo.Image=function(a,b){this.editor=a,a.fire("beforeUndoImage");var e=a.getSnapshot();CKEDITOR.env.ie&&e&&(e=e.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=e,b||(this.bookmarks=(e=e&&a.getSelection())&&e.createBookmarks2(!0)),a.fire("afterUndoImage")},n=/\b(?:href|src|name)="[^"]*?"/gi;t.prototype={equalsContent:function(a){var b=this.contents;return a=a.contents,CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(b=b.replace(n,""),a=a.replace(n,"")),b==a},equalsSelection:function(a){var b=this.bookmarks;if(a=a.bookmarks,b||a){if(!b||!a||b.length!=a.length)return!1;for(var e=0;e<b.length;e++){var t=b[e],n=a[e];if(t.startOffset!=n.startOffset||t.endOffset!=n.endOffset||!CKEDITOR.tools.arrayCompare(t.start,n.start)||!CKEDITOR.tools.arrayCompare(t.end,n.end))return!1}}return!0}};var o=CKEDITOR.plugins.undo.NativeEditingHandler=function(a){this.undoManager=a,this.ignoreInputEvent=!1,this.keyEventsStack=new r,this.lastKeydownImage=null};o.prototype={onKeydown:function(e){var n=e.data.getKey();229!==n&&(-1<CKEDITOR.tools.indexOf(a,e.data.getKeystroke())?e.data.preventDefault():(this.keyEventsStack.cleanUp(e),e=this.undoManager,this.keyEventsStack.getLast(n)||this.keyEventsStack.push(n),this.lastKeydownImage=new t(e.editor),(b.isNavigationKey(n)||this.undoManager.keyGroupChanged(n))&&(e.strokesRecorded[0]||e.strokesRecorded[1])&&(e.save(!1,this.lastKeydownImage,!1),e.resetType())))},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var a=this.keyEventsStack.getLast();a||(a=this.keyEventsStack.push(0)),this.keyEventsStack.increment(a.keyCode),this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(a.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(a){var e=this.undoManager;a=a.data.getKey();var n=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(a),b.ieFunctionalKeysBug(a)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new t(e.editor,!0))||(0<n?e.type(a):b.isNavigationKey(a)&&this.onNavigationKey(!0))},onNavigationKey:function(a){var b=this.undoManager;!a&&b.save(!0,null,!1)||b.updateSelection(new t(b.editor)),b.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},activateInputEventListener:function(){this.ignoreInputEvent=!1},attachListeners:function(){var a=this.undoManager.editor,e=a.editable(),t=this;e.attachListener(e,"keydown",(function(a){t.onKeydown(a),b.ieFunctionalKeysBug(a.data.getKey())&&t.onInput()}),null,null,999),e.attachListener(e,CKEDITOR.env.ie?"keypress":"input",t.onInput,t,null,999),e.attachListener(e,"keyup",t.onKeyup,t,null,999),e.attachListener(e,"paste",t.ignoreInputEventListener,t,null,999),e.attachListener(e,"drop",t.ignoreInputEventListener,t,null,999),a.on("afterPaste",t.activateInputEventListener,t,null,999),e.attachListener(e.isInline()?e:a.document.getDocumentElement(),"click",(function(){t.onNavigationKey()}),null,null,999),e.attachListener(this.undoManager.editor,"blur",(function(){t.keyEventsStack.remove(9)}),null,null,999)}};var r=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};r.prototype={push:function(a){return a=this.stack.push({keyCode:a,inputs:0}),this.stack[a-1]},getLastIndex:function(a){if("number"!=typeof a)return this.stack.length-1;for(var b=this.stack.length;b--;)if(this.stack[b].keyCode==a)return b;return-1},getLast:function(a){return-1!=(a=this.getLastIndex(a))?this.stack[a]:null},increment:function(a){this.getLast(a).inputs++},remove:function(a){-1!=(a=this.getLastIndex(a))&&this.stack.splice(a,1)},resetInputs:function(a){if("number"==typeof a)this.getLast(a).inputs=0;else for(a=this.stack.length;a--;)this.stack[a].inputs=0},getTotalInputs:function(){for(var a=this.stack.length,b=0;a--;)b+=this.stack[a].inputs;return b},cleanUp:function(a){(a=a.data.$).ctrlKey||a.metaKey||this.remove(17),a.shiftKey||this.remove(16),a.altKey||this.remove(18)}}}(),function(){function a(a,b){CKEDITOR.tools.extend(this,{editor:a,editable:a.editable(),doc:a.document,win:a.window},b,!0),this.inline=this.editable.isInline(),this.inline||(this.frame=this.win.getFrame()),this.target=this[this.inline?"editable":"doc"]}function e(a,b){CKEDITOR.tools.extend(this,b,{editor:a},!0)}function b(a,b){var e=a.editable();CKEDITOR.tools.extend(this,{editor:a,editable:e,inline:e.isInline(),doc:a.document,win:a.window,container:CKEDITOR.document.getBody(),winTop:CKEDITOR.document.getWindow()},b,!0),this.hidden={},this.visible={},this.inline||(this.frame=this.win.getFrame()),this.queryViewport();var t=CKEDITOR.tools.bind(this.queryViewport,this),g=CKEDITOR.tools.bind(this.hideVisible,this),r=CKEDITOR.tools.bind(this.removeAll,this);e.attachListener(this.winTop,"resize",t),e.attachListener(this.winTop,"scroll",t),e.attachListener(this.winTop,"resize",g),e.attachListener(this.win,"scroll",g),e.attachListener(this.inline?e:this.frame,"mouseout",(function(a){var b=a.data.$.clientX;a=a.data.$.clientY,this.queryViewport(),(b<=this.rect.left||b>=this.rect.right||a<=this.rect.top||a>=this.rect.bottom)&&this.hideVisible(),(0>=b||b>=this.winTopPane.width||0>=a||a>=this.winTopPane.height)&&this.hideVisible()}),this),e.attachListener(a,"resize",t),e.attachListener(a,"mode",r),a.on("destroy",r),this.lineTpl=new CKEDITOR.template('<div data-cke-lineutils-line="1" class="cke_reset_all" style="{lineStyle}"><span style="{tipLeftStyle}">&nbsp;</span><span style="{tipRightStyle}">&nbsp;</span></div>').output({lineStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},o,this.lineStyle,!0)),tipLeftStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},n,{left:"0px","border-left-color":"red","border-width":"6px 0 6px 6px"},this.tipCss,this.tipLeftStyle,!0)),tipRightStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},n,{right:"0px","border-right-color":"red","border-width":"6px 6px 6px 0"},this.tipCss,this.tipRightStyle,!0))})}function t(a){var b;return(b=a&&a.type==CKEDITOR.NODE_ELEMENT)&&(b=!(r[a.getComputedStyle("float")]||r[a.getAttribute("align")])),b&&!g[a.getComputedStyle("position")]}CKEDITOR.plugins.add("lineutils"),CKEDITOR.LINEUTILS_BEFORE=1,CKEDITOR.LINEUTILS_AFTER=2,CKEDITOR.LINEUTILS_INSIDE=4,a.prototype={start:function(a){var e,g,t,n,b=this,o=this.editor,r=this.doc,l=CKEDITOR.tools.eventsBuffer(50,(function(){o.readOnly||"wysiwyg"!=o.mode||(b.relations={},(g=r.$.elementFromPoint(t,n))&&g.nodeType&&(e=new CKEDITOR.dom.element(g),b.traverseSearch(e),isNaN(t+n)||b.pixelSearch(e,t,n),a&&a(b.relations,t,n)))}));this.listener=this.editable.attachListener(this.target,"mousemove",(function(a){t=a.data.$.clientX,n=a.data.$.clientY,l.input()})),this.editable.attachListener(this.inline?this.editable:this.frame,"mouseout",(function(){l.reset()}))},stop:function(){this.listener&&this.listener.removeListener()},getRange:function(){var a={};return a[CKEDITOR.LINEUTILS_BEFORE]=CKEDITOR.POSITION_BEFORE_START,a[CKEDITOR.LINEUTILS_AFTER]=CKEDITOR.POSITION_AFTER_END,a[CKEDITOR.LINEUTILS_INSIDE]=CKEDITOR.POSITION_AFTER_START,function(b){var e=this.editor.createRange();return e.moveToPosition(this.relations[b.uid].element,a[b.type]),e}}(),store:function(){function a(b,e,t){var n=b.getUniqueId();n in t?t[n].type|=e:t[n]={element:b,type:e}}return function(b,e){var n;e&CKEDITOR.LINEUTILS_AFTER&&t(n=b.getNext())&&n.isVisible()&&(a(n,CKEDITOR.LINEUTILS_BEFORE,this.relations),e^=CKEDITOR.LINEUTILS_AFTER),e&CKEDITOR.LINEUTILS_INSIDE&&t(n=b.getFirst())&&n.isVisible()&&(a(n,CKEDITOR.LINEUTILS_BEFORE,this.relations),e^=CKEDITOR.LINEUTILS_INSIDE),a(b,e,this.relations)}}(),traverseSearch:function(a){var b,e,n;do{if(!(n=a.$["data-cke-expando"])||!(n in this.relations)){if(a.equals(this.editable))break;if(t(a))for(b in this.lookups)(e=this.lookups[b](a))&&this.store(a,e)}}while((!a||a.type!=CKEDITOR.NODE_ELEMENT||"true"!=a.getAttribute("contenteditable"))&&(a=a.getParent()))},pixelSearch:function(){function a(e,n,g,o,r){for(var l,c=0;r(g)&&(g+=o,25!=++c);)if(l=this.doc.$.elementFromPoint(n,g))if(l==e)c=0;else if(b(e,l)&&(c=0,t(l=new CKEDITOR.dom.element(l))))return l}var b=CKEDITOR.env.ie||CKEDITOR.env.webkit?function(a,b){return a.contains(b)}:function(a,b){return!!(16&a.compareDocumentPosition(b))};return function(b,e,n){var g=this.win.getViewPaneSize().height,o=a.call(this,b.$,e,n,-1,(function(a){return 0<a}));if(e=a.call(this,b.$,e,n,1,(function(a){return a<g})),o)for(this.traverseSearch(o);!o.getParent().equals(b);)o=o.getParent();if(e)for(this.traverseSearch(e);!e.getParent().equals(b);)e=e.getParent();for(;(o||e)&&(o&&(o=o.getNext(t)),o&&!o.equals(e))&&(this.traverseSearch(o),e&&(e=e.getPrevious(t)),e&&!e.equals(o));)this.traverseSearch(e)}}(),greedySearch:function(){this.relations={};for(var e,n,g,a=this.editable.getElementsByTag("*"),b=0;e=a.getItem(b++);)if(!e.equals(this.editable)&&e.type==CKEDITOR.NODE_ELEMENT&&(e.hasAttribute("contenteditable")||!e.isReadOnly())&&t(e)&&e.isVisible())for(g in this.lookups)(n=this.lookups[g](e))&&this.store(e,n);return this.relations}},e.prototype={locate:function(){function a(b,e){var n=b.element[e===CKEDITOR.LINEUTILS_BEFORE?"getPrevious":"getNext"]();return n&&t(n)?(b.siblingRect=n.getClientRect(),e==CKEDITOR.LINEUTILS_BEFORE?(b.siblingRect.bottom+b.elementRect.top)/2:(b.elementRect.bottom+b.siblingRect.top)/2):e==CKEDITOR.LINEUTILS_BEFORE?b.elementRect.top:b.elementRect.bottom}return function(b){var e;for(var t in this.locations={},b)(e=b[t]).elementRect=e.element.getClientRect(),e.type&CKEDITOR.LINEUTILS_BEFORE&&this.store(t,CKEDITOR.LINEUTILS_BEFORE,a(e,CKEDITOR.LINEUTILS_BEFORE)),e.type&CKEDITOR.LINEUTILS_AFTER&&this.store(t,CKEDITOR.LINEUTILS_AFTER,a(e,CKEDITOR.LINEUTILS_AFTER)),e.type&CKEDITOR.LINEUTILS_INSIDE&&this.store(t,CKEDITOR.LINEUTILS_INSIDE,(e.elementRect.top+e.elementRect.bottom)/2);return this.locations}}(),sort:function(){var a,b,e,t;return function(n,g){for(var o in a=this.locations,b=[],a)for(var r in a[o])if(e=Math.abs(n-a[o][r]),b.length){for(t=0;t<b.length;t++)if(e<b[t].dist){b.splice(t,0,{uid:+o,type:r,dist:e});break}t==b.length&&b.push({uid:+o,type:r,dist:e})}else b.push({uid:+o,type:r,dist:e});return void 0!==g?b.slice(0,g):b}}(),store:function(a,b,e){this.locations[a]||(this.locations[a]={}),this.locations[a][b]=e}};var n={display:"block",width:"0px",height:"0px","border-color":"transparent","border-style":"solid",position:"absolute",top:"-6px"},o={height:"0px","border-top":"1px dashed red",position:"absolute","z-index":9999};b.prototype={removeAll:function(){for(var a in this.hidden)this.hidden[a].remove(),delete this.hidden[a];for(a in this.visible)this.visible[a].remove(),delete this.visible[a]},hideLine:function(a){var b=a.getUniqueId();a.hide(),this.hidden[b]=a,delete this.visible[b]},showLine:function(a){var b=a.getUniqueId();a.show(),this.visible[b]=a,delete this.hidden[b]},hideVisible:function(){for(var a in this.visible)this.hideLine(this.visible[a])},placeLine:function(a,b){var e,t,n;if(e=this.getStyle(a.uid,a.type)){for(n in this.visible)if(this.visible[n].getCustomData("hash")!==this.hash){t=this.visible[n];break}if(!t)for(n in this.hidden)if(this.hidden[n].getCustomData("hash")!==this.hash){this.showLine(t=this.hidden[n]);break}t||this.showLine(t=this.addLine()),t.setCustomData("hash",this.hash),this.visible[t.getUniqueId()]=t,t.setStyles(e),b&&b(t)}},getStyle:function(a,b){var e=this.relations[a],t=this.locations[a][b],n={};if(n.width=e.siblingRect?Math.max(e.siblingRect.width,e.elementRect.width):e.elementRect.width,n.top=this.inline?t+this.winTopScroll.y-this.rect.relativeY:this.rect.top+this.winTopScroll.y+t,n.top-this.winTopScroll.y<this.rect.top||n.top-this.winTopScroll.y>this.rect.bottom)return!1;for(var g in this.inline?n.left=e.elementRect.left-this.rect.relativeX:(0<e.elementRect.left?n.left=this.rect.left+e.elementRect.left:(n.width+=e.elementRect.left,n.left=this.rect.left),0<(e=n.left+n.width-(this.rect.left+this.winPane.width))&&(n.width-=e)),n.left+=this.winTopScroll.x,n)n[g]=CKEDITOR.tools.cssLength(n[g]);return n},addLine:function(){var a=CKEDITOR.dom.element.createFromHtml(this.lineTpl);return a.appendTo(this.container),a},prepare:function(a,b){this.relations=a,this.locations=b,this.hash=Math.random()},cleanup:function(){var a,b;for(b in this.visible)(a=this.visible[b]).getCustomData("hash")!==this.hash&&this.hideLine(a)},queryViewport:function(){this.winPane=this.win.getViewPaneSize(),this.winTopScroll=this.winTop.getScrollPosition(),this.winTopPane=this.winTop.getViewPaneSize(),this.rect=this.getClientRect(this.inline?this.editable:this.frame)},getClientRect:function(a){a=a.getClientRect();var b=this.container.getDocumentPosition(),e=this.container.getComputedStyle("position");return a.relativeX=a.relativeY=0,"static"!=e&&(a.relativeY=b.y,a.relativeX=b.x,a.top-=a.relativeY,a.bottom-=a.relativeY,a.left-=a.relativeX,a.right-=a.relativeX),a}};var r={left:1,right:1,center:1},g={absolute:1,fixed:1};CKEDITOR.plugins.lineutils={finder:a,locator:e,liner:b}}(),function(){function a(a){return a.getName&&!a.hasAttribute("data-cke-temp")}CKEDITOR.plugins.add("widgetselection",{init:function(a){if(CKEDITOR.env.webkit){var b=CKEDITOR.plugins.widgetselection;a.on("contentDom",(function(a){var e=(a=a.editor).editable();e.attachListener(e,"keydown",(function(a){a.data.getKeystroke()==CKEDITOR.CTRL+65&&CKEDITOR.tools.setTimeout((function(){b.addFillers(e)||b.removeFillers(e)}),0)}),null,null,-1),a.on("selectionCheck",(function(a){b.removeFillers(a.editor.editable())})),a.on("paste",(function(a){a.data.dataValue=b.cleanPasteData(a.data.dataValue)})),"selectall"in a.plugins&&b.addSelectAllIntegration(a)}))}}}),CKEDITOR.plugins.widgetselection={startFiller:null,endFiller:null,fillerAttribute:"data-cke-filler-webkit",fillerContent:"&nbsp;",fillerTagName:"div",addFillers:function(e){var b=e.editor;if(!this.isWholeContentSelected(e)&&0<e.getChildCount()){var t=e.getFirst(a),n=e.getLast(a);if(t&&t.type==CKEDITOR.NODE_ELEMENT&&!t.isEditable()&&(this.startFiller=this.createFiller(),e.append(this.startFiller,1)),n&&n.type==CKEDITOR.NODE_ELEMENT&&!n.isEditable()&&(this.endFiller=this.createFiller(!0),e.append(this.endFiller,0)),this.hasFiller(e))return(b=b.createRange()).selectNodeContents(e),b.select(),!0}return!1},removeFillers:function(a){if(this.hasFiller(a)&&!this.isWholeContentSelected(a)){var b=a.findOne(this.fillerTagName+"["+this.fillerAttribute+"=start]"),e=a.findOne(this.fillerTagName+"["+this.fillerAttribute+"=end]");this.startFiller&&b&&this.startFiller.equals(b)?this.removeFiller(this.startFiller,a):this.startFiller=b,this.endFiller&&e&&this.endFiller.equals(e)?this.removeFiller(this.endFiller,a):this.endFiller=e}},cleanPasteData:function(a){return a&&a.length&&(a=a.replace(this.createFillerRegex(),"").replace(this.createFillerRegex(!0),"")),a},isWholeContentSelected:function(a){var b=a.editor.getSelection().getRanges()[0];return!(!b||b&&b.collapsed||((b=b.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),!(b&&a&&b.startContainer&&b.endContainer&&0===b.startOffset&&b.endOffset===a.getChildCount()&&b.startContainer.equals(a)&&b.endContainer.equals(a))))},hasFiller:function(a){return 0<a.find(this.fillerTagName+"["+this.fillerAttribute+"]").count()},createFiller:function(a){var b=new CKEDITOR.dom.element(this.fillerTagName);return b.setHtml(this.fillerContent),b.setAttribute(this.fillerAttribute,a?"end":"start"),b.setAttribute("data-cke-temp",1),b.setStyles({display:"block",width:0,height:0,padding:0,border:0,margin:0,position:"absolute",top:0,left:"-9999px",opacity:0,overflow:"hidden"}),b},removeFiller:function(a,b){if(a){var e,g,t=b.editor,n=b.editor.getSelection().getRanges()[0].startPath(),o=t.createRange();n.contains(a)&&(e=a.getHtml(),g=!0),n="start"==a.getAttribute(this.fillerAttribute),a.remove(),e&&0<e.length&&e!=this.fillerContent?(b.insertHtmlIntoRange(e,t.getSelection().getRanges()[0]),o.setStartAt(b.getChild(b.getChildCount()-1),CKEDITOR.POSITION_BEFORE_END),t.getSelection().selectRanges([o])):g&&(n?o.setStartAt(b.getFirst().getNext(),CKEDITOR.POSITION_AFTER_START):o.setEndAt(b.getLast().getPrevious(),CKEDITOR.POSITION_BEFORE_END),b.editor.getSelection().selectRanges([o]))}},createFillerRegex:function(a){var b=this.createFiller(a).getOuterHtml().replace(/style="[^"]*"/gi,'style="[^"]*"').replace(/>[^<]*</gi,">[^<]*<");return new RegExp((a?"":"^")+b+(a?"$":""))},addSelectAllIntegration:function(a){var b=this;a.editable().attachListener(a,"beforeCommandExec",(function(e){var t=a.editable();"selectAll"==e.data.name&&t&&b.addFillers(t)}),null,null,9999)}}}(),function(){function a(a){this.editor=a,this.registered={},this.instances={},this.selected=[],this.widgetHoldingFocusedEditable=this.focused=null,this._={nextId:0,upcasts:[],upcastCallbacks:[],filters:{}},function(a){var t,n,b=a.editor;b.on("toHtml",(function(b){var n,o=function(a){var b=[],t=a._.upcasts,n=a._.upcastCallbacks;return{toBeWrapped:b,iterator:function(a){var o,g,r,l,c;if("data-cke-widget-wrapper"in a.attributes)return(a=a.getFirst(e.isParserWidgetElement))&&b.push([a]),!1;if("data-widget"in a.attributes)return b.push([a]),!1;if(c=t.length){if(a.attributes["data-cke-widget-upcasted"])return!1;for(l=0,o=n.length;l<o;++l)if(!1===n[l](a))return;for(l=0;l<c;++l)if(r={},g=(o=t[l])[0](a,r))return g instanceof CKEDITOR.htmlParser.element&&(a=g),a.attributes["data-cke-widget-data"]=encodeURIComponent(JSON.stringify(r)),a.attributes["data-cke-widget-upcasted"]=1,b.push([a,o[1]]),!1}}}}(a);for(b.data.dataValue.forEach(o.iterator,CKEDITOR.NODE_ELEMENT,!0);n=o.toBeWrapped.pop();){var g=n[0],r=g.parent;r.type==CKEDITOR.NODE_ELEMENT&&r.attributes["data-cke-widget-wrapper"]&&r.replaceWith(g),a.wrapElement(n[0],n[1])}t=b.data.protectedWhitespaces?3==b.data.dataValue.children.length&&e.isParserWidgetWrapper(b.data.dataValue.children[1]):1==b.data.dataValue.children.length&&e.isParserWidgetWrapper(b.data.dataValue.children[0])}),null,null,8),b.on("dataReady",(function(){if(n)for(var t,g,o=b.editable().find(".cke_widget_wrapper"),r=0,l=o.count();r<l;++r)(g=(t=o.getItem(r)).getFirst(e.isDomWidgetElement)).type==CKEDITOR.NODE_ELEMENT&&g.data("widget")?(g.replace(t),a.wrapElement(g)):t.remove();n=0,a.destroyAll(!0),a.initOnAll()})),b.on("loadSnapshot",(function(b){/data-cke-widget/.test(b.data)&&(n=1),a.destroyAll(!0)}),null,null,9),b.on("paste",(function(a){(a=a.data).dataValue=a.dataValue.replace(y,h),a.range&&(a=e.getNestedEditable(b.editable(),a.range.startContainer))&&(a=CKEDITOR.filter.instances[a.data("cke-filter")])&&b.setActiveFilter(a)})),b.on("afterInsertHtml",(function(e){e.data.intoRange?a.checkWidgets({initOnlyNew:!0}):(b.fire("lockSnapshot"),a.checkWidgets({initOnlyNew:!0,focusInited:t}),b.fire("unlockSnapshot"))}))}(this),function(a){var b=a.editor,t={};b.on("toDataFormat",(function(b){var n=CKEDITOR.tools.getNextNumber(),l=[];b.data.downcastingSessionId=n,t[n]=l,b.data.dataValue.forEach((function(b){var t,n=b.attributes;if("data-cke-widget-white-space"in n){t=o(b);var g=r(b);t.parent.attributes["data-cke-white-space-first"]&&(t.value=t.value.replace(/^&nbsp;/g," ")),g.parent.attributes["data-cke-white-space-last"]&&(g.value=g.value.replace(/&nbsp;$/g," "))}if("data-cke-widget-id"in n)(n=a.instances[n["data-cke-widget-id"]])&&(t=b.getFirst(e.isParserWidgetElement),l.push({wrapper:b,element:t,widget:n,editables:{}}),"1"!=t.attributes["data-cke-widget-keep-attr"]&&delete t.attributes["data-widget"]);else if("data-cke-widget-editable"in n)return 0<l.length&&(l[l.length-1].editables[n["data-cke-widget-editable"]]=b),!1}),CKEDITOR.NODE_ELEMENT,!0)}),null,null,8),b.on("toDataFormat",(function(a){if(a.data.downcastingSessionId){a=t[a.data.downcastingSessionId];for(var b,e,n,o,g,r;b=a.shift();){for(r in e=b.widget,n=b.element,o=e._.downcastFn&&e._.downcastFn.call(e,n),b.editables)delete(g=b.editables[r]).attributes.contenteditable,g.setHtml(e.editables[r].getData());o||(o=n),b.wrapper.replaceWith(o)}}}),null,null,13),b.on("contentDomUnload",(function(){a.destroyAll(!0)}))}(this),this.on("checkWidgets",n),this.editor.on("contentDomInvalidated",this.checkWidgets,this),function(a){var b=a.editor;b.on("selectionCheck",(function(){a.fire("checkSelection")})),a.on("checkSelection",a.checkSelection,a),b.on("selectionChange",(function(t){var n=(t=e.getNestedEditable(b.editable(),t.data.selection.getStartElement()))&&a.getByElement(t),o=a.widgetHoldingFocusedEditable;o?o===n&&o.focusedEditable.equals(t)||(d(a,o,null),n&&t&&d(a,n,t)):n&&t&&d(a,n,t)})),b.on("dataReady",(function(){f(a).commit()})),b.on("blur",(function(){var b;(b=a.focused)&&t(a,b),(b=a.widgetHoldingFocusedEditable)&&d(a,b,null)}))}(this),function(a){var b=a.editor;b.on("contentDom",(function(){var t,g,n=b.editable(),o=n.isInline()?n:b.document;n.attachListener(o,"mousedown",(function(n){var o=n.data.getTarget();t=o instanceof CKEDITOR.dom.element?a.getByElement(o):null,g=0,t&&(t.inline&&o.type==CKEDITOR.NODE_ELEMENT&&o.hasAttribute("data-cke-widget-drag-handler")?(g=1,a.focused!=t&&b.getSelection().removeAllRanges()):e.getNestedEditable(t.wrapper,o)?t=null:(n.data.preventDefault(),CKEDITOR.env.ie||t.focus()))})),n.attachListener(o,"mouseup",(function(){g&&t&&t.wrapper&&(g=0,t.focus())})),CKEDITOR.env.ie&&n.attachListener(o,"mouseup",(function(){setTimeout((function(){t&&t.wrapper&&n.contains(t.wrapper)&&(t.focus(),t=null)}))}))})),b.on("doubleclick",(function(b){var t=a.getByElement(b.data.element);if(t&&!e.getNestedEditable(t.wrapper,b.data.element))return t.fire("doubleclick",{element:b.data.element})}),null,null,1)}(this),function(a){a.editor.on("key",(function(b){var e,t=a.focused,n=a.widgetHoldingFocusedEditable;return t?e=t.fire("key",{keyCode:b.data.keyCode}):n&&(t=b.data.keyCode,b=n.focusedEditable,t==CKEDITOR.CTRL+65?(t=b.getBogus(),(n=n.editor.createRange()).selectNodeContents(b),t&&n.setEndAt(t,CKEDITOR.POSITION_BEFORE_START),n.select(),e=!1):8==t||46==t?(e=n.editor.getSelection().getRanges(),n=e[0],e=!(1==e.length&&n.collapsed&&n.checkBoundaryOfElement(b,CKEDITOR[8==t?"START":"END"]))):e=void 0),e}),null,null,1)}(this),function(a){var b=a.editor,t=CKEDITOR.plugins.lineutils;b.on("dragstart",(function(t){var n=t.data.target;e.isDomDragHandler(n)&&(n=a.getByElement(n),t.data.dataTransfer.setData("cke/widget-id",n.id),b.focus(),n.focus())})),b.on("drop",(function(e){var t=(o=e.data.dataTransfer).getData("cke/widget-id"),n=o.getTransferType(b),o=b.createRange();""!==t&&n===CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?e.cancel():""!==t&&n==CKEDITOR.DATA_TRANSFER_INTERNAL&&(t=a.instances[t])&&(o.setStartBefore(t.wrapper),o.setEndAfter(t.wrapper),e.data.dragRange=o,delete CKEDITOR.plugins.clipboard.dragStartContainerChildCount,delete CKEDITOR.plugins.clipboard.dragEndContainerChildCount,e.data.dataTransfer.setData("text/html",b.editable().getHtmlFromRange(o).getHtml()),b.widgets.destroy(t,!0))})),b.on("contentDom",(function(){var n=b.editable();CKEDITOR.tools.extend(a,{finder:new t.finder(b,{lookups:{default:function(b){if(!b.is(CKEDITOR.dtd.$listItem)&&b.is(CKEDITOR.dtd.$block)&&!e.isDomNestedEditable(b)&&!a._.draggedWidget.wrapper.contains(b)){var t=e.getNestedEditable(n,b);if(t){if(b=a._.draggedWidget,a.getByElement(t)==b)return;if(t=CKEDITOR.filter.instances[t.data("cke-filter")],b=b.requiredContent,t&&b&&!t.check(b))return}return CKEDITOR.LINEUTILS_BEFORE|CKEDITOR.LINEUTILS_AFTER}}}}),locator:new t.locator(b),liner:new t.liner(b,{lineStyle:{cursor:"move !important","border-top-color":"#666"},tipLeftStyle:{"border-left-color":"#666"},tipRightStyle:{"border-right-color":"#666"}})},!0)}))}(this),function(a){function b(e){a.focused&&T(a.focused,"cut"==e.name)}var e=a.editor;e.on("contentDom",(function(){var a=e.editable();a.attachListener(a,"copy",b),a.attachListener(a,"cut",b)}))}(this)}function e(a,b,t,n,o){var g=a.editor;CKEDITOR.tools.extend(this,n,{editor:g,id:b,inline:"span"==t.getParent().getName(),element:t,data:CKEDITOR.tools.extend({},"function"==typeof n.defaults?n.defaults():n.defaults),dataReady:!1,inited:!1,ready:!1,edit:e.prototype.edit,focusedEditable:null,definition:n,repository:a,draggable:!1!==n.draggable,_:{downcastFn:n.downcast&&"string"==typeof n.downcast?n.downcasts[n.downcast]:n.downcast}},!0),a.fire("instanceCreated",this),function(a,b){(function(a){(a.wrapper=a.element.getParent()).setAttribute("data-cke-widget-id",a.id)})(a),function(a){if(a.parts){var e,t,b={};for(t in a.parts)e=a.wrapper.findOne(a.parts[t]),b[t]=e;a.parts=b}}(a),function(a){var b,e,t=a.editables;if(a.editables={},a.editables)for(b in t)e=t[b],a.initEditable(b,"string"==typeof e?{selector:e}:e)}(a),function(a){if(a.mask){var b=a.wrapper.findOne(".cke_widget_mask");b||((b=new CKEDITOR.dom.element("img",a.editor.document)).setAttributes({src:CKEDITOR.tools.transparentImageData,class:"cke_reset cke_widget_mask"}),a.wrapper.append(b)),a.mask=b}}(a),function(a){if(a.draggable){var t,b=a.editor,n=a.wrapper.getLast(e.isDomDragHandlerContainer);n?t=n.findOne("img"):((n=new CKEDITOR.dom.element("span",b.document)).setAttributes({class:"cke_reset cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+b.plugins.widget.path+"images/handle.png)"}),(t=new CKEDITOR.dom.element("img",b.document)).setAttributes({class:"cke_reset cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:CKEDITOR.tools.transparentImageData,width:15,title:b.lang.widget.move,height:15,role:"presentation"}),a.inline&&t.setAttribute("draggable","true"),n.append(t),a.wrapper.append(n)),a.wrapper.on("dragover",(function(a){a.data.preventDefault()})),a.wrapper.on("mouseenter",a.updateDragHandlerPosition,a),setTimeout((function(){a.on("data",a.updateDragHandlerPosition,a)}),50),!a.inline&&(t.on("mousedown",D,a),CKEDITOR.env.ie&&9>CKEDITOR.env.version)&&t.on("dragstart",(function(a){a.data.preventDefault(!0)})),a.dragHandlerContainer=n}}(a),function(a){var b=null;a.on("data",(function(){var e,a=this.data.classes;if(b!=a){for(e in b)a&&a[e]||this.removeClass(e);for(e in a)this.addClass(e);b=a}}))}(a),function(a){a.on("data",(function(){if(a.wrapper){var b=this.getLabel?this.getLabel():this.editor.lang.widget.label.replace(/%1/,this.pathName||this.element.getName());a.wrapper.setAttribute("role","region"),a.wrapper.setAttribute("aria-label",b)}}),null,null,9999)}(a),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&a.wrapper.on("dragstart",(function(b){var t=b.data.getTarget();e.getNestedEditable(a,t)||a.inline&&e.isDomDragHandler(t)||b.data.preventDefault()})),a.wrapper.removeClass("cke_widget_new"),a.element.addClass("cke_widget_element"),a.on("key",(function(b){if(13==(b=b.data.keyCode))a.edit();else{if(b==CKEDITOR.CTRL+67||b==CKEDITOR.CTRL+88)return void T(a,b==CKEDITOR.CTRL+88);if(b in K||CKEDITOR.CTRL&b||CKEDITOR.ALT&b)return}return!1}),null,null,999),a.on("doubleclick",(function(b){a.edit()&&b.cancel()})),b.data&&a.on("data",b.data),b.edit&&a.on("edit",b.edit)}(this,n),this.init&&this.init(),this.inited=!0,(a=this.element.data("cke-widget-data"))&&this.setData(JSON.parse(decodeURIComponent(a))),o&&this.setData(o),this.data.classes||this.setData("classes",this.getClasses()),this.dataReady=!0,R(this),this.fire("data",this.data),this.isInited()&&g.editable().contains(this.wrapper)&&(this.ready=!0,this.fire("ready"))}function b(a,b,e){CKEDITOR.dom.element.call(this,b.$),this.editor=a,this._={},b=this.filter=e.filter,CKEDITOR.dtd[this.getName()].p?(this.enterMode=b?b.getAllowedEnterMode(a.enterMode):a.enterMode,this.shiftEnterMode=b?b.getAllowedEnterMode(a.shiftEnterMode,!0):a.shiftEnterMode):this.enterMode=this.shiftEnterMode=CKEDITOR.ENTER_BR}function t(a,b){if(a.focused=null,b.isInited()){var e=b.editor.checkDirty();a.fire("widgetBlurred",{widget:b}),b.setFocused(!1),!e&&b.editor.resetDirty()}}function n(a){if(a=a.data,"wysiwyg"==this.editor.mode){var t,n,g,o,b=this.editor.editable(),r=this.instances;if(b){for(t in r)r[t].isReady()&&!b.contains(r[t].wrapper)&&this.destroy(r[t],!0);if(a&&a.initOnlyNew)r=this.initOnAll();else{var l=b.find(".cke_widget_wrapper");for(r=[],t=0,n=l.count();t<n;t++){if(g=l.getItem(t),o=!this.getByElement(g,!0)){e:{o=p;for(var c=g;c=c.getParent();)if(o(c)){o=!0;break e}o=!1}o=!o}o&&b.contains(g)&&(g.addClass("cke_widget_new"),r.push(this.initOn(g.getFirst(e.isDomWidgetElement))))}}a&&a.focusInited&&1==r.length&&r[0].focus()}}}function g(a){if(void 0!==a.attributes&&a.attributes["data-widget"]){var b=o(a),e=r(a),t=!1;b&&b.value&&b.value.match(/^\s/g)&&(b.parent.attributes["data-cke-white-space-first"]=1,b.value=b.value.replace(/^\s/g,"&nbsp;"),t=!0),e&&e.value&&e.value.match(/\s$/g)&&(e.parent.attributes["data-cke-white-space-last"]=1,e.value=e.value.replace(/\s$/g,"&nbsp;"),t=!0),t&&(a.attributes["data-cke-widget-white-space"]=1)}}function o(a){return a.find((function(a){return 3===a.type}),!0).shift()}function r(a){return a.find((function(a){return 3===a.type}),!0).pop()}function l(a,b,e){if(!e.allowedContent&&!e.disallowedContent)return null;var t=this._.filters[a];return t||(this._.filters[a]=t={}),(a=t[b])||(a=e.allowedContent?new CKEDITOR.filter(e.allowedContent):this.editor.filter.clone(),t[b]=a,e.disallowedContent&&a.disallow(e.disallowedContent)),a}function q(a,b){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off",class:"cke_widget_wrapper cke_widget_new cke_widget_"+(a?"inline":"block")+(b?" cke_widget_"+b:"")}}function c(a,b,e){if(a.type==CKEDITOR.NODE_ELEMENT&&(t=CKEDITOR.dtd[a.name])&&!t[e.name]){var t=a.split(b),n=a.parent;return b=t.getIndex(),a.children.length||(--b,a.remove()),t.children.length||t.remove(),c(n,b,e)}a.add(e,b)}function u(a,b){return"boolean"==typeof a.inline?a.inline:!!CKEDITOR.dtd.$inline[b]}function p(a){return a.hasAttribute("data-cke-temp")}function d(a,b,e,t){var n=a.editor;n.fire("lockSnapshot"),e?(t=e.data("cke-widget-editable"),t=b.editables[t],a.widgetHoldingFocusedEditable=b,b.focusedEditable=t,e.addClass("cke_widget_editable_focused"),t.filter&&n.setActiveFilter(t.filter),n.setActiveEnterMode(t.enterMode,t.shiftEnterMode)):(t||b.focusedEditable.removeClass("cke_widget_editable_focused"),b.focusedEditable=null,a.widgetHoldingFocusedEditable=null,n.setActiveFilter(null),n.setActiveEnterMode(null,null)),n.fire("unlockSnapshot")}function h(a,b){return CKEDITOR.tools.trim(b)}function f(a){var b=a.selected,e=[],n=b.slice(0),o=null;return{select:function(a){return 0>CKEDITOR.tools.indexOf(b,a)&&e.push(a),0<=(a=CKEDITOR.tools.indexOf(n,a))&&n.splice(a,1),this},focus:function(a){return o=a,this},commit:function(){var g,r,l=a.focused!==o;for(a.editor.fire("lockSnapshot"),l&&(g=a.focused)&&t(a,g);g=n.pop();)b.splice(CKEDITOR.tools.indexOf(b,g),1),g.isInited()&&(r=g.editor.checkDirty(),g.setSelected(!1),!r&&g.editor.resetDirty());for(l&&o&&(r=a.editor.checkDirty(),a.focused=o,a.fire("widgetFocused",{widget:o}),o.setFocused(!0),!r&&a.editor.resetDirty());g=e.pop();)b.push(g),g.setSelected(!0);a.editor.fire("unlockSnapshot")}}}function m(a,b,e){var t=0;b=C(b);var n,o=a.data.classes||{};if(b){for(o=CKEDITOR.tools.clone(o);n=b.pop();)e?o[n]||(t=o[n]=1):o[n]&&(delete o[n],t=1);t&&a.setData("classes",o)}}function E(a){a.cancel()}function T(a,b){var e=a.editor,t=e.document,n=CKEDITOR.env.edge&&16<=CKEDITOR.env.version;if(!t.getById("cke_copybin")){var o=!e.blockless&&!CKEDITOR.env.ie||n?"div":"span",g=(n=t.createElement(o),t.createElement(o));o=CKEDITOR.env.ie&&9>CKEDITOR.env.version,g.setAttributes({id:"cke_copybin","data-cke-temp":"1"}),n.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),n.setStyle("ltr"==e.config.contentsLangDirection?"left":"right","-5000px");var r=e.createRange();r.setStartBefore(a.wrapper),r.setEndAfter(a.wrapper),n.setHtml('<span data-cke-copybin-start="1">​</span>'+e.editable().getHtmlFromRange(r).getHtml()+'<span data-cke-copybin-end="1">​</span>'),e.fire("saveSnapshot"),e.fire("lockSnapshot"),g.append(n),e.editable().append(g);var l=e.on("selectionChange",E,null,null,0),c=a.repository.on("checkSelection",E,null,null,0);if(o)var d=t.getDocumentElement().$,h=d.scrollTop;(r=e.createRange()).selectNodeContents(n),r.select(),o&&(d.scrollTop=h),setTimeout((function(){b||a.focus(),g.remove(),l.removeListener(),c.removeListener(),e.fire("unlockSnapshot"),b&&!e.readOnly&&(a.repository.del(a),e.fire("saveSnapshot"))}),100)}}function C(a){return(a=(a=a.getDefinition().attributes)&&a.class)?a.split(/\s+/):null}function I(){var a=CKEDITOR.document.getActive(),b=this.editor,e=b.editable();(e.isInline()?e:b.document.getWindow().getFrame()).equals(a)&&b.focusManager.focus(e)}function O(){CKEDITOR.env.gecko&&this.editor.unlockSelection(),CKEDITOR.env.webkit||(this.editor.forceNextSelectionCheck(),this.editor.selectionChange(1))}function D(a){function b(){var e;for(p.reset();e=c.pop();)e.removeListener();var t=d;e=a.sender;var n=this.repository.finder,o=this.repository.liner,g=this.editor,r=this.editor.editable();CKEDITOR.tools.isEmpty(o.visible)||(t=n.getRange(t[0]),this.focus(),g.fire("drop",{dropRange:t,target:t.startContainer})),r.removeClass("cke_widget_dragging"),o.hideVisible(),g.fire("dragend",{target:e})}if(CKEDITOR.tools.getMouseButton(a)===CKEDITOR.MOUSE_BUTTON_LEFT){var e,t,n=this.repository.finder,o=this.repository.locator,r=this.repository.liner,l=this.editor,g=l.editable(),c=[],d=[];this.repository._.draggedWidget=this;var h=n.greedySearch(),p=CKEDITOR.tools.eventsBuffer(50,(function(){e=o.locate(h),(d=o.sort(t,1)).length&&(r.prepare(h,e),r.placeLine(d[0]),r.cleanup())}));g.addClass("cke_widget_dragging"),c.push(g.on("mousemove",(function(a){t=a.data.$.clientY,p.input()}))),l.fire("dragstart",{target:a.sender}),c.push(l.document.once("mouseup",b,this)),g.isInline()||c.push(CKEDITOR.document.once("mouseup",b,this))}}function R(a){a.element.data("cke-widget-data",encodeURIComponent(JSON.stringify(a.data)))}function v(){function a(){}function b(a,e,t){return!(!t||!this.checkElement(a))&&(a=t.widgets.getByElement(a,!0))&&a.checkStyleActive(this)}function t(a){function b(a,e,t){for(var n=a.length,o=0;o<n;){if(e.call(t,a[o],o,a))return a[o];o++}}function e(a){function b(a,e){var t=CKEDITOR.tools.object.keys(a),n=CKEDITOR.tools.object.keys(e);if(t.length!==n.length)return!1;for(var o in a)if(("object"!=typeof a[o]||"object"!=typeof e[o]||!b(a[o],e[o]))&&a[o]!==e[o])return!1;return!0}return function(e){return b(a.getDefinition(),e.getDefinition())}}var g,t=a.widget;n[t]||(n[t]={});for(var o=0,r=a.group.length;o<r;o++)g=a.group[o],n[t][g]||(n[t][g]=[]),b(g=n[t][g],e(a))||g.push(a)}var n={};CKEDITOR.style.addCustomHandler({type:"widget",setup:function(a){this.widget=a.widget,(this.group="string"==typeof a.group?[a.group]:a.group)&&t(this)},apply:function(a){var b;a instanceof CKEDITOR.editor&&this.checkApplicable(a.elementPath(),a)&&(b=a.widgets.focused,this.group&&this.removeStylesFromSameGroup(a),b.applyStyle(this))},remove:function(a){a instanceof CKEDITOR.editor&&this.checkApplicable(a.elementPath(),a)&&a.widgets.focused.removeStyle(this)},removeStylesFromSameGroup:function(a){var b,e,t=!1;if(!(a instanceof CKEDITOR.editor))return!1;if(e=a.elementPath(),this.checkApplicable(e,a))for(var o=0,g=this.group.length;o<g;o++){b=n[this.widget][this.group[o]];for(var r=0;r<b.length;r++)b[r]!==this&&b[r].checkActive(e,a)&&(a.widgets.focused.removeStyle(b[r]),t=!0)}return t},checkActive:function(a,b){return this.checkElementMatch(a.lastElement,0,b)},checkApplicable:function(a,b){return b instanceof CKEDITOR.editor&&this.checkElement(a.lastElement)},checkElementMatch:b,checkElementRemovable:b,checkElement:function(a){return!!e.isDomWidgetWrapper(a)&&(a=a.getFirst(e.isDomWidgetElement))&&a.data("widget")==this.widget},buildPreview:function(a){return a||this._.definition.name},toAllowedContentRules:function(a){if(!a)return null;var b,e={};return(a=a.widgets.registered[this.widget])?a.styleableElements?(b=this.getClassesArray())?(e[a.styleableElements]={classes:b,propertiesOnly:!0},e):null:a.styleToAllowedContentRules?a.styleToAllowedContentRules(this):null:null},getClassesArray:function(){var a=this._.definition.attributes&&this._.definition.attributes.class;return a?CKEDITOR.tools.trim(a).split(/\s+/):null},applyToRange:a,removeFromRange:a,applyToObject:a})}CKEDITOR.plugins.add("widget",{requires:"lineutils,clipboard,widgetselection",onLoad:function(){void 0!==CKEDITOR.document.$.querySelectorAll&&(CKEDITOR.addCss(".cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover>.cke_widget_element{outline:2px solid #ffd25c;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid #ffd25c}.cke_widget_wrapper.cke_widget_focused>.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #47a4f5}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:15px;height:0;display:none;opacity:0.75;transition:height 0s 0.2s;line-height:0}.cke_widget_wrapper:hover>.cke_widget_drag_handler_container{height:15px;transition:none}.cke_widget_drag_handler_container:hover{opacity:1}img.cke_widget_drag_handler{cursor:move;width:15px;height:15px;display:inline-block}.cke_widget_mask{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.cke_editable.cke_widget_dragging, .cke_editable.cke_widget_dragging *{cursor:move !important}"),v())},beforeInit:function(b){void 0!==CKEDITOR.document.$.querySelectorAll&&(b.widgets=new a(b))},afterInit:function(a){if(void 0!==CKEDITOR.document.$.querySelectorAll){var e,t,n,b=a.widgets.registered;for(t in b)(n=(e=b[t]).button)&&a.ui.addButton&&a.ui.addButton(CKEDITOR.tools.capitalize(e.name,!0),{label:n,command:e.name,toolbar:"insert,10"});!function(a){a.contextMenu&&a.contextMenu.addListener((function(b){if(b=a.widgets.getByElement(b,!0))return b.fire("contextMenu",{})}))}(a)}}}),a.prototype={MIN_SELECTION_CHECK_INTERVAL:500,add:function(a,b){return(b=CKEDITOR.tools.prototypedCopy(b)).name=a,b._=b._||{},this.editor.fire("widgetDefinition",b),b.template&&(b.template=new CKEDITOR.template(b.template)),function(a,b){a.addCommand(b.name,{exec:function(a,e){function t(){a.widgets.finalizeCreation(r)}if((o=a.widgets.focused)&&o.name==b.name)o.edit();else if(b.insert)b.insert({editor:a,commandData:e});else if(b.template){var n,o="function"==typeof b.defaults?b.defaults():b.defaults,g=(o=CKEDITOR.dom.element.createFromHtml(b.template.output(o)),a.widgets.wrapElement(o,b.name)),r=new CKEDITOR.dom.documentFragment(g.getDocument());r.append(g),(n=a.widgets.initOn(o,b,e&&e.startupData))?(o=n.once("edit",(function(b){b.data.dialog?n.once("dialog",(function(b){var e,o;b=b.data,e=b.once("ok",t,null,null,20),o=b.once("cancel",(function(b){b.data&&!1===b.data.hide||a.widgets.destroy(n,!0)})),b.once("hide",(function(){e.removeListener(),o.removeListener()}))})):t()}),null,null,999),n.edit(),o.removeListener()):t()}},allowedContent:b.allowedContent,requiredContent:b.requiredContent,contentForms:b.contentForms,contentTransformations:b.contentTransformations})}(this.editor,b),function(a,b){function e(b,e,t){var n=CKEDITOR.tools.getIndex(a._.upcasts,(function(a){return a[2]>t}));0>n&&(n=a._.upcasts.length),a._.upcasts.splice(n,0,[CKEDITOR.tools.bind(b,e),e.name,t])}var t=b.upcast,n=b.upcastPriority||10;t&&e("string"==typeof t?function(a,e){var t,g,n=b.upcast.split(",");for(g=0;g<n.length;g++)if((t=n[g])===a.name)return b.upcasts[t].call(this,a,e);return!1}:t,b,n)}(this,b),this.registered[a]=b},addUpcastCallback:function(a){this._.upcastCallbacks.push(a)},checkSelection:function(){var t,a=this.editor.getSelection(),b=a.getSelectedElement(),n=f(this);if(b&&(t=this.getByElement(b,!0)))return n.focus(t).select(t).commit();if(!(a=a.getRanges()[0])||a.collapsed)return n.commit();for((a=new CKEDITOR.dom.walker(a)).evaluator=e.isDomWidgetWrapper;b=a.next();)n.select(this.getByElement(b));n.commit()},checkWidgets:function(a){this.fire("checkWidgets",CKEDITOR.tools.copy(a||{}))},del:function(a){if(this.focused===a){var e,b=a.editor,t=b.createRange();(e=t.moveToClosestEditablePosition(a.wrapper,!0))||(e=t.moveToClosestEditablePosition(a.wrapper,!1)),e&&b.getSelection().selectRanges([t])}a.wrapper.remove(),this.destroy(a,!0)},destroy:function(a,b){this.widgetHoldingFocusedEditable===a&&d(this,a,null,b),a.destroy(b),delete this.instances[a.id],this.fire("instanceDestroyed",a)},destroyAll:function(a,b){var e,t,n=this.instances;if(b&&!a){n=(t=b.find(".cke_widget_wrapper")).count();for(var o=0;o<n;++o)(e=this.getByElement(t.getItem(o),!0))&&this.destroy(e)}else for(t in n)e=n[t],this.destroy(e,a)},finalizeCreation:function(a){(a=a.getFirst())&&e.isDomWidgetWrapper(a)&&(this.editor.insertElement(a),(a=this.getByElement(a)).ready=!0,a.fire("ready"),a.focus())},getByElement:function(){function a(e){return e.is(b)&&e.data("cke-widget-id")}var b={div:1,span:1};return function(b,e){if(!b)return null;var t=a(b);if(!e&&!t){var n=this.editor.editable();do{b=b.getParent()}while(b&&!b.equals(n)&&!(t=a(b)))}return this.instances[t]||null}}(),initOn:function(a,b,t){if(b?"string"==typeof b&&(b=this.registered[b]):b=this.registered[a.data("widget")],!b)return null;var n=this.wrapElement(a,b.name);return n?n.hasClass("cke_widget_new")?(a=new e(this,this._.nextId++,a,b,t)).isInited()?this.instances[a.id]=a:null:this.getByElement(a):null},initOnAll:function(a){for(var t,b=[],n=(a=(a||this.editor.editable()).find(".cke_widget_new")).count();n--;)(t=this.initOn(a.getItem(n).getFirst(e.isDomWidgetElement)))&&b.push(t);return b},onWidget:function(a){var b=Array.prototype.slice.call(arguments);for(var e in b.shift(),this.instances){var t=this.instances[e];t.name==a&&t.on.apply(t,b)}this.on("instanceCreated",(function(e){(e=e.data).name==a&&e.on.apply(e,b)}))},parseElementClasses:function(a){if(!a)return null;a=CKEDITOR.tools.trim(a).split(/\s+/);for(var b,e={},t=0;b=a.pop();)-1==b.indexOf("cke_")&&(e[b]=t=1);return t?e:null},wrapElement:function(a,b){var e,t,n=null;if(a instanceof CKEDITOR.dom.element){if(b=b||a.data("widget"),!(e=this.registered[b]))return null;if((n=a.getParent())&&n.type==CKEDITOR.NODE_ELEMENT&&n.data("cke-widget-wrapper"))return n;a.hasAttribute("data-cke-widget-keep-attr")||a.data("cke-widget-keep-attr",a.data("widget")?1:0),a.data("widget",b),(t=u(e,a.getName()))&&g(a),(n=new CKEDITOR.dom.element(t?"span":"div")).setAttributes(q(t,b)),n.data("cke-display-name",e.pathName?e.pathName:a.getName()),a.getParent(!0)&&n.replace(a),a.appendTo(n)}else if(a instanceof CKEDITOR.htmlParser.element){if(b=b||a.attributes["data-widget"],!(e=this.registered[b]))return null;if((n=a.parent)&&n.type==CKEDITOR.NODE_ELEMENT&&n.attributes["data-cke-widget-wrapper"])return n;var o;"data-cke-widget-keep-attr"in a.attributes||(a.attributes["data-cke-widget-keep-attr"]=a.attributes["data-widget"]?1:0),b&&(a.attributes["data-widget"]=b),(t=u(e,a.name))&&g(a),(n=new CKEDITOR.htmlParser.element(t?"span":"div",q(t,b))).attributes["data-cke-display-name"]=e.pathName?e.pathName:a.name,(e=a.parent)&&(o=a.getIndex(),a.remove()),n.add(a),e&&c(e,o,n)}return n},_tests_createEditableFilter:l},CKEDITOR.event.implementOn(a.prototype),e.prototype={addClass:function(a){this.element.addClass(a),this.wrapper.addClass(e.WRAPPER_CLASS_PREFIX+a)},applyStyle:function(a){m(this,a,1)},checkStyleActive:function(a){var b;if(!(a=C(a)))return!1;for(;b=a.pop();)if(!this.hasClass(b))return!1;return!0},destroy:function(a){if(this.fire("destroy"),this.editables)for(var b in this.editables)this.destroyEditable(b,a);a||("0"==this.element.data("cke-widget-keep-attr")&&this.element.removeAttribute("data-widget"),this.element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),this.element.removeClass("cke_widget_element"),this.element.replace(this.wrapper)),this.wrapper=null},destroyEditable:function(a,b){var e=this.editables[a],t=!0;if(e.removeListener("focus",O),e.removeListener("blur",I),this.editor.focusManager.remove(e),e.filter){for(var n in this.repository.instances){var o=this.repository.instances[n];o.editables&&(o=o.editables[a])&&o!==e&&e.filter===o.filter&&(t=!1)}t&&(e.filter.destroy(),(t=this.repository._.filters[this.name])&&delete t[a])}b||(this.repository.destroyAll(!1,e),e.removeClass("cke_widget_editable"),e.removeClass("cke_widget_editable_focused"),e.removeAttributes(["contenteditable","data-cke-widget-editable","data-cke-enter-mode"])),delete this.editables[a]},edit:function(){var a={dialog:this.dialog},b=this;return!(!1===this.fire("edit",a)||!a.dialog||(this.editor.openDialog(a.dialog,(function(a){var e,t;!1!==b.fire("dialog",a)&&(e=a.on("show",(function(){a.setupContent(b)})),t=a.on("ok",(function(){var e,t=b.on("data",(function(a){e=1,a.cancel()}),null,null,0);b.editor.fire("saveSnapshot"),a.commitContent(b),t.removeListener(),e&&(b.fire("data",b.data),b.editor.fire("saveSnapshot"))})),a.once("hide",(function(){e.removeListener(),t.removeListener()})))})),0))},getClasses:function(){return this.repository.parseElementClasses(this.element.getAttribute("class"))},hasClass:function(a){return this.element.hasClass(a)},initEditable:function(a,e){var t=this._findOneNotNested(e.selector);return!(!t||!t.is(CKEDITOR.dtd.$editable)||(t=new b(this.editor,t,{filter:l.call(this.repository,this.name,a,e)}),this.editables[a]=t,t.setAttributes({contenteditable:"true","data-cke-widget-editable":a,"data-cke-enter-mode":t.enterMode}),t.filter&&t.data("cke-filter",t.filter.id),t.addClass("cke_widget_editable"),t.removeClass("cke_widget_editable_focused"),e.pathName&&t.data("cke-display-name",e.pathName),this.editor.focusManager.add(t),t.on("focus",O,this),CKEDITOR.env.ie&&t.on("blur",I,this),t._.initialSetData=!0,t.setData(t.getHtml()),0))},_findOneNotNested:function(a){a=this.wrapper.find(a);for(var b,t,n=0;n<a.count();n++)if(t=(b=a.getItem(n)).getAscendant(e.isDomWidgetWrapper),this.wrapper.equals(t))return b;return null},isInited:function(){return!(!this.wrapper||!this.inited)},isReady:function(){return this.isInited()&&this.ready},focus:function(){var a=this.editor.getSelection();if(a){var b=this.editor.checkDirty();a.fake(this.wrapper),!b&&this.editor.resetDirty()}this.editor.focus()},removeClass:function(a){this.element.removeClass(a),this.wrapper.removeClass(e.WRAPPER_CLASS_PREFIX+a)},removeStyle:function(a){m(this,a,0)},setData:function(a,b){var e=this.data,t=0;if("string"==typeof a)e[a]!==b&&(e[a]=b,t=1);else{var n=a;for(a in n)e[a]!==n[a]&&(t=1,e[a]=n[a])}return t&&this.dataReady&&(R(this),this.fire("data",e)),this},setFocused:function(a){return this.wrapper[a?"addClass":"removeClass"]("cke_widget_focused"),this.fire(a?"focus":"blur"),this},setSelected:function(a){return this.wrapper[a?"addClass":"removeClass"]("cke_widget_selected"),this.fire(a?"select":"deselect"),this},updateDragHandlerPosition:function(){var a=this.editor,b=this.element.$,e=this._.dragHandlerOffset;b={x:b.offsetLeft,y:b.offsetTop-15},e&&b.x==e.x&&b.y==e.y||(e=a.checkDirty(),a.fire("lockSnapshot"),this.dragHandlerContainer.setStyles({top:b.y+"px",left:b.x+"px",display:"block"}),a.fire("unlockSnapshot"),!e&&a.resetDirty(),this._.dragHandlerOffset=b)}},CKEDITOR.event.implementOn(e.prototype),e.getNestedEditable=function(a,b){return!b||b.equals(a)?null:e.isDomNestedEditable(b)?b:e.getNestedEditable(a,b.getParent())},e.isDomDragHandler=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-cke-widget-drag-handler")},e.isDomDragHandlerContainer=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_widget_drag_handler_container")},e.isDomNestedEditable=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-cke-widget-editable")},e.isDomWidgetElement=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-widget")},e.isDomWidgetWrapper=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-cke-widget-wrapper")},e.isDomWidget=function(a){return!!a&&(this.isDomWidgetWrapper(a)||this.isDomWidgetElement(a))},e.isParserWidgetElement=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&!!a.attributes["data-widget"]},e.isParserWidgetWrapper=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&!!a.attributes["data-cke-widget-wrapper"]},e.WRAPPER_CLASS_PREFIX="cke_widget_wrapper_",b.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),{setData:function(a){this._.initialSetData||this.editor.widgets.destroyAll(!1,this),this._.initialSetData=!1,a=this.editor.dataProcessor.toHtml(a,{context:this.getName(),filter:this.filter,enterMode:this.enterMode}),this.setHtml(a),this.editor.widgets.initOnAll(this)},getData:function(){return this.editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:this.filter,enterMode:this.enterMode})}});var y=/^(?:<(?:div|span)(?: data-cke-temp="1")?(?: id="cke_copybin")?(?: data-cke-temp="1")?>)?(?:<(?:div|span)(?: style="[^"]+")?>)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?<\/span>([\s\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?<\/span>(?:<\/(?:div|span)>)?(?:<\/(?:div|span)>)?$/i,K={37:1,38:1,39:1,40:1,8:1,46:1};K[CKEDITOR.SHIFT+121]=1,CKEDITOR.plugins.widget=e,e.repository=a,e.nestedEditable=b}(),function(){function a(a,e,t){this.editor=a,this.notification=null,this._message=new CKEDITOR.template(e),this._singularMessage=t?new CKEDITOR.template(t):null,this._tasks=[],this._doneTasks=this._doneWeights=this._totalWeights=0}function e(a){this._weight=a||1,this._doneWeight=0,this._isCanceled=!1}CKEDITOR.plugins.add("notificationaggregator",{requires:"notification"}),a.prototype={createTask:function(a){a=a||{};var e,t=!this.notification;return t&&(this.notification=this._createNotification()),(e=this._addTask(a)).on("updated",this._onTaskUpdate,this),e.on("done",this._onTaskDone,this),e.on("canceled",(function(){this._removeTask(e)}),this),this.update(),t&&this.notification.show(),e},update:function(){this._updateNotification(),this.isFinished()&&this.fire("finished")},getPercentage:function(){return 0===this.getTaskCount()?1:this._doneWeights/this._totalWeights},isFinished:function(){return this.getDoneTaskCount()===this.getTaskCount()},getTaskCount:function(){return this._tasks.length},getDoneTaskCount:function(){return this._doneTasks},_updateNotification:function(){this.notification.update({message:this._getNotificationMessage(),progress:this.getPercentage()})},_getNotificationMessage:function(){var a=this.getTaskCount(),e={current:this.getDoneTaskCount(),max:a,percentage:Math.round(100*this.getPercentage())};return(1==a&&this._singularMessage?this._singularMessage:this._message).output(e)},_createNotification:function(){return new CKEDITOR.plugins.notification(this.editor,{type:"progress"})},_addTask:function(a){return a=new e(a.weight),this._tasks.push(a),this._totalWeights+=a._weight,a},_removeTask:function(a){var e=CKEDITOR.tools.indexOf(this._tasks,a);-1!==e&&(a._doneWeight&&(this._doneWeights-=a._doneWeight),this._totalWeights-=a._weight,this._tasks.splice(e,1),this.update())},_onTaskUpdate:function(a){this._doneWeights+=a.data,this.update()},_onTaskDone:function(){this._doneTasks+=1,this.update()}},CKEDITOR.event.implementOn(a.prototype),e.prototype={done:function(){this.update(this._weight)},update:function(a){if(!this.isDone()&&!this.isCanceled()){var e=(a=Math.min(this._weight,a))-this._doneWeight;this._doneWeight=a,this.fire("updated",e),this.isDone()&&this.fire("done")}},cancel:function(){this.isDone()||this.isCanceled()||(this._isCanceled=!0,this.fire("canceled"))},isDone:function(){return this._weight===this._doneWeight},isCanceled:function(){return this._isCanceled}},CKEDITOR.event.implementOn(e.prototype),CKEDITOR.plugins.notificationAggregator=a,CKEDITOR.plugins.notificationAggregator.task=e}(),CKEDITOR.plugins.add("uploadwidget",{requires:"widget,clipboard,filetools,notificationaggregator",init:function(a){a.filter.allow("*[!data-widget,!data-cke-upload-id]")},isSupportedEnvironment:function(){return CKEDITOR.plugins.clipboard.isFileApiSupported}}),CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{addUploadWidget:function(a,e,b){var t=CKEDITOR.fileTools,n=a.uploadRepository,o=b.supportedTypes?10:20;b.fileToElement&&a.on("paste",(function(b){b=b.data;var o,q,g=a.widgets.registered[e],r=b.dataTransfer,l=r.getFilesCount(),c=g.loadMethod||"loadAndUpload";if(!b.dataValue&&l)for(q=0;q<l;q++)if(o=r.getFile(q),!g.supportedTypes||t.isTypeSupported(o,g.supportedTypes)){var d=g.fileToElement(o);o=n.create(o,void 0,g.loaderType),d&&(o[c](g.uploadUrl,g.additionalRequestParameters),CKEDITOR.fileTools.markElement(d,e,o.id),"loadAndUpload"!=c&&"upload"!=c||g.skipNotifications||CKEDITOR.fileTools.bindNotifications(a,o),b.dataValue+=d.getOuterHtml())}}),null,null,o),CKEDITOR.tools.extend(b,{downcast:function(){return new CKEDITOR.htmlParser.text("")},init:function(){var e,t,b=this,o=this.wrapper.findOne("[data-cke-upload-id]").data("cke-upload-id"),r=n.loaders[o],l=CKEDITOR.tools.capitalize;r.on("update",(function(n){"abort"===r.status&&"function"==typeof b.onAbort&&b.onAbort(r),b.wrapper&&b.wrapper.getParent()?(a.fire("lockSnapshot"),n="on"+l(r.status),"abort"!==r.status&&"function"==typeof b[n]&&!1===b[n](r)||(t="cke_upload_"+r.status,b.wrapper&&t!=e&&(e&&b.wrapper.removeClass(e),b.wrapper.addClass(t),e=t),"error"!=r.status&&"abort"!=r.status||a.widgets.del(b)),a.fire("unlockSnapshot")):(CKEDITOR.instances[a.name]&&a.editable().find('[data-cke-upload-id="'+o+'"]').count()||r.abort(),n.removeListener())})),r.update()},replaceWith:function(b,e){if(""===b.trim())a.widgets.del(this);else{var t,q,n=this==a.widgets.focused,o=a.editable(),r=a.createRange();n||(q=a.getSelection().createBookmarks()),r.setStartBefore(this.wrapper),r.setEndAfter(this.wrapper),n&&(t=r.createBookmark()),o.insertHtmlIntoRange(b,r,e),a.widgets.checkWidgets({initOnlyNew:!0}),a.widgets.destroy(this,!0),n?(r.moveToBookmark(t),r.select()):a.getSelection().selectBookmarks(q)}},_getLoader:function(){var a=this.wrapper.findOne("[data-cke-upload-id]");return a?this.editor.uploadRepository.loaders[a.data("cke-upload-id")]:null}}),a.widgets.add(e,b)},markElement:function(a,e,b){a.setAttributes({"data-cke-upload-id":b,"data-widget":e})},bindNotifications:function(a,e){var t,n=null;e.on("update",(function(){!n&&e.uploadTotal&&((t=a._.uploadWidgetNotificaionAggregator)&&!t.isFinished()||(t=a._.uploadWidgetNotificaionAggregator=new CKEDITOR.plugins.notificationAggregator(a,a.lang.uploadwidget.uploadMany,a.lang.uploadwidget.uploadOne)).once("finished",(function(){var b=t.getTaskCount();0===b?t.notification.hide():t.notification.update({message:1==b?a.lang.uploadwidget.doneOne:a.lang.uploadwidget.doneMany.replace("%1",b),type:"success",important:1})})),n=t.createTask({weight:e.uploadTotal})),n&&"uploading"==e.status&&n.update(e.uploaded)})),e.on("uploaded",(function(){n&&n.done()})),e.on("error",(function(){n&&n.cancel(),a.showNotification(e.message,"warning")})),e.on("abort",(function(){n&&n.cancel(),CKEDITOR.instances[a.name]&&a.showNotification(a.lang.uploadwidget.abort,"info")}))}}),function(){function a(a){return 9>=a&&(a="0"+a),String(a)}function e(e){var t=[(t=new Date).getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()];return b+=1,"image-"+CKEDITOR.tools.array.map(t,a).join("")+"-"+b+"."+e}var b=0;CKEDITOR.plugins.add("uploadimage",{requires:"uploadwidget",onLoad:function(){CKEDITOR.addCss(".cke_upload_uploading img{opacity: 0.3}")},isSupportedEnvironment:function(){return CKEDITOR.plugins.clipboard.isFileApiSupported},init:function(a){if(this.isSupportedEnvironment()){var b=CKEDITOR.fileTools,t=b.getUploadUrl(a.config,"image");t&&(b.addUploadWidget(a,"uploadimage",{supportedTypes:/image\/(jpeg|png|gif|bmp)/,uploadUrl:t,fileToElement:function(){var a=new CKEDITOR.dom.element("img");return a.setAttribute("src","data:image/gif;base64,R0lGODlhDgAOAIAAAAAAAP///yH5BAAAAAAALAAAAAAOAA4AAAIMhI+py+0Po5y02qsKADs="),a},parts:{img:"img"},onUploading:function(a){this.parts.img.setAttribute("src",a.data)},onUploaded:function(a){var b=this.parts.img.$;this.replaceWith('<img src="'+a.url+'" width="'+(a.responseData.width||b.naturalWidth)+'" height="'+(a.responseData.height||b.naturalHeight)+'">')}}),a.on("paste",(function(n){if(n.data.dataValue.match(/<img[\s\S]+data:/i)){n=n.data;var o,r,l,g=document.implementation.createHTMLDocument("");for((g=new CKEDITOR.dom.element(g.body)).data("cke-editable",1),g.appendHtml(n.dataValue),o=g.find("img"),l=0;l<o.count();l++){var c=(r=o.getItem(l)).getAttribute("src"),q=c&&"data:"==c.substring(0,5),d=null===r.data("cke-realelement");q&&d&&!r.data("cke-upload-id")&&!r.isReadOnly(1)&&(q=(q=c.match(/image\/([a-z]+?);/i))&&q[1]||"jpg",(c=a.uploadRepository.create(c,e(q))).upload(t),b.markElement(r,"uploadimage",c.id),b.bindNotifications(a,c))}n.dataValue=g.getHtml()}})))}}})}(),CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(a){a.config.wsc_onFinish="function"==typeof a.config.wsc_onFinish?a.config.wsc_onFinish:function(){},a.config.wsc_onClose="function"==typeof a.config.wsc_onClose?a.config.wsc_onClose:function(){}},parseConfig:function(a){a.config.wsc_customerId=a.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",a.config.wsc_customDictionaryIds=a.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"",a.config.wsc_userDictionaryName=a.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"",a.config.wsc_customLoaderScript=a.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript,a.config.wsc_interfaceLang=a.config.wsc_interfaceLang,CKEDITOR.config.wsc_cmd=a.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell",CKEDITOR.config.wsc_version="v4.3.0-master-d769233",CKEDITOR.config.wsc_removeGlobalVariable=!0},onLoad:function(a){"moono-lisa"==(CKEDITOR.skinName||a.config.skin)&&CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl(this.path+"skins/"+CKEDITOR.skin.name+"/wsc.css"))},init:function(a){var e=CKEDITOR.env;this.parseConfig(a),this.parseApi(a),a.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!(CKEDITOR.env.opera||CKEDITOR.env.air||document.domain!=window.location.hostname||e.ie&&(8>e.version||e.quirks))},void 0===a.plugins.scayt&&a.ui.addButton&&a.ui.addButton("SpellChecker",{label:a.lang.wsc.toolbar,click:function(a){var e=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.container.getText():a.document.getBody().getText();(e=e.replace(/\s/g,""))?a.execCommand("checkspell"):alert("Nothing to check!")},toolbar:"spellchecker,10"}),CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}}),function(){function a(a){function b(a){var e=!1;o.attachListener(o,"keydown",(function(){var b=g.getBody().getElementsByTag(a);if(!e){for(var t=0;t<b.count();t++)b.getItem(t).setCustomData("retain",!0);e=!0}}),null,null,1),o.attachListener(o,"keyup",(function(){var b=g.getElementsByTag(a);e&&(1==b.count()&&!b.getItem(0).getCustomData("retain")&&CKEDITOR.tools.isEmpty(b.getItem(0).getAttributes())&&b.getItem(0).remove(1),e=!1)}))}var e=this.editor,g=a.document,t=g.body,n=g.getElementById("cke_actscrpt");n&&n.parentNode.removeChild(n),(n=g.getElementById("cke_shimscrpt"))&&n.parentNode.removeChild(n),(n=g.getElementById("cke_basetagscrpt"))&&n.parentNode.removeChild(n),t.contentEditable=!0,CKEDITOR.env.ie&&(t.hideFocus=!0,t.disabled=!0,t.removeAttribute("disabled")),delete this._.isLoadingData,this.$=t,g=new CKEDITOR.dom.document(g),this.setup(),this.fixInitialSelection();var o=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&g.getDocumentElement().addClass(g.$.compatMode),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&e.enterMode!=CKEDITOR.ENTER_P?b("p"):CKEDITOR.env.edge&&15>CKEDITOR.env.version&&e.enterMode!=CKEDITOR.ENTER_DIV&&b("div"),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)&&g.getDocumentElement().on("mousedown",(function(a){a.data.getTarget().is("html")&&setTimeout((function(){e.editable().focus()}))})),function(a){function b(){var t;a.editable().attachListener(a,"selectionChange",(function(){var b=a.getSelection().getSelectedElement();b&&(t&&(t.detachEvent("onresizestart",e),t=null),b.$.attachEvent("onresizestart",e),t=b.$)}))}function e(a){a.returnValue=!1}if(CKEDITOR.env.gecko)try{var t=a.document.$;t.execCommand("enableObjectResizing",!1,!a.config.disableObjectResizing),t.execCommand("enableInlineTableEditing",!1,!a.config.disableNativeTableHandles)}catch(e){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&a.config.disableObjectResizing&&b(a)}(e);try{e.document.$.execCommand("2D-position",!1,!0)}catch(e){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==e.document.$.compatMode)&&this.attachListener(this,"keydown",(function(a){var b=a.data.getKeystroke();if(33==b||34==b)if(CKEDITOR.env.ie)setTimeout((function(){e.getSelection().scrollIntoView()}),0);else if(e.window.$.innerHeight>this.$.offsetHeight){var t=e.createRange();t[33==b?"moveToElementEditStart":"moveToElementEditEnd"](this),t.select(),a.data.preventDefault()}})),CKEDITOR.env.ie&&this.attachListener(g,"blur",(function(){try{g.$.selection.empty()}catch(e){}})),CKEDITOR.env.iOS&&this.attachListener(g,"touchend",(function(){a.focus()})),(t=e.document.getElementsByTag("title").getItem(0)).data("cke-title",t.getText()),CKEDITOR.env.ie&&(e.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout((function(){"unloaded"==this.status&&(this.status="ready"),e.fire("contentDom"),this._.isPendingFocus&&(e.focus(),this._.isPendingFocus=!1),setTimeout((function(){e.fire("dataReady")}),0)}),0,this)}var e;CKEDITOR.plugins.add("wysiwygarea",{init:function(a){a.config.fullPage&&a.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),a.addMode("wysiwyg",(function(b){function t(t){t&&t.removeListener(),a.editable(new e(a,n.$.contentWindow.document.body)),a.setData(a.getData(1),b)}var g="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",n=(g=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(g)+"}())":"",CKEDITOR.dom.element.createFromHtml('<iframe src="'+g+'" frameBorder="0"></iframe>'));n.setStyles({width:"100%",height:"100%"}),n.addClass("cke_wysiwyg_frame").addClass("cke_reset"),(g=a.ui.space("contents")).append(n);var o=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;o&&n.on("load",t);var r=a.title,l=a.fire("ariaEditorHelpLabel",{}).label;if(r&&(CKEDITOR.env.ie&&l&&(r+=", "+l),n.setAttribute("title",r)),l){r=CKEDITOR.tools.getNextId();var q=CKEDITOR.dom.element.createFromHtml('<span id="'+r+'" class="cke_voice_label">'+l+"</span>");g.append(q,1),n.setAttribute("aria-describedby",r)}a.on("beforeModeUnload",(function(a){a.removeListener(),q&&q.remove()})),n.setAttributes({tabIndex:a.tabIndex,allowTransparency:"true"}),!o&&t(),a.fire("ariaWidget",n)}))}}),CKEDITOR.editor.prototype.addContentsCss=function(a){var b=this.config,e=b.contentsCss;CKEDITOR.tools.isArray(e)||(b.contentsCss=e?[e]:[]),b.contentsCss.push(a)},e=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction((function(b){CKEDITOR.tools.setTimeout(a,0,this,b)}),this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(a,e){var t=this.editor;if(e)this.setHtml(a),this.fixInitialSelection(),t.fire("dataReady");else{this._.isLoadingData=!0,t._.dataStore={id:1};var g=t.config,n=g.fullPage,o=g.docType,r=CKEDITOR.tools.buildStyleHtml(function(){var a=[];if(8<=CKEDITOR.document.$.documentMode){a.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var e,b=[];for(e in CKEDITOR.dtd.$removeEmpty)b.push("html.CSS1Compat "+e+"[contenteditable=false]");a.push(b.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(a.push("html{height:100% !important}"),a.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return a.push("html{cursor:text;*cursor:auto}"),a.push("img,input,textarea{cursor:default}"),a.join("\n")}()).replace(/<style>/,'<style data-cke-temp="1">');n||(r+=CKEDITOR.tools.buildStyleHtml(t.config.contentsCss));var l=g.baseHref?'<base href="'+g.baseHref+'" data-cke-temp="1" />':"";n&&(a=a.replace(/<!DOCTYPE[^>]*>/i,(function(a){return t.docType=o=a,""})).replace(/<\?xml\s[^\?]*\?>/i,(function(a){return t.xmlDeclaration=a,""}))),a=t.dataProcessor.toHtml(a),n?(/<body[\s|>]/.test(a)||(a="<body>"+a),/<html[\s|>]/.test(a)||(a="<html>"+a+"</html>"),/<head[\s|>]/.test(a)?/<title[\s|>]/.test(a)||(a=a.replace(/<head[^>]*>/,"$&<title></title>")):a=a.replace(/<html[^>]*>/,"$&<head><title></title></head>"),l&&(a=a.replace(/<head[^>]*?>/,"$&"+l)),a=a.replace(/<\/head\s*>/,r+"$&"),a=o+a):a=g.docType+'<html dir="'+g.contentsLangDirection+'" lang="'+(g.contentsLanguage||t.langCode)+'"><head><title>'+this._.docTitle+"</title>"+l+r+"</head><body"+(g.bodyId?' id="'+g.bodyId+'"':"")+(g.bodyClass?' class="'+g.bodyClass+'"':"")+">"+a+"</body></html>",CKEDITOR.env.gecko&&(a=a.replace(/<body/,'<body contenteditable="true" '),2e4>CKEDITOR.env.version&&(a=a.replace(/<body[^>]*>/,"$&\x3c!-- cke-content-start --\x3e"))),g='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"<\/script>",CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(g+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)<\/script>'),l&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(g+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;<\/script>'),a=a.replace(/(?=\s*<\/(:?head)>)/,g),this.clearCustomData(),this.clearListeners(),t.fire("contentDomUnload");var q=this.getDocument();try{q.write(a)}catch(e){setTimeout((function(){q.write(a)}),0)}}},getData:function(a){if(a)return this.getHtml();var b=(a=this.editor).config,e=(o=b.fullPage)&&a.docType,t=o&&a.xmlDeclaration,n=this.getDocument(),o=o?n.getDocumentElement().getOuterHtml():n.getBody().getHtml();return CKEDITOR.env.gecko&&b.enterMode!=CKEDITOR.ENTER_BR&&(o=o.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),o=a.dataProcessor.toDataFormat(o),t&&(o=t+"\n"+o),e&&(o=e+"\n"+o),o},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:e.baseProto.focus.call(this)},detach:function(){var t,a=this.editor,b=a.document;try{t=a.window.getFrame()}catch(e){}e.baseProto.detach.call(this),this.clearCustomData(),b.getDocumentElement().clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),t&&t.getParent()?(t.clearCustomData(),(a=t.removeCustomData("onResize"))&&a.removeListener(),t.remove()):CKEDITOR.warn("editor-destroy-iframe")}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.config.plugins="dialogui,dialog,a11yhelp,about,basicstyles,blockquote,notification,button,toolbar,clipboard,panel,floatpanel,menu,contextmenu,elementspath,indent,indentlist,list,enterkey,entities,popup,filetools,filebrowser,floatingspace,listblock,richcombo,format,horizontalrule,htmlwriter,image,fakeobjects,link,magicline,maximize,pastefromword,pastetext,removeformat,resize,menubutton,scayt,showborders,sourcearea,specialchar,stylescombo,tab,table,tabletools,tableselection,undo,lineutils,widgetselection,widget,notificationaggregator,uploadwidget,uploadimage,wsc,wysiwygarea",CKEDITOR.config.skin="moono-lisa",function(){var a=function(a,b){var e=CKEDITOR.getUrl("plugins/"+b);a=a.split(",");for(var t=0;t<a.length;t++)CKEDITOR.skin.icons[a[t]]={path:e,offset:-a[++t],bgsize:a[++t]}};CKEDITOR.env.hidpi?a("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,codesnippet,384,,bgcolor,408,,textcolor,432,,copyformatting,456,,creatediv,480,,docprops-rtl,504,,docprops,528,,easyimagealigncenter,552,,easyimagealignleft,576,,easyimagealignright,600,,easyimagealt,624,,easyimagefull,648,,easyimageside,672,,easyimageupload,696,,embed,720,,embedsemantic,744,,emojipanel,768,,find-rtl,792,,find,816,,replace,840,,flash,864,,button,888,,checkbox,912,,form,936,,hiddenfield,960,,imagebutton,984,,radio,1008,,select-rtl,1032,,select,1056,,textarea-rtl,1080,,textarea,1104,,textfield-rtl,1128,,textfield,1152,,horizontalrule,1176,,iframe,1200,,image,1224,,indent-rtl,1248,,indent,1272,,outdent-rtl,1296,,outdent,1320,,justifyblock,1344,,justifycenter,1368,,justifyleft,1392,,justifyright,1416,,language,1440,,anchor-rtl,1464,,anchor,1488,,link,1512,,unlink,1536,,bulletedlist-rtl,1560,,bulletedlist,1584,,numberedlist-rtl,1608,,numberedlist,1632,,mathjax,1656,,maximize,1680,,newpage-rtl,1704,,newpage,1728,,pagebreak-rtl,1752,,pagebreak,1776,,pastefromword-rtl,1800,,pastefromword,1824,,pastetext-rtl,1848,,pastetext,1872,,placeholder,1896,,preview-rtl,1920,,preview,1944,,print,1968,,removeformat,1992,,save,2016,,scayt,2040,,selectall,2064,,showblocks-rtl,2088,,showblocks,2112,,smiley,2136,,source-rtl,2160,,source,2184,,sourcedialog-rtl,2208,,sourcedialog,2232,,specialchar,2256,,table,2280,,templates-rtl,2304,,templates,2328,,uicolor,2352,,redo-rtl,2376,,redo,2400,,undo-rtl,2424,,undo,2448,,simplebox,4944,auto,spellchecker,2496,","icons_hidpi.png"):a("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,codesnippet,384,auto,bgcolor,408,auto,textcolor,432,auto,copyformatting,456,auto,creatediv,480,auto,docprops-rtl,504,auto,docprops,528,auto,easyimagealigncenter,552,auto,easyimagealignleft,576,auto,easyimagealignright,600,auto,easyimagealt,624,auto,easyimagefull,648,auto,easyimageside,672,auto,easyimageupload,696,auto,embed,720,auto,embedsemantic,744,auto,emojipanel,768,auto,find-rtl,792,auto,find,816,auto,replace,840,auto,flash,864,auto,button,888,auto,checkbox,912,auto,form,936,auto,hiddenfield,960,auto,imagebutton,984,auto,radio,1008,auto,select-rtl,1032,auto,select,1056,auto,textarea-rtl,1080,auto,textarea,1104,auto,textfield-rtl,1128,auto,textfield,1152,auto,horizontalrule,1176,auto,iframe,1200,auto,image,1224,auto,indent-rtl,1248,auto,indent,1272,auto,outdent-rtl,1296,auto,outdent,1320,auto,justifyblock,1344,auto,justifycenter,1368,auto,justifyleft,1392,auto,justifyright,1416,auto,language,1440,auto,anchor-rtl,1464,auto,anchor,1488,auto,link,1512,auto,unlink,1536,auto,bulletedlist-rtl,1560,auto,bulletedlist,1584,auto,numberedlist-rtl,1608,auto,numberedlist,1632,auto,mathjax,1656,auto,maximize,1680,auto,newpage-rtl,1704,auto,newpage,1728,auto,pagebreak-rtl,1752,auto,pagebreak,1776,auto,pastefromword-rtl,1800,auto,pastefromword,1824,auto,pastetext-rtl,1848,auto,pastetext,1872,auto,placeholder,1896,auto,preview-rtl,1920,auto,preview,1944,auto,print,1968,auto,removeformat,1992,auto,save,2016,auto,scayt,2040,auto,selectall,2064,auto,showblocks-rtl,2088,auto,showblocks,2112,auto,smiley,2136,auto,source-rtl,2160,auto,source,2184,auto,sourcedialog-rtl,2208,auto,sourcedialog,2232,auto,specialchar,2256,auto,table,2280,auto,templates-rtl,2304,auto,templates,2328,auto,uicolor,2352,auto,redo-rtl,2376,auto,redo,2400,auto,undo-rtl,2424,auto,undo,2448,auto,simplebox,2472,auto,spellchecker,2496,auto","icons.png")}())}}]);